(function(){"use strict";var Ta,Oe,$m,Um,Dr,qm,Xm,Fm,zm,Au,Iu,Qu,Bm,ka={},Zm=[],Iw=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ya=Array.isArray;function Kn(e,t){for(var n in t)e[n]=t[n];return e}function Nu(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ut(e,t,n){var i,r,s,a={};for(s in t)s=="key"?i=t[s]:s=="ref"?r=t[s]:a[s]=t[s];if(arguments.length>2&&(a.children=arguments.length>3?Ta.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)a[s]===void 0&&(a[s]=e.defaultProps[s]);return Sa(e,a,i,r,null)}function Sa(e,t,n,i,r){var s={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++$m,__i:-1,__u:0};return r==null&&Oe.vnode!=null&&Oe.vnode(s),s}function jm(){return{current:null}}function Fe(e){return e.children}function wn(e,t){this.props=e,this.context=t}function gs(e,t){if(t==null)return e.__?gs(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?gs(e):null}function Vm(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Vm(e)}}function Du(e){(!e.__d&&(e.__d=!0)&&Dr.push(e)&&!Go.__r++||qm!=Oe.debounceRendering)&&((qm=Oe.debounceRendering)||Xm)(Go)}function Go(){for(var e,t,n,i,r,s,a,o=1;Dr.length;)Dr.length>o&&Dr.sort(Fm),e=Dr.shift(),o=Dr.length,e.__d&&(n=void 0,i=void 0,r=(i=(t=e).__v).__e,s=[],a=[],t.__P&&((n=Kn({},i)).__v=i.__v+1,Oe.vnode&&Oe.vnode(n),Mu(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[r]:null,s,r??gs(i),!!(32&i.__u),a),n.__v=i.__v,n.__.__k[n.__i]=n,Km(s,n,a),i.__e=i.__=null,n.__e!=r&&Vm(n)));Go.__r=0}function Wm(e,t,n,i,r,s,a,o,c,l,u){var d,h,p,O,m,b,v,k=i&&i.__k||Zm,y=t.length;for(c=Qw(n,t,k,c,y),d=0;d<y;d++)(p=n.__k[d])!=null&&(h=p.__i==-1?ka:k[p.__i]||ka,p.__i=d,b=Mu(e,p,h,r,s,a,o,c,l,u),O=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&$u(h.ref,null,p),u.push(p.ref,p.__c||O,p)),m==null&&O!=null&&(m=O),(v=!!(4&p.__u))||h.__k===p.__k?c=Gm(p,c,e,v):typeof p.type=="function"&&b!==void 0?c=b:O&&(c=O.nextSibling),p.__u&=-7);return n.__e=m,c}function Qw(e,t,n,i,r){var s,a,o,c,l,u=n.length,d=u,h=0;for(e.__k=new Array(r),s=0;s<r;s++)(a=t[s])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=e.__k[s]=Sa(null,a,null,null,null):ya(a)?a=e.__k[s]=Sa(Fe,{children:a},null,null,null):a.constructor==null&&a.__b>0?a=e.__k[s]=Sa(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):e.__k[s]=a,c=s+h,a.__=e,a.__b=e.__b+1,(l=a.__i=Nw(a,n,c,d))!=-1&&(d--,(o=n[l])&&(o.__u|=2)),o==null||o.__v==null?(l==-1&&(r>u?h--:r<u&&h++),typeof a.type!="function"&&(a.__u|=4)):l!=c&&(l==c-1?h--:l==c+1?h++:(l>c?h--:h++,a.__u|=4))):e.__k[s]=null;if(d)for(s=0;s<u;s++)(o=n[s])!=null&&(2&o.__u)==0&&(o.__e==i&&(i=gs(o)),eO(o,o));return i}function Gm(e,t,n,i){var r,s;if(typeof e.type=="function"){for(r=e.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=e,t=Gm(r[s],t,n,i));return t}e.__e!=t&&(i&&(t&&e.type&&!t.parentNode&&(t=gs(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function ki(e,t){return t=t||[],e==null||typeof e=="boolean"||(ya(e)?e.some(function(n){ki(n,t)}):t.push(e)),t}function Nw(e,t,n,i){var r,s,a,o=e.key,c=e.type,l=t[n],u=l!=null&&(2&l.__u)==0;if(l===null&&o==null||u&&o==l.key&&c==l.type)return n;if(i>(u?1:0)){for(r=n-1,s=n+1;r>=0||s<t.length;)if((l=t[a=r>=0?r--:s++])!=null&&(2&l.__u)==0&&o==l.key&&c==l.type)return a}return-1}function Ym(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Iw.test(t)?n:n+"px"}function Yo(e,t,n,i,r){var s,a;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||Ym(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||Ym(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(zm,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?i?n.u=i.u:(n.u=Au,e.addEventListener(t,s?Qu:Iu,s)):e.removeEventListener(t,s?Qu:Iu,s);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Hm(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=Au++;else if(t.t<n.u)return;return n(Oe.event?Oe.event(t):t)}}}function Mu(e,t,n,i,r,s,a,o,c,l){var u,d,h,p,O,m,b,v,k,y,T,S,_,x,N,L,w,D=t.type;if(t.constructor!=null)return null;128&n.__u&&(c=!!(32&n.__u),s=[o=t.__e=n.__e]),(u=Oe.__b)&&u(t);e:if(typeof D=="function")try{if(v=t.props,k="prototype"in D&&D.prototype.render,y=(u=D.contextType)&&i[u.__c],T=u?y?y.props.value:u.__:i,n.__c?b=(d=t.__c=n.__c).__=d.__E:(k?t.__c=d=new D(v,T):(t.__c=d=new wn(v,T),d.constructor=D,d.render=Mw),y&&y.sub(d),d.state||(d.state={}),d.__n=i,h=d.__d=!0,d.__h=[],d._sb=[]),k&&d.__s==null&&(d.__s=d.state),k&&D.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Kn({},d.__s)),Kn(d.__s,D.getDerivedStateFromProps(v,d.__s))),p=d.props,O=d.state,d.__v=t,h)k&&D.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),k&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(k&&D.getDerivedStateFromProps==null&&v!==p&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(v,T),t.__v==n.__v||!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(v,d.__s,T)===!1){for(t.__v!=n.__v&&(d.props=v,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(M){M&&(M.__=t)}),S=0;S<d._sb.length;S++)d.__h.push(d._sb[S]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(v,d.__s,T),k&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(p,O,m)})}if(d.context=T,d.props=v,d.__P=e,d.__e=!1,_=Oe.__r,x=0,k){for(d.state=d.__s,d.__d=!1,_&&_(t),u=d.render(d.props,d.state,d.context),N=0;N<d._sb.length;N++)d.__h.push(d._sb[N]);d._sb=[]}else do d.__d=!1,_&&_(t),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++x<25);d.state=d.__s,d.getChildContext!=null&&(i=Kn(Kn({},i),d.getChildContext())),k&&!h&&d.getSnapshotBeforeUpdate!=null&&(m=d.getSnapshotBeforeUpdate(p,O)),L=u,u!=null&&u.type===Fe&&u.key==null&&(L=Jm(u.props.children)),o=Wm(e,ya(L)?L:[L],t,n,i,r,s,a,o,c,l),d.base=t.__e,t.__u&=-161,d.__h.length&&a.push(d),b&&(d.__E=d.__=null)}catch(M){if(t.__v=null,c||s!=null)if(M.then){for(t.__u|=c?160:128;o&&o.nodeType==8&&o.nextSibling;)o=o.nextSibling;s[s.indexOf(o)]=null,t.__e=o}else{for(w=s.length;w--;)Nu(s[w]);Lu(t)}else t.__e=n.__e,t.__k=n.__k,M.then||Lu(t);Oe.__e(M,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):o=t.__e=Dw(n.__e,t,n,i,r,s,a,c,l);return(u=Oe.diffed)&&u(t),128&t.__u?void 0:o}function Lu(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Lu)}function Km(e,t,n){for(var i=0;i<n.length;i++)$u(n[i],n[++i],n[++i]);Oe.__c&&Oe.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){Oe.__e(s,r.__v)}})}function Jm(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:ya(e)?e.map(Jm):Kn({},e)}function Dw(e,t,n,i,r,s,a,o,c){var l,u,d,h,p,O,m,b=n.props||ka,v=t.props,k=t.type;if(k=="svg"?r="http://www.w3.org/2000/svg":k=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(l=0;l<s.length;l++)if((p=s[l])&&"setAttribute"in p==!!k&&(k?p.localName==k:p.nodeType==3)){e=p,s[l]=null;break}}if(e==null){if(k==null)return document.createTextNode(v);e=document.createElementNS(r,k,v.is&&v),o&&(Oe.__m&&Oe.__m(t,s),o=!1),s=null}if(k==null)b===v||o&&e.data==v||(e.data=v);else{if(s=s&&Ta.call(e.childNodes),!o&&s!=null)for(b={},l=0;l<e.attributes.length;l++)b[(p=e.attributes[l]).name]=p.value;for(l in b)if(p=b[l],l!="children"){if(l=="dangerouslySetInnerHTML")d=p;else if(!(l in v)){if(l=="value"&&"defaultValue"in v||l=="checked"&&"defaultChecked"in v)continue;Yo(e,l,null,p,r)}}for(l in v)p=v[l],l=="children"?h=p:l=="dangerouslySetInnerHTML"?u=p:l=="value"?O=p:l=="checked"?m=p:o&&typeof p!="function"||b[l]===p||Yo(e,l,p,b[l],r);if(u)o||d&&(u.__html==d.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(d&&(e.innerHTML=""),Wm(t.type=="template"?e.content:e,ya(h)?h:[h],t,n,i,k=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,a,s?s[0]:n.__k&&gs(n,0),o,c),s!=null)for(l=s.length;l--;)Nu(s[l]);o||(l="value",k=="progress"&&O==null?e.removeAttribute("value"):O!=null&&(O!==e[l]||k=="progress"&&!O||k=="option"&&O!=b[l])&&Yo(e,l,O,b[l],r),l="checked",m!=null&&m!=e[l]&&Yo(e,l,m,b[l],r))}return e}function $u(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(r){Oe.__e(r,n)}}function eO(e,t,n){var i,r;if(Oe.unmount&&Oe.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||$u(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){Oe.__e(s,t)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&eO(i[r],t,n||typeof e.type!="function");n||Nu(e.__e),e.__c=e.__=e.__e=void 0}function Mw(e,t,n){return this.constructor(e,n)}function Ki(e,t,n){var i,r,s,a;t==document&&(t=document.documentElement),Oe.__&&Oe.__(e,t),r=(i=typeof n=="function")?null:n&&n.__k||t.__k,s=[],a=[],Mu(t,e=(!i&&n||t).__k=ut(Fe,null,[e]),r||ka,ka,t.namespaceURI,!i&&n?[n]:r?null:t.firstChild?Ta.call(t.childNodes):null,s,!i&&n?n:r?r.__e:t.firstChild,i,a),Km(s,e,a)}function Uu(e,t){Ki(e,t,Uu)}function qu(e,t,n){var i,r,s,a,o=Kn({},e.props);for(s in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)s=="key"?i=t[s]:s=="ref"?r=t[s]:o[s]=t[s]===void 0&&a!=null?a[s]:t[s];return arguments.length>2&&(o.children=arguments.length>3?Ta.call(arguments,2):n),Sa(e.type,o,i||e.key,r||e.ref,null)}function ot(e){function t(n){var i,r;return this.getChildContext||(i=new Set,(r={})[t.__c]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(s){this.props.value!=s.value&&i.forEach(function(a){a.__e=!0,Du(a)})},this.sub=function(s){i.add(s);var a=s.componentWillUnmount;s.componentWillUnmount=function(){i&&i.delete(s),a&&a.call(s)}}),n.children}return t.__c="__cC"+Bm++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,i){return n.children(i)}).contextType=t,t}Ta=Zm.slice,Oe={__e:function(e,t,n,i){for(var r,s,a;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,i||{}),a=r.__d),a)return r.__E=r}catch(o){e=o}throw e}},$m=0,Um=function(e){return e!=null&&e.constructor==null},wn.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Kn({},this.state),typeof e=="function"&&(e=e(Kn({},n),this.props)),e&&Kn(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Du(this))},wn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Du(this))},wn.prototype.render=Fe,Dr=[],Xm=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Fm=function(e,t){return e.__v.__b-t.__v.__b},Go.__r=0,zm=/(PointerCapture)$|Capture$/i,Au=0,Iu=Hm(!1),Qu=Hm(!0),Bm=0;function Ho(){return Ho=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ho.apply(this,arguments)}function tO(e,t){if(e==null)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)t.indexOf(n=s[i])>=0||(r[n]=e[n]);return r}var Lw=["context","children"],$w=["useFragment"];function Uw(e,t,n,i){function r(){var s,a=Reflect.construct(HTMLElement,[],r);return a._vdomComponent=e,i&&i.shadow?(a._root=a.attachShadow({mode:i.mode||"open",serializable:(s=i.serializable)!=null&&s}),i.adoptedStyleSheets&&(a._root.adoptedStyleSheets=i.adoptedStyleSheets)):a._root=a,a}return(r.prototype=Object.create(HTMLElement.prototype)).constructor=r,r.prototype.connectedCallback=function(){Xw.call(this,i)},r.prototype.attributeChangedCallback=Fw,r.prototype.disconnectedCallback=zw,n=n||e.observedAttributes||Object.keys(e.propTypes||{}),r.observedAttributes=n,e.formAssociated&&(r.formAssociated=!0),n.forEach(function(s){Object.defineProperty(r.prototype,s,{get:function(){return this._vdom?this._vdom.props[s]:this._props[s]},set:function(a){this._vdom?this.attributeChangedCallback(s,null,a):(this._props||(this._props={}),this._props[s]=a);var o=typeof a;a!=null&&o!=="string"&&o!=="boolean"&&o!=="number"||this.setAttribute(s,a)}})}),customElements.define(t||e.tagName||e.displayName||e.name,r),r}function qw(e){this.getChildContext=function(){return e.context};var t=e.children,n=tO(e,Lw);return qu(t,n)}function Xw(e){var t=new CustomEvent("_preact",{detail:{},bubbles:!0,cancelable:!0});this.dispatchEvent(t),this._vdom=ut(qw,Ho({},this._props,{context:t.detail.context}),rO(this,this._vdomComponent,e)),(this.hasAttribute("hydrate")?Uu:Ki)(this._vdom,this._root)}function nO(e){return e.replace(/-(\w)/g,function(t,n){return n?n.toUpperCase():""})}function Fw(e,t,n){if(this._vdom){var i={};i[e]=n=n??void 0,i[nO(e)]=n,this._vdom=qu(this._vdom,i),Ki(this._vdom,this._root)}}function zw(){Ki(this._vdom=null,this._root)}function iO(e,t){var n=this,i=e.useFragment,r=tO(e,$w);return ut(i?Fe:"slot",Ho({},r,{ref:function(s){s?(n.ref=s,n._listener||(n._listener=function(a){a.stopPropagation(),a.detail.context=t},s.addEventListener("_preact",n._listener))):n.ref.removeEventListener("_preact",n._listener)}}))}function rO(e,t,n){if(e.nodeType===3)return e.data;if(e.nodeType!==1)return null;var i=[],r={},s=0,a=e.attributes,o=e.childNodes;for(s=a.length;s--;)a[s].name!=="slot"&&(r[a[s].name]=a[s].value,r[nO(a[s].name)]=a[s].value);for(s=o.length;s--;){var c=rO(o[s],null,n),l=o[s].slot;l?r[l]=ut(iO,{name:l},c):i[s]=c}var u=!(!n||!n.shadow),d=t?ut(iO,{useFragment:!u},i):i;return!u&&t&&(e.innerHTML=""),ut(t||e.nodeName.toLowerCase(),r,d)}var Bw=0;function g(e,t,n,i,r,s){t||(t={});var a,o,c=t;if("ref"in c)for(o in c={},t)o=="ref"?a=t[o]:c[o]=t[o];var l={type:e,props:c,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Bw,__i:-1,__u:0,__source:r,__self:s};if(typeof e=="function"&&(a=e.defaultProps))for(o in a)c[o]===void 0&&(c[o]=a[o]);return Oe.vnode&&Oe.vnode(l),l}var yi,tt,Xu,sO,vs=0,aO=[],ft=Oe,oO=ft.__b,cO=ft.__r,lO=ft.diffed,uO=ft.__c,dO=ft.unmount,hO=ft.__;function Mr(e,t){ft.__h&&ft.__h(tt,e,vs||t),vs=0;var n=tt.__H||(tt.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function pe(e){return vs=1,Ko(fO,e)}function Ko(e,t,n){var i=Mr(yi++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):fO(void 0,t),function(o){var c=i.__N?i.__N[0]:i.__[0],l=i.t(c,o);c!==l&&(i.__N=[l,i.__[1]],i.__c.setState({}))}],i.__c=tt,!tt.__f)){var r=function(o,c,l){if(!i.__c.__H)return!0;var u=i.__c.__H.__.filter(function(h){return!!h.__c});if(u.every(function(h){return!h.__N}))return!s||s.call(this,o,c,l);var d=i.__c.props!==o;return u.forEach(function(h){if(h.__N){var p=h.__[0];h.__=h.__N,h.__N=void 0,p!==h.__[0]&&(d=!0)}}),s&&s.call(this,o,c,l)||d};tt.__f=!0;var s=tt.shouldComponentUpdate,a=tt.componentWillUpdate;tt.componentWillUpdate=function(o,c,l){if(this.__e){var u=s;s=void 0,r(o,c,l),s=u}a&&a.call(this,o,c,l)},tt.shouldComponentUpdate=r}return i.__N||i.__}function ke(e,t){var n=Mr(yi++,3);!ft.__s&&Zu(n.__H,t)&&(n.__=e,n.u=t,tt.__H.__h.push(n))}function Si(e,t){var n=Mr(yi++,4);!ft.__s&&Zu(n.__H,t)&&(n.__=e,n.u=t,tt.__h.push(n))}function ue(e){return vs=5,$e(function(){return{current:e}},[])}function Fu(e,t,n){vs=6,Si(function(){if(typeof e=="function"){var i=e(t());return function(){e(null),i&&typeof i=="function"&&i()}}if(e)return e.current=t(),function(){return e.current=null}},n==null?n:n.concat(e))}function $e(e,t){var n=Mr(yi++,7);return Zu(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function oe(e,t){return vs=8,$e(function(){return e},t)}function fn(e){var t=tt.context[e.__c],n=Mr(yi++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(tt)),t.props.value):e.__}function zu(e,t){ft.useDebugValue&&ft.useDebugValue(t?t(e):e)}function Zw(e){var t=Mr(yi++,10),n=pe();return t.__=e,tt.componentDidCatch||(tt.componentDidCatch=function(i,r){t.__&&t.__(i,r),n[1](i)}),[n[0],function(){n[1](void 0)}]}function Jo(){var e=Mr(yi++,11);if(!e.__){for(var t=tt.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function jw(){for(var e;e=aO.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ec),e.__H.__h.forEach(Bu),e.__H.__h=[]}catch(t){e.__H.__h=[],ft.__e(t,e.__v)}}ft.__b=function(e){tt=null,oO&&oO(e)},ft.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),hO&&hO(e,t)},ft.__r=function(e){cO&&cO(e),yi=0;var t=(tt=e.__c).__H;t&&(Xu===tt?(t.__h=[],tt.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(ec),t.__h.forEach(Bu),t.__h=[],yi=0)),Xu=tt},ft.diffed=function(e){lO&&lO(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(aO.push(t)!==1&&sO===ft.requestAnimationFrame||((sO=ft.requestAnimationFrame)||Vw)(jw)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Xu=tt=null},ft.__c=function(e,t){t.some(function(n){try{n.__h.forEach(ec),n.__h=n.__h.filter(function(i){return!i.__||Bu(i)})}catch(i){t.some(function(r){r.__h&&(r.__h=[])}),t=[],ft.__e(i,n.__v)}}),uO&&uO(e,t)},ft.unmount=function(e){dO&&dO(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{ec(i)}catch(r){t=r}}),n.__H=void 0,t&&ft.__e(t,n.__v))};var pO=typeof requestAnimationFrame=="function";function Vw(e){var t,n=function(){clearTimeout(i),pO&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,35);pO&&(t=requestAnimationFrame(n))}function ec(e){var t=tt,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),tt=t}function Bu(e){var t=tt;e.__c=e.__(),tt=t}function Zu(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function fO(e,t){return typeof t=="function"?t(e):t}function mO(e,t){for(var n in t)e[n]=t[n];return e}function ju(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var i in t)if(i!=="__source"&&e[i]!==t[i])return!0;return!1}function Vu(e,t){var n=t(),i=pe({t:{__:n,u:t}}),r=i[0].t,s=i[1];return Si(function(){r.__=n,r.u=t,Wu(r)&&s({t:r})},[e,n,t]),ke(function(){return Wu(r)&&s({t:r}),e(function(){Wu(r)&&s({t:r})})},[e]),n}function Wu(e){var t,n,i=e.u,r=e.__;try{var s=i();return!((t=r)===(n=s)&&(t!==0||1/t==1/n)||t!=t&&n!=n)}catch{return!0}}function Gu(e){e()}function Yu(e){return e}function Hu(){return[!1,Gu]}var Ku=Si;function tc(e,t){this.props=e,this.context=t}function ze(e,t){function n(r){var s=this.props.ref,a=s==r.ref;return!a&&s&&(s.call?s(null):s.current=null),t?!t(this.props,r)||!a:ju(this.props,r)}function i(r){return this.shouldComponentUpdate=n,ut(e,r)}return i.displayName="Memo("+(e.displayName||e.name)+")",i.prototype.isReactComponent=!0,i.__f=!0,i.type=e,i}(tc.prototype=new wn).isPureReactComponent=!0,tc.prototype.shouldComponentUpdate=function(e,t){return ju(this.props,e)||ju(this.state,t)};var OO=Oe.__b;Oe.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),OO&&OO(e)};var Ww=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function we(e){function t(n){var i=mO({},n);return delete i.ref,e(i,n.ref||null)}return t.$$typeof=Ww,t.render=e,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var gO=function(e,t){return e==null?null:ki(ki(e).map(t))},mn={map:gO,forEach:gO,count:function(e){return e?ki(e).length:0},only:function(e){var t=ki(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:ki},Gw=Oe.__e;Oe.__e=function(e,t,n,i){if(e.then){for(var r,s=t;s=s.__;)if((r=s.__c)&&r.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t)}Gw(e,t,n,i)};var vO=Oe.unmount;function bO(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),e.__c.__H=null),(e=mO({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(i){return bO(i,t,n)})),e}function TO(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(i){return TO(i,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function _a(){this.__u=0,this.o=null,this.__b=null}function kO(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function yO(e){var t,n,i,r=null;function s(a){if(t||(t=e()).then(function(o){o&&(r=o.default||o),i=!0},function(o){n=o,i=!0}),n)throw n;if(!i)throw t;return r?ut(r,a):null}return s.displayName="Lazy",s.__f=!0,s}function bs(){this.i=null,this.l=null}Oe.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),vO&&vO(e)},(_a.prototype=new wn).__c=function(e,t){var n=t.__c,i=this;i.o==null&&(i.o=[]),i.o.push(n);var r=kO(i.__v),s=!1,a=function(){s||(s=!0,n.__R=null,r?r(o):o())};n.__R=a;var o=function(){if(!--i.__u){if(i.state.__a){var c=i.state.__a;i.__v.__k[0]=TO(c,c.__c.__P,c.__c.__O)}var l;for(i.setState({__a:i.__b=null});l=i.o.pop();)l.forceUpdate()}};i.__u++||32&t.__u||i.setState({__a:i.__b=i.__v.__k[0]}),e.then(a,a)},_a.prototype.componentWillUnmount=function(){this.o=[]},_a.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=bO(this.__b,n,i.__O=i.__P)}this.__b=null}var r=t.__a&&ut(Fe,null,e.fallback);return r&&(r.__u&=-33),[ut(Fe,null,t.__a?null:e.children),r]};var SO=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};function Yw(e){return this.getChildContext=function(){return e.context},e.children}function Hw(e){var t=this,n=e.h;if(t.componentWillUnmount=function(){Ki(null,t.v),t.v=null,t.h=null},t.h&&t.h!==n&&t.componentWillUnmount(),!t.v){for(var i=t.__v;i!==null&&!i.__m&&i.__!==null;)i=i.__;t.h=n,t.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:i.__m},contains:function(){return!0},insertBefore:function(r,s){this.childNodes.push(r),t.h.insertBefore(r,s)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),t.h.removeChild(r)}}}Ki(ut(Yw,{context:t.context},e.__v),t.v)}function nc(e,t){var n=ut(Hw,{__v:e,h:t});return n.containerInfo=t,n}(bs.prototype=new wn).__a=function(e){var t=this,n=kO(t.__v),i=t.l.get(e);return i[0]++,function(r){var s=function(){t.props.revealOrder?(i.push(r),SO(t,e,i)):r()};n?n(s):s()}},bs.prototype.render=function(e){this.i=null,this.l=new Map;var t=ki(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},bs.prototype.componentDidUpdate=bs.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){SO(e,n,t)})};var _O=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Kw=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Jw=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,eC=/[A-Z0-9]/g,tC=typeof document<"u",nC=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function EO(e,t,n){return t.__k==null&&(t.textContent=""),Ki(e,t),typeof n=="function"&&n(),e?e.__c:null}function wO(e,t,n){return Uu(e,t),typeof n=="function"&&n(),e?e.__c:null}wn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(wn.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var CO=Oe.event;function iC(){}function rC(){return this.cancelBubble}function sC(){return this.defaultPrevented}Oe.event=function(e){return CO&&(e=CO(e)),e.persist=iC,e.isPropagationStopped=rC,e.isDefaultPrevented=sC,e.nativeEvent=e};var Ju,aC={enumerable:!1,configurable:!0,get:function(){return this.class}},xO=Oe.vnode;Oe.vnode=function(e){typeof e.type=="string"&&(function(t){var n=t.props,i=t.type,r={},s=i.indexOf("-")===-1;for(var a in n){var o=n[a];if(!(a==="value"&&"defaultValue"in n&&o==null||tC&&a==="children"&&i==="noscript"||a==="class"||a==="className")){var c=a.toLowerCase();a==="defaultValue"&&"value"in n&&n.value==null?a="value":a==="download"&&o===!0?o="":c==="translate"&&o==="no"?o=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?a="ondblclick":c!=="onchange"||i!=="input"&&i!=="textarea"||nC(n.type)?c==="onfocus"?a="onfocusin":c==="onblur"?a="onfocusout":Jw.test(a)&&(a=c):c=a="oninput":s&&Kw.test(a)?a=a.replace(eC,"-$&").toLowerCase():o===null&&(o=void 0),c==="oninput"&&r[a=c]&&(a="oninputCapture"),r[a]=o}}i=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=ki(n.children).forEach(function(l){l.props.selected=r.value.indexOf(l.props.value)!=-1})),i=="select"&&r.defaultValue!=null&&(r.value=ki(n.children).forEach(function(l){l.props.selected=r.multiple?r.defaultValue.indexOf(l.props.value)!=-1:r.defaultValue==l.props.value})),n.class&&!n.className?(r.class=n.class,Object.defineProperty(r,"className",aC)):(n.className&&!n.class||n.class&&n.className)&&(r.class=r.className=n.className),t.props=r})(e),e.$$typeof=_O,xO&&xO(e)};var PO=Oe.__r;Oe.__r=function(e){PO&&PO(e),Ju=e.__c};var RO=Oe.diffed;Oe.diffed=function(e){RO&&RO(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value),Ju=null};var AO={ReactCurrentDispatcher:{current:{readContext:function(e){return Ju.__n[e.__c].props.value},useCallback:oe,useContext:fn,useDebugValue:zu,useDeferredValue:Yu,useEffect:ke,useId:Jo,useImperativeHandle:Fu,useInsertionEffect:Ku,useLayoutEffect:Si,useMemo:$e,useReducer:Ko,useRef:ue,useState:pe,useSyncExternalStore:Vu,useTransition:Hu}}},oC="18.3.1";function IO(e){return ut.bind(null,e)}function xt(e){return!!e&&e.$$typeof===_O}function QO(e){return xt(e)&&e.type===Fe}function NO(e){return!!e&&!!e.displayName&&(typeof e.displayName=="string"||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")}function Lr(e){return xt(e)?qu.apply(null,arguments):e}function DO(e){return!!e.__k&&(Ki(null,e),!0)}function MO(e){return e&&(e.base||e.nodeType===1&&e)||null}var LO=function(e,t){return e(t)},ic=function(e,t){return e(t)},$O=Fe,UO=xt,_i={useState:pe,useId:Jo,useReducer:Ko,useEffect:ke,useLayoutEffect:Si,useInsertionEffect:Ku,useTransition:Hu,useDeferredValue:Yu,useSyncExternalStore:Vu,startTransition:Gu,useRef:ue,useImperativeHandle:Fu,useMemo:$e,useCallback:oe,useContext:fn,useDebugValue:zu,version:"18.3.1",Children:mn,render:EO,hydrate:wO,unmountComponentAtNode:DO,createPortal:nc,createElement:ut,createContext:ot,createFactory:IO,cloneElement:Lr,createRef:jm,Fragment:Fe,isValidElement:xt,isElement:UO,isFragment:QO,isMemo:NO,findDOMNode:MO,Component:wn,PureComponent:tc,memo:ze,forwardRef:we,flushSync:ic,unstable_batchedUpdates:LO,StrictMode:$O,Suspense:_a,SuspenseList:bs,lazy:yO,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:AO};const ed=Object.freeze(Object.defineProperty({__proto__:null,Children:mn,Component:wn,Fragment:Fe,PureComponent:tc,StrictMode:$O,Suspense:_a,SuspenseList:bs,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:AO,cloneElement:Lr,createContext:ot,createElement:ut,createFactory:IO,createPortal:nc,createRef:jm,default:_i,findDOMNode:MO,flushSync:ic,forwardRef:we,hydrate:wO,isElement:UO,isFragment:QO,isMemo:NO,isValidElement:xt,lazy:yO,memo:ze,render:EO,startTransition:Gu,unmountComponentAtNode:DO,unstable_batchedUpdates:LO,useCallback:oe,useContext:fn,useDebugValue:zu,useDeferredValue:Yu,useEffect:ke,useErrorBoundary:Zw,useId:Jo,useImperativeHandle:Fu,useInsertionEffect:Ku,useLayoutEffect:Si,useMemo:$e,useReducer:Ko,useRef:ue,useState:pe,useSyncExternalStore:Vu,useTransition:Hu,version:oC},Symbol.toStringTag,{value:"Module"}));var cC=Symbol.for("preact-signals");function rc(){if(Ji>1)Ji--;else{for(var e,t=!1;Ea!==void 0;){var n=Ea;for(Ea=void 0,td++;n!==void 0;){var i=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&zO(n))try{n.c()}catch(r){t||(e=r,t=!0)}n=i}}if(td=0,Ji--,t)throw e}}function qO(e){if(Ji>0)return e();Ji++;try{return e()}finally{rc()}}var Ge=void 0;function XO(e){var t=Ge;Ge=void 0;try{return e()}finally{Ge=t}}var Ea=void 0,Ji=0,td=0,sc=0;function FO(e){if(Ge!==void 0){var t=e.n;if(t===void 0||t.t!==Ge)return t={i:0,S:e,p:Ge.s,n:void 0,t:Ge,e:void 0,x:void 0,r:t},Ge.s!==void 0&&(Ge.s.n=t),Ge.s=t,e.n=t,32&Ge.f&&e.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=Ge.s,t.n=void 0,Ge.s.n=t,Ge.s=t),t}}function $t(e,t){this.v=e,this.i=0,this.n=void 0,this.t=void 0,this.W=t==null?void 0:t.watched,this.Z=t==null?void 0:t.unwatched,this.name=t==null?void 0:t.name}$t.prototype.brand=cC,$t.prototype.h=function(){return!0},$t.prototype.S=function(e){var t=this,n=this.t;n!==e&&e.e===void 0&&(e.x=n,this.t=e,n!==void 0?n.e=e:XO(function(){var i;(i=t.W)==null||i.call(t)}))},$t.prototype.U=function(e){var t=this;if(this.t!==void 0){var n=e.e,i=e.x;n!==void 0&&(n.x=i,e.e=void 0),i!==void 0&&(i.e=n,e.x=void 0),e===this.t&&(this.t=i,i===void 0&&XO(function(){var r;(r=t.Z)==null||r.call(t)}))}},$t.prototype.subscribe=function(e){var t=this;return ks(function(){var n=t.value,i=Ge;Ge=void 0;try{e(n)}finally{Ge=i}},{name:"sub"})},$t.prototype.valueOf=function(){return this.value},$t.prototype.toString=function(){return this.value+""},$t.prototype.toJSON=function(){return this.value},$t.prototype.peek=function(){var e=Ge;Ge=void 0;try{return this.value}finally{Ge=e}},Object.defineProperty($t.prototype,"value",{get:function(){var e=FO(this);return e!==void 0&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){if(td>100)throw new Error("Cycle detected");this.v=e,this.i++,sc++,Ji++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{rc()}}}});function Nn(e,t){return new $t(e,t)}function zO(e){for(var t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function BO(e){for(var t=e.s;t!==void 0;t=t.n){var n=t.S.n;if(n!==void 0&&(t.r=n),t.S.n=t,t.i=-1,t.n===void 0){e.s=t;break}}}function ZO(e){for(var t=e.s,n=void 0;t!==void 0;){var i=t.p;t.i===-1?(t.S.U(t),i!==void 0&&(i.n=t.n),t.n!==void 0&&(t.n.p=i)):n=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=i}e.s=n}function $r(e,t){$t.call(this,void 0),this.x=e,this.s=void 0,this.g=sc-1,this.f=4,this.W=t==null?void 0:t.watched,this.Z=t==null?void 0:t.unwatched,this.name=t==null?void 0:t.name}$r.prototype=new $t,$r.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===sc))return!0;if(this.g=sc,this.f|=1,this.i>0&&!zO(this))return this.f&=-2,!0;var e=Ge;try{BO(this),Ge=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return Ge=e,ZO(this),this.f&=-2,!0},$r.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}$t.prototype.S.call(this,e)},$r.prototype.U=function(e){if(this.t!==void 0&&($t.prototype.U.call(this,e),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}},$r.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;e!==void 0;e=e.x)e.t.N()}},Object.defineProperty($r.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var e=FO(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}});function jt(e,t){return new $r(e,t)}function jO(e){var t=e.u;if(e.u=void 0,typeof t=="function"){Ji++;var n=Ge;Ge=void 0;try{t()}catch(i){throw e.f&=-2,e.f|=8,nd(e),i}finally{Ge=n,rc()}}}function nd(e){for(var t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,jO(e)}function lC(e){if(Ge!==this)throw new Error("Out-of-order effect");ZO(this),Ge=e,this.f&=-2,8&this.f&&nd(this),rc()}function Ts(e,t){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=t==null?void 0:t.name}Ts.prototype.c=function(){var e=this.S();try{if(8&this.f||this.x===void 0)return;var t=this.x();typeof t=="function"&&(this.u=t)}finally{e()}},Ts.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,jO(this),BO(this),Ji++;var e=Ge;return Ge=this,lC.bind(this,e)},Ts.prototype.N=function(){2&this.f||(this.f|=2,this.o=Ea,Ea=this)},Ts.prototype.d=function(){this.f|=8,1&this.f||nd(this)},Ts.prototype.dispose=function(){this.d()};function ks(e,t){var n=new Ts(e,t);try{n.c()}catch(r){throw n.d(),r}var i=n.d.bind(n);return i[Symbol.dispose]=i,i}var id,ac,rd,oc=typeof window<"u"&&!!window.__PREACT_SIGNALS_DEVTOOLS__,VO=[],WO=[];ks(function(){id=this.N})();function ys(e,t){Oe[e]=t.bind(null,Oe[e]||function(){})}function cc(e){rd&&rd(),rd=e&&e.S()}function GO(e){var t=this,n=e.data,i=He(n);i.value=n;var r=$e(function(){for(var o=t,c=t.__v;c=c.__;)if(c.__c){c.__c.__$f|=4;break}var l=jt(function(){var p=i.value.value;return p===0?0:p===!0?"":p||""}),u=jt(function(){return!Array.isArray(l.value)&&!Um(l.value)}),d=ks(function(){if(this.N=YO,u.value){var p=l.value;o.__v&&o.__v.__e&&o.__v.__e.nodeType===3&&(o.__v.__e.data=p)}}),h=t.__$u.d;return t.__$u.d=function(){d(),h.call(this)},[u,l]},[]),s=r[0],a=r[1];return s.value?a.peek():a.value}GO.displayName="ReactiveTextNode",Object.defineProperties($t.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:GO},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}}),ys("__b",function(e,t){if(oc&&typeof t.type=="function"&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),typeof t.type=="string"){var n,i=t.props;for(var r in i)if(r!=="children"){var s=i[r];s instanceof $t&&(n||(t.__np=n={}),n[r]=s,i[r]=s.peek())}}e(t)}),ys("__r",function(e,t){if(oc&&typeof t.type=="function"&&window.__PREACT_SIGNALS_DEVTOOLS__.enterComponent(t),t.type!==Fe){cc();var n,i=t.__c;i&&(i.__$f&=-2,(n=i.__$u)===void 0&&(i.__$u=n=(function(r){var s;return ks(function(){s=this}),s.c=function(){i.__$f|=1,i.setState({})},s})())),ac=i,cc(n)}e(t)}),ys("__e",function(e,t,n,i){oc&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),cc(),ac=void 0,e(t,n,i)}),ys("diffed",function(e,t){oc&&typeof t.type=="function"&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),cc(),ac=void 0;var n;if(typeof t.type=="string"&&(n=t.__e)){var i=t.__np,r=t.props;if(i){var s=n.U;if(s)for(var a in s){var o=s[a];o!==void 0&&!(a in i)&&(o.d(),s[a]=void 0)}else s={},n.U=s;for(var c in i){var l=s[c],u=i[c];l===void 0?(l=uC(n,c,u,r),s[c]=l):l.o(u,r)}}}e(t)});function uC(e,t,n,i){var r=t in e&&e.ownerSVGElement===void 0,s=Nn(n);return{o:function(a,o){s.value=a,i=o},d:ks(function(){this.N=YO;var a=s.value.value;i[t]!==a&&(i[t]=a,r?e[t]=a:a!=null&&(a!==!1||t[4]==="-")?e.setAttribute(t,a):e.removeAttribute(t))})}}ys("unmount",function(e,t){if(typeof t.type=="string"){var n=t.__e;if(n){var i=n.U;if(i){n.U=void 0;for(var r in i){var s=i[r];s&&s.d()}}}}else{var a=t.__c;if(a){var o=a.__$u;o&&(a.__$u=void 0,o.d())}}e(t)}),ys("__h",function(e,t,n,i){(i<3||i===9)&&(t.__$f|=2),e(t,n,i)}),wn.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u,i=n&&n.s!==void 0;for(var r in t)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var s=2&this.__$f;if(!(i||s||4&this.__$f)||1&this.__$f)return!0}else if(!(i||4&this.__$f)||3&this.__$f)return!0;for(var a in e)if(a!=="__source"&&e[a]!==this.props[a])return!0;for(var o in this.props)if(!(o in e))return!0;return!1};function He(e,t){return pe(function(){return Nn(e,t)})[0]}function ge(e,t){var n=ue(e);return n.current=e,ac.__$f|=4,$e(function(){return jt(function(){return n.current()},t)},[])}var dC=typeof requestAnimationFrame>"u"?setTimeout:function(e){var t=function(){clearTimeout(n),cancelAnimationFrame(i),e()},n=setTimeout(t,35),i=requestAnimationFrame(t)},hC=function(e){queueMicrotask(function(){queueMicrotask(e)})};function pC(){qO(function(){for(var e;e=VO.shift();)id.call(e)})}function fC(){VO.push(this)===1&&(Oe.requestAnimationFrame||dC)(pC)}function mC(){qO(function(){for(var e;e=WO.shift();)id.call(e)})}function YO(){WO.push(this)===1&&(Oe.requestAnimationFrame||hC)(mC)}function Dn(e,t){var n=ue(e);n.current=e,ke(function(){return ks(function(){return this.N=fC,n.current()},t)},[])}function OC(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}var gC=Object.defineProperty,vC=(e,t,n)=>t in e?gC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,HO=(e,t,n)=>vC(e,typeof t!="symbol"?t+"":t,n);let Kt=class{constructor(){HO(this,"_locking"),HO(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let t;const n=new Promise(r=>t=()=>{this._locks-=1,r()}),i=this._locking.then(()=>t);return this._locking=this._locking.then(()=>n),i}};function mt(e,t){if(!e)throw new Error(t)}const bC=34028234663852886e22,TC=-34028234663852886e22,kC=4294967295,yC=2147483647,SC=-2147483648;function lc(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>yC||e<SC)throw new Error("invalid int 32: "+e)}function sd(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>kC||e<0)throw new Error("invalid uint 32: "+e)}function KO(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>bC||e<TC))throw new Error("invalid float 32: "+e)}const JO=Symbol("@bufbuild/protobuf/enum-type");function _C(e){const t=e[JO];return mt(t,"missing enum type on enum object"),t}function eg(e,t,n,i){e[JO]=tg(t,n.map(r=>({no:r.no,name:r.name,localName:e[r.no]})))}function tg(e,t,n){const i=Object.create(null),r=Object.create(null),s=[];for(const a of t){const o=ng(a);s.push(o),i[a.name]=o,r[a.no]=o}return{typeName:e,values:s,findName(a){return i[a]},findNumber(a){return r[a]}}}function EC(e,t,n){const i={};for(const r of t){const s=ng(r);i[s.localName]=s.no,i[s.no]=s.localName}return eg(i,e,t),i}function ng(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class ad{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,n){const i=this.getType(),r=i.runtime.bin,s=r.makeReadOptions(n);return r.readMessage(this,s.readerFactory(t),t.byteLength,s),this}fromJson(t,n){const i=this.getType(),r=i.runtime.json,s=r.makeReadOptions(n);return r.readMessage(i,t,s,this),this}fromJsonString(t,n){let i;try{i=JSON.parse(t)}catch(r){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(r instanceof Error?r.message:String(r)))}return this.fromJson(i,n)}toBinary(t){const n=this.getType(),i=n.runtime.bin,r=i.makeWriteOptions(t),s=r.writerFactory();return i.writeMessage(this,s,r),s.finish()}toJson(t){const n=this.getType(),i=n.runtime.json,r=i.makeWriteOptions(t);return i.writeMessage(this,r)}toJsonString(t){var n;const i=this.toJson(t);return JSON.stringify(i,null,(n=t==null?void 0:t.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function wC(e,t,n,i){var r;const s=(r=i==null?void 0:i.localName)!==null&&r!==void 0?r:t.substring(t.lastIndexOf(".")+1),a={[s]:function(o){e.util.initFields(this),e.util.initPartial(o,this)}}[s];return Object.setPrototypeOf(a.prototype,new ad),Object.assign(a,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary(o,c){return new a().fromBinary(o,c)},fromJson(o,c){return new a().fromJson(o,c)},fromJsonString(o,c){return new a().fromJsonString(o,c)},equals(o,c){return e.util.equals(a,o,c)}}),a}function CC(){let e=0,t=0;for(let i=0;i<28;i+=7){let r=this.buf[this.pos++];if(e|=(r&127)<<i,(r&128)==0)return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(n&15)<<28,t=(n&112)>>4,(n&128)==0)return this.assertBounds(),[e,t];for(let i=3;i<=31;i+=7){let r=this.buf[this.pos++];if(t|=(r&127)<<i,(r&128)==0)return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function od(e,t,n){for(let s=0;s<28;s=s+7){const a=e>>>s,o=!(!(a>>>7)&&t==0),c=(o?a|128:a)&255;if(n.push(c),!o)return}const i=e>>>28&15|(t&7)<<4,r=t>>3!=0;if(n.push((r?i|128:i)&255),!!r){for(let s=3;s<31;s=s+7){const a=t>>>s,o=!!(a>>>7),c=(o?a|128:a)&255;if(n.push(c),!o)return}n.push(t>>>31&1)}}const uc=4294967296;function ig(e){const t=e[0]==="-";t&&(e=e.slice(1));const n=1e6;let i=0,r=0;function s(a,o){const c=Number(e.slice(a,o));r*=n,i=i*n+c,i>=uc&&(r=r+(i/uc|0),i=i%uc)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),t?sg(i,r):cd(i,r)}function xC(e,t){let n=cd(e,t);const i=n.hi&2147483648;i&&(n=sg(n.lo,n.hi));const r=rg(n.lo,n.hi);return i?"-"+r:r}function rg(e,t){if({lo:e,hi:t}=PC(e,t),t<=2097151)return String(uc*t+e);const n=e&16777215,i=(e>>>24|t<<8)&16777215,r=t>>16&65535;let s=n+i*6777216+r*6710656,a=i+r*8147497,o=r*2;const c=1e7;return s>=c&&(a+=Math.floor(s/c),s%=c),a>=c&&(o+=Math.floor(a/c),a%=c),o.toString()+ag(a)+ag(s)}function PC(e,t){return{lo:e>>>0,hi:t>>>0}}function cd(e,t){return{lo:e|0,hi:t|0}}function sg(e,t){return t=~t,e?e=~e+1:t+=1,cd(e,t)}const ag=e=>{const t=String(e);return"0000000".slice(t.length)+t};function og(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let n=0;n<9;n++)t.push(e&127|128),e=e>>7;t.push(1)}}function RC(){let e=this.buf[this.pos++],t=e&127;if((e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,(e&128)==0)return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let n=5;(e&128)!==0&&n<10;n++)e=this.buf[this.pos++];if((e&128)!=0)throw new Error("invalid varint");return this.assertBounds(),t>>>0}function AC(){const e=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||process.env.BUF_BIGINT_DISABLE!=="1")){const r=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),a=BigInt("0"),o=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>s||l<r)throw new Error("int64 invalid: ".concat(c));return l},uParse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>o||l<a)throw new Error("uint64 invalid: ".concat(c));return l},enc(c){return e.setBigInt64(0,this.parse(c),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(c){return e.setBigInt64(0,this.uParse(c),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec(c,l){return e.setInt32(0,c,!0),e.setInt32(4,l,!0),e.getBigInt64(0,!0)},uDec(c,l){return e.setInt32(0,c,!0),e.setInt32(4,l,!0),e.getBigUint64(0,!0)}}}const n=r=>mt(/^-?[0-9]+$/.test(r),"int64 invalid: ".concat(r)),i=r=>mt(/^[0-9]+$/.test(r),"uint64 invalid: ".concat(r));return{zero:"0",supported:!1,parse(r){return typeof r!="string"&&(r=r.toString()),n(r),r},uParse(r){return typeof r!="string"&&(r=r.toString()),i(r),r},enc(r){return typeof r!="string"&&(r=r.toString()),n(r),ig(r)},uEnc(r){return typeof r!="string"&&(r=r.toString()),i(r),ig(r)},dec(r,s){return xC(r,s)},uDec(r,s){return rg(r,s)}}}const dt=AC();var V;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(V||(V={}));var er;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING"})(er||(er={}));function tr(e,t,n){if(t===n)return!0;if(e==V.BYTES){if(!(t instanceof Uint8Array)||!(n instanceof Uint8Array)||t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0}switch(e){case V.UINT64:case V.FIXED64:case V.INT64:case V.SFIXED64:case V.SINT64:return t==n}return!1}function Ss(e,t){switch(e){case V.BOOL:return!1;case V.UINT64:case V.FIXED64:case V.INT64:case V.SFIXED64:case V.SINT64:return t==0?dt.zero:"0";case V.DOUBLE:case V.FLOAT:return 0;case V.BYTES:return new Uint8Array(0);case V.STRING:return"";default:return 0}}function cg(e,t){switch(e){case V.BOOL:return t===!1;case V.STRING:return t==="";case V.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}var vt;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(vt||(vt={}));class IC{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let r=0;r<this.chunks.length;r++)t+=this.chunks[r].length;let n=new Uint8Array(t),i=0;for(let r=0;r<this.chunks.length;r++)n.set(this.chunks[r],i),i+=this.chunks[r].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,n){return this.uint32((t<<3|n)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(sd(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return lc(t),og(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let n=this.textEncoder.encode(t);return this.uint32(n.byteLength),this.raw(n)}float(t){KO(t);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,t,!0),this.raw(n)}double(t){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,t,!0),this.raw(n)}fixed32(t){sd(t);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t,!0),this.raw(n)}sfixed32(t){lc(t);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,t,!0),this.raw(n)}sint32(t){return lc(t),t=(t<<1^t>>31)>>>0,og(t,this.buf),this}sfixed64(t){let n=new Uint8Array(8),i=new DataView(n.buffer),r=dt.enc(t);return i.setInt32(0,r.lo,!0),i.setInt32(4,r.hi,!0),this.raw(n)}fixed64(t){let n=new Uint8Array(8),i=new DataView(n.buffer),r=dt.uEnc(t);return i.setInt32(0,r.lo,!0),i.setInt32(4,r.hi,!0),this.raw(n)}int64(t){let n=dt.enc(t);return od(n.lo,n.hi,this.buf),this}sint64(t){let n=dt.enc(t),i=n.hi>>31,r=n.lo<<1^i,s=(n.hi<<1|n.lo>>>31)^i;return od(r,s,this.buf),this}uint64(t){let n=dt.uEnc(t);return od(n.lo,n.hi,this.buf),this}}class QC{constructor(t,n){this.varint64=CC,this.uint32=RC,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=n??new TextDecoder}tag(){let t=this.uint32(),n=t>>>3,i=t&7;if(n<=0||i<0||i>5)throw new Error("illegal tag: field no "+n+" wire type "+i);return[n,i]}skip(t,n){let i=this.pos;switch(t){case vt.Varint:for(;this.buf[this.pos++]&128;);break;case vt.Bit64:this.pos+=4;case vt.Bit32:this.pos+=4;break;case vt.LengthDelimited:let r=this.uint32();this.pos+=r;break;case vt.StartGroup:for(;;){const[s,a]=this.tag();if(a===vt.EndGroup){if(n!==void 0&&s!==n)throw new Error("invalid end group tag");break}this.skip(a,s)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return dt.dec(...this.varint64())}uint64(){return dt.uDec(...this.varint64())}sint64(){let[t,n]=this.varint64(),i=-(t&1);return t=(t>>>1|(n&1)<<31)^i,n=n>>>1^i,dt.dec(t,n)}bool(){let[t,n]=this.varint64();return t!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return dt.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return dt.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),n=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(n,n+t)}string(){return this.textDecoder.decode(this.bytes())}}function NC(e,t,n,i){let r;return{typeName:t,extendee:n,get field(){if(!r){const s=typeof i=="function"?i():i;s.name=t.split(".").pop(),s.jsonName="[".concat(t,"]"),r=e.util.newFieldList([s]).list()[0]}return r},runtime:e}}function lg(e){const t=e.field.localName,n=Object.create(null);return n[t]=DC(e),[n,()=>n[t]]}function DC(e){const t=e.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return Ss(t.T,t.L);case"message":const n=t.T,i=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}function MC(e,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.no)return[e[n]];return[]}return e.filter(n=>n.no===t.no)}let Ei="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),dc=[];for(let e=0;e<Ei.length;e++)dc[Ei[e].charCodeAt(0)]=e;dc[45]=Ei.indexOf("+"),dc[95]=Ei.indexOf("/");const ug={dec(e){let t=e.length*3/4;e[e.length-2]=="="?t-=2:e[e.length-1]=="="&&(t-=1);let n=new Uint8Array(t),i=0,r=0,s,a=0;for(let o=0;o<e.length;o++){if(s=dc[e.charCodeAt(o)],s===void 0)switch(e[o]){case"=":r=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:a=s,r=1;break;case 1:n[i++]=a<<2|(s&48)>>4,a=s,r=2;break;case 2:n[i++]=(a&15)<<4|(s&60)>>2,a=s,r=3;break;case 3:n[i++]=(a&3)<<6|s,r=0;break}}if(r==1)throw Error("invalid base64 string.");return n.subarray(0,i)},enc(e){let t="",n=0,i,r=0;for(let s=0;s<e.length;s++)switch(i=e[s],n){case 0:t+=Ei[i>>2],r=(i&3)<<4,n=1;break;case 1:t+=Ei[r|i>>4],r=(i&15)<<2,n=2;break;case 2:t+=Ei[r|i>>6],t+=Ei[i&63],n=0;break}return n&&(t+=Ei[r],t+="=",n==1&&(t+="=")),t}};function LC(e,t,n){hg(t,e);const i=t.runtime.bin.makeReadOptions(n),r=MC(e.getType().runtime.bin.listUnknownFields(e),t.field),[s,a]=lg(t);for(const o of r)t.runtime.bin.readField(s,i.readerFactory(o.data),t.field,o.wireType,i);return a()}function $C(e,t,n,i){hg(t,e);const r=t.runtime.bin.makeReadOptions(i),s=t.runtime.bin.makeWriteOptions(i);if(dg(e,t)){const l=e.getType().runtime.bin.listUnknownFields(e).filter(u=>u.no!=t.field.no);e.getType().runtime.bin.discardUnknownFields(e);for(const u of l)e.getType().runtime.bin.onUnknownField(e,u.no,u.wireType,u.data)}const a=s.writerFactory();let o=t.field;!o.opt&&!o.repeated&&(o.kind=="enum"||o.kind=="scalar")&&(o=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(o,n,a,s);const c=r.readerFactory(a.finish());for(;c.pos<c.len;){const[l,u]=c.tag(),d=c.skip(u,l);e.getType().runtime.bin.onUnknownField(e,l,u,d)}}function dg(e,t){const n=e.getType();return t.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(e).find(i=>i.no==t.field.no)}function hg(e,t){mt(e.extendee.typeName==t.getType().typeName,"extension ".concat(e.typeName," can only be applied to message ").concat(e.extendee.typeName))}function pg(e,t){const n=e.localName;if(e.repeated)return t[n].length>0;if(e.oneof)return t[e.oneof.localName].case===n;switch(e.kind){case"enum":case"scalar":return e.opt||e.req?t[n]!==void 0:e.kind=="enum"?t[n]!==e.T.values[0].no:!cg(e.T,t[n]);case"message":return t[n]!==void 0;case"map":return Object.keys(t[n]).length>0}}function fg(e,t){const n=e.localName,i=!e.opt&&!e.req;if(e.repeated)t[n]=[];else if(e.oneof)t[e.oneof.localName]={case:void 0};else switch(e.kind){case"map":t[n]={};break;case"enum":t[n]=i?e.T.values[0].no:void 0;break;case"scalar":t[n]=i?Ss(e.T,e.L):void 0;break;case"message":t[n]=void 0;break}}function wi(e,t){if(e===null||typeof e!="object"||!Object.getOwnPropertyNames(ad.prototype).every(i=>i in e&&typeof e[i]=="function"))return!1;const n=e.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:t===void 0?!0:n.typeName==t.typeName}function mg(e,t){return wi(t)||!e.fieldWrapper?t:e.fieldWrapper.wrapField(t)}V.DOUBLE,V.FLOAT,V.INT64,V.UINT64,V.INT32,V.UINT32,V.BOOL,V.STRING,V.BYTES;const Og={ignoreUnknownFields:!1},gg={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function UC(e){return e?Object.assign(Object.assign({},Og),e):Og}function qC(e){return e?Object.assign(Object.assign({},gg),e):gg}const hc=Symbol(),pc=Symbol();function XC(){return{makeReadOptions:UC,makeWriteOptions:qC,readMessage(e,t,n,i){if(t==null||Array.isArray(t)||typeof t!="object")throw new Error("cannot decode message ".concat(e.typeName," from JSON: ").concat(Jn(t)));i=i??new e;const r=new Map,s=n.typeRegistry;for(const[a,o]of Object.entries(t)){const c=e.fields.findJsonName(a);if(c){if(c.oneof){if(o===null&&c.kind=="scalar")continue;const l=r.get(c.oneof);if(l!==void 0)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: multiple keys for oneof "').concat(c.oneof.name,'" present: "').concat(l,'", "').concat(a,'"'));r.set(c.oneof,a)}vg(i,o,c,n,e)}else{let l=!1;if(s!=null&&s.findExtension&&a.startsWith("[")&&a.endsWith("]")){const u=s.findExtension(a.substring(1,a.length-1));if(u&&u.extendee.typeName==e.typeName){l=!0;const[d,h]=lg(u);vg(d,o,u.field,n,u),$C(i,u,h(),n)}}if(!l&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: key "').concat(a,'" is unknown'))}}return i},writeMessage(e,t){const n=e.getType(),i={};let r;try{for(r of n.fields.byNumber()){if(!pg(r,e)){if(r.req)throw"required field not set";if(!t.emitDefaultValues||!zC(r))continue}const a=r.oneof?e[r.oneof.localName].value:e[r.localName],o=bg(r,a,t);o!==void 0&&(i[t.useProtoFieldName?r.name:r.jsonName]=o)}const s=t.typeRegistry;if(s!=null&&s.findExtensionFor)for(const a of n.runtime.bin.listUnknownFields(e)){const o=s.findExtensionFor(n.typeName,a.no);if(o&&dg(e,o)){const c=LC(e,o,t),l=bg(o.field,c,t);l!==void 0&&(i[o.field.jsonName]=l)}}}catch(s){const a=r?"cannot encode field ".concat(n.typeName,".").concat(r.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),o=s instanceof Error?s.message:String(s);throw new Error(a+(o.length>0?": ".concat(o):""))}return i},readScalar(e,t,n){return wa(e,t,n??er.BIGINT,!0)},writeScalar(e,t,n){if(t!==void 0&&(n||cg(e,t)))return fc(e,t)},debug:Jn}}function Jn(e){if(e===null)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":'"'.concat(e.split('"').join('\\"'),'"');default:return String(e)}}function vg(e,t,n,i,r){let s=n.localName;if(n.repeated){if(mt(n.kind!="map"),t===null)return;if(!Array.isArray(t))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Jn(t)));const a=e[s];for(const o of t){if(o===null)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Jn(o)));switch(n.kind){case"message":a.push(n.T.fromJson(o,i));break;case"enum":const c=ld(n.T,o,i.ignoreUnknownFields,!0);c!==pc&&a.push(c);break;case"scalar":try{a.push(wa(n.T,o,n.L,!0))}catch(l){let u="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Jn(o));throw l instanceof Error&&l.message.length>0&&(u+=": ".concat(l.message)),new Error(u)}break}}}else if(n.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Jn(t)));const a=e[s];for(const[o,c]of Object.entries(t)){if(c===null)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: map value null"));let l;try{l=FC(n.K,o)}catch(u){let d="cannot decode map key for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Jn(t));throw u instanceof Error&&u.message.length>0&&(d+=": ".concat(u.message)),new Error(d)}switch(n.V.kind){case"message":a[l]=n.V.T.fromJson(c,i);break;case"enum":const u=ld(n.V.T,c,i.ignoreUnknownFields,!0);u!==pc&&(a[l]=u);break;case"scalar":try{a[l]=wa(n.V.T,c,er.BIGINT,!0)}catch(d){let h="cannot decode map value for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Jn(t));throw d instanceof Error&&d.message.length>0&&(h+=": ".concat(d.message)),new Error(h)}break}}}else switch(n.oneof&&(e=e[n.oneof.localName]={case:s},s="value"),n.kind){case"message":const a=n.T;if(t===null&&a.typeName!="google.protobuf.Value")return;let o=e[s];wi(o)?o.fromJson(t,i):(e[s]=o=a.fromJson(t,i),a.fieldWrapper&&!n.oneof&&(e[s]=a.fieldWrapper.unwrapField(o)));break;case"enum":const c=ld(n.T,t,i.ignoreUnknownFields,!1);switch(c){case hc:fg(n,e);break;case pc:break;default:e[s]=c;break}break;case"scalar":try{const l=wa(n.T,t,n.L,!1);switch(l){case hc:fg(n,e);break;default:e[s]=l;break}}catch(l){let u="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Jn(t));throw l instanceof Error&&l.message.length>0&&(u+=": ".concat(l.message)),new Error(u)}break}}function FC(e,t){if(e===V.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1;break}return wa(e,t,er.BIGINT,!0).toString()}function wa(e,t,n,i){if(t===null)return i?Ss(e,n):hc;switch(e){case V.DOUBLE:case V.FLOAT:if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const r=Number(t);if(Number.isNaN(r)||!Number.isFinite(r))break;return e==V.FLOAT&&KO(r),r;case V.INT32:case V.FIXED32:case V.SFIXED32:case V.SINT32:case V.UINT32:let s;if(typeof t=="number"?s=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(s=Number(t)),s===void 0)break;return e==V.UINT32||e==V.FIXED32?sd(s):lc(s),s;case V.INT64:case V.SFIXED64:case V.SINT64:if(typeof t!="number"&&typeof t!="string")break;const a=dt.parse(t);return n?a.toString():a;case V.FIXED64:case V.UINT64:if(typeof t!="number"&&typeof t!="string")break;const o=dt.uParse(t);return n?o.toString():o;case V.BOOL:if(typeof t!="boolean")break;return t;case V.STRING:if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case V.BYTES:if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return ug.dec(t)}throw new Error}function ld(e,t,n,i){if(t===null)return e.typeName=="google.protobuf.NullValue"?0:i?e.values[0].no:hc;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const r=e.findName(t);if(r!==void 0)return r.no;if(n)return pc;break}throw new Error("cannot decode enum ".concat(e.typeName," from JSON: ").concat(Jn(t)))}function zC(e){return e.repeated||e.kind=="map"?!0:!(e.oneof||e.kind=="message"||e.opt||e.req)}function bg(e,t,n){if(e.kind=="map"){mt(typeof t=="object"&&t!=null);const i={},r=Object.entries(t);switch(e.V.kind){case"scalar":for(const[a,o]of r)i[a.toString()]=fc(e.V.T,o);break;case"message":for(const[a,o]of r)i[a.toString()]=o.toJson(n);break;case"enum":const s=e.V.T;for(const[a,o]of r)i[a.toString()]=ud(s,o,n.enumAsInteger);break}return n.emitDefaultValues||r.length>0?i:void 0}if(e.repeated){mt(Array.isArray(t));const i=[];switch(e.kind){case"scalar":for(let r=0;r<t.length;r++)i.push(fc(e.T,t[r]));break;case"enum":for(let r=0;r<t.length;r++)i.push(ud(e.T,t[r],n.enumAsInteger));break;case"message":for(let r=0;r<t.length;r++)i.push(t[r].toJson(n));break}return n.emitDefaultValues||i.length>0?i:void 0}switch(e.kind){case"scalar":return fc(e.T,t);case"enum":return ud(e.T,t,n.enumAsInteger);case"message":return mg(e.T,t).toJson(n)}}function ud(e,t,n){var i;if(mt(typeof t=="number"),e.typeName=="google.protobuf.NullValue")return null;if(n)return t;const r=e.findNumber(t);return(i=r==null?void 0:r.name)!==null&&i!==void 0?i:t}function fc(e,t){switch(e){case V.INT32:case V.SFIXED32:case V.SINT32:case V.FIXED32:case V.UINT32:return mt(typeof t=="number"),t;case V.FLOAT:case V.DOUBLE:return mt(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case V.STRING:return mt(typeof t=="string"),t;case V.BOOL:return mt(typeof t=="boolean"),t;case V.UINT64:case V.FIXED64:case V.INT64:case V.SFIXED64:case V.SINT64:return mt(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),t.toString();case V.BYTES:return mt(t instanceof Uint8Array),ug.enc(t)}}const _s=Symbol("@bufbuild/protobuf/unknown-fields"),Tg={readUnknownFields:!0,readerFactory:e=>new QC(e)},kg={writeUnknownFields:!0,writerFactory:()=>new IC};function BC(e){return e?Object.assign(Object.assign({},Tg),e):Tg}function ZC(e){return e?Object.assign(Object.assign({},kg),e):kg}function jC(){return{makeReadOptions:BC,makeWriteOptions:ZC,listUnknownFields(e){var t;return(t=e[_s])!==null&&t!==void 0?t:[]},discardUnknownFields(e){delete e[_s]},writeUnknownFields(e,t){const i=e[_s];if(i)for(const r of i)t.tag(r.no,r.wireType).raw(r.data)},onUnknownField(e,t,n,i){const r=e;Array.isArray(r[_s])||(r[_s]=[]),r[_s].push({no:t,wireType:n,data:i})},readMessage(e,t,n,i,r){const s=e.getType(),a=r?t.len:t.pos+n;let o,c;for(;t.pos<a&&([o,c]=t.tag(),!(r===!0&&c==vt.EndGroup));){const l=s.fields.find(o);if(!l){const u=t.skip(c,o);i.readUnknownFields&&this.onUnknownField(e,o,c,u);continue}yg(e,t,l,c,i)}if(r&&(c!=vt.EndGroup||o!==n))throw new Error("invalid end group tag")},readField:yg,writeMessage(e,t,n){const i=e.getType();for(const r of i.fields.byNumber()){if(!pg(r,e)){if(r.req)throw new Error("cannot encode field ".concat(i.typeName,".").concat(r.name," to binary: required field not set"));continue}const s=r.oneof?e[r.oneof.localName].value:e[r.localName];Sg(r,s,t,n)}return n.writeUnknownFields&&this.writeUnknownFields(e,t),t},writeField(e,t,n,i){t!==void 0&&Sg(e,t,n,i)}}}function yg(e,t,n,i,r){let{repeated:s,localName:a}=n;switch(n.oneof&&(e=e[n.oneof.localName],e.case!=a&&delete e.value,e.case=a,a="value"),n.kind){case"scalar":case"enum":const o=n.kind=="enum"?V.INT32:n.T;let c=Oc;if(n.kind=="scalar"&&n.L>0&&(c=WC),s){let h=e[a];if(i==vt.LengthDelimited&&o!=V.STRING&&o!=V.BYTES){let O=t.uint32()+t.pos;for(;t.pos<O;)h.push(c(t,o))}else h.push(c(t,o))}else e[a]=c(t,o);break;case"message":const l=n.T;s?e[a].push(mc(t,new l,r,n)):wi(e[a])?mc(t,e[a],r,n):(e[a]=mc(t,new l,r,n),l.fieldWrapper&&!n.oneof&&!n.repeated&&(e[a]=l.fieldWrapper.unwrapField(e[a])));break;case"map":let[u,d]=VC(n,t,r);e[a][u]=d;break}}function mc(e,t,n,i){const r=t.getType().runtime.bin,s=i==null?void 0:i.delimited;return r.readMessage(t,e,s?i.no:e.uint32(),n,s),t}function VC(e,t,n){const i=t.uint32(),r=t.pos+i;let s,a;for(;t.pos<r;){const[o]=t.tag();switch(o){case 1:s=Oc(t,e.K);break;case 2:switch(e.V.kind){case"scalar":a=Oc(t,e.V.T);break;case"enum":a=t.int32();break;case"message":a=mc(t,new e.V.T,n,void 0);break}break}}if(s===void 0&&(s=Ss(e.K,er.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),a===void 0)switch(e.V.kind){case"scalar":a=Ss(e.V.T,er.BIGINT);break;case"enum":a=e.V.T.values[0].no;break;case"message":a=new e.V.T;break}return[s,a]}function WC(e,t){const n=Oc(e,t);return typeof n=="bigint"?n.toString():n}function Oc(e,t){switch(t){case V.STRING:return e.string();case V.BOOL:return e.bool();case V.DOUBLE:return e.double();case V.FLOAT:return e.float();case V.INT32:return e.int32();case V.INT64:return e.int64();case V.UINT64:return e.uint64();case V.FIXED64:return e.fixed64();case V.BYTES:return e.bytes();case V.FIXED32:return e.fixed32();case V.SFIXED32:return e.sfixed32();case V.SFIXED64:return e.sfixed64();case V.SINT64:return e.sint64();case V.UINT32:return e.uint32();case V.SINT32:return e.sint32()}}function Sg(e,t,n,i){mt(t!==void 0);const r=e.repeated;switch(e.kind){case"scalar":case"enum":let s=e.kind=="enum"?V.INT32:e.T;if(r)if(mt(Array.isArray(t)),e.packed)YC(n,s,e.no,t);else for(const a of t)Ca(n,s,e.no,a);else Ca(n,s,e.no,t);break;case"message":if(r){mt(Array.isArray(t));for(const a of t)_g(n,i,e,a)}else _g(n,i,e,t);break;case"map":mt(typeof t=="object"&&t!=null);for(const[a,o]of Object.entries(t))GC(n,i,e,a,o);break}}function GC(e,t,n,i,r){e.tag(n.no,vt.LengthDelimited),e.fork();let s=i;switch(n.K){case V.INT32:case V.FIXED32:case V.UINT32:case V.SFIXED32:case V.SINT32:s=Number.parseInt(i);break;case V.BOOL:mt(i=="true"||i=="false"),s=i=="true";break}switch(Ca(e,n.K,1,s),n.V.kind){case"scalar":Ca(e,n.V.T,2,r);break;case"enum":Ca(e,V.INT32,2,r);break;case"message":mt(r!==void 0),e.tag(2,vt.LengthDelimited).bytes(r.toBinary(t));break}e.join()}function _g(e,t,n,i){const r=mg(n.T,i);n.delimited?e.tag(n.no,vt.StartGroup).raw(r.toBinary(t)).tag(n.no,vt.EndGroup):e.tag(n.no,vt.LengthDelimited).bytes(r.toBinary(t))}function Ca(e,t,n,i){mt(i!==void 0);let[r,s]=Eg(t);e.tag(n,r)[s](i)}function YC(e,t,n,i){if(!i.length)return;e.tag(n,vt.LengthDelimited).fork();let[,r]=Eg(t);for(let s=0;s<i.length;s++)e[r](i[s]);e.join()}function Eg(e){let t=vt.Varint;switch(e){case V.BYTES:case V.STRING:t=vt.LengthDelimited;break;case V.DOUBLE:case V.FIXED64:case V.SFIXED64:t=vt.Bit64;break;case V.FIXED32:case V.SFIXED32:case V.FLOAT:t=vt.Bit32;break}const n=V[e].toLowerCase();return[t,n]}function HC(){return{setEnumType:eg,initPartial(e,t){if(e===void 0)return;const n=t.getType();for(const i of n.fields.byMember()){const r=i.localName,s=t,a=e;if(a[r]!=null)switch(i.kind){case"oneof":const o=a[r].case;if(o===void 0)continue;const c=i.findField(o);let l=a[r].value;c&&c.kind=="message"&&!wi(l,c.T)?l=new c.T(l):c&&c.kind==="scalar"&&c.T===V.BYTES&&(l=xa(l)),s[r]={case:o,value:l};break;case"scalar":case"enum":let u=a[r];i.T===V.BYTES&&(u=i.repeated?u.map(xa):xa(u)),s[r]=u;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===V.BYTES)for(const[p,O]of Object.entries(a[r]))s[r][p]=xa(O);else Object.assign(s[r],a[r]);break;case"message":const h=i.V.T;for(const p of Object.keys(a[r])){let O=a[r][p];h.fieldWrapper||(O=new h(O)),s[r][p]=O}break}break;case"message":const d=i.T;if(i.repeated)s[r]=a[r].map(h=>wi(h,d)?h:new d(h));else{const h=a[r];d.fieldWrapper?d.typeName==="google.protobuf.BytesValue"?s[r]=xa(h):s[r]=h:s[r]=wi(h,d)?h:new d(h)}break}}},equals(e,t,n){return t===n?!0:!t||!n?!1:e.fields.byMember().every(i=>{const r=t[i.localName],s=n[i.localName];if(i.repeated){if(r.length!==s.length)return!1;switch(i.kind){case"message":return r.every((a,o)=>i.T.equals(a,s[o]));case"scalar":return r.every((a,o)=>tr(i.T,a,s[o]));case"enum":return r.every((a,o)=>tr(V.INT32,a,s[o]))}throw new Error("repeated cannot contain ".concat(i.kind))}switch(i.kind){case"message":let a=r,o=s;return i.T.fieldWrapper&&(a!==void 0&&!wi(a)&&(a=i.T.fieldWrapper.wrapField(a)),o!==void 0&&!wi(o)&&(o=i.T.fieldWrapper.wrapField(o))),i.T.equals(a,o);case"enum":return tr(V.INT32,r,s);case"scalar":return tr(i.T,r,s);case"oneof":if(r.case!==s.case)return!1;const c=i.findField(r.case);if(c===void 0)return!0;switch(c.kind){case"message":return c.T.equals(r.value,s.value);case"enum":return tr(V.INT32,r.value,s.value);case"scalar":return tr(c.T,r.value,s.value)}throw new Error("oneof cannot contain ".concat(c.kind));case"map":const l=Object.keys(r).concat(Object.keys(s));switch(i.V.kind){case"message":const u=i.V.T;return l.every(h=>u.equals(r[h],s[h]));case"enum":return l.every(h=>tr(V.INT32,r[h],s[h]));case"scalar":const d=i.V.T;return l.every(h=>tr(d,r[h],s[h]))}break}})},clone(e){const t=e.getType(),n=new t,i=n;for(const r of t.fields.byMember()){const s=e[r.localName];let a;if(r.repeated)a=s.map(gc);else if(r.kind=="map"){a=i[r.localName];for(const[o,c]of Object.entries(s))a[o]=gc(c)}else r.kind=="oneof"?a=r.findField(s.case)?{case:s.case,value:gc(s.value)}:{case:void 0}:a=gc(s);i[r.localName]=a}for(const r of t.runtime.bin.listUnknownFields(e))t.runtime.bin.onUnknownField(i,r.no,r.wireType,r.data);return n}}}function gc(e){if(e===void 0)return e;if(wi(e))return e.clone();if(e instanceof Uint8Array){const t=new Uint8Array(e.byteLength);return t.set(e),t}return e}function xa(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function KC(e,t,n){return{syntax:e,json:XC(),bin:jC(),util:Object.assign(Object.assign({},HC()),{newFieldList:t,initFields:n}),makeMessageType(i,r,s){return wC(this,i,r,s)},makeEnum:EC,makeEnumType:tg,getEnumType:_C,makeExtension(i,r,s){return NC(this,i,r,s)}}}class JC{constructor(t,n){this._fields=t,this._normalizer=n}findJsonName(t){if(!this.jsonNames){const n={};for(const i of this.list())n[i.jsonName]=n[i.name]=i;this.jsonNames=n}return this.jsonNames[t]}find(t){if(!this.numbers){const n={};for(const i of this.list())n[i.no]=i;this.numbers=n}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,n)=>t.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let n;for(const i of this.list())i.oneof?i.oneof!==n&&(n=i.oneof,t.push(n)):t.push(i)}return this.members}}function wg(e,t){const n=Cg(e);return t?n:sx(rx(n))}function ex(e){return wg(e,!1)}const tx=Cg;function Cg(e){let t=!1;const n=[];for(let i=0;i<e.length;i++){let r=e.charAt(i);switch(r){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(r),t=!1;break;default:t&&(t=!1,r=r.toUpperCase()),n.push(r);break}}return n.join("")}const nx=new Set(["constructor","toString","toJSON","valueOf"]),ix=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),xg=e=>"".concat(e,"$"),rx=e=>ix.has(e)?xg(e):e,sx=e=>nx.has(e)?xg(e):e;class ax{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=ex(t)}addField(t){mt(t.oneof===this,"field ".concat(t.name," not one of ").concat(this.name)),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[t]}}function ox(e,t){var n,i,r,s,a,o;const c=[];let l;for(const u of typeof e=="function"?e():e){const d=u;if(d.localName=wg(u.name,u.oneof!==void 0),d.jsonName=(n=u.jsonName)!==null&&n!==void 0?n:tx(u.name),d.repeated=(i=u.repeated)!==null&&i!==void 0?i:!1,u.kind=="scalar"&&(d.L=(r=u.L)!==null&&r!==void 0?r:er.BIGINT),d.delimited=(s=u.delimited)!==null&&s!==void 0?s:!1,d.req=(a=u.req)!==null&&a!==void 0?a:!1,d.opt=(o=u.opt)!==null&&o!==void 0?o:!1,u.packed===void 0&&(d.packed=u.kind=="enum"||u.kind=="scalar"&&u.T!=V.BYTES&&u.T!=V.STRING),u.oneof!==void 0){const h=typeof u.oneof=="string"?u.oneof:u.oneof.name;(!l||l.name!=h)&&(l=new ax(h)),d.oneof=l,l.addField(d)}c.push(d)}return c}const U=KC("proto3",e=>new JC(e,t=>ox(t)),e=>{for(const t of e.getType().fields.byMember()){if(t.opt)continue;const n=t.localName,i=e;if(t.repeated){i[n]=[];continue}switch(t.kind){case"oneof":i[n]={case:void 0};break;case"enum":i[n]=0;break;case"map":i[n]={};break;case"scalar":i[n]=Ss(t.T,t.L);break}}});class on extends ad{constructor(t){super(),this.seconds=dt.zero,this.nanos=0,U.util.initPartial(t,this)}fromJson(t,n){if(typeof t!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(U.json.debug(t)));const i=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const r=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(r))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=dt.parse(r/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(t){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const r=(this.nanos+1e9).toString().substring(1);r.substring(3)==="000000"?i="."+r.substring(0,3)+"Z":r.substring(6)==="000"?i="."+r.substring(0,6)+"Z":i="."+r+"Z"}return new Date(n).toISOString().replace(".000Z",i)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return on.fromDate(new Date)}static fromDate(t){const n=t.getTime();return new on({seconds:dt.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(t,n){return new on().fromBinary(t,n)}static fromJson(t,n){return new on().fromJson(t,n)}static fromJsonString(t,n){return new on().fromJsonString(t,n)}static equals(t,n){return U.util.equals(on,t,n)}}on.runtime=U,on.typeName="google.protobuf.Timestamp",on.fields=U.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const cx=U.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:on},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:lx,repeated:!0},{no:5,name:"events",kind:"message",T:dx,repeated:!0}]),lx=U.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:ux,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),ux=U.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:on},{no:3,name:"value",kind:"scalar",T:2}]),dx=U.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:on},{no:7,name:"normalized_end_timestamp",kind:"message",T:on,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),Pg=U.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),Mn=U.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),St=U.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),dd=U.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),Pa=U.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),Ra=U.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),Ln=U.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),Ur=U.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),hx=U.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),Qt=U.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),vc=U.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:bc,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:zg}]),bc=U.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),px=U.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:U.getEnumType(St),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),qr=U.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:U.getEnumType(Es)},{no:4,name:"tracks",kind:"message",T:ws,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:px},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:U.getEnumType(Aa)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:U.getEnumType(Ln)},{no:18,name:"kind_details",kind:"enum",T:U.getEnumType(fx),repeated:!0}]),Es=U.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),Aa=U.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"},{no:7,name:"CONNECTOR"}]),fx=U.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),Pt=U.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),mx=U.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:nr,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:U.getEnumType(Rg)},{no:6,name:"sdp_cid",kind:"scalar",T:9}]),ws=U.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:U.getEnumType(Mn)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:U.getEnumType(St)},{no:10,name:"layers",kind:"message",T:nr,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:mx,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:U.getEnumType(Pt)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:zg},{no:19,name:"audio_features",kind:"enum",T:U.getEnumType(Qt),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:U.getEnumType(Pg)}]),nr=U.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:U.getEnumType(dd)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),Rg=U.makeEnum("livekit.VideoLayer.Mode",[{no:0,name:"MODE_UNUSED"},{no:1,name:"ONE_SPATIAL_LAYER_PER_STREAM"},{no:2,name:"MULTIPLE_SPATIAL_LAYERS_PER_STREAM"},{no:3,name:"ONE_SPATIAL_LAYER_PER_STREAM_INCOMPLETE_RTCP_SR"}]),Jt=U.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:U.getEnumType(Pe)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:hd,oneof:"value"},{no:3,name:"speaker",kind:"message",T:Ox,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:Ng,oneof:"value"},{no:7,name:"transcription",kind:"message",T:gx,oneof:"value"},{no:8,name:"metrics",kind:"message",T:cx,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:Tc,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:pd,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:fd,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:md,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:kc,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:yc,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:Sc,oneof:"value"},{no:18,name:"encrypted_packet",kind:"message",T:Ag,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),Pe=U.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),Ag=U.makeMessageType("livekit.EncryptedPacket",()=>[{no:1,name:"encryption_type",kind:"enum",T:U.getEnumType(Pt)},{no:2,name:"iv",kind:"scalar",T:12},{no:3,name:"key_index",kind:"scalar",T:13},{no:4,name:"encrypted_value",kind:"scalar",T:12}]),Ig=U.makeMessageType("livekit.EncryptedPacketPayload",()=>[{no:1,name:"user",kind:"message",T:hd,oneof:"value"},{no:3,name:"chat_message",kind:"message",T:Tc,oneof:"value"},{no:4,name:"rpc_request",kind:"message",T:pd,oneof:"value"},{no:5,name:"rpc_ack",kind:"message",T:fd,oneof:"value"},{no:6,name:"rpc_response",kind:"message",T:md,oneof:"value"},{no:7,name:"stream_header",kind:"message",T:kc,oneof:"value"},{no:8,name:"stream_chunk",kind:"message",T:yc,oneof:"value"},{no:9,name:"stream_trailer",kind:"message",T:Sc,oneof:"value"}]),Ox=U.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:Qg,repeated:!0}]),Qg=U.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),hd=U.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),Ng=U.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),gx=U.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:vx,repeated:!0}]),vx=U.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),Tc=U.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),pd=U.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),fd=U.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),md=U.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:Dg,oneof:"value"}]),Dg=U.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),Mg=U.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),Lg=U.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:U.getEnumType($g)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),$g=U.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),Ug=U.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:U.getEnumType(qg)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),qg=U.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),Xg=U.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:Fg},{no:2,name:"screen",kind:"message",T:Fg},{no:3,name:"resume_connection",kind:"enum",T:U.getEnumType(Ra)},{no:4,name:"disabled_codecs",kind:"message",T:bx},{no:5,name:"force_relay",kind:"enum",T:U.getEnumType(Ra)}]),Fg=U.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:U.getEnumType(Ra)}]),bx=U.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:bc,repeated:!0},{no:2,name:"publish",kind:"message",T:bc,repeated:!0}]),zg=U.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),Od=U.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),Bg=U.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:U.getEnumType(Od)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),Zg=U.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),kc=U.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:U.getEnumType(Pt)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:Bg,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:Zg,oneof:"content_header"}],{localName:"DataStream_Header"}),yc=U.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),Sc=U.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),Tx=U.makeMessageType("livekit.SubscribedAudioCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"enabled",kind:"scalar",T:8}]),$n=U.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),gd=U.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),kx=U.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),yx=U.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:ir,oneof:"message"},{no:2,name:"answer",kind:"message",T:ir,oneof:"message"},{no:3,name:"trickle",kind:"message",T:_c,oneof:"message"},{no:4,name:"add_track",kind:"message",T:Ia,oneof:"message"},{no:5,name:"mute",kind:"message",T:Ec,oneof:"message"},{no:6,name:"subscription",kind:"message",T:wc,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:Vg,oneof:"message"},{no:8,name:"leave",kind:"message",T:Cc,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:Gg,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:Kg,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:Sd,oneof:"message"},{no:13,name:"simulate",kind:"message",T:ei,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:kd,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:tv,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:Td,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:Wg,oneof:"message"}]),jg=U.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:Sx,oneof:"message"},{no:2,name:"answer",kind:"message",T:ir,oneof:"message"},{no:3,name:"offer",kind:"message",T:ir,oneof:"message"},{no:4,name:"trickle",kind:"message",T:_c,oneof:"message"},{no:5,name:"update",kind:"message",T:wx,oneof:"message"},{no:6,name:"track_published",kind:"message",T:bd,oneof:"message"},{no:8,name:"leave",kind:"message",T:Cc,oneof:"message"},{no:9,name:"mute",kind:"message",T:Ec,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:Cx,oneof:"message"},{no:11,name:"room_update",kind:"message",T:xx,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:Rx,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:Ix,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:Nx,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:Mx,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:Ex,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:_x,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:$x,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:Xx,oneof:"message"},{no:22,name:"request_response",kind:"message",T:Fx,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:zx,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:Lx,oneof:"message"},{no:25,name:"media_sections_requirement",kind:"message",T:Vx,oneof:"message"},{no:26,name:"subscribed_audio_codec_update",kind:"message",T:Dx,oneof:"message"}]),vd=U.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:nr,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:U.getEnumType(Rg)}]),Ia=U.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:U.getEnumType(Mn)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:U.getEnumType(St)},{no:9,name:"layers",kind:"message",T:nr,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:vd,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:U.getEnumType(Pt)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:U.getEnumType(Pg)},{no:17,name:"audio_features",kind:"enum",T:U.getEnumType(Qt),repeated:!0}]),_c=U.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:U.getEnumType($n)},{no:3,name:"final",kind:"scalar",T:8}]),Ec=U.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),Sx=U.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:vc},{no:2,name:"participant",kind:"message",T:qr},{no:3,name:"other_participants",kind:"message",T:qr,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:Yg,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:Xg},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:Lg},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:bc,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),_x=U.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:Yg,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:Xg},{no:3,name:"server_info",kind:"message",T:Lg},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),bd=U.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:ws}]),Ex=U.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),ir=U.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13},{no:4,name:"mid_to_track_id",kind:"map",K:9,V:{kind:"scalar",T:9}}]),wx=U.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:qr,repeated:!0}]),wc=U.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:Mg,repeated:!0}]),Vg=U.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:U.getEnumType(dd)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),Td=U.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:U.getEnumType(Qt),repeated:!0}]),Wg=U.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),Cc=U.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:U.getEnumType(Ln)},{no:3,name:"action",kind:"enum",T:U.getEnumType(Cs)},{no:4,name:"regions",kind:"message",T:Ux}]),Cs=U.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),Gg=U.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:nr,repeated:!0}]),kd=U.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),Yg=U.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),Cx=U.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:Qg,repeated:!0}]),xx=U.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:vc}]),Px=U.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:U.getEnumType(Pa)},{no:3,name:"score",kind:"scalar",T:2}]),Rx=U.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:Px,repeated:!0}]),Ax=U.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:U.getEnumType(gd)}]),Ix=U.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:Ax,repeated:!0}]),yd=U.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:U.getEnumType(dd)},{no:2,name:"enabled",kind:"scalar",T:8}]),Qx=U.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:yd,repeated:!0}]),Nx=U.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:yd,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:Qx,repeated:!0}]),Dx=U.makeMessageType("livekit.SubscribedAudioCodecUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_audio_codecs",kind:"message",T:Tx,repeated:!0}]),Hg=U.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),Kg=U.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:Hg,repeated:!0}]),Mx=U.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),Lx=U.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:vc},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:qr},{no:4,name:"other_participants",kind:"message",T:qr,repeated:!0}]),Sd=U.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:ir},{no:2,name:"subscription",kind:"message",T:wc},{no:3,name:"publish_tracks",kind:"message",T:bd,repeated:!0},{no:4,name:"data_channels",kind:"message",T:ev,repeated:!0},{no:5,name:"offer",kind:"message",T:ir},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:Jg,repeated:!0}]),Jg=U.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),ev=U.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:U.getEnumType($n)}]),ei=U.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:U.getEnumType(kx),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),tv=U.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),$x=U.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),Ux=U.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:qx,repeated:!0}]),qx=U.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),Xx=U.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:U.getEnumType(hx)}]),Fx=U.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:U.getEnumType(_d)},{no:3,name:"message",kind:"scalar",T:9},{no:4,name:"trickle",kind:"message",T:_c,oneof:"request"},{no:5,name:"add_track",kind:"message",T:Ia,oneof:"request"},{no:6,name:"mute",kind:"message",T:Ec,oneof:"request"},{no:7,name:"update_metadata",kind:"message",T:kd,oneof:"request"},{no:8,name:"update_audio_track",kind:"message",T:Td,oneof:"request"},{no:9,name:"update_video_track",kind:"message",T:Wg,oneof:"request"}]),_d=U.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"},{no:4,name:"QUEUED"},{no:5,name:"UNSUPPORTED_TYPE"},{no:6,name:"UNCLASSIFIED_ERROR"}]),zx=U.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),nv=U.makeMessageType("livekit.ConnectionSettings",()=>[{no:1,name:"auto_subscribe",kind:"scalar",T:8},{no:2,name:"adaptive_stream",kind:"scalar",T:8},{no:3,name:"subscriber_allow_pause",kind:"scalar",T:8,opt:!0},{no:4,name:"disable_ice_lite",kind:"scalar",T:8}]),Bx=U.makeMessageType("livekit.JoinRequest",()=>[{no:1,name:"client_info",kind:"message",T:Ug},{no:2,name:"connection_settings",kind:"message",T:nv},{no:3,name:"metadata",kind:"scalar",T:9},{no:4,name:"participant_attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"add_track_requests",kind:"message",T:Ia,repeated:!0},{no:6,name:"publisher_offer",kind:"message",T:ir},{no:7,name:"reconnect",kind:"scalar",T:8},{no:8,name:"reconnect_reason",kind:"enum",T:U.getEnumType(Ur)},{no:9,name:"participant_sid",kind:"scalar",T:9},{no:10,name:"sync_state",kind:"message",T:Sd}]),Zx=U.makeMessageType("livekit.WrappedJoinRequest",()=>[{no:1,name:"compression",kind:"enum",T:U.getEnumType(jx)},{no:2,name:"join_request",kind:"scalar",T:12}]),jx=U.makeEnum("livekit.WrappedJoinRequest.Compression",[{no:0,name:"NONE"},{no:1,name:"GZIP"}]),Vx=U.makeMessageType("livekit.MediaSectionsRequirement",()=>[{no:1,name:"num_audios",kind:"scalar",T:13},{no:2,name:"num_videos",kind:"scalar",T:13}]);function Wx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xc={exports:{}},Gx=xc.exports,iv;function Yx(){return iv||(iv=1,(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(Gx,function(){var t=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],s={},a=null;function o(m,b){var v=m[b];if(typeof v.bind=="function")return v.bind(m);try{return Function.prototype.bind.call(v,m)}catch{return function(){return Function.prototype.apply.apply(v,[m,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&i?c:console[m]!==void 0?o(console,m):console.log!==void 0?o(console,"log"):t}function u(){for(var m=this.getLevel(),b=0;b<r.length;b++){var v=r[b];this[v]=b<m?t:this.methodFactory(v,m,this.name)}if(this.log=this.debug,typeof console===n&&m<this.levels.SILENT)return"No console available for logging"}function d(m){return function(){typeof console!==n&&(u.call(this),this[m].apply(this,arguments))}}function h(m,b,v){return l(m)||d.apply(this,arguments)}function p(m,b){var v=this,k,y,T,S="loglevel";typeof m=="string"?S+=":"+m:typeof m=="symbol"&&(S=void 0);function _(D){var M=(r[D]||"silent").toUpperCase();if(!(typeof window===n||!S)){try{window.localStorage[S]=M;return}catch{}try{window.document.cookie=encodeURIComponent(S)+"="+M+";"}catch{}}}function x(){var D;if(!(typeof window===n||!S)){try{D=window.localStorage[S]}catch{}if(typeof D===n)try{var M=window.document.cookie,B=encodeURIComponent(S),F=M.indexOf(B+"=");F!==-1&&(D=/^([^;]+)/.exec(M.slice(F+B.length+1))[1])}catch{}return v.levels[D]===void 0&&(D=void 0),D}}function N(){if(!(typeof window===n||!S)){try{window.localStorage.removeItem(S)}catch{}try{window.document.cookie=encodeURIComponent(S)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function L(D){var M=D;if(typeof M=="string"&&v.levels[M.toUpperCase()]!==void 0&&(M=v.levels[M.toUpperCase()]),typeof M=="number"&&M>=0&&M<=v.levels.SILENT)return M;throw new TypeError("log.setLevel() called with invalid level: "+D)}v.name=m,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=b||h,v.getLevel=function(){return T??y??k},v.setLevel=function(D,M){return T=L(D),M!==!1&&_(T),u.call(v)},v.setDefaultLevel=function(D){y=L(D),x()||v.setLevel(D,!1)},v.resetLevel=function(){T=null,N(),u.call(v)},v.enableAll=function(D){v.setLevel(v.levels.TRACE,D)},v.disableAll=function(D){v.setLevel(v.levels.SILENT,D)},v.rebuild=function(){if(a!==v&&(k=L(a.getLevel())),u.call(v),a===v)for(var D in s)s[D].rebuild()},k=L(a?a.getLevel():"WARN");var w=x();w!=null&&(T=L(w)),u.call(v)}a=new p,a.getLogger=function(b){if(typeof b!="symbol"&&typeof b!="string"||b==="")throw new TypeError("You must supply a name when creating a logger.");var v=s[b];return v||(v=s[b]=new p(b,a.methodFactory)),v};var O=typeof window!==n?window.log:void 0;return a.noConflict=function(){return typeof window!==n&&window.log===a&&(window.log=O),a},a.getLoggers=function(){return s},a.default=a,a})})(xc)),xc.exports}var Pc=Yx(),Ed;(function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"})(Ed||(Ed={}));var Un;(function(e){e.Default="livekit",e.Room="livekit-room",e.TokenSource="livekit-token-source",e.Participant="livekit-participant",e.Track="livekit-track",e.Publication="livekit-track-publication",e.Engine="livekit-engine",e.Signal="livekit-signal",e.PCManager="livekit-pc-manager",e.PCTransport="livekit-pc-transport",e.E2EE="lk-e2ee"})(Un||(Un={}));let ye=Pc.getLogger("livekit");Object.values(Un).map(e=>Pc.getLogger(e)),ye.setDefaultLevel(Ed.info);function Ci(e){const t=Pc.getLogger(e);return t.setDefaultLevel(ye.getLevel()),t}const Hx=Pc.getLogger("lk-e2ee"),Qa=7e3,Kx=[0,300,4*300,9*300,16*300,Qa,Qa,Qa,Qa,Qa];class Jx{constructor(t){this._retryDelays=t!==void 0?[...t]:Kx}nextRetryDelayInMs(t){if(t.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[t.retryCount];return t.retryCount<=1?n:n+Math.random()*1e3}}function eP(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function P(e,t,n,i){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(u){try{l(i.next(u))}catch(d){a(d)}}function c(u){try{l(i.throw(u))}catch(d){a(d)}}function l(u){u.done?s(u.value):r(u.value).then(o,c)}l((i=i.apply(e,t||[])).next())})}function rv(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function xi(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof rv=="function"?rv(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=e[s]&&function(a){return new Promise(function(o,c){a=e[s](a),r(o,c,a.done,a.value)})}}function r(s,a,o,c){Promise.resolve(c).then(function(l){s({value:l,done:o})},a)}}typeof SuppressedError=="function"&&SuppressedError;var Rc={exports:{}},sv;function tP(){if(sv)return Rc.exports;sv=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(S,_,x){return Function.prototype.apply.call(S,_,x)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:n=function(S){return Object.getOwnPropertyNames(S)};function i(T){console&&console.warn&&console.warn(T)}var r=Number.isNaN||function(S){return S!==S};function s(){s.init.call(this)}Rc.exports=s,Rc.exports.once=v,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(T){if(typeof T!="number"||T<0||r(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");a=T}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||r(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function c(T){return T._maxListeners===void 0?s.defaultMaxListeners:T._maxListeners}s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(S){for(var _=[],x=1;x<arguments.length;x++)_.push(arguments[x]);var N=S==="error",L=this._events;if(L!==void 0)N=N&&L.error===void 0;else if(!N)return!1;if(N){var w;if(_.length>0&&(w=_[0]),w instanceof Error)throw w;var D=new Error("Unhandled error."+(w?" ("+w.message+")":""));throw D.context=w,D}var M=L[S];if(M===void 0)return!1;if(typeof M=="function")t(M,this,_);else for(var B=M.length,F=O(M,B),x=0;x<B;++x)t(F[x],this,_);return!0};function l(T,S,_,x){var N,L,w;if(o(_),L=T._events,L===void 0?(L=T._events=Object.create(null),T._eventsCount=0):(L.newListener!==void 0&&(T.emit("newListener",S,_.listener?_.listener:_),L=T._events),w=L[S]),w===void 0)w=L[S]=_,++T._eventsCount;else if(typeof w=="function"?w=L[S]=x?[_,w]:[w,_]:x?w.unshift(_):w.push(_),N=c(T),N>0&&w.length>N&&!w.warned){w.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+w.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=T,D.type=S,D.count=w.length,i(D)}return T}s.prototype.addListener=function(S,_){return l(this,S,_,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(S,_){return l(this,S,_,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(T,S,_){var x={fired:!1,wrapFn:void 0,target:T,type:S,listener:_},N=u.bind(x);return N.listener=_,x.wrapFn=N,N}s.prototype.once=function(S,_){return o(_),this.on(S,d(this,S,_)),this},s.prototype.prependOnceListener=function(S,_){return o(_),this.prependListener(S,d(this,S,_)),this},s.prototype.removeListener=function(S,_){var x,N,L,w,D;if(o(_),N=this._events,N===void 0)return this;if(x=N[S],x===void 0)return this;if(x===_||x.listener===_)--this._eventsCount===0?this._events=Object.create(null):(delete N[S],N.removeListener&&this.emit("removeListener",S,x.listener||_));else if(typeof x!="function"){for(L=-1,w=x.length-1;w>=0;w--)if(x[w]===_||x[w].listener===_){D=x[w].listener,L=w;break}if(L<0)return this;L===0?x.shift():m(x,L),x.length===1&&(N[S]=x[0]),N.removeListener!==void 0&&this.emit("removeListener",S,D||_)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(S){var _,x,N;if(x=this._events,x===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete x[S]),this;if(arguments.length===0){var L=Object.keys(x),w;for(N=0;N<L.length;++N)w=L[N],w!=="removeListener"&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(_=x[S],typeof _=="function")this.removeListener(S,_);else if(_!==void 0)for(N=_.length-1;N>=0;N--)this.removeListener(S,_[N]);return this};function h(T,S,_){var x=T._events;if(x===void 0)return[];var N=x[S];return N===void 0?[]:typeof N=="function"?_?[N.listener||N]:[N]:_?b(N):O(N,N.length)}s.prototype.listeners=function(S){return h(this,S,!0)},s.prototype.rawListeners=function(S){return h(this,S,!1)},s.listenerCount=function(T,S){return typeof T.listenerCount=="function"?T.listenerCount(S):p.call(T,S)},s.prototype.listenerCount=p;function p(T){var S=this._events;if(S!==void 0){var _=S[T];if(typeof _=="function")return 1;if(_!==void 0)return _.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function O(T,S){for(var _=new Array(S),x=0;x<S;++x)_[x]=T[x];return _}function m(T,S){for(;S+1<T.length;S++)T[S]=T[S+1];T.pop()}function b(T){for(var S=new Array(T.length),_=0;_<S.length;++_)S[_]=T[_].listener||T[_];return S}function v(T,S){return new Promise(function(_,x){function N(w){T.removeListener(S,L),x(w)}function L(){typeof T.removeListener=="function"&&T.removeListener("error",N),_([].slice.call(arguments))}y(T,S,L,{once:!0}),S!=="error"&&k(T,N,{once:!0})})}function k(T,S,_){typeof T.on=="function"&&y(T,"error",S,_)}function y(T,S,_,x){if(typeof T.on=="function")x.once?T.once(S,_):T.on(S,_);else if(typeof T.addEventListener=="function")T.addEventListener(S,function N(L){x.once&&T.removeEventListener(S,N),_(L)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}return Rc.exports}var ti=tP();let av=!0,ov=!0;function Na(e,t,n){const i=e.match(t);return i&&i.length>=n&&parseFloat(i[n],10)}function Xr(e,t,n){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(a,o){if(a!==t)return r.apply(this,arguments);const c=l=>{const u=n(l);u&&(o.handleEvent?o.handleEvent(u):o(u))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(o,c),r.apply(this,[a,c])};const s=i.removeEventListener;i.removeEventListener=function(a,o){if(a!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(o))return s.apply(this,arguments);const c=this._eventMap[t].get(o);return this._eventMap[t].delete(o),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[a,c])},Object.defineProperty(i,"on"+t,{get(){return this["_on"+t]},set(a){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),a&&this.addEventListener(t,this["_on"+t]=a)},enumerable:!0,configurable:!0})}function nP(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(av=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function iP(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(ov=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function cv(){if(typeof window=="object"){if(av)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function wd(e,t){ov&&console.warn(e+" is deprecated, please use "+t+" instead.")}function rP(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const i=n.userAgentData.brands.find(r=>r.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(Na(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(Na(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(Na(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=Na(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function lv(e){return Object.prototype.toString.call(e)==="[object Object]"}function uv(e){return lv(e)?Object.keys(e).reduce(function(t,n){const i=lv(e[n]),r=i?uv(e[n]):e[n],s=i&&!Object.keys(r).length;return r===void 0||s?t:Object.assign(t,{[n]:r})},{}):e}function Cd(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(i=>{i.endsWith("Id")?Cd(e,e.get(t[i]),n):i.endsWith("Ids")&&t[i].forEach(r=>{Cd(e,e.get(r),n)})}))}function dv(e,t,n){const i=n?"outbound-rtp":"inbound-rtp",r=new Map;if(t===null)return r;const s=[];return e.forEach(a=>{a.type==="track"&&a.trackIdentifier===t.id&&s.push(a)}),s.forEach(a=>{e.forEach(o=>{o.type===i&&o.trackId===a.id&&Cd(e,o,r)})}),r}const hv=cv;function pv(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const i=function(o){if(typeof o!="object"||o.mandatory||o.optional)return o;const c={};return Object.keys(o).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const u=typeof o[l]=="object"?o[l]:{ideal:o[l]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(h,p){return h?h+p.charAt(0).toUpperCase()+p.slice(1):p==="deviceId"?"sourceId":p};if(u.ideal!==void 0){c.optional=c.optional||[];let h={};typeof u.ideal=="number"?(h[d("min",l)]=u.ideal,c.optional.push(h),h={},h[d("max",l)]=u.ideal,c.optional.push(h)):(h[d("",l)]=u.ideal,c.optional.push(h))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[d("",l)]=u.exact):["min","max"].forEach(h=>{u[h]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[d(h,l)]=u[h])})}),o.advanced&&(c.optional=(c.optional||[]).concat(o.advanced)),c},r=function(o,c){if(t.version>=61)return c(o);if(o=JSON.parse(JSON.stringify(o)),o&&typeof o.audio=="object"){const l=function(u,d,h){d in u&&!(h in u)&&(u[h]=u[d],delete u[d])};o=JSON.parse(JSON.stringify(o)),l(o.audio,"autoGainControl","googAutoGainControl"),l(o.audio,"noiseSuppression","googNoiseSuppression"),o.audio=i(o.audio)}if(o&&typeof o.video=="object"){let l=o.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const u=t.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete o.video.facingMode;let d;if(l.exact==="environment"||l.ideal==="environment"?d=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(h=>{h=h.filter(O=>O.kind==="videoinput");let p=h.find(O=>d.some(m=>O.label.toLowerCase().includes(m)));return!p&&h.length&&d.includes("back")&&(p=h[h.length-1]),p&&(o.video.deviceId=l.exact?{exact:p.deviceId}:{ideal:p.deviceId}),o.video=i(o.video),hv("chrome: "+JSON.stringify(o)),c(o)})}o.video=i(o.video)}return hv("chrome: "+JSON.stringify(o)),c(o)},s=function(o){return t.version>=64?o:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[o.name]||o.name,message:o.message,constraint:o.constraint||o.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},a=function(o,c,l){r(o,u=>{n.webkitGetUserMedia(u,c,d=>{l&&l(s(d))})})};if(n.getUserMedia=a.bind(n),n.mediaDevices.getUserMedia){const o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return r(c,l=>o(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(s(u))))}}}function fv(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function mv(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",r=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(o=>o.track&&o.track.id===r.track.id):s={track:r.track};const a=new Event("track");a.track=r.track,a.receiver=s,a.transceiver={receiver:s},a.streams=[i.stream],this.dispatchEvent(a)}),i.stream.getTracks().forEach(r=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(o=>o.track&&o.track.id===r.id):s={track:r};const a=new Event("track");a.track=r,a.receiver=s,a.transceiver={receiver:s},a.streams=[i.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Xr(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function Ov(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(r,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=r.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:r}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,c){let l=r.apply(this,arguments);return l||(l=t(this,o),this._senders.push(l)),l};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){s.apply(this,arguments);const c=this._senders.indexOf(o);c!==-1&&this._senders.splice(c,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(a=>{this._senders.push(t(this,a))})};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],i.apply(this,[s]),s.getTracks().forEach(a=>{const o=this._senders.find(c=>c.track===a);o&&this._senders.splice(this._senders.indexOf(o),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(r=>r._pc=this),i},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function gv(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(a=>a._pc=this),s});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=i.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(a=>dv(a,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=n.apply(this,[]);return r.forEach(s=>s._pc=this),r}),Xr(e,"track",i=>(i.receiver._pc=i.srcElement,i)),e.RTCRtpReceiver.prototype.getStats=function(){const r=this;return this._pc.getStats().then(s=>dv(s,r.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const i=arguments[0];let r,s,a;return this.getSenders().forEach(o=>{o.track===i&&(r?a=!0:r=o)}),this.getReceivers().forEach(o=>(o.track===i&&(s?a=!0:s=o),o.track===i)),a||r&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function vv(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(a=>this._shimmedLocalStreams[a][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,o){if(!o)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=t.apply(this,arguments);return this._shimmedLocalStreams[o.id]?this._shimmedLocalStreams[o.id].indexOf(c)===-1&&this._shimmedLocalStreams[o.id].push(c):this._shimmedLocalStreams[o.id]=[o,c],c};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{},a.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const o=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(l=>o.indexOf(l)===-1);this._shimmedLocalStreams[a.id]=[a].concat(c)};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[a.id],i.apply(this,arguments)};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},a&&Object.keys(this._shimmedLocalStreams).forEach(o=>{const c=this._shimmedLocalStreams[o].indexOf(a);c!==-1&&this._shimmedLocalStreams[o].splice(c,1),this._shimmedLocalStreams[o].length===1&&delete this._shimmedLocalStreams[o]}),r.apply(this,arguments)}}function bv(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return vv(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(p=>p.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new e.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}i.apply(this,[u])};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},e.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const h=[].slice.call(arguments,1);if(h.length!==1||!h[0].getTracks().find(m=>m===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const O=this._streams[d.id];if(O)O.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const m=new e.MediaStream([u]);this._streams[d.id]=m,this._reverseStreams[m.id]=d,this.addStream(m)}return this.getSenders().find(m=>m.track===u)};function s(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(h=>{const p=l._reverseStreams[h],O=l._streams[p.id];d=d.replace(new RegExp(O.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function a(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(h=>{const p=l._reverseStreams[h],O=l._streams[p.id];d=d.replace(new RegExp(p.id,"g"),O.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(l){const u=e.RTCPeerConnection.prototype[l],d={[l](){const h=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[O=>{const m=s(this,O);h[0].apply(null,[m])},O=>{h[1]&&h[1].apply(null,O)},arguments[2]]):u.apply(this,arguments).then(O=>s(this,O))}};e.RTCPeerConnection.prototype[l]=d[l]});const o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?o.apply(this,arguments):(arguments[0]=a(this,arguments[0]),o.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:s(this,l)}}),e.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let h;Object.keys(this._streams).forEach(p=>{this._streams[p].getTracks().find(m=>u.track===m)&&(h=this._streams[p])}),h&&(h.getTracks().length===1?this.removeStream(this._reverseStreams[h.id]):h.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function xd(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const i=e.RTCPeerConnection.prototype[n],r={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=r[n]})}function Tv(e,t){Xr(e,"negotiationneeded",n=>{const i=n.target;if(!((t.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return n})}var kv=Object.freeze({__proto__:null,fixNegotiationNeeded:Tv,shimAddTrackRemoveTrack:bv,shimAddTrackRemoveTrackWithNative:vv,shimGetSendersWithDtmf:Ov,shimGetUserMedia:pv,shimMediaStream:fv,shimOnTrack:mv,shimPeerConnection:xd,shimSenderReceiverGetStats:gv});function yv(e,t){const n=e&&e.navigator,i=e&&e.MediaStreamTrack;if(n.getUserMedia=function(r,s,a){wd("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(r).then(s,a)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const r=function(a,o,c){o in a&&!(c in a)&&(a[c]=a[o],delete a[o])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),r(a.audio,"autoGainControl","mozAutoGainControl"),r(a.audio,"noiseSuppression","mozNoiseSuppression")),s(a)},i&&i.prototype.getSettings){const a=i.prototype.getSettings;i.prototype.getSettings=function(){const o=a.apply(this,arguments);return r(o,"mozAutoGainControl","autoGainControl"),r(o,"mozNoiseSuppression","noiseSuppression"),o}}if(i&&i.prototype.applyConstraints){const a=i.prototype.applyConstraints;i.prototype.applyConstraints=function(o){return this.kind==="audio"&&typeof o=="object"&&(o=JSON.parse(JSON.stringify(o)),r(o,"autoGainControl","mozAutoGainControl"),r(o,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[o])}}}}function sP(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return i.video===!0?i.video={mediaSource:t}:i.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(i)})}function Sv(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Pd(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const s=e.RTCPeerConnection.prototype[r],a={[r](){return arguments[0]=new(r==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[r]=a[r]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,a,o]=arguments;return i.apply(this,[s||null]).then(c=>{if(t.version<53&&!a)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((u,d)=>{c.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return c}).then(a,o)}}function _v(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(s=>s._pc=this),r});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const r=n.apply(this,arguments);return r._pc=this,r}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Ev(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=t.apply(this,[]);return i.forEach(r=>r._pc=this),i}),Xr(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function wv(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){wd("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&n.getTracks().includes(i.track)&&this.removeTrack(i)})})}function Cv(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function xv(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const r=i.length>0;r&&i.forEach(a=>{if("rid"in a&&!/^[a-z0-9]{0,16}$/i.test(a.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in a&&!(parseFloat(a.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in a&&!(parseFloat(a.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(r){const{sender:a}=s,o=a.getParameters();(!("encodings"in o)||o.encodings.length===1&&Object.keys(o.encodings[0]).length===0)&&(o.encodings=i,a.sendEncodings=i,this.setParametersPromises.push(a.setParameters(o).then(()=>{delete a.sendEncodings}).catch(()=>{delete a.sendEncodings})))}return s})}function Pv(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const i=t.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function Rv(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Av(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var Iv=Object.freeze({__proto__:null,shimAddTransceiver:xv,shimCreateAnswer:Av,shimCreateOffer:Rv,shimGetDisplayMedia:sP,shimGetParameters:Pv,shimGetUserMedia:yv,shimOnTrack:Sv,shimPeerConnection:Pd,shimRTCDataChannel:Cv,shimReceiverGetStats:Ev,shimRemoveStream:wv,shimSenderGetStats:_v});function Qv(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(r=>t.call(this,r,i)),i.getVideoTracks().forEach(r=>t.call(this,r,i))},e.RTCPeerConnection.prototype.addTrack=function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s&&s.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(n);if(i===-1)return;this._localStreams.splice(i,1);const r=n.getTracks();this.getSenders().forEach(s=>{r.includes(s.track)&&this.removeTrack(s)})})}}function Nv(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(r=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(r))return;this._remoteStreams.push(r);const s=new Event("addstream");s.stream=r,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(r){r.streams.forEach(s=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(s)>=0)return;i._remoteStreams.push(s);const a=new Event("addstream");a.stream=s,i.dispatchEvent(a)})}),t.apply(i,arguments)}}}function Dv(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,r=t.setLocalDescription,s=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=n.apply(this,[d]);return u?(h.then(l,u),Promise.resolve()):h},t.createAnswer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=i.apply(this,[d]);return u?(h.then(l,u),Promise.resolve()):h};let o=function(c,l,u){const d=r.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d};t.setLocalDescription=o,o=function(c,l,u){const d=s.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},t.setRemoteDescription=o,o=function(c,l,u){const d=a.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},t.addIceCandidate=o}function Mv(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,i=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=r=>i(Lv(r))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(i,r,s){t.mediaDevices.getUserMedia(i).then(r,s)}).bind(t))}function Lv(e){return e&&e.video!==void 0?Object.assign({},e,{video:uv(e.video)}):e}function $v(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(i,r){if(i&&i.iceServers){const s=[];for(let a=0;a<i.iceServers.length;a++){let o=i.iceServers[a];o.urls===void 0&&o.url?(wd("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,s.push(o)):s.push(i.iceServers[a])}i.iceServers=s}return new t(i,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function Uv(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function qv(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const r=this.getTransceivers().find(a=>a.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):i.offerToReceiveAudio===!0&&!r&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const s=this.getTransceivers().find(a=>a.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):i.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Xv(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Fv=Object.freeze({__proto__:null,shimAudioContext:Xv,shimCallbacksAPI:Dv,shimConstraints:Lv,shimCreateOfferLegacy:qv,shimGetUserMedia:Mv,shimLocalStreamsAPI:Qv,shimRTCIceServerUrls:$v,shimRemoteStreamsAPI:Nv,shimTrackEventTransceiver:Uv}),Rd={exports:{}},zv;function aP(){return zv||(zv=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(i=>i.trim())},t.splitSections=function(n){return n.split(`
m=`).map((r,s)=>(s>0?"m="+r:r).trim()+`\r
`)},t.getDescription=function(n){const i=t.splitSections(n);return i&&i[0]},t.getMediaSections=function(n){const i=t.splitSections(n);return i.shift(),i},t.matchPrefix=function(n,i){return t.splitLines(n).filter(r=>r.indexOf(i)===0)},t.parseCandidate=function(n){let i;n.indexOf("a=candidate:")===0?i=n.substring(12).split(" "):i=n.substring(10).split(" ");const r={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let s=8;s<i.length;s+=2)switch(i[s]){case"raddr":r.relatedAddress=i[s+1];break;case"rport":r.relatedPort=parseInt(i[s+1],10);break;case"tcptype":r.tcpType=i[s+1];break;case"ufrag":r.ufrag=i[s+1],r.usernameFragment=i[s+1];break;default:r[i[s]]===void 0&&(r[i[s]]=i[s+1]);break}return r},t.writeCandidate=function(n){const i=[];i.push(n.foundation);const r=n.component;r==="rtp"?i.push(1):r==="rtcp"?i.push(2):i.push(r),i.push(n.protocol.toUpperCase()),i.push(n.priority),i.push(n.address||n.ip),i.push(n.port);const s=n.type;return i.push("typ"),i.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(i.push("raddr"),i.push(n.relatedAddress),i.push("rport"),i.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(i.push("ufrag"),i.push(n.usernameFragment||n.ufrag)),"candidate:"+i.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let i=n.substring(9).split(" ");const r={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),r.name=i[0],r.clockRate=parseInt(i[1],10),r.channels=i.length===3?parseInt(i[2],10):1,r.numChannels=r.channels,r},t.writeRtpMap=function(n){let i=n.payloadType;n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType);const r=n.channels||n.numChannels||1;return"a=rtpmap:"+i+" "+n.name+"/"+n.clockRate+(r!==1?"/"+r:"")+`\r
`},t.parseExtmap=function(n){const i=n.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const i={};let r;const s=n.substring(n.indexOf(" ")+1).split(";");for(let a=0;a<s.length;a++)r=s[a].trim().split("="),i[r[0].trim()]=r[1];return i},t.writeFmtp=function(n){let i="",r=n.payloadType;if(n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(a=>{n.parameters[a]!==void 0?s.push(a+"="+n.parameters[a]):s.push(a)}),i+="a=fmtp:"+r+" "+s.join(";")+`\r
`}return i},t.parseRtcpFb=function(n){const i=n.substring(n.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},t.writeRtcpFb=function(n){let i="",r=n.payloadType;return n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{i+="a=rtcp-fb:"+r+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),i},t.parseSsrcMedia=function(n){const i=n.indexOf(" "),r={ssrc:parseInt(n.substring(7,i),10)},s=n.indexOf(":",i);return s>-1?(r.attribute=n.substring(i+1,s),r.value=n.substring(s+1)):r.attribute=n.substring(i+1),r},t.parseSsrcGroup=function(n){const i=n.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(r=>parseInt(r,10))}},t.getMid=function(n){const i=t.matchPrefix(n,"a=mid:")[0];if(i)return i.substring(6)},t.parseFingerprint=function(n){const i=n.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},t.getDtlsParameters=function(n,i){return{role:"auto",fingerprints:t.matchPrefix(n+i,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,i){let r="a=setup:"+i+`\r
`;return n.fingerprints.forEach(s=>{r+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),r},t.parseCryptoLine=function(n){const i=n.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const i=n.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,i){return t.matchPrefix(n+i,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,i){const r=t.matchPrefix(n+i,"a=ice-ufrag:")[0],s=t.matchPrefix(n+i,"a=ice-pwd:")[0];return r&&s?{usernameFragment:r.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let i="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(i+=`a=ice-lite\r
`),i},t.parseRtpParameters=function(n){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");i.profile=s[2];for(let o=3;o<s.length;o++){const c=s[o],l=t.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(l){const u=t.parseRtpMap(l),d=t.matchPrefix(n,"a=fmtp:"+c+" ");switch(u.parameters=d.length?t.parseFmtp(d[0]):{},u.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(t.parseRtcpFb),i.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(u.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(o=>{i.headerExtensions.push(t.parseExtmap(o))});const a=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return i.codecs.forEach(o=>{a.forEach(c=>{o.rtcpFeedback.find(u=>u.type===c.type&&u.parameter===c.parameter)||o.rtcpFeedback.push(c)})}),i},t.writeRtpDescription=function(n,i){let r="";r+="m="+n+" ",r+=i.codecs.length>0?"9":"0",r+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=i.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,r+=`c=IN IP4 0.0.0.0\r
`,r+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(a=>{r+=t.writeRtpMap(a),r+=t.writeFmtp(a),r+=t.writeRtcpFb(a)});let s=0;return i.codecs.forEach(a=>{a.maxptime>s&&(s=a.maxptime)}),s>0&&(r+="a=maxptime:"+s+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(a=>{r+=t.writeExtmap(a)}),r},t.parseRtpEncodingParameters=function(n){const i=[],r=t.parseRtpParameters(n),s=r.fecMechanisms.indexOf("RED")!==-1,a=r.fecMechanisms.indexOf("ULPFEC")!==-1,o=t.matchPrefix(n,"a=ssrc:").map(h=>t.parseSsrcMedia(h)).filter(h=>h.attribute==="cname"),c=o.length>0&&o[0].ssrc;let l;const u=t.matchPrefix(n,"a=ssrc-group:FID").map(h=>h.substring(17).split(" ").map(O=>parseInt(O,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),r.codecs.forEach(h=>{if(h.name.toUpperCase()==="RTX"&&h.parameters.apt){let p={ssrc:c,codecPayloadType:parseInt(h.parameters.apt,10)};c&&l&&(p.rtx={ssrc:l}),i.push(p),s&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},i.push(p))}}),i.length===0&&c&&i.push({ssrc:c});let d=t.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-2e3*8:d=void 0,i.forEach(h=>{h.maxBitrate=d})),i},t.parseRtcpParameters=function(n){const i={},r=t.matchPrefix(n,"a=ssrc:").map(o=>t.parseSsrcMedia(o)).filter(o=>o.attribute==="cname")[0];r&&(i.cname=r.value,i.ssrc=r.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");i.reducedSize=s.length>0,i.compound=s.length===0;const a=t.matchPrefix(n,"a=rtcp-mux");return i.mux=a.length>0,i},t.writeRtcpParameters=function(n){let i="";return n.reducedSize&&(i+=`a=rtcp-rsize\r
`),n.mux&&(i+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(i+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),i},t.parseMsid=function(n){let i;const r=t.matchPrefix(n,"a=msid:");if(r.length===1)return i=r[0].substring(7).split(" "),{stream:i[0],track:i[1]};const s=t.matchPrefix(n,"a=ssrc:").map(a=>t.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");if(s.length>0)return i=s[0].value.split(" "),{stream:i[0],track:i[1]}},t.parseSctpDescription=function(n){const i=t.parseMLine(n),r=t.matchPrefix(n,"a=max-message-size:");let s;r.length>0&&(s=parseInt(r[0].substring(19),10)),isNaN(s)&&(s=65536);const a=t.matchPrefix(n,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:i.fmt,maxMessageSize:s};const o=t.matchPrefix(n,"a=sctpmap:");if(o.length>0){const c=o[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,i){let r=[];return n.protocol!=="DTLS/SCTP"?r=["m="+n.kind+" 9 "+n.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:r=["m="+n.kind+" 9 "+n.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&r.push("a=max-message-size:"+i.maxMessageSize+`\r
`),r.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,i,r){let s;const a=i!==void 0?i:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(r||"thisisadapterortc")+" "+s+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,i){const r=t.splitLines(n);for(let s=0;s<r.length;s++)switch(r[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[s].substring(2)}return i?t.getDirection(i):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const r=t.splitLines(n)[0].substring(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},t.parseOLine=function(n){const r=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const i=t.splitLines(n);for(let r=0;r<i.length;r++)if(i[r].length<2||i[r].charAt(1)!=="=")return!1;return!0},e.exports=t})(Rd)),Rd.exports}var Bv=aP(),xs=Wx(Bv),oP=OC({__proto__:null,default:xs},[Bv]);function Ac(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const r=new t(i),s=xs.parseCandidate(i.candidate);for(const a in s)a in r||Object.defineProperty(r,a,{value:s[a]});return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new t(i)},e.RTCIceCandidate.prototype=t.prototype,Xr(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Ad(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Xr(e,"icecandidate",t=>{if(t.candidate){const n=xs.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Ic(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(o){if(!o||!o.sdp)return!1;const c=xs.splitSections(o.sdp);return c.shift(),c.some(l=>{const u=xs.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},i=function(o){const c=o.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},r=function(o){let c=65536;return t.browser==="firefox"&&(t.version<57?o===-1?c=16384:c=2147483637:t.version<60?c=t.version===57?65535:65536:c=2147483637),c},s=function(o,c){let l=65536;t.browser==="firefox"&&t.version===57&&(l=65535);const u=xs.matchPrefix(o.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substring(19),10):t.browser==="firefox"&&c!==-1&&(l=2147483637),l},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=i(arguments[0]),l=r(c),u=s(arguments[0],c);let d;l===0&&u===0?d=Number.POSITIVE_INFINITY:l===0||u===0?d=Math.max(l,u):d=Math.min(l,u);const h={};Object.defineProperty(h,"maxMessageSize",{get(){return d}}),this._sctp=h}return a.apply(this,arguments)}}function Qc(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(i,r){const s=i.send;i.send=function(){const o=arguments[0],c=o.length||o.size||o.byteLength;if(i.readyState==="open"&&r.sctp&&c>r.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+r.sctp.maxMessageSize+" bytes)");return s.apply(i,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const r=n.apply(this,arguments);return t(r,this),r},Xr(e,"datachannel",i=>(t(i.channel,i.target),i))}function Id(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const i=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=r=>{const s=r.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const a=new Event("connectionstatechange",r);s.dispatchEvent(a)}return r},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function Qd(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(r){if(r&&r.sdp&&r.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=r.sdp.split(`
`).filter(a=>a.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&r instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:r.type,sdp:s}):r.sdp=s}return n.apply(this,arguments)}}function Nc(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Dc(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let r=arguments[0]||{};if(typeof r!="object"||r.type&&r.sdp)return n.apply(this,arguments);if(r={type:r.type,sdp:r.sdp},!r.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":r.type="offer";break;default:r.type="answer";break}return r.sdp||r.type!=="offer"&&r.type!=="answer"?n.apply(this,[r]):(r.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(a=>n.apply(this,[a]))})}var cP=Object.freeze({__proto__:null,removeExtmapAllowMixed:Qd,shimAddIceCandidateNullOrEmpty:Nc,shimConnectionState:Id,shimMaxMessageSize:Ic,shimParameterlessSetLocalDescription:Dc,shimRTCIceCandidate:Ac,shimRTCIceCandidateRelayProtocol:Ad,shimSendThrowTypeError:Qc});function lP(){let{window:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=cv,i=rP(e),r={browserDetails:i,commonShim:cP,extractVersion:Na,disableLog:nP,disableWarnings:iP,sdp:oP};switch(i.browser){case"chrome":if(!kv||!xd||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),r;if(i.version===null)return n("Chrome shim can not determine version, not shimming."),r;n("adapter.js shimming chrome."),r.browserShim=kv,Nc(e,i),Dc(e),pv(e,i),fv(e),xd(e,i),mv(e),bv(e,i),Ov(e),gv(e),Tv(e,i),Ac(e),Ad(e),Id(e),Ic(e,i),Qc(e),Qd(e,i);break;case"firefox":if(!Iv||!Pd||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),r;n("adapter.js shimming firefox."),r.browserShim=Iv,Nc(e,i),Dc(e),yv(e,i),Pd(e,i),Sv(e),wv(e),_v(e),Ev(e),Cv(e),xv(e),Pv(e),Rv(e),Av(e),Ac(e),Id(e),Ic(e,i),Qc(e);break;case"safari":if(!Fv||!t.shimSafari)return n("Safari shim is not included in this adapter release."),r;n("adapter.js shimming safari."),r.browserShim=Fv,Nc(e,i),Dc(e),$v(e),qv(e),Dv(e),Qv(e),Nv(e),Uv(e),Mv(e),Xv(e),Ac(e),Ad(e),Ic(e,i),Qc(e),Qd(e,i);break;default:n("Unsupported browser!");break}return r}lP({window:typeof window>"u"?void 0:window});const uP=10,Da="lk_e2ee",dP={sharedKey:!1,ratchetSalt:"LKFrameEncryptionKey",ratchetWindowSize:8,failureTolerance:uP,keyringSize:16};var rr;(function(e){e.SetKey="setKey",e.RatchetRequest="ratchetRequest",e.KeyRatcheted="keyRatcheted"})(rr||(rr={}));var Zv;(function(e){e.KeyRatcheted="keyRatcheted"})(Zv||(Zv={}));var sr;(function(e){e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError"})(sr||(sr={}));var jv;(function(e){e.Error="cryptorError"})(jv||(jv={}));function hP(){return pP()||Nd()}function Nd(){return typeof window.RTCRtpScriptTransform<"u"}function pP(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}function fP(e){var t,n,i,r,s;if(((t=e.value)===null||t===void 0?void 0:t.case)!=="sipDtmf"&&((n=e.value)===null||n===void 0?void 0:n.case)!=="metrics"&&((i=e.value)===null||i===void 0?void 0:i.case)!=="speaker"&&((r=e.value)===null||r===void 0?void 0:r.case)!=="transcription"&&((s=e.value)===null||s===void 0?void 0:s.case)!=="encryptedPacket")return new Ig({value:e.value})}class _j extends ti.EventEmitter{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,i,r)=>{ye.debug("key ratcheted event received",{ratchetResult:n,participantId:i,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},dP),t),this.on(rr.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(t,n,i){const r={key:t,participantIdentity:n,keyIndex:i};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(i??0),r),this.emit(rr.SetKey,r)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(t,n){this.emit(rr.RatchetRequest,t,n)}}class Pi extends Error{constructor(t,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=t}}var ve;(function(e){e[e.NotAllowed=0]="NotAllowed",e[e.ServerUnreachable=1]="ServerUnreachable",e[e.InternalError=2]="InternalError",e[e.Cancelled=3]="Cancelled",e[e.LeaveRequest=4]="LeaveRequest",e[e.Timeout=5]="Timeout"})(ve||(ve={}));class Ne extends Pi{constructor(t,n,i,r){super(1,t),this.name="ConnectionError",this.status=i,this.reason=n,this.context=r,this.reasonName=ve[n]}}class Dd extends Pi{constructor(t){super(21,t??"device is unsupported"),this.name="DeviceUnsupportedError"}}class Ri extends Pi{constructor(t){super(20,t??"track is invalid"),this.name="TrackInvalidError"}}class mP extends Pi{constructor(t){super(10,t??"unsupported server"),this.name="UnsupportedServer"}}class Rt extends Pi{constructor(t){super(12,t??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class Md extends Pi{constructor(t){super(13,t??"unable to negotiate"),this.name="NegotiationError"}}class Vv extends Pi{constructor(t,n){super(15,t),this.name="PublishTrackError",this.status=n}}class Wv extends Pi{constructor(t,n){super(15,t),this.reason=n,this.reasonName=typeof n=="string"?n:_d[n]}}var en;(function(e){e[e.AlreadyOpened=0]="AlreadyOpened",e[e.AbnormalEnd=1]="AbnormalEnd",e[e.DecodeFailed=2]="DecodeFailed",e[e.LengthExceeded=3]="LengthExceeded",e[e.Incomplete=4]="Incomplete",e[e.HandlerAlreadyRegistered=7]="HandlerAlreadyRegistered",e[e.EncryptionTypeMismatch=8]="EncryptionTypeMismatch"})(en||(en={}));class Cn extends Pi{constructor(t,n){super(16,t),this.name="DataStreamError",this.reason=n,this.reasonName=en[n]}}var Mc;(function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"})(Mc||(Mc={})),(function(e){function t(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?e.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?e.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?e.DeviceInUse:e.Other}e.getFailure=t})(Mc||(Mc={}));var Gv;(function(e){e[e.InvalidKey=0]="InvalidKey",e[e.MissingKey=1]="MissingKey",e[e.InternalError=2]="InternalError"})(Gv||(Gv={}));var G;(function(e){e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.ConnectionStateChanged="connectionStateChanged",e.Moved="moved",e.MediaDevicesChanged="mediaDevicesChanged",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalAudioSilenceDetected="localAudioSilenceDetected",e.ActiveSpeakersChanged="activeSpeakersChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.ParticipantAttributesChanged="participantAttributesChanged",e.ParticipantActive="participantActive",e.RoomMetadataChanged="roomMetadataChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.AudioPlaybackStatusChanged="audioPlaybackChanged",e.VideoPlaybackStatusChanged="videoPlaybackChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.SignalConnected="signalConnected",e.RecordingStatusChanged="recordingStatusChanged",e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ActiveDeviceChanged="activeDeviceChanged",e.ChatMessage="chatMessage",e.LocalTrackSubscribed="localTrackSubscribed",e.MetricsReceived="metricsReceived"})(G||(G={}));var ie;(function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalTrackCpuConstrained="localTrackCpuConstrained",e.LocalSenderCreated="localSenderCreated",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.IsSpeakingChanged="isSpeakingChanged",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.TrackCpuConstrained="trackCpuConstrained",e.MediaDevicesError="mediaDevicesError",e.AudioStreamAcquired="audioStreamAcquired",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.PCTrackAdded="pcTrackAdded",e.AttributesChanged="attributesChanged",e.LocalTrackSubscribed="localTrackSubscribed",e.ChatMessage="chatMessage",e.Active="active"})(ie||(ie={}));var te;(function(e){e.TransportsCreated="transportsCreated",e.Connected="connected",e.Disconnected="disconnected",e.Resuming="resuming",e.Resumed="resumed",e.Restarting="restarting",e.Restarted="restarted",e.SignalResumed="signalResumed",e.SignalRestarted="signalRestarted",e.Closing="closing",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.DataPacketReceived="dataPacketReceived",e.RTPVideoMapUpdate="rtpVideoMapUpdate",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ParticipantUpdate="participantUpdate",e.RoomUpdate="roomUpdate",e.SpeakersChanged="speakersChanged",e.StreamStateChanged="streamStateChanged",e.ConnectionQualityUpdate="connectionQualityUpdate",e.SubscriptionError="subscriptionError",e.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",e.RemoteMute="remoteMute",e.SubscribedQualityUpdate="subscribedQualityUpdate",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalTrackSubscribed="localTrackSubscribed",e.Offline="offline",e.SignalRequestResponse="signalRequestResponse",e.SignalConnected="signalConnected",e.RoomMoved="roomMoved"})(te||(te={}));var J;(function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.Restarted="restarted",e.Ended="ended",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed",e.CpuConstrained="cpuConstrained",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed",e.AudioSilenceDetected="audioSilenceDetected",e.VisibilityChanged="visibilityChanged",e.VideoDimensionsChanged="videoDimensionsChanged",e.VideoPlaybackStarted="videoPlaybackStarted",e.VideoPlaybackFailed="videoPlaybackFailed",e.ElementAttached="elementAttached",e.ElementDetached="elementDetached",e.UpstreamPaused="upstreamPaused",e.UpstreamResumed="upstreamResumed",e.SubscriptionPermissionChanged="subscriptionPermissionChanged",e.SubscriptionStatusChanged="subscriptionStatusChanged",e.SubscriptionFailed="subscriptionFailed",e.TrackProcessorUpdate="trackProcessorUpdate",e.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",e.TranscriptionReceived="transcriptionReceived",e.TimeSyncUpdate="timeSyncUpdate",e.PreConnectBufferFlushed="preConnectBufferFlushed"})(J||(J={}));function OP(e){return typeof e>"u"?e:typeof structuredClone=="function"?typeof e=="object"&&e!==null?structuredClone(Object.assign({},e)):structuredClone(e):JSON.parse(JSON.stringify(e))}const gP=/version\/(\d+(\.?_?\d+)+)/i;let Ld;function cn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(Ld===void 0||t){const i=vP.find(r=>{let{test:s}=r;return s.test(n)});Ld=i==null?void 0:i.describe(n)}return Ld}const vP=[{test:/firefox|iceweasel|fxios/i,describe(e){return{name:"Firefox",version:Lc(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:$d(e)}}},{test:/chrom|crios|crmo/i,describe(e){return{name:"Chrome",version:Lc(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("crios")?"iOS":void 0,osVersion:$d(e)}}},{test:/safari|applewebkit/i,describe(e){return{name:"Safari",version:Lc(gP,e),os:e.includes("mobile/")?"iOS":"macOS",osVersion:$d(e)}}}];function Lc(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const i=t.match(e);return i&&i.length>=n&&i[n]||""}function $d(e){return e.includes("mac os")?Lc(/\(.+?(\d+_\d+(:?_\d+)?)/,e,1).replace(/_/g,"."):void 0}var bP="2.16.0";const TP=bP,kP=16;class Ut{}Ut.setTimeout=function(){return setTimeout(...arguments)},Ut.setInterval=function(){return setInterval(...arguments)},Ut.clearTimeout=function(){return clearTimeout(...arguments)},Ut.clearInterval=function(){return clearInterval(...arguments)};const yP=5e3,Ma=[];var On;(function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH"})(On||(On={}));class j extends ti.EventEmitter{get streamState(){return this._streamState}setStreamState(t){this._streamState=t}constructor(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var r;super(),this.attachedElements=[],this.isMuted=!1,this._streamState=j.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=ye,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),yP):this.handleAppVisibilityChanged()},this.log=Ci((r=i.loggerName)!==null&&r!==void 0?r:Un.Track),this.loggerContextCb=i.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=t,this._mediaStreamID=t.id,this.source=j.Source.Unknown}get logContext(){var t;return Object.assign(Object.assign({},(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this)),Re(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(t){let n="audio";this.kind===j.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===j.Kind.Video&&this.addAppVisibilityListener(),t||(n==="audio"&&(Ma.forEach(s=>{s.parentElement===null&&!t&&(t=s)}),t&&Ma.splice(Ma.indexOf(t),1)),t||(t=document.createElement(n))),this.attachedElements.includes(t)||this.attachedElements.push(t),Ps(this.mediaStreamTrack,t);const i=t.srcObject.getTracks(),r=i.some(s=>s.kind==="audio");return t.play().then(()=>{this.emit(r?J.AudioPlaybackStarted:J.VideoPlaybackStarted)}).catch(s=>{s.name==="NotAllowedError"?this.emit(r?J.AudioPlaybackFailed:J.VideoPlaybackFailed,s):s.name==="AbortError"?ye.debug("".concat(r?"audio":"video"," playback aborted, likely due to new play request")):ye.warn("could not playback ".concat(r?"audio":"video"),s),r&&t&&i.some(a=>a.kind==="video")&&s.name==="NotAllowedError"&&(t.muted=!0,t.play().catch(()=>{}))}),this.emit(J.ElementAttached,t),t}detach(t){try{if(t){Rs(this.mediaStreamTrack,t);const i=this.attachedElements.indexOf(t);return i>=0&&(this.attachedElements.splice(i,1),this.recycleElement(t),this.emit(J.ElementDetached,t)),t}const n=[];return this.attachedElements.forEach(i=>{Rs(this.mediaStreamTrack,i),n.push(i),this.recycleElement(i),this.emit(J.ElementDetached,i)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(t){t.loggerName&&(this.log=Ci(t.loggerName)),t.loggerContextCb&&(this.loggerContextCb=t.loggerContextCb)}recycleElement(t){if(t instanceof HTMLAudioElement){let n=!0;t.pause(),Ma.forEach(i=>{i.parentElement||(n=!1)}),n&&Ma.push(t)}}handleAppVisibilityChanged(){return P(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===j.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(t=>t.play().catch(()=>{})),0)})}addAppVisibilityListener(){ln()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){ln()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function Ps(e,t){let n;t.srcObject instanceof MediaStream?n=t.srcObject:n=new MediaStream;let i;e.kind==="audio"?i=n.getAudioTracks():i=n.getVideoTracks(),i.includes(e)||(i.forEach(r=>{n.removeTrack(r)}),n.addTrack(e)),(!zr()||!(t instanceof HTMLVideoElement))&&(t.autoplay=!0),t.muted=n.getAudioTracks().length===0,t instanceof HTMLVideoElement&&(t.playsInline=!0),t.srcObject!==n&&(t.srcObject=n,(zr()||Fr())&&t instanceof HTMLVideoElement&&setTimeout(()=>{t.srcObject=n,t.play().catch(()=>{})},0))}function Rs(e,t){if(t.srcObject instanceof MediaStream){const n=t.srcObject;n.removeTrack(e),n.getTracks().length>0?t.srcObject=n:t.srcObject=null}}(function(e){let t;(function(l){l.Audio="audio",l.Video="video",l.Unknown="unknown"})(t=e.Kind||(e.Kind={}));let n;(function(l){l.Camera="camera",l.Microphone="microphone",l.ScreenShare="screen_share",l.ScreenShareAudio="screen_share_audio",l.Unknown="unknown"})(n=e.Source||(e.Source={}));let i;(function(l){l.Active="active",l.Paused="paused",l.Unknown="unknown"})(i=e.StreamState||(e.StreamState={}));function r(l){switch(l){case t.Audio:return Mn.AUDIO;case t.Video:return Mn.VIDEO;default:return Mn.DATA}}e.kindToProto=r;function s(l){switch(l){case Mn.AUDIO:return t.Audio;case Mn.VIDEO:return t.Video;default:return t.Unknown}}e.kindFromProto=s;function a(l){switch(l){case n.Camera:return St.CAMERA;case n.Microphone:return St.MICROPHONE;case n.ScreenShare:return St.SCREEN_SHARE;case n.ScreenShareAudio:return St.SCREEN_SHARE_AUDIO;default:return St.UNKNOWN}}e.sourceToProto=a;function o(l){switch(l){case St.CAMERA:return n.Camera;case St.MICROPHONE:return n.Microphone;case St.SCREEN_SHARE:return n.ScreenShare;case St.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}e.sourceFromProto=o;function c(l){switch(l){case gd.ACTIVE:return i.Active;case gd.PAUSED:return i.Paused;default:return i.Unknown}}e.streamStateFromProto=c})(j||(j={}));class Ke{constructor(t,n,i,r,s){if(typeof t=="object")this.width=t.width,this.height=t.height,this.aspectRatio=t.aspectRatio,this.encoding={maxBitrate:t.maxBitrate,maxFramerate:t.maxFramerate,priority:t.priority};else if(n!==void 0&&i!==void 0)this.width=t,this.height=n,this.aspectRatio=t/n,this.encoding={maxBitrate:i,maxFramerate:r,priority:s};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const SP=["vp8","h264"],_P=["vp8","h264","vp9","av1","h265"];function EP(e){return!!SP.find(t=>t===e)}const wP=EP;var Yv;(function(e){e[e.PREFER_REGRESSION=0]="PREFER_REGRESSION",e[e.SIMULCAST=1]="SIMULCAST",e[e.REGRESSION=2]="REGRESSION"})(Yv||(Yv={}));var Ud;(function(e){e.telephone={maxBitrate:12e3},e.speech={maxBitrate:24e3},e.music={maxBitrate:48e3},e.musicStereo={maxBitrate:64e3},e.musicHighQuality={maxBitrate:96e3},e.musicHighQualityStereo={maxBitrate:128e3}})(Ud||(Ud={}));const La={h90:new Ke(160,90,9e4,20),h180:new Ke(320,180,16e4,20),h216:new Ke(384,216,18e4,20),h360:new Ke(640,360,45e4,20),h540:new Ke(960,540,8e5,25),h720:new Ke(1280,720,17e5,30),h1080:new Ke(1920,1080,3e6,30),h1440:new Ke(2560,1440,5e6,30),h2160:new Ke(3840,2160,8e6,30)},qd={h120:new Ke(160,120,7e4,20),h180:new Ke(240,180,125e3,20),h240:new Ke(320,240,14e4,20),h360:new Ke(480,360,33e4,20),h480:new Ke(640,480,5e5,20),h540:new Ke(720,540,6e5,25),h720:new Ke(960,720,13e5,30),h1080:new Ke(1440,1080,23e5,30),h1440:new Ke(1920,1440,38e5,30)},Xd={h360fps3:new Ke(640,360,2e5,3,"medium"),h360fps15:new Ke(640,360,4e5,15,"medium"),h720fps5:new Ke(1280,720,8e5,5,"medium"),h720fps15:new Ke(1280,720,15e5,15,"medium"),h720fps30:new Ke(1280,720,2e6,30,"medium"),h1080fps15:new Ke(1920,1080,25e5,15,"medium"),h1080fps30:new Ke(1920,1080,5e6,30,"medium"),original:new Ke(0,0,7e6,30,"medium")},CP="|",Hv="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function xP(e){const t=e.split(CP);return t.length>1?[t[0],e.substr(t[0].length+1)]:[e,""]}function qt(e){return P(this,void 0,void 0,function*(){return new Promise(t=>Ut.setTimeout(t,e))})}function Fd(){return"addTransceiver"in RTCPeerConnection.prototype}function zd(){return"addTrack"in RTCPeerConnection.prototype}function PP(){if(!("getCapabilities"in RTCRtpSender)||zr()||Fr())return!1;const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e){for(const n of e.codecs)if(n.mimeType.toLowerCase()==="video/av1"){t=!0;break}}return t}function RP(){if(!("getCapabilities"in RTCRtpSender)||Fr())return!1;if(zr()){const n=cn();if(n!=null&&n.version&&ii(n.version,"16")<0||(n==null?void 0:n.os)==="iOS"&&(n!=null&&n.osVersion)&&ii(n.osVersion,"16")<0)return!1}const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e){for(const n of e.codecs)if(n.mimeType.toLowerCase()==="video/vp9"){t=!0;break}}return t}function qn(e){return e==="av1"||e==="vp9"}function Bd(e){return!document||$a()?!1:(e||(e=document.createElement("audio")),"setSinkId"in e)}function AP(){return typeof RTCPeerConnection>"u"?!1:Fd()||zd()}function Fr(){var e;return((e=cn())===null||e===void 0?void 0:e.name)==="Firefox"}function Kv(){const e=cn();return!!e&&e.name==="Chrome"&&e.os!=="iOS"}function zr(){var e;return((e=cn())===null||e===void 0?void 0:e.name)==="Safari"}function $a(){const e=cn();return(e==null?void 0:e.name)==="Safari"||(e==null?void 0:e.os)==="iOS"}function IP(){const e=cn();return(e==null?void 0:e.name)==="Safari"&&e.version.startsWith("17.")||(e==null?void 0:e.os)==="iOS"&&!!(e!=null&&e.osVersion)&&ii(e.osVersion,"17")>=0}function QP(e){return e||(e=cn()),(e==null?void 0:e.name)==="Safari"&&ii(e.version,"18.3")>0||(e==null?void 0:e.os)==="iOS"&&!!(e!=null&&e.osVersion)&&ii(e.osVersion,"18.3")>0}function Jv(){var e,t;return ln()?(t=(e=navigator.userAgentData)===null||e===void 0?void 0:e.mobile)!==null&&t!==void 0?t:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function NP(){const e=cn(),t="17.2";if(e)return e.name!=="Safari"&&e.os!=="iOS"||e.os==="iOS"&&e.osVersion&&ii(e.osVersion,t)>=0?!0:e.name==="Safari"&&ii(e.version,t)>=0}function ln(){return typeof document<"u"}function ni(){return navigator.product=="ReactNative"}function $c(e){return e.hostname.endsWith(".livekit.cloud")||e.hostname.endsWith(".livekit.run")}function Zd(e){return $c(e)?e.hostname.split(".")[0]:null}function eb(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function tb(){if(!ni())return;let e=eb();if(e)return e.platform}function nb(){if(ln())return window.devicePixelRatio;if(ni()){let e=eb();if(e)return e.devicePixelRatio}return 1}function ii(e,t){const n=e.split("."),i=t.split("."),r=Math.min(n.length,i.length);for(let s=0;s<r;++s){const a=parseInt(n[s],10),o=parseInt(i[s],10);if(a>o)return 1;if(a<o)return-1;if(s===r-1&&a===o)return 0}return e===""&&t!==""?-1:t===""?1:n.length==i.length?0:n.length<i.length?-1:1}function DP(e){for(const t of e)t.target.handleResize(t)}function MP(e){for(const t of e)t.target.handleVisibilityChanged(t)}let jd=null;const ib=()=>(jd||(jd=new ResizeObserver(DP)),jd);let Vd=null;const rb=()=>(Vd||(Vd=new IntersectionObserver(MP,{root:null,rootMargin:"0px"})),Vd);function LP(){var e;const t=new Ug({sdk:qg.JS,protocol:kP,version:TP});return ni()&&(t.os=(e=tb())!==null&&e!==void 0?e:""),t}function sb(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const r=document.createElement("canvas");r.width=e,r.height=t;const s=r.getContext("2d");s==null||s.fillRect(0,0,r.width,r.height),i&&s&&(s.beginPath(),s.arc(e/2,t/2,50,0,Math.PI*2,!0),s.closePath(),s.fillStyle="grey",s.fill());const a=r.captureStream(),[o]=a.getTracks();if(!o)throw Error("Could not get empty media stream video track");return o.enabled=n,o}let Ua;function Wd(){if(!Ua){const e=new AudioContext,t=e.createOscillator(),n=e.createGain();n.gain.setValueAtTime(0,0);const i=e.createMediaStreamDestination();if(t.connect(n),n.connect(i),t.start(),[Ua]=i.stream.getAudioTracks(),!Ua)throw Error("Could not get empty media stream audio track");Ua.enabled=!1}return Ua.clone()}class xn{get isResolved(){return this._isResolved}constructor(t,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((i,r)=>P(this,void 0,void 0,function*(){this.resolve=i,this.reject=r,t&&(yield t(i,r))})).finally(()=>{var i;this._isResolved=!0,(i=this.onFinally)===null||i===void 0||i.call(this)})}}function $P(e){return _P.includes(e)}function ar(e){if(typeof e=="string"||typeof e=="number")return e;if(Array.isArray(e))return e[0];if(e.exact!==void 0)return Array.isArray(e.exact)?e.exact[0]:e.exact;if(e.ideal!==void 0)return Array.isArray(e.ideal)?e.ideal[0]:e.ideal;throw Error("could not unwrap constraint")}function UP(e){return e.startsWith("http")?e.replace(/^(http)/,"ws"):e}function qa(e){return e.startsWith("ws")?e.replace(/^(ws)/,"http"):e}function qP(e,t){return e.segments.map(n=>{let{id:i,text:r,language:s,startTime:a,endTime:o,final:c}=n;var l;const u=(l=t.get(i))!==null&&l!==void 0?l:Date.now(),d=Date.now();return c?t.delete(i):t.set(i,u),{id:i,text:r,startTime:Number.parseInt(a.toString()),endTime:Number.parseInt(o.toString()),final:c,language:s,firstReceivedTime:u,lastReceivedTime:d}})}function XP(e){const{id:t,timestamp:n,message:i,editTimestamp:r}=e;return{id:t,timestamp:Number.parseInt(n.toString()),editTimestamp:r?Number.parseInt(r.toString()):void 0,message:i}}function ab(e){switch(e.reason){case ve.LeaveRequest:return e.context;case ve.Cancelled:return Ln.CLIENT_INITIATED;case ve.NotAllowed:return Ln.USER_REJECTED;case ve.ServerUnreachable:return Ln.JOIN_FAILURE;default:return Ln.UNKNOWN_REASON}}function Uc(e){return e!==void 0?Number(e):void 0}function Br(e){return e!==void 0?BigInt(e):void 0}function As(e){return!!e&&!(e instanceof MediaStreamTrack)&&e.isLocal}function ri(e){return!!e&&e.kind==j.Kind.Audio}function or(e){return!!e&&e.kind==j.Kind.Video}function cr(e){return As(e)&&or(e)}function Ai(e){return As(e)&&ri(e)}function Gd(e){return!!e&&!e.isLocal}function FP(e){return!!e&&!e.isLocal}function Yd(e){return Gd(e)&&or(e)}function zP(e){return e.isLocal}function BP(e,t){const n=[];let i=new TextEncoder().encode(e);for(;i.length>t;){let r=t;for(;r>0;){const s=i[r];if(s!==void 0&&(s&192)!==128)break;r--}n.push(i.slice(0,r)),i=i.slice(r)}return i.length>0&&n.push(i),n}function ZP(e){var t;const n=e.get("Cache-Control");if(n){const i=(t=n.match(/(?:^|[,\s])max-age=(\d+)/))===null||t===void 0?void 0:t[1];if(i)return parseInt(i,10)}}function ob(e,t,n){var i,r,s,a;const{optionsWithoutProcessor:o,audioProcessor:c,videoProcessor:l}=ub(e??{}),u=t==null?void 0:t.processor,d=n==null?void 0:n.processor,h=o??{};return h.audio===!0&&(h.audio={}),h.video===!0&&(h.video={}),h.audio&&(Hd(h.audio,t),(i=(s=h.audio).deviceId)!==null&&i!==void 0||(s.deviceId={ideal:"default"}),(c||u)&&(h.audio.processor=c??u)),h.video&&(Hd(h.video,n),(r=(a=h.video).deviceId)!==null&&r!==void 0||(a.deviceId={ideal:"default"}),(l||d)&&(h.video.processor=l??d)),h}function Hd(e,t){return Object.keys(t).forEach(n=>{e[n]===void 0&&(e[n]=t[n])}),e}function Kd(e){var t,n,i,r;const s={};if(e.video)if(typeof e.video=="object"){const a={},o=a,c=e.video;Object.keys(c).forEach(l=>{switch(l){case"resolution":Hd(o,c.resolution);break;default:o[l]=c[l]}}),s.video=a,(t=(i=s.video).deviceId)!==null&&t!==void 0||(i.deviceId={ideal:"default"})}else s.video=e.video?{deviceId:{ideal:"default"}}:!1;else s.video=!1;return e.audio?typeof e.audio=="object"?(s.audio=e.audio,(n=(r=s.audio).deviceId)!==null&&n!==void 0||(r.deviceId={ideal:"default"})):s.audio={deviceId:{ideal:"default"}}:s.audio=!1,s}function cb(e){return P(this,arguments,void 0,function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return(function*(){const i=lb();if(i){const r=i.createAnalyser();r.fftSize=2048;const s=r.frequencyBinCount,a=new Uint8Array(s);i.createMediaStreamSource(new MediaStream([t.mediaStreamTrack])).connect(r),yield qt(n),r.getByteTimeDomainData(a);const c=a.some(l=>l!==128&&l!==0);return i.close(),!c}return!1})()})}function lb(){var e;const t=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(t){const n=new t({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((e=window.document)===null||e===void 0)&&e.body)){const i=()=>P(this,void 0,void 0,function*(){var r;try{n.state==="suspended"&&(yield n.resume())}catch(s){console.warn("Error trying to auto-resume audio context",s)}finally{(r=window.document.body)===null||r===void 0||r.removeEventListener("click",i)}});n.addEventListener("statechange",()=>{var r;n.state==="closed"&&((r=window.document.body)===null||r===void 0||r.removeEventListener("click",i))}),window.document.body.addEventListener("click",i)}return n}}function jP(e){return e==="audioinput"?j.Source.Microphone:e==="videoinput"?j.Source.Camera:j.Source.Unknown}function Jd(e){return e===j.Source.Microphone?"audioinput":e===j.Source.Camera?"videoinput":void 0}function VP(e){var t,n;let i=(t=e.video)!==null&&t!==void 0?t:!0;return e.resolution&&e.resolution.width>0&&e.resolution.height>0&&(i=typeof i=="boolean"?{}:i,zr()?i=Object.assign(Object.assign({},i),{width:{max:e.resolution.width},height:{max:e.resolution.height},frameRate:e.resolution.frameRate}):i=Object.assign(Object.assign({},i),{width:{ideal:e.resolution.width},height:{ideal:e.resolution.height},frameRate:e.resolution.frameRate})),{audio:(n=e.audio)!==null&&n!==void 0?n:!1,video:i,controller:e.controller,selfBrowserSurface:e.selfBrowserSurface,surfaceSwitching:e.surfaceSwitching,systemAudio:e.systemAudio,preferCurrentTab:e.preferCurrentTab}}function Xa(e){return e.split("/")[1].toLowerCase()}function WP(e){const t=[];return e.forEach(n=>{n.track!==void 0&&t.push(new bd({cid:n.track.mediaStreamID,track:n.trackInfo}))}),t}function Re(e){return"mediaStreamTrack"in e?{trackID:e.sid,source:e.source,muted:e.isMuted,enabled:e.mediaStreamTrack.enabled,kind:e.kind,streamID:e.mediaStreamID,streamTrackID:e.mediaStreamTrack.id}:{trackID:e.trackSid,enabled:e.isEnabled,muted:e.isMuted,trackInfo:Object.assign({mimeType:e.mimeType,name:e.trackName,encrypted:e.isEncrypted,kind:e.kind,source:e.source},e.track?Re(e.track):{})}}function GP(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function YP(e,t){var n;e===void 0&&(e={}),t===void 0&&(t={});const i=[...Object.keys(t),...Object.keys(e)],r={};for(const s of i)e[s]!==t[s]&&(r[s]=(n=t[s])!==null&&n!==void 0?n:"");return r}function ub(e){const t=Object.assign({},e);let n,i;return typeof t.audio=="object"&&t.audio.processor&&(n=t.audio.processor,t.audio=Object.assign(Object.assign({},t.audio),{processor:void 0})),typeof t.video=="object"&&t.video.processor&&(i=t.video.processor,t.video=Object.assign(Object.assign({},t.video),{processor:void 0})),{audioProcessor:n,videoProcessor:i,optionsWithoutProcessor:OP(t)}}function HP(e){switch(e){case St.CAMERA:return j.Source.Camera;case St.MICROPHONE:return j.Source.Microphone;case St.SCREEN_SHARE:return j.Source.ScreenShare;case St.SCREEN_SHARE_AUDIO:return j.Source.ScreenShareAudio;default:return j.Source.Unknown}}function db(e,t){return e.width*e.height<t.width*t.height}function KP(e,t){var n;return(n=e.layers)===null||n===void 0?void 0:n.find(i=>i.quality===t)}class JP extends ti.EventEmitter{constructor(t,n){super(),this.decryptDataRequests=new Map,this.encryptDataRequests=new Map,this.onWorkerMessage=i=>{var r,s;const{kind:a,data:o}=i.data;switch(a){case"error":if(ye.error(o.error.message),o.uuid){const u=this.decryptDataRequests.get(o.uuid);if(u!=null&&u.reject){u.reject(o.error);break}const d=this.encryptDataRequests.get(o.uuid);if(d!=null&&d.reject){d.reject(o.error);break}}this.emit(sr.EncryptionError,o.error,o.participantIdentity);break;case"initAck":o.enabled&&this.keyProvider.getKeys().forEach(u=>{this.postKey(u)});break;case"enable":if(o.enabled&&this.keyProvider.getKeys().forEach(u=>{this.postKey(u)}),this.encryptionEnabled!==o.enabled&&o.participantIdentity===((r=this.room)===null||r===void 0?void 0:r.localParticipant.identity))this.emit(sr.ParticipantEncryptionStatusChanged,o.enabled,this.room.localParticipant),this.encryptionEnabled=o.enabled;else if(o.participantIdentity){const u=(s=this.room)===null||s===void 0?void 0:s.getParticipantByIdentity(o.participantIdentity);if(!u)throw TypeError("couldn't set encryption status, participant not found".concat(o.participantIdentity));this.emit(sr.ParticipantEncryptionStatusChanged,o.enabled,u)}break;case"ratchetKey":this.keyProvider.emit(rr.KeyRatcheted,o.ratchetResult,o.participantIdentity,o.keyIndex);break;case"decryptDataResponse":const c=this.decryptDataRequests.get(o.uuid);c!=null&&c.resolve&&c.resolve(o);break;case"encryptDataResponse":const l=this.encryptDataRequests.get(o.uuid);l!=null&&l.resolve&&l.resolve(o);break}},this.onWorkerError=i=>{ye.error("e2ee worker encountered an error:",{error:i.error}),this.emit(sr.EncryptionError,i.error,void 0)},this.keyProvider=t.keyProvider,this.worker=t.worker,this.encryptionEnabled=!1,this.dataChannelEncryptionEnabled=n}get isEnabled(){return this.encryptionEnabled}get isDataChannelEncryptionEnabled(){return this.isEnabled&&this.dataChannelEncryptionEnabled}setup(t){if(!hP())throw new Dd("tried to setup end-to-end encryption on an unsupported browser");if(ye.info("setting up e2ee"),t!==this.room){this.room=t,this.setupEventListeners(t,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:Hx.getLevel()}};this.worker&&(ye.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(t,n){ye.debug("set e2ee to ".concat(t," for participant ").concat(n)),this.postEnable(t,n)}setSifTrailer(t){!t||t.length===0?ye.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(t)}setupEngine(t){t.on(te.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(t,n){t.on(G.TrackPublished,(i,r)=>this.setParticipantCryptorEnabled(i.trackInfo.encryption!==Pt.NONE,r.identity)),t.on(G.ConnectionStateChanged,i=>{i===Be.Connected&&t.remoteParticipants.forEach(r=>{r.trackPublications.forEach(s=>{this.setParticipantCryptorEnabled(s.trackInfo.encryption!==Pt.NONE,r.identity)})})}).on(G.TrackUnsubscribed,(i,r,s)=>{var a;const o={kind:"removeTransform",data:{participantIdentity:s.identity,trackId:i.mediaStreamID}};(a=this.worker)===null||a===void 0||a.postMessage(o)}).on(G.TrackSubscribed,(i,r,s)=>{this.setupE2EEReceiver(i,s.identity,r.trackInfo)}).on(G.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(i=>{this.postKey(i)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),t.localParticipant.on(ie.LocalSenderCreated,(i,r)=>P(this,void 0,void 0,function*(){this.setupE2EESender(r,i)})),t.localParticipant.on(ie.LocalTrackPublished,i=>{if(!or(i.track)||!$a())return;const r={kind:"updateCodec",data:{trackId:i.track.mediaStreamID,codec:Xa(i.trackInfo.codecs[0].mimeType),participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}),n.on(rr.SetKey,i=>this.postKey(i)).on(rr.RatchetRequest,(i,r)=>this.postRatchetRequest(i,r))}encryptData(t){return P(this,void 0,void 0,function*(){if(!this.worker)throw Error("could not encrypt data, worker is missing");const n=crypto.randomUUID(),i={kind:"encryptDataRequest",data:{uuid:n,payload:t,participantIdentity:this.room.localParticipant.identity}},r=new xn;return r.onFinally=()=>{this.encryptDataRequests.delete(n)},this.encryptDataRequests.set(n,r),this.worker.postMessage(i),r.promise})}handleEncryptedData(t,n,i,r){if(!this.worker)throw Error("could not handle encrypted data, worker is missing");const s=crypto.randomUUID(),a={kind:"decryptDataRequest",data:{uuid:s,payload:t,iv:n,participantIdentity:i,keyIndex:r}},o=new xn;return o.onFinally=()=>{this.decryptDataRequests.delete(s)},this.decryptDataRequests.set(s,o),this.worker.postMessage(a),o.promise}postRatchetRequest(t,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const i={kind:"ratchetRequest",data:{participantIdentity:t,keyIndex:n}};this.worker.postMessage(i)}postKey(t){let{key:n,participantIdentity:i,keyIndex:r}=t;var s;if(!this.worker)throw Error("could not set key, worker is missing");const a={kind:"setKey",data:{participantIdentity:i,isPublisher:i===((s=this.room)===null||s===void 0?void 0:s.localParticipant.identity),key:n,keyIndex:r}};this.worker.postMessage(a)}postEnable(t,n){if(this.worker){const i={kind:"enable",data:{enabled:t,participantIdentity:n}};this.worker.postMessage(i)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(t){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const i={kind:"setRTPMap",data:{map:t,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(i)}postSifTrailer(t){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:t}};this.worker.postMessage(n)}setupE2EEReceiver(t,n,i){if(t.receiver){if(!(i!=null&&i.mimeType)||i.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(t.receiver,t.mediaStreamID,n,t.kind==="video"?Xa(i.mimeType):void 0)}}setupE2EESender(t,n){if(!As(t)||!n){n||ye.warn("early return because sender is not ready");return}this.handleSender(n,t.mediaStreamID,void 0)}handleReceiver(t,n,i,r){return P(this,void 0,void 0,function*(){if(this.worker){if(Nd()&&!Kv()){const s={kind:"decode",participantIdentity:i,trackId:n,codec:r};t.transform=new RTCRtpScriptTransform(this.worker,s)}else{if(Da in t&&r){const c={kind:"updateCodec",data:{trackId:n,codec:r,participantIdentity:i}};this.worker.postMessage(c);return}let s=t.writableStream,a=t.readableStream;if(!s||!a){const c=t.createEncodedStreams();t.writableStream=c.writable,s=c.writable,t.readableStream=c.readable,a=c.readable}const o={kind:"decode",data:{readableStream:a,writableStream:s,trackId:n,codec:r,participantIdentity:i,isReuse:Da in t}};this.worker.postMessage(o,[a,s])}t[Da]=!0}})}handleSender(t,n,i){var r;if(!(Da in t||!this.worker)){if(!(!((r=this.room)===null||r===void 0)&&r.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(Nd()&&!Kv()){ye.info("initialize script transform");const s={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:i};t.transform=new RTCRtpScriptTransform(this.worker,s)}else{ye.info("initialize encoded streams");const s=t.createEncodedStreams(),a={kind:"encode",data:{readableStream:s.readable,writableStream:s.writable,codec:i,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(a,[s.readable,s.writable])}t[Da]=!0}}}const eR=500,tR=15e3;class Is{constructor(){this.failedConnectionAttempts=new Map,this.backOffPromises=new Map}static getInstance(){return this._instance||(this._instance=new Is),this._instance}addFailedConnectionAttempt(t){var n;const i=new URL(t),r=Zd(i);if(!r)return;let s=(n=this.failedConnectionAttempts.get(r))!==null&&n!==void 0?n:0;this.failedConnectionAttempts.set(r,s+1),this.backOffPromises.set(r,qt(Math.min(eR*Math.pow(2,s),tR)))}getBackOffPromise(t){const n=new URL(t),i=n&&Zd(n);return i&&this.backOffPromises.get(i)||Promise.resolve()}resetFailedConnectionAttempts(t){const n=new URL(t),i=n&&Zd(n);i&&(this.failedConnectionAttempts.set(i,0),this.backOffPromises.set(i,Promise.resolve()))}resetAll(){this.backOffPromises.clear(),this.failedConnectionAttempts.clear()}}Is._instance=null;const eh="default";class Nt{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new Nt),this.instance}get previousDevices(){return this._previousDevices}getDevices(t){return P(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var s;if(((s=Nt.userMediaPromiseMap)===null||s===void 0?void 0:s.size)>0){ye.debug("awaiting getUserMedia promise");try{n?yield Nt.userMediaPromiseMap.get(n):yield Promise.all(Nt.userMediaPromiseMap.values())}catch{ye.warn("error waiting for media permissons")}}let a=yield navigator.mediaDevices.enumerateDevices();if(r&&!(zr()&&i.hasDeviceInUse(n))&&(a.filter(c=>c.kind===n).length===0||a.some(c=>{const l=c.label==="",u=n?c.kind===n:!0;return l&&u}))){const c={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},l=yield navigator.mediaDevices.getUserMedia(c);a=yield navigator.mediaDevices.enumerateDevices(),l.getTracks().forEach(u=>{u.stop()})}return i._previousDevices=a,n&&(a=a.filter(o=>o.kind===n)),a})()})}normalizeDeviceId(t,n,i){return P(this,void 0,void 0,function*(){if(n!==eh)return n;const r=yield this.getDevices(t),s=r.find(o=>o.deviceId===eh);if(!s){ye.warn("could not reliably determine default device");return}const a=r.find(o=>o.deviceId!==eh&&o.groupId===(i??s.groupId));if(!a){ye.warn("could not reliably determine default device");return}return a==null?void 0:a.deviceId})}hasDeviceInUse(t){return t?Nt.userMediaPromiseMap.has(t):Nt.userMediaPromiseMap.size>0}}Nt.mediaDeviceKinds=["audioinput","audiooutput","videoinput"],Nt.userMediaPromiseMap=new Map;var Fa;(function(e){e[e.WAITING=0]="WAITING",e[e.RUNNING=1]="RUNNING",e[e.COMPLETED=2]="COMPLETED"})(Fa||(Fa={}));class nR{constructor(){this.pendingTasks=new Map,this.taskMutex=new Kt,this.nextTaskIndex=0}run(t){return P(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Fa.WAITING};this.pendingTasks.set(n.id,n);const i=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Fa.RUNNING,yield t()}finally{n.status=Fa.COMPLETED,this.pendingTasks.delete(n.id),i()}})}flush(){return P(this,void 0,void 0,function*(){return this.run(()=>P(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}class iR{get readyState(){return this.ws.readyState}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i,r;if(!((i=n.signal)===null||i===void 0)&&i.aborted)throw new DOMException("This operation was aborted","AbortError");this.url=t;const s=new WebSocket(t,(r=n.protocols)!==null&&r!==void 0?r:[]);s.binaryType="arraybuffer",this.ws=s;const a=function(){let{closeCode:o,reason:c}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return s.close(o,c)};this.opened=new Promise((o,c)=>{s.onopen=()=>{o({readable:new ReadableStream({start(l){s.onmessage=u=>{let{data:d}=u;return l.enqueue(d)},s.onerror=u=>l.error(u)},cancel:a}),writable:new WritableStream({write(l){s.send(l)},abort(){s.close()},close:a}),protocol:s.protocol,extensions:s.extensions}),s.removeEventListener("error",c)},s.addEventListener("error",c)}),this.closed=new Promise((o,c)=>{const l=()=>P(this,void 0,void 0,function*(){const u=new Promise(h=>{s.readyState!==WebSocket.CLOSED&&s.addEventListener("close",p=>{h(p)},{once:!0})}),d=yield Promise.race([qt(250),u]);d?o(d):c(new Error("Encountered unspecified websocket error without a timely close event"))});s.onclose=u=>{let{code:d,reason:h}=u;o({closeCode:d,reason:h}),s.removeEventListener("error",l)},s.addEventListener("error",l)}),n.signal&&(n.signal.onabort=()=>s.close()),this.close=a}}function rR(e,t){const n=new URL(UP(e));return t.forEach((i,r)=>{n.searchParams.set(r,i)}),hb(n,"rtc")}function sR(e){const t=new URL(qa(e));return hb(t,"validate")}function aR(e){return e.endsWith("/")?e:"".concat(e,"/")}function hb(e,t){return e.pathname="".concat(aR(e.pathname)).concat(t),e.toString()}function pb(e){if(typeof e=="string")return jg.fromJson(JSON.parse(e),{ignoreUnknownFields:!0});if(e instanceof ArrayBuffer)return jg.fromBinary(new Uint8Array(e));throw new Error("could not decode websocket message: ".concat(typeof e))}function oR(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Unknown reason";if(!(e instanceof AbortSignal))return t;const n=e.reason;switch(typeof n){case"string":return n;case"object":return n instanceof Error?n.message:t;default:return"toString"in n?n.toString():t}}const cR=["syncState","trickle","offer","answer","simulate","leave"];function lR(e){const t=cR.indexOf(e.case)>=0;return ye.trace("request allowed to bypass queue:",{canPass:t,req:e}),t}var nt;(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.RECONNECTING=2]="RECONNECTING",e[e.DISCONNECTING=3]="DISCONNECTING",e[e.DISCONNECTED=4]="DISCONNECTED"})(nt||(nt={}));const uR=250;class th{get currentState(){return this.state}get isDisconnected(){return this.state===nt.DISCONNECTING||this.state===nt.DISCONNECTED}get isEstablishingConnection(){return this.state===nt.CONNECTING||this.state===nt.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;this.rtt=0,this.state=nt.DISCONNECTED,this.log=ye,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0,this.onMediaSectionsRequirement=void 0},this.log=Ci((i=n.loggerName)!==null&&i!==void 0?i:Un.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=t,this.requestQueue=new nR,this.queuedRequests=[],this.closingLock=new Kt,this.connectionLock=new Kt,this.state=nt.DISCONNECTED}get logContext(){var t,n;return(n=(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this))!==null&&n!==void 0?n:{}}join(t,n,i,r){return P(this,void 0,void 0,function*(){return this.state=nt.CONNECTING,this.options=i,yield this.connect(t,n,i,r)})}reconnect(t,n,i,r){return P(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=nt.RECONNECTING,this.clearPingInterval(),yield this.connect(t,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:i,reconnectReason:r}))})}connect(t,n,i,r){return P(this,void 0,void 0,function*(){const s=yield this.connectionLock.lock();this.connectOptions=i;const a=LP(),o=i.singlePeerConnection?hR(n,a,i):dR(n,a,i),c=rR(t,o),l=sR(c);return new Promise((u,d)=>P(this,void 0,void 0,function*(){var h,p;try{let O=!1;const m=T=>P(this,void 0,void 0,function*(){if(O)return;O=!0;const S=T instanceof Event?T.currentTarget:T,_=oR(S,"Abort handler called");this.streamWriter&&!this.isDisconnected?this.sendLeave().then(()=>this.close(_)).catch(x=>{this.log.error(x),this.close()}):this.close(),b(),d(S instanceof AbortSignal?S.reason:S)});r==null||r.addEventListener("abort",m);const b=()=>{clearTimeout(v),r==null||r.removeEventListener("abort",m)},v=setTimeout(()=>{m(new Ne("room connection has timed out (signal)",ve.ServerUnreachable))},i.websocketTimeout),k=(T,S)=>{this.handleSignalConnected(T,v,S)},y=new URL(c);y.searchParams.has("access_token")&&y.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(y),Object.assign({reconnect:i.reconnect,reconnectReason:i.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new iR(c);try{this.ws.closed.then(w=>{var D;this.isEstablishingConnection&&d(new Ne("Websocket got closed during a (re)connection attempt: ".concat(w.reason),ve.InternalError)),w.closeCode!==1e3&&(this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:w.reason,code:w.closeCode,wasClean:w.closeCode===1e3,state:this.state})),this.state===nt.CONNECTED&&this.handleOnClose((D=w.reason)!==null&&D!==void 0?D:"Unexpected WS error"))}).catch(w=>{this.isEstablishingConnection&&d(new Ne("Websocket error during a (re)connection attempt: ".concat(w),ve.InternalError))});const T=yield this.ws.opened.catch(w=>P(this,void 0,void 0,function*(){if(this.state!==nt.CONNECTED){this.state=nt.DISCONNECTED,clearTimeout(v);const D=yield this.handleConnectionError(w,l);d(D);return}this.handleWSError(w),d(w)}));if(clearTimeout(v),!T)return;const S=T.readable.getReader();this.streamWriter=T.writable.getWriter();const _=yield S.read();if(S.releaseLock(),!_.value)throw new Ne("no message received as first message",ve.InternalError);const x=pb(_.value),N=this.validateFirstMessage(x,(h=i.reconnect)!==null&&h!==void 0?h:!1);if(!N.isValid){d(N.error);return}((p=x.message)===null||p===void 0?void 0:p.case)==="join"&&(this.pingTimeoutDuration=x.message.value.pingTimeout,this.pingIntervalDuration=x.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})));const L=N.shouldProcessFirstMessage?x:void 0;k(T,L),u(N.response)}catch(T){d(T)}finally{b()}}finally{s()}}))})}startReadingLoop(t,n){return P(this,void 0,void 0,function*(){for(n&&this.handleSignalResponse(n);;){this.signalLatency&&(yield qt(this.signalLatency));const{done:i,value:r}=yield t.read();if(i)break;const s=pb(r);this.handleSignalResponse(s)}})}close(){return P(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Close method called on signal client";return(function*(){if([nt.DISCONNECTING||nt.DISCONNECTED].includes(t.state)){t.log.debug("ignoring signal close as it's already in disconnecting state");return}const r=yield t.closingLock.lock();try{if(t.clearPingInterval(),n&&(t.state=nt.DISCONNECTING),t.ws){t.ws.close({closeCode:1e3,reason:i});const s=t.ws.closed;t.ws=void 0,t.streamWriter=void 0,yield Promise.race([s,qt(uR)])}}catch(s){t.log.debug("websocket error while closing",Object.assign(Object.assign({},t.logContext),{error:s}))}finally{n&&(t.state=nt.DISCONNECTED),r()}})()})}sendOffer(t,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:t.sdp})),this.sendRequest({case:"offer",value:Qs(t,n)})}sendAnswer(t,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:t.sdp})),this.sendRequest({case:"answer",value:Qs(t,n)})}sendIceCandidate(t,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:t})),this.sendRequest({case:"trickle",value:new _c({candidateInit:JSON.stringify(t),target:n})})}sendMuteTrack(t,n){return this.sendRequest({case:"mute",value:new Ec({sid:t,muted:n})})}sendAddTrack(t){return this.sendRequest({case:"addTrack",value:t})}sendUpdateLocalMetadata(t,n){return P(this,arguments,void 0,function(i,r){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(function*(){const o=s.getNextRequestId();return yield s.sendRequest({case:"updateMetadata",value:new kd({requestId:o,metadata:i,name:r,attributes:a})}),o})()})}sendUpdateTrackSettings(t){this.sendRequest({case:"trackSetting",value:t})}sendUpdateSubscription(t){return this.sendRequest({case:"subscription",value:t})}sendSyncState(t){return this.sendRequest({case:"syncState",value:t})}sendUpdateVideoLayers(t,n){return this.sendRequest({case:"updateLayers",value:new Gg({trackSid:t,layers:n})})}sendUpdateSubscriptionPermissions(t,n){return this.sendRequest({case:"subscriptionPermission",value:new Kg({allParticipants:t,trackPermissions:n})})}sendSimulateScenario(t){return this.sendRequest({case:"simulate",value:t})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:dt.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new tv({timestamp:dt.parse(Date.now()),rtt:dt.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(t,n){return this.sendRequest({case:"updateAudioTrack",value:new Td({trackSid:t,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new Cc({reason:Ln.CLIENT_INITIATED,action:Cs.DISCONNECT})})}sendRequest(t){return P(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(function*(){if(!r&&!lR(n)&&i.state===nt.RECONNECTING){i.queuedRequests.push(()=>P(i,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(r||(yield i.requestQueue.flush()),i.signalLatency&&(yield qt(i.signalLatency)),i.isDisconnected){i.log.debug("skipping signal request (type: ".concat(n.case,") - SignalClient disconnected"));return}if(!i.streamWriter){i.log.error("cannot send signal request before connected, type: ".concat(n==null?void 0:n.case),i.logContext);return}const a=new yx({message:n});try{i.useJSON?yield i.streamWriter.write(a.toJsonString()):yield i.streamWriter.write(a.toBinary())}catch(o){i.log.error("error sending signal message",Object.assign(Object.assign({},i.logContext),{error:o}))}})()})}handleSignalResponse(t){var n,i;const r=t.message;if(r==null){this.log.debug("received unsupported message",this.logContext);return}let s=!1;if(r.case==="answer"){const a=fb(r.value);this.onAnswer&&this.onAnswer(a,r.value.id,r.value.midToTrackId)}else if(r.case==="offer"){const a=fb(r.value);this.onOffer&&this.onOffer(a,r.value.id,r.value.midToTrackId)}else if(r.case==="trickle"){const a=JSON.parse(r.value.candidateInit);this.onTrickle&&this.onTrickle(a,r.value.target)}else r.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=r.value.participants)!==null&&n!==void 0?n:[]):r.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(r.value):r.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((i=r.value.speakers)!==null&&i!==void 0?i:[]):r.case==="leave"?this.onLeave&&this.onLeave(r.value):r.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(r.value.sid,r.value.muted):r.case==="roomUpdate"?this.onRoomUpdate&&r.value.room&&this.onRoomUpdate(r.value.room):r.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(r.value):r.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(r.value):r.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(r.value):r.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(r.value):r.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(r.value):r.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(r.value):r.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(r.value):r.case==="pong"||(r.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(r.value.lastPingTimestamp.toString()),this.resetPingTimeout(),s=!0):r.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(r.value):r.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(r.value.trackSid):r.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(r.value.token),this.onRoomMoved&&this.onRoomMoved(r.value)):r.case==="mediaSectionsRequirement"?this.onMediaSectionsRequirement&&this.onMediaSectionsRequirement(r.value):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:r.case})));s||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const t=this.queuedRequests.shift();t&&this.requestQueue.run(t)}}handleOnClose(t){return P(this,void 0,void 0,function*(){if(this.state===nt.DISCONNECTED)return;const n=this.onClose;yield this.close(void 0,t),this.log.debug("websocket connection closed: ".concat(t),Object.assign(Object.assign({},this.logContext),{reason:t})),n&&n(t)})}handleWSError(t){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:t}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=Ut.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&Ut.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=Ut.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&Ut.clearInterval(this.pingInterval)}handleSignalConnected(t,n,i){this.state=nt.CONNECTED,clearTimeout(n),this.startPingInterval(),this.startReadingLoop(t.readable.getReader(),i)}validateFirstMessage(t,n){var i,r,s,a,o;return((i=t.message)===null||i===void 0?void 0:i.case)==="join"?{isValid:!0,response:t.message.value}:this.state===nt.RECONNECTING&&((r=t.message)===null||r===void 0?void 0:r.case)!=="leave"?((s=t.message)===null||s===void 0?void 0:s.case)==="reconnect"?{isValid:!0,response:t.message.value}:(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),{isValid:!0,response:void 0,shouldProcessFirstMessage:!0}):this.isEstablishingConnection&&((a=t.message)===null||a===void 0?void 0:a.case)==="leave"?{isValid:!1,error:new Ne("Received leave request while trying to (re)connect",ve.LeaveRequest,void 0,t.message.value.reason)}:n?{isValid:!1,error:new Ne("Unexpected first message",ve.InternalError)}:{isValid:!1,error:new Ne("did not receive join response, got ".concat((o=t.message)===null||o===void 0?void 0:o.case," instead"),ve.InternalError)}}handleConnectionError(t,n){return P(this,void 0,void 0,function*(){try{const i=yield fetch(n);if(i.status.toFixed(0).startsWith("4")){const r=yield i.text();return new Ne(r,ve.NotAllowed,i.status)}else return t instanceof Ne?t:new Ne("Encountered unknown websocket error during connection: ".concat(t),ve.InternalError,i.status)}catch(i){return i instanceof Ne?i:new Ne(i instanceof Error?i.message:"server was not reachable",ve.ServerUnreachable)}})}}function fb(e){const t={type:"offer",sdp:e.sdp};switch(e.type){case"answer":case"offer":case"pranswer":case"rollback":t.type=e.type;break}return t}function Qs(e,t){return new ir({sdp:e.sdp,type:e.type,id:t})}function dR(e,t,n){var i;const r=new URLSearchParams;return r.set("access_token",e),n.reconnect&&(r.set("reconnect","1"),n.sid&&r.set("sid",n.sid)),r.set("auto_subscribe",n.autoSubscribe?"1":"0"),r.set("sdk",ni()?"reactnative":"js"),r.set("version",t.version),r.set("protocol",t.protocol.toString()),t.deviceModel&&r.set("device_model",t.deviceModel),t.os&&r.set("os",t.os),t.osVersion&&r.set("os_version",t.osVersion),t.browser&&r.set("browser",t.browser),t.browserVersion&&r.set("browser_version",t.browserVersion),n.adaptiveStream&&r.set("adaptive_stream","1"),n.reconnectReason&&r.set("reconnect_reason",n.reconnectReason.toString()),!((i=navigator.connection)===null||i===void 0)&&i.type&&r.set("network",navigator.connection.type),r}function hR(e,t,n){const i=new URLSearchParams;i.set("access_token",e);const r=new Bx({clientInfo:t,connectionSettings:new nv({autoSubscribe:!!n.autoSubscribe,adaptiveStream:!!n.adaptiveStream}),reconnect:!!n.reconnect,participantSid:n.sid?n.sid:void 0});n.reconnectReason&&(r.reconnectReason=n.reconnectReason);const s=new Zx({joinRequest:r.toBinary()});return i.set("join_request",btoa(new TextDecoder("utf-8").decode(s.toBinary()))),i}class mb{constructor(){this.buffer=[],this._totalSize=0}push(t){this.buffer.push(t),this._totalSize+=t.data.byteLength}pop(){const t=this.buffer.shift();return t&&(this._totalSize-=t.data.byteLength),t}getAll(){return this.buffer.slice()}popToSequence(t){for(;this.buffer.length>0&&this.buffer[0].sequence<=t;)this.pop()}alignBufferedAmount(t){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=t)break;this.pop()}}get length(){return this.buffer.length}}class pR{constructor(t){this._map=new Map,this._lastCleanup=0,this.ttl=t}set(t,n){const i=Date.now();i-this._lastCleanup>this.ttl/2&&this.cleanup();const r=i+this.ttl;return this._map.set(t,{value:n,expiresAt:r}),this}get(t){const n=this._map.get(t);if(n){if(n.expiresAt<Date.now()){this._map.delete(t);return}return n.value}}has(t){const n=this._map.get(t);return n?n.expiresAt<Date.now()?(this._map.delete(t),!1):!0:!1}delete(t){return this._map.delete(t)}clear(){this._map.clear()}cleanup(){const t=Date.now();for(const[n,i]of this._map.entries())i.expiresAt<t&&this._map.delete(n);this._lastCleanup=t}get size(){return this.cleanup(),this._map.size}forEach(t){this.cleanup();for(const[n,i]of this._map.entries())i.expiresAt>=Date.now()&&t(i.value,n,this.asValueMap())}map(t){this.cleanup();const n=[],i=this.asValueMap();for(const[r,s]of i.entries())n.push(t(s,r,i));return n}asValueMap(){const t=new Map;for(const[n,i]of this._map.entries())i.expiresAt>=Date.now()&&t.set(n,i.value);return t}}var Xn={},nh={},ih={exports:{}},Ob;function rh(){if(Ob)return ih.exports;Ob=1;var e=ih.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var n="candidate:%s %d %s %d %s %d typ %s";return n+=t.raddr!=null?" raddr %s rport %d":"%v%v",n+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(n+=" generation %d"),n+=t["network-id"]!=null?" network-id %d":"%v",n+=t["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var n="ssrc:%d";return t.attribute!=null&&(n+=" %s",t.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var n="mediaclk:";return n+=t.id!=null?"id=%s %s":"%v%s",n+=t.mediaClockValue!=null?"=%s":"",n+=t.rateNumerator!=null?" rate=%s":"",n+=t.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(e).forEach(function(t){var n=e[t];n.forEach(function(i){i.reg||(i.reg=/(.*)/),i.format||(i.format="%s")})}),ih.exports}var gb;function fR(){return gb||(gb=1,(function(e){var t=function(o){return String(Number(o))===o?Number(o):o},n=function(o,c,l,u){if(u&&!l)c[u]=t(o[1]);else for(var d=0;d<l.length;d+=1)o[d+1]!=null&&(c[l[d]]=t(o[d+1]))},i=function(o,c,l){var u=o.name&&o.names;o.push&&!c[o.push]?c[o.push]=[]:u&&!c[o.name]&&(c[o.name]={});var d=o.push?{}:u?c[o.name]:c;n(l.match(o.reg),d,o.names,o.name),o.push&&c[o.push].push(d)},r=rh(),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(o){var c={},l=[],u=c;return o.split(/(\r\n|\r|\n)/).filter(s).forEach(function(d){var h=d[0],p=d.slice(2);h==="m"&&(l.push({rtp:[],fmtp:[]}),u=l[l.length-1]);for(var O=0;O<(r[h]||[]).length;O+=1){var m=r[h][O];if(m.reg.test(p))return i(m,u,p)}}),c.media=l,c};var a=function(o,c){var l=c.split(/=(.+)/,2);return l.length===2?o[l[0]]=t(l[1]):l.length===1&&c.length>1&&(o[l[0]]=void 0),o};e.parseParams=function(o){return o.split(/;\s?/).reduce(a,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(o){return o.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(o){for(var c=[],l=o.split(" ").map(t),u=0;u<l.length;u+=3)c.push({component:l[u],ip:l[u+1],port:l[u+2]});return c},e.parseImageAttributes=function(o){return o.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(a,{})})},e.parseSimulcastStreamList=function(o){return o.split(";").map(function(c){return c.split(",").map(function(l){var u,d=!1;return l[0]!=="~"?u=t(l):(u=t(l.substring(1,l.length)),d=!0),{scid:u,paused:d}})})}})(nh)),nh}var sh,vb;function mR(){if(vb)return sh;vb=1;var e=rh(),t=/%[sdv%]/g,n=function(a){var o=1,c=arguments,l=c.length;return a.replace(t,function(u){if(o>=l)return u;var d=c[o];switch(o+=1,u){case"%%":return"%";case"%s":return String(d);case"%d":return Number(d);case"%v":return""}})},i=function(a,o,c){var l=o.format instanceof Function?o.format(o.push?c:c[o.name]):o.format,u=[a+"="+l];if(o.names)for(var d=0;d<o.names.length;d+=1){var h=o.names[d];o.name?u.push(c[o.name][h]):u.push(c[o.names[d]])}else u.push(c[o.name]);return n.apply(null,u)},r=["v","o","s","i","u","e","p","c","b","t","r","z","a"],s=["i","c","b","a"];return sh=function(a,o){o=o||{},a.version==null&&(a.version=0),a.name==null&&(a.name=" "),a.media.forEach(function(d){d.payloads==null&&(d.payloads="")});var c=o.outerOrder||r,l=o.innerOrder||s,u=[];return c.forEach(function(d){e[d].forEach(function(h){h.name in a&&a[h.name]!=null?u.push(i(d,h,a)):h.push in a&&a[h.push]!=null&&a[h.push].forEach(function(p){u.push(i(d,h,p))})})}),a.media.forEach(function(d){u.push(i("m",e.m[0],d)),l.forEach(function(h){e[h].forEach(function(p){p.name in d&&d[p.name]!=null?u.push(i(h,p,d)):p.push in d&&d[p.push]!=null&&d[p.push].forEach(function(O){u.push(i(h,p,O))})})})}),u.join(`\r
`)+`\r
`},sh}var bb;function OR(){if(bb)return Xn;bb=1;var e=fR(),t=mR(),n=rh();return Xn.grammar=n,Xn.write=t,Xn.parse=e.parse,Xn.parseParams=e.parseParams,Xn.parseFmtpConfig=e.parseFmtpConfig,Xn.parsePayloads=e.parsePayloads,Xn.parseRemoteCandidates=e.parseRemoteCandidates,Xn.parseImageAttributes=e.parseImageAttributes,Xn.parseSimulcastStreamList=e.parseSimulcastStreamList,Xn}var lr=OR();function ah(e,t,n){var i,r,s;t===void 0&&(t=50),n===void 0&&(n={});var a=(i=n.isImmediate)!=null&&i,o=(r=n.callback)!=null&&r,c=n.maxWait,l=Date.now(),u=[];function d(){if(c!==void 0){var p=Date.now()-l;if(p+t>=c)return c-p}return t}var h=function(){var p=[].slice.call(arguments),O=this;return new Promise(function(m,b){var v=a&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,l=Date.now(),!a){var y=e.apply(O,p);o&&o(y),u.forEach(function(T){return(0,T.resolve)(y)}),u=[]}},d()),v){var k=e.apply(O,p);return o&&o(k),m(k)}u.push({resolve:m,reject:b})})};return h.cancel=function(p){s!==void 0&&clearTimeout(s),u.forEach(function(O){return(0,O.reject)(p)}),u=[]},h}const gR=.7,vR=20,Ns={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class Tb extends ti.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;super(),this.log=ye,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=ah(r=>P(this,void 0,void 0,function*(){this.emit(Ns.NegotiationStarted);try{yield this.createAndSendOffer()}catch(s){if(r)r(s);else throw s}}),vR),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Ci((i=n.loggerName)!==null&&i!==void 0?i:Un.PCTransport),this.loggerOptions=n,this.config=t,this._pc=this.createPC(),this.offerLock=new Kt}createPC(){const t=new RTCPeerConnection(this.config);return t.onicecandidate=n=>{var i;n.candidate&&((i=this.onIceCandidate)===null||i===void 0||i.call(this,n.candidate))},t.onicecandidateerror=n=>{var i;(i=this.onIceCandidateError)===null||i===void 0||i.call(this,n)},t.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,t.iceConnectionState)},t.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,t.signalingState)},t.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,t.connectionState)},t.ondatachannel=n=>{var i;(i=this.onDataChannel)===null||i===void 0||i.call(this,n)},t.ontrack=n=>{var i;(i=this.onTrack)===null||i===void 0||i.call(this,n)},t}get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(t))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(t){return P(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(t);this.pendingCandidates.push(t)})}setRemoteDescription(t,n){return P(this,void 0,void 0,function*(){var i;if(t.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let r;if(t.type==="offer"){let{stereoMids:s,nackMids:a}=bR(t);this.remoteStereoMids=s,this.remoteNackMids=a}else if(t.type==="answer"){const s=lr.parse((i=t.sdp)!==null&&i!==void 0?i:"");s.media.forEach(a=>{const o=oh(a.mid);a.type==="audio"&&this.trackBitrates.some(c=>{if(!c.transceiver||o!=c.transceiver.mid)return!1;let l=0;if(a.rtp.some(d=>d.codec.toUpperCase()===c.codec.toUpperCase()?(l=d.payload,!0):!1),l===0)return!0;let u=!1;for(const d of a.fmtp)if(d.payload===l){d.config=d.config.split(";").filter(h=>!h.includes("maxaveragebitrate")).join(";"),c.maxbr>0&&(d.config+=";maxaveragebitrate=".concat(c.maxbr*1e3)),u=!0;break}return u||c.maxbr>0&&a.fmtp.push({payload:l,config:"maxaveragebitrate=".concat(c.maxbr*1e3)}),!0})}),r=lr.write(s)}return yield this.setMungedSDP(t,r,!0),this.pendingCandidates.forEach(s=>{this.pc.addIceCandidate(s)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):t.type==="answer"&&(this.emit(Ns.NegotiationComplete),t.sdp&&lr.parse(t.sdp).media.forEach(a=>{a.type==="video"&&this.emit(Ns.RTPVideoPayloadTypes,a.rtp)})),!0})}createAndSendOffer(t){return P(this,void 0,void 0,function*(){var n;const i=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(t!=null&&t.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const o=this._pc.remoteDescription;if(t!=null&&t.iceRestart&&o)yield this._pc.setRemoteDescription(o);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=this.latestOfferId+1;this.latestOfferId=r;const s=yield this.pc.createOffer(t);this.log.debug("original offer",Object.assign({sdp:s.sdp},this.logContext));const a=lr.parse((n=s.sdp)!==null&&n!==void 0?n:"");if(a.media.forEach(o=>{yb(o),o.type==="audio"?kb(o,["all"],[]):o.type==="video"&&this.trackBitrates.some(c=>{if(!o.msid||!c.cid||!o.msid.includes(c.cid))return!1;let l=0;if(o.rtp.some(d=>d.codec.toUpperCase()===c.codec.toUpperCase()?(l=d.payload,!0):!1),l===0||(qn(c.codec)&&!zr()&&this.ensureVideoDDExtensionForSVC(o,a),!qn(c.codec)))return!0;const u=Math.round(c.maxbr*gR);for(const d of o.fmtp)if(d.payload===l){d.config.includes("x-google-start-bitrate")||(d.config+=";x-google-start-bitrate=".concat(u));break}return!0})}),this.latestOfferId>r){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:r}));return}yield this.setMungedSDP(s,lr.write(a)),this.onOffer(s,this.latestOfferId)}finally{i()}})}createAndSetAnswer(){return P(this,void 0,void 0,function*(){var t;const n=yield this.pc.createAnswer(),i=lr.parse((t=n.sdp)!==null&&t!==void 0?t:"");return i.media.forEach(r=>{yb(r),r.type==="audio"&&kb(r,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,lr.write(i)),n})}createDataChannel(t,n){return this.pc.createDataChannel(t,n)}addTransceiver(t,n){return this.pc.addTransceiver(t,n)}addTransceiverOfKind(t,n){return this.pc.addTransceiver(t,n)}addTrack(t){if(!this._pc)throw new Rt("PC closed, cannot add track");return this._pc.addTrack(t)}setTrackCodecBitrate(t){this.trackBitrates.push(t)}setConfiguration(t){var n;if(!this._pc)throw new Rt("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(t)}canRemoveTrack(){var t;return!!(!((t=this._pc)===null||t===void 0)&&t.removeTrack)}removeTrack(t){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(t)}getConnectionState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var t;return(t=this._pc)===null||t===void 0?void 0:t.localDescription}getRemoteDescription(){var t;return(t=this.pc)===null||t===void 0?void 0:t.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return P(this,void 0,void 0,function*(){var t;if(!this._pc)return;let n="";const i=new Map,r=new Map;if((yield this._pc.getStats()).forEach(o=>{switch(o.type){case"transport":n=o.selectedCandidatePairId;break;case"candidate-pair":n===""&&o.selected&&(n=o.id),i.set(o.id,o);break;case"remote-candidate":r.set(o.id,"".concat(o.address,":").concat(o.port));break}}),n==="")return;const a=(t=i.get(n))===null||t===void 0?void 0:t.remoteCandidateId;if(a!==void 0)return r.get(a)})}setMungedSDP(t,n,i){return P(this,void 0,void 0,function*(){if(n){const r=t.sdp;t.sdp=n;try{this.log.debug("setting munged ".concat(i?"remote":"local"," description"),this.logContext),i?yield this.pc.setRemoteDescription(t):yield this.pc.setLocalDescription(t);return}catch(s){this.log.warn("not able to set ".concat(t.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:s,sdp:n})),t.sdp=r}}try{i?yield this.pc.setRemoteDescription(t):yield this.pc.setLocalDescription(t)}catch(r){let s="unknown error";r instanceof Error?s=r.message:typeof r=="string"&&(s=r);const a={error:s,sdp:t.sdp};throw!i&&this.pc.remoteDescription&&(a.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(t.type),Object.assign(Object.assign({},this.logContext),{fields:a})),new Md(s)}})}ensureVideoDDExtensionForSVC(t,n){var i,r;if(!((i=t.ext)===null||i===void 0?void 0:i.some(a=>a.uri===Hv))){if(this.ddExtID===0){let a=0;n.media.forEach(o=>{var c;o.type==="video"&&((c=o.ext)===null||c===void 0||c.forEach(l=>{l.value>a&&(a=l.value)}))}),this.ddExtID=a+1}(r=t.ext)===null||r===void 0||r.push({value:this.ddExtID,uri:Hv})}}}function kb(e,t,n){const i=oh(e.mid);let r=0;e.rtp.some(s=>s.codec==="opus"?(r=s.payload,!0):!1),r>0&&(e.rtcpFb||(e.rtcpFb=[]),n.includes(i)&&!e.rtcpFb.some(s=>s.payload===r&&s.type==="nack")&&e.rtcpFb.push({payload:r,type:"nack"}),(t.includes(i)||t.length===1&&t[0]==="all")&&e.fmtp.some(s=>s.payload===r?(s.config.includes("stereo=1")||(s.config+=";stereo=1"),!0):!1))}function bR(e){var t;const n=[],i=[],r=lr.parse((t=e.sdp)!==null&&t!==void 0?t:"");let s=0;return r.media.forEach(a=>{var o;const c=oh(a.mid);a.type==="audio"&&(a.rtp.some(l=>l.codec==="opus"?(s=l.payload,!0):!1),!((o=a.rtcpFb)===null||o===void 0)&&o.some(l=>l.payload===s&&l.type==="nack")&&i.push(c),a.fmtp.some(l=>l.payload===s?(l.config.includes("sprop-stereo=1")&&n.push(c),!0):!1))}),{stereoMids:n,nackMids:i}}function yb(e){if(e.connection){const t=e.connection.ip.indexOf(":")>=0;(e.connection.version===4&&t||e.connection.version===6&&!t)&&(e.connection.ip="0.0.0.0",e.connection.version=4)}}function oh(e){return typeof e=="number"?e.toFixed(0):e}const ch="vp8",TR={audioPreset:Ud.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:Xd.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:ch,backupCodec:!0,preConnectBuffer:!1},Sb={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},_b={deviceId:{ideal:"default"},resolution:La.h720.resolution},kR={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new Jx,disconnectOnPageLeave:!0,webAudioMix:!1,singlePeerConnection:!1},lh={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var Ot;(function(e){e[e.NEW=0]="NEW",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.FAILED=3]="FAILED",e[e.CLOSING=4]="CLOSING",e[e.CLOSED=5]="CLOSED"})(Ot||(Ot={}));class yR{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(t,n,i){var r;this.peerConnectionTimeout=lh.peerConnectionTimeout,this.log=ye,this.updateState=()=>{var s,a;const o=this.state,c=this.requiredTransports.map(l=>l.getConnectionState());c.every(l=>l==="connected")?this.state=Ot.CONNECTED:c.some(l=>l==="failed")?this.state=Ot.FAILED:c.some(l=>l==="connecting")?this.state=Ot.CONNECTING:c.every(l=>l==="closed")?this.state=Ot.CLOSED:c.some(l=>l==="closed")?this.state=Ot.CLOSING:c.every(l=>l==="new")&&(this.state=Ot.NEW),o!==this.state&&(this.log.debug("pc state change: from ".concat(Ot[o]," to ").concat(Ot[this.state]),this.logContext),(s=this.onStateChange)===null||s===void 0||s.call(this,this.state,this.publisher.getConnectionState(),(a=this.subscriber)===null||a===void 0?void 0:a.getConnectionState()))},this.log=Ci((r=i.loggerName)!==null&&r!==void 0?r:Un.PCManager),this.loggerOptions=i,this.isPublisherConnectionRequired=n!=="subscriber-primary",this.isSubscriberConnectionRequired=n==="subscriber-primary",this.publisher=new Tb(t,i),n!=="publisher-only"&&(this.subscriber=new Tb(t,i),this.subscriber.onConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.subscriber.onIceCandidate=s=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,s,$n.SUBSCRIBER)},this.subscriber.onDataChannel=s=>{var a;(a=this.onDataChannel)===null||a===void 0||a.call(this,s)},this.subscriber.onTrack=s=>{var a;(a=this.onTrack)===null||a===void 0||a.call(this,s)}),this.publisher.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=s=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,s,$n.PUBLISHER)},this.publisher.onTrack=s=>{var a;(a=this.onTrack)===null||a===void 0||a.call(this,s)},this.publisher.onOffer=(s,a)=>{var o;(o=this.onPublisherOffer)===null||o===void 0||o.call(this,s,a)},this.state=Ot.NEW,this.connectionLock=new Kt,this.remoteOfferLock=new Kt}get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(t))}requirePublisher(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=t,this.updateState()}createAndSendPublisherOffer(t){return this.publisher.createAndSendOffer(t)}setPublisherAnswer(t,n){return this.publisher.setRemoteDescription(t,n)}removeTrack(t){return this.publisher.removeTrack(t)}close(){return P(this,void 0,void 0,function*(){var t;if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const n=this.publisher;for(const i of n.getSenders())try{n.canRemoveTrack()&&n.removeTrack(i)}catch(r){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:r}))}}yield Promise.all([this.publisher.close(),(t=this.subscriber)===null||t===void 0?void 0:t.close()]),this.updateState()})}triggerIceRestart(){return P(this,void 0,void 0,function*(){this.subscriber&&(this.subscriber.restartingIce=!0),this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(t,n){return P(this,void 0,void 0,function*(){var i;n===$n.PUBLISHER?yield this.publisher.addIceCandidate(t):yield(i=this.subscriber)===null||i===void 0?void 0:i.addIceCandidate(t)})}createSubscriberAnswerFromOffer(t,n){return P(this,void 0,void 0,function*(){var i,r,s;this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:t.type,sdp:t.sdp,signalingState:(i=this.subscriber)===null||i===void 0?void 0:i.getSignallingState().toString()}));const a=yield this.remoteOfferLock.lock();try{return(yield(r=this.subscriber)===null||r===void 0?void 0:r.setRemoteDescription(t,n))?yield(s=this.subscriber)===null||s===void 0?void 0:s.createAndSetAnswer():void 0}finally{a()}})}updateConfiguration(t,n){var i;this.publisher.setConfiguration(t),(i=this.subscriber)===null||i===void 0||i.setConfiguration(t),n&&this.triggerIceRestart()}ensurePCTransportConnection(t,n){return P(this,void 0,void 0,function*(){var i;const r=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((i=this.requiredTransports)===null||i===void 0?void 0:i.map(s=>this.ensureTransportConnected(s,t,n)))}finally{r()}})}negotiate(t){return P(this,void 0,void 0,function*(){return new Promise((n,i)=>P(this,void 0,void 0,function*(){const r=setTimeout(()=>{i("negotiation timed out")},this.peerConnectionTimeout),s=()=>{clearTimeout(r),i("negotiation aborted")};t.signal.addEventListener("abort",s),this.publisher.once(Ns.NegotiationStarted,()=>{t.signal.aborted||this.publisher.once(Ns.NegotiationComplete,()=>{clearTimeout(r),n()})}),yield this.publisher.negotiate(a=>{clearTimeout(r),i(a)})}))})}addPublisherTransceiver(t,n){return this.publisher.addTransceiver(t,n)}addPublisherTransceiverOfKind(t,n){return this.publisher.addTransceiverOfKind(t,n)}getMidForReceiver(t){const i=(this.subscriber?this.subscriber.getTransceivers():this.publisher.getTransceivers()).find(r=>r.receiver===t);return i==null?void 0:i.mid}addPublisherTrack(t){return this.publisher.addTrack(t)}createPublisherDataChannel(t,n){return this.publisher.createDataChannel(t,n)}getConnectedAddress(t){return t===$n.PUBLISHER?this.publisher.getConnectedAddress():t===$n.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const t=[];return this.isPublisherConnectionRequired&&t.push(this.publisher),this.isSubscriberConnectionRequired&&this.subscriber&&t.push(this.subscriber),t}ensureTransportConnected(t,n){return P(this,arguments,void 0,function(i,r){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return(function*(){if(i.getConnectionState()!=="connected")return new Promise((c,l)=>P(s,void 0,void 0,function*(){const u=()=>{this.log.warn("abort transport connection",this.logContext),Ut.clearTimeout(d),l(new Ne("room connection has been cancelled",ve.Cancelled))};r!=null&&r.signal.aborted&&u(),r==null||r.signal.addEventListener("abort",u);const d=Ut.setTimeout(()=>{r==null||r.signal.removeEventListener("abort",u),l(new Ne("could not establish pc connection",ve.InternalError))},a);for(;this.state!==Ot.CONNECTED;)if(yield qt(50),r!=null&&r.signal.aborted){l(new Ne("room connection has been cancelled",ve.Cancelled));return}Ut.clearTimeout(d),r==null||r.signal.removeEventListener("abort",u),c()}))})()})}}const Eb=5e3,SR=3e4;class Ve{static fetchRegionSettings(t,n,i){return P(this,void 0,void 0,function*(){const r=yield Ve.fetchLock.lock();try{const s=yield fetch("".concat(_R(t),"/regions"),{headers:{authorization:"Bearer ".concat(n)},signal:i});if(s.ok){const a=ZP(s.headers),o=a?a*1e3:Eb;return{regionSettings:yield s.json(),updatedAtInMs:Date.now(),maxAgeInMs:o}}else throw new Ne("Could not fetch region settings: ".concat(s.statusText),s.status===401?ve.NotAllowed:ve.InternalError,s.status)}catch(s){throw s instanceof Ne?s:i!=null&&i.aborted?new Ne("Region fetching was aborted",ve.Cancelled):new Ne("Could not fetch region settings, ".concat(s instanceof Error?"".concat(s.name,": ").concat(s.message):s),ve.ServerUnreachable,500)}finally{r()}})}static scheduleRefetch(t,n,i){return P(this,void 0,void 0,function*(){const r=Ve.settingsTimeouts.get(t.hostname);clearTimeout(r),Ve.settingsTimeouts.set(t.hostname,setTimeout(()=>P(this,void 0,void 0,function*(){try{const s=yield Ve.fetchRegionSettings(t,n);Ve.updateCachedRegionSettings(t,n,s)}catch(s){if(s instanceof Ne&&s.reason===ve.NotAllowed){ye.debug("token is not valid, cancelling auto region refresh");return}ye.debug("auto refetching of region settings failed",{error:s}),Ve.scheduleRefetch(t,n,i)}}),i))})}static updateCachedRegionSettings(t,n,i){Ve.cache.set(t.hostname,i),Ve.scheduleRefetch(t,n,i.maxAgeInMs)}static stopRefetch(t){const n=Ve.settingsTimeouts.get(t);n&&(clearTimeout(n),Ve.settingsTimeouts.delete(t))}static scheduleCleanup(t){let n=Ve.connectionTrackers.get(t);n&&(n.cleanupTimeout&&clearTimeout(n.cleanupTimeout),n.cleanupTimeout=setTimeout(()=>{const i=Ve.connectionTrackers.get(t);i&&i.connectionCount===0&&(ye.debug("stopping region refetch after disconnect delay",{hostname:t}),Ve.stopRefetch(t)),i&&(i.cleanupTimeout=void 0)},SR))}static cancelCleanup(t){const n=Ve.connectionTrackers.get(t);n!=null&&n.cleanupTimeout&&(clearTimeout(n.cleanupTimeout),n.cleanupTimeout=void 0)}notifyConnected(){const t=this.serverUrl.hostname;let n=Ve.connectionTrackers.get(t);n||(n={connectionCount:0},Ve.connectionTrackers.set(t,n)),n.connectionCount++,Ve.cancelCleanup(t)}notifyDisconnected(){const t=this.serverUrl.hostname,n=Ve.connectionTrackers.get(t);n&&(n.connectionCount=Math.max(0,n.connectionCount-1),n.connectionCount===0&&Ve.scheduleCleanup(t))}constructor(t,n){this.attemptedRegions=[],this.serverUrl=new URL(t),this.token=n}updateToken(t){this.token=t}isCloud(){return $c(this.serverUrl)}getServerUrl(){return this.serverUrl}fetchRegionSettings(t){return P(this,void 0,void 0,function*(){return Ve.fetchRegionSettings(this.serverUrl,this.token,t)})}getNextBestRegionUrl(t){return P(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");let n=Ve.cache.get(this.serverUrl.hostname);(!n||Date.now()-n.updatedAtInMs>n.maxAgeInMs)&&(n=yield this.fetchRegionSettings(t),Ve.updateCachedRegionSettings(this.serverUrl,this.token,n));const i=n.regionSettings.regions.filter(r=>!this.attemptedRegions.find(s=>s.url===r.url));if(i.length>0){const r=i[0];return this.attemptedRegions.push(r),ye.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}setServerReportedRegions(t){Ve.updateCachedRegionSettings(this.serverUrl,this.token,t)}}Ve.cache=new Map,Ve.settingsTimeouts=new Map,Ve.connectionTrackers=new Map,Ve.fetchLock=new Kt;function _R(e){return"".concat(e.protocol.replace("ws","http"),"//").concat(e.host,"/settings")}class gt extends Error{constructor(t,n,i){super(n),this.code=t,this.message=Cb(n,gt.MAX_MESSAGE_BYTES),this.data=i?Cb(i,gt.MAX_DATA_BYTES):void 0}static fromProto(t){return new gt(t.code,t.message,t.data)}toProto(){return new Dg({code:this.code,message:this.message,data:this.data})}static builtIn(t,n){return new gt(gt.ErrorCode[t],gt.ErrorMessage[t],n)}}gt.MAX_MESSAGE_BYTES=256,gt.MAX_DATA_BYTES=15360,gt.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404},gt.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const wb=15360;function uh(e){return new TextEncoder().encode(e).length}function Cb(e,t){if(uh(e)<=t)return e;let n=0,i=e.length;const r=new TextEncoder;for(;n<i;){const s=Math.floor((n+i+1)/2);r.encode(e.slice(0,s)).length<=t?n=s:i=s-1}return e.slice(0,n)}const dh=2e3;function qc(e,t){if(!t)return 0;let n,i;return"bytesReceived"in e?(n=e.bytesReceived,i=t.bytesReceived):"bytesSent"in e&&(n=e.bytesSent,i=t.bytesSent),n===void 0||i===void 0||e.timestamp===void 0||t.timestamp===void 0?0:(n-i)*8*1e3/(e.timestamp-t.timestamp)}const hh=typeof MediaRecorder<"u";class ER{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const wR=hh?MediaRecorder:ER;class CR extends wR{constructor(t,n){if(!hh)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([t.mediaStreamTrack]),n);let i,r;const s=()=>r===void 0,a=()=>{this.removeEventListener("dataavailable",i),this.removeEventListener("stop",a),this.removeEventListener("error",o),r==null||r.close(),r=void 0},o=c=>{r==null||r.error(c),this.removeEventListener("dataavailable",i),this.removeEventListener("stop",a),this.removeEventListener("error",o),r=void 0};this.byteStream=new ReadableStream({start:c=>{r=c,i=l=>P(this,void 0,void 0,function*(){let u;if(l.data.arrayBuffer){const d=yield l.data.arrayBuffer();u=new Uint8Array(d)}else if(l.data.byteArray)u=l.data.byteArray;else throw new Error("no data available!");s()||c.enqueue(u)}),this.addEventListener("dataavailable",i)},cancel:()=>{a()}}),this.addEventListener("stop",a),this.addEventListener("error",o)}}function xR(){return hh}const PR=1e3,RR=1e4;class xb extends j{get sender(){return this._sender}set sender(t){this._sender=t}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(t,n,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=arguments.length>4?arguments[4]:void 0;super(t,n,s),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=ah(()=>P(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>P(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(J.Ended,this)},this.reacquireTrack=!1,this.providedByUser=r,this.muteLock=new Kt,this.pauseUpstreamLock=new Kt,this.trackChangeLock=new Kt,this.trackChangeLock.lock().then(a=>P(this,void 0,void 0,function*(){try{yield this.setMediaStreamTrack(t,!0)}finally{a()}})),this._constraints=t.getConstraints(),i&&(this._constraints=i)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==j.Kind.Video)return;const{width:t,height:n}=this._mediaStreamTrack.getSettings();if(t&&n)return{width:t,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var t,n;return(n=(t=this.processor)===null||t===void 0?void 0:t.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(t,n){return P(this,void 0,void 0,function*(){var i;if(t===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(s=>{Rs(this._mediaStreamTrack,s)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([t]),t&&(t.addEventListener("ended",this.handleEnded),t.addEventListener("mute",this.handleTrackMuteEvent),t.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=t.getConstraints());let r;if(this.processor&&t){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(Ps(t,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:t,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}this.sender&&((i=this.sender.transport)===null||i===void 0?void 0:i.state)!=="closed"&&(yield this.sender.replaceTrack(r??t)),!this.providedByUser&&this._mediaStreamTrack!==t&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=t,t&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(s=>{Ps(r??t,s)}))})}waitForDimensions(){return P(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:PR;return(function*(){var i;if(t.kind===j.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((i=cn())===null||i===void 0?void 0:i.os)==="iOS"&&(yield qt(10));const r=Date.now();for(;Date.now()-r<n;){const s=t.dimensions;if(s)return s;yield qt(50)}throw new Ri("unable to get track dimensions after timeout")})()})}setDeviceId(t){return P(this,void 0,void 0,function*(){return this._constraints.deviceId===t&&this._mediaStreamTrack.getSettings().deviceId===ar(t)||(this._constraints.deviceId=t,this.isMuted)?!0:(yield this.restartTrack(),ar(t)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return P(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){if(t.source===j.Source.ScreenShare)return;const{deviceId:i,groupId:r}=t._mediaStreamTrack.getSettings(),s=t.kind===j.Kind.Audio?"audioinput":"videoinput";return n?Nt.getInstance().normalizeDeviceId(s,i,r):i})()})}mute(){return P(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return P(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(t,n){return P(this,void 0,void 0,function*(){const i=yield this.trackChangeLock.lock();try{if(!this.sender)throw new Ri("unable to replace an unpublished track");let r,s;return typeof n=="boolean"?r=n:n!==void 0&&(r=n.userProvidedTrack,s=n.stopProcessor),this.providedByUser=r??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(t),s&&this.processor&&(yield this.internalStopProcessor()),this}finally{i()}})}restart(t){return P(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.trackChangeLock.lock();try{t||(t=this._constraints);const{deviceId:i,facingMode:r}=t,s=eP(t,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:t}));const a={audio:!1,video:!1};this.kind===j.Kind.Video?a.video=i||r?{deviceId:i,facingMode:r}:!0:a.audio=i?Object.assign({deviceId:i},s):!0,this.attachedElements.forEach(l=>{Rs(this.mediaStreamTrack,l)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const c=(yield navigator.mediaDevices.getUserMedia(a)).getTracks()[0];return this.kind===j.Kind.Video&&(yield c.applyConstraints(s)),c.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(c),this._constraints=t,this.emit(J.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(t){this.log.debug("setting ".concat(this.kind," track ").concat(t?"muted":"unmuted"),this.logContext),!(this.isMuted===t&&this._mediaStreamTrack.enabled!==t)&&(this.isMuted=t,this._mediaStreamTrack.enabled=!t,this.emit(t?J.Muted:J.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return P(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),Jv()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var t;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(t=this.processor)===null||t===void 0||t.destroy(),this.processor=void 0}pauseUpstream(){return P(this,void 0,void 0,function*(){var t;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(J.UpstreamPaused,this);const i=cn();if((i==null?void 0:i.name)==="Safari"&&ii(i.version,"12.0")<0)throw new Dd("pauseUpstream is not supported on Safari < 12.");((t=this.sender.transport)===null||t===void 0?void 0:t.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return P(this,void 0,void 0,function*(){var t;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(J.UpstreamResumed,this),((t=this.sender.transport)===null||t===void 0?void 0:t.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return P(this,void 0,void 0,function*(){var t;return!((t=this.sender)===null||t===void 0)&&t.getStats?yield this.sender.getStats():void 0})}setProcessor(t){return P(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var s;const a=yield i.trackChangeLock.lock();try{i.log.debug("setting up processor",i.logContext);const o=document.createElement(i.kind),c={kind:i.kind,track:i._mediaStreamTrack,element:o,audioContext:i.audioContext};if(yield n.init(c),i.log.debug("processor initialized",i.logContext),i.processor&&(yield i.internalStopProcessor()),i.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(Ps(i._mediaStreamTrack,o),o.muted=!0,o.play().catch(l=>{l instanceof DOMException&&l.name==="AbortError"?(i.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},i.logContext),{error:l})),setTimeout(()=>{o.play().catch(u=>{i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{err:u}))})},100)):i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{error:l}))}),i.processor=n,i.processorElement=o,i.processor.processedTrack){for(const l of i.attachedElements)l!==i.processorElement&&r&&(Rs(i._mediaStreamTrack,l),Ps(i.processor.processedTrack,l));yield(s=i.sender)===null||s===void 0?void 0:s.replaceTrack(i.processor.processedTrack)}i.emit(J.TrackProcessorUpdate,i.processor)}finally{a()}})()})}getProcessor(){return this.processor}stopProcessor(){return P(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){const i=yield t.trackChangeLock.lock();try{yield t.internalStopProcessor(n)}finally{i()}})()})}internalStopProcessor(){return P(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){var i,r;t.processor&&(t.log.debug("stopping processor",t.logContext),(i=t.processor.processedTrack)===null||i===void 0||i.stop(),yield t.processor.destroy(),t.processor=void 0,n||((r=t.processorElement)===null||r===void 0||r.remove(),t.processorElement=void 0),yield t._mediaStreamTrack.applyConstraints(t._constraints),yield t.setMediaStreamTrack(t._mediaStreamTrack,!0),t.emit(J.TrackProcessorUpdate))})()})}startPreConnectBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!xR()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let n="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(n)||(n="video/mp4"),this.localTrackRecorder=new CR(this,{mimeType:n})}this.localTrackRecorder.start(t),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},RR)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var t;return(t=this.localTrackRecorder)===null||t===void 0?void 0:t.byteStream}getPreConnectBufferMimeType(){var t;return(t=this.localTrackRecorder)===null||t===void 0?void 0:t.mimeType}}class Xc extends xb{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;super(t,j.Kind.Audio,n,i,s),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>P(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let a;try{a=yield this.getSenderStats()}catch(o){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:o}));return}a&&this.prevStats&&(this._currentBitrate=qc(a,this.prevStats)),this.prevStats=a}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(J.AudioTrackFeatureUpdate,this,Qt.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(J.AudioTrackFeatureUpdate,this,Qt.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=r,this.checkForSilence()}mute(){const t=Object.create(null,{mute:{get:()=>super.mute}});return P(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===j.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield t.mute.call(this),this)}finally{n()}})}unmute(){const t=Object.create(null,{unmute:{get:()=>super.unmute}});return P(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const i=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==ar(this._constraints.deviceId);return this.source===j.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||i)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield t.unmute.call(this),this}finally{n()}})}restartTrack(t){return P(this,void 0,void 0,function*(){let n;if(t){const i=Kd({audio:t});typeof i.audio!="boolean"&&(n=i.audio)}yield this.restart(n)})}restart(t){const n=Object.create(null,{restart:{get:()=>super.restart}});return P(this,void 0,void 0,function*(){const i=yield n.restart.call(this,t);return this.checkForSilence(),i})}startMonitor(){ln()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},dh)))}setProcessor(t){return P(this,void 0,void 0,function*(){var n;const i=yield this.trackChangeLock.lock();try{if(!ni()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.internalStopProcessor());const r={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(t.name),this.logContext),yield t.init(r),this.processor=t,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(J.TrackProcessorUpdate,this.processor)}finally{i()}})}setAudioContext(t){this.audioContext=t}getSenderStats(){return P(this,void 0,void 0,function*(){var t;if(!(!((t=this.sender)===null||t===void 0)&&t.getStats))return;const n=yield this.sender.getStats();let i;return n.forEach(r=>{r.type==="outbound-rtp"&&(i={type:"audio",streamId:r.id,packetsSent:r.packetsSent,packetsLost:r.packetsLost,bytesSent:r.bytesSent,timestamp:r.timestamp,roundTripTime:r.roundTripTime,jitter:r.jitter})}),i})}checkForSilence(){return P(this,void 0,void 0,function*(){const t=yield cb(this);return t&&(this.isMuted||this.log.debug("silence detected on local audio track",this.logContext),this.emit(J.AudioSilenceDetected)),t})}}function AR(e,t,n){switch(e.kind){case"audio":return new Xc(e,t,!1,void 0,n);case"video":return new Fc(e,t,!1,n);default:throw new Ri("unsupported track type: ".concat(e.kind))}}const IR=Object.values(La),QR=Object.values(qd),NR=Object.values(Xd),DR=[La.h180,La.h360],MR=[qd.h180,qd.h360],LR=e=>[{scaleResolutionDownBy:2,fps:e.encoding.maxFramerate}].map(n=>{var i,r;return new Ke(Math.floor(e.width/n.scaleResolutionDownBy),Math.floor(e.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(e.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((i=e.encoding.maxFramerate)!==null&&i!==void 0?i:30)/((r=n.fps)!==null&&r!==void 0?r:30))))),n.fps,e.encoding.priority)}),ph=["q","h","f"];function fh(e,t,n,i){var r,s;let a=i==null?void 0:i.videoEncoding;e&&(a=i==null?void 0:i.screenShareEncoding);const o=i==null?void 0:i.simulcast,c=i==null?void 0:i.scalabilityMode,l=i==null?void 0:i.videoCodec;if(!a&&!o&&!c||!t||!n)return[{}];a||(a=UR(e,t,n,l),ye.debug("using video encoding",a));const u=a.maxFramerate,d=new Ke(t,n,a.maxBitrate,a.maxFramerate,a.priority);if(c&&qn(l)){const O=new Ab(c),m=[];if(O.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(c));const b=cn();if($a()||ni()||(b==null?void 0:b.name)==="Chrome"&&ii(b==null?void 0:b.version,"113")<0){const v=O.suffix=="h"?2:3,k=QP(b);for(let y=0;y<O.spatial;y+=1)m.push({rid:ph[2-y],maxBitrate:a.maxBitrate/Math.pow(v,y),maxFramerate:d.encoding.maxFramerate,scaleResolutionDownBy:k?Math.pow(2,y):void 0});m[0].scalabilityMode=c}else m.push({maxBitrate:a.maxBitrate,maxFramerate:d.encoding.maxFramerate,scalabilityMode:c});return d.encoding.priority&&(m[0].priority=d.encoding.priority,m[0].networkPriority=d.encoding.priority),ye.debug("using svc encoding",{encodings:m}),m}if(!o)return[a];let h=[];e?h=(r=Rb(i==null?void 0:i.screenShareSimulcastLayers))!==null&&r!==void 0?r:Pb(e,d):h=(s=Rb(i==null?void 0:i.videoSimulcastLayers))!==null&&s!==void 0?s:Pb(e,d);let p;if(h.length>0){const O=h[0];h.length>1&&([,p]=h);const m=Math.max(t,n);if(m>=960&&p)return mh(t,n,[O,p,d],u);if(m>=480)return mh(t,n,[O,d],u)}return mh(t,n,[d])}function $R(e,t,n){var i,r,s,a;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;t!==n.backupCodec.codec&&ye.warn("requested a different codec than specified as backup",{serverRequested:t,backup:n.backupCodec.codec}),n.videoCodec=t,n.videoEncoding=n.backupCodec.encoding;const o=e.mediaStreamTrack.getSettings(),c=(i=o.width)!==null&&i!==void 0?i:(r=e.dimensions)===null||r===void 0?void 0:r.width,l=(s=o.height)!==null&&s!==void 0?s:(a=e.dimensions)===null||a===void 0?void 0:a.height;return e.source===j.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),fh(e.source===j.Source.ScreenShare,c,l,n)}function UR(e,t,n,i){const r=qR(e,t,n);let{encoding:s}=r[0];const a=Math.max(t,n);for(let o=0;o<r.length;o+=1){const c=r[o];if(s=c.encoding,c.width>=a)break}if(i)switch(i){case"av1":case"h265":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.7;break;case"vp9":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.85;break}return s}function qR(e,t,n){if(e)return NR;const i=t>n?t/n:n/t;return Math.abs(i-16/9)<Math.abs(i-4/3)?IR:QR}function Pb(e,t){if(e)return LR(t);const{width:n,height:i}=t,r=n>i?n/i:i/n;return Math.abs(r-16/9)<Math.abs(r-4/3)?DR:MR}function mh(e,t,n,i){const r=[];if(n.forEach((s,a)=>{if(a>=ph.length)return;const o=Math.min(e,t),l={rid:ph[a],scaleResolutionDownBy:Math.max(1,o/Math.min(s.width,s.height)),maxBitrate:s.encoding.maxBitrate},u=i&&s.encoding.maxFramerate?Math.min(i,s.encoding.maxFramerate):s.encoding.maxFramerate;u&&(l.maxFramerate=u);const d=Fr()||a===0;s.encoding.priority&&d&&(l.priority=s.encoding.priority,l.networkPriority=s.encoding.priority),r.push(l)}),ni()&&tb()==="ios"){let s;r.forEach(o=>{s?o.maxFramerate&&o.maxFramerate>s&&(s=o.maxFramerate):s=o.maxFramerate});let a=!0;r.forEach(o=>{var c;o.maxFramerate!=s&&(a&&(a=!1,ye.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),ye.info('Setting framerate of encoding "'.concat((c=o.rid)!==null&&c!==void 0?c:"",'" to ').concat(s)),o.maxFramerate=s)})}return r}function Rb(e){if(e)return e.sort((t,n)=>{const{encoding:i}=t,{encoding:r}=n;return i.maxBitrate>r.maxBitrate?1:i.maxBitrate<r.maxBitrate?-1:i.maxBitrate===r.maxBitrate&&i.maxFramerate&&r.maxFramerate?i.maxFramerate>r.maxFramerate?1:-1:0})}class Ab{constructor(t){const n=t.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var t;return"L".concat(this.spatial,"T").concat(this.temporal).concat((t=this.suffix)!==null&&t!==void 0?t:"")}}function XR(e){return e.source===j.Source.ScreenShare||e.constraints.height&&ar(e.constraints.height)>=1080?"maintain-resolution":"balanced"}const FR=5e3;class Fc extends xb{get sender(){return this._sender}set sender(t){this._sender=t,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3?arguments[3]:void 0;super(t,j.Kind.Video,n,i,r),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>P(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(c){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:c}));return}const a=new Map(s.map(c=>[c.rid,c])),o=s.some(c=>c.qualityLimitationReason==="cpu");if(o!==this.isCpuConstrained&&(this.isCpuConstrained=o,this.isCpuConstrained&&this.emit(J.CpuConstrained)),this.prevStats){let c=0;a.forEach((l,u)=>{var d;const h=(d=this.prevStats)===null||d===void 0?void 0:d.get(u);c+=qc(l,h)}),this._currentBitrate=c}this.prevStats=a}),this.senderLock=new Kt}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(t){var n;if(this.signalClient=t,!ln())return;const i=(n=this.sender)===null||n===void 0?void 0:n.getParameters();i&&(this.encodings=i.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},dh))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(t=>{t.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const t=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return P(this,void 0,void 0,function*(){var n,i,r,s,a;yield t.pauseUpstream.call(this);try{for(var o=!0,c=xi(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;o=!0)s=l.value,o=!1,yield(a=s.sender)===null||a===void 0?void 0:a.replaceTrack(null)}catch(u){i={error:u}}finally{try{!o&&!n&&(r=c.return)&&(yield r.call(c))}finally{if(i)throw i.error}}})}resumeUpstream(){const t=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return P(this,void 0,void 0,function*(){var n,i,r,s,a;yield t.resumeUpstream.call(this);try{for(var o=!0,c=xi(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;o=!0){s=l.value,o=!1;const u=s;yield(a=u.sender)===null||a===void 0?void 0:a.replaceTrack(u.mediaStreamTrack)}}catch(u){i={error:u}}finally{try{!o&&!n&&(r=c.return)&&(yield r.call(c))}finally{if(i)throw i.error}}})}mute(){const t=Object.create(null,{mute:{get:()=>super.mute}});return P(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===j.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield t.mute.call(this),this)}finally{n()}})}unmute(){const t=Object.create(null,{unmute:{get:()=>super.unmute}});return P(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===j.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield t.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(t){super.setTrackMuted(t);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!t}getSenderStats(){return P(this,void 0,void 0,function*(){var t;if(!(!((t=this.sender)===null||t===void 0)&&t.getStats))return[];const n=[],i=yield this.sender.getStats();return i.forEach(r=>{var s;if(r.type==="outbound-rtp"){const a={type:"video",streamId:r.id,frameHeight:r.frameHeight,frameWidth:r.frameWidth,framesPerSecond:r.framesPerSecond,framesSent:r.framesSent,firCount:r.firCount,pliCount:r.pliCount,nackCount:r.nackCount,packetsSent:r.packetsSent,bytesSent:r.bytesSent,qualityLimitationReason:r.qualityLimitationReason,qualityLimitationDurations:r.qualityLimitationDurations,qualityLimitationResolutionChanges:r.qualityLimitationResolutionChanges,rid:(s=r.rid)!==null&&s!==void 0?s:r.id,retransmittedPacketsSent:r.retransmittedPacketsSent,targetBitrate:r.targetBitrate,timestamp:r.timestamp},o=i.get(r.remoteId);o&&(a.jitter=o.jitter,a.packetsLost=o.packetsLost,a.roundTripTime=o.roundTripTime),n.push(a)}}),n.sort((r,s)=>{var a,o;return((a=s.frameWidth)!==null&&a!==void 0?a:0)-((o=r.frameWidth)!==null&&o!==void 0?o:0)}),n})}setPublishingQuality(t){const n=[];for(let i=On.LOW;i<=On.HIGH;i+=1)n.push(new yd({quality:i,enabled:i<=t}));this.log.debug("setting publishing quality. max quality ".concat(t),this.logContext),this.setPublishingLayers(qn(this.codec),n)}restartTrack(t){return P(this,void 0,void 0,function*(){var n,i,r,s,a;let o;if(t){const d=Kd({video:t});typeof d.video!="boolean"&&(o=d.video)}yield this.restart(o),this.isCpuConstrained=!1;try{for(var c=!0,l=xi(this.simulcastCodecs.values()),u;u=yield l.next(),n=u.done,!n;c=!0){s=u.value,c=!1;const d=s;d.sender&&((a=d.sender.transport)===null||a===void 0?void 0:a.state)!=="closed"&&(d.mediaStreamTrack=this.mediaStreamTrack.clone(),yield d.sender.replaceTrack(d.mediaStreamTrack))}}catch(d){i={error:d}}finally{try{!c&&!n&&(r=l.return)&&(yield r.call(l))}finally{if(i)throw i.error}}})}setProcessor(t){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return P(this,arguments,void 0,function(i){var r=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var a,o,c,l,u,d;if(yield n.setProcessor.call(r,i,s),!((u=r.processor)===null||u===void 0)&&u.processedTrack)try{for(var h=!0,p=xi(r.simulcastCodecs.values()),O;O=yield p.next(),a=O.done,!a;h=!0)l=O.value,h=!1,yield(d=l.sender)===null||d===void 0?void 0:d.replaceTrack(r.processor.processedTrack)}catch(m){o={error:m}}finally{try{!h&&!a&&(c=p.return)&&(yield c.call(p))}finally{if(o)throw o.error}}})()})}setDegradationPreference(t){return P(this,void 0,void 0,function*(){if(this.degradationPreference=t,this.sender)try{this.log.debug("setting degradationPreference to ".concat(t),this.logContext);const n=this.sender.getParameters();n.degradationPreference=t,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(t,n){if(this.simulcastCodecs.has(t)){this.log.error("".concat(t," already added, skipping adding simulcast codec"),this.logContext);return}const i={codec:t,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(t,i),i}setSimulcastTrackSender(t,n){const i=this.simulcastCodecs.get(t);i&&(i.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},FR))}setPublishingCodecs(t){return P(this,void 0,void 0,function*(){var n,i,r,s,a,o,c;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:t,currentCodec:this.codec})),!this.codec&&t.length>0)return yield this.setPublishingLayers(qn(t[0].codec),t[0].qualities),[];this.subscribedCodecs=t;const l=[];try{for(n=!0,i=xi(t);r=yield i.next(),s=r.done,!s;n=!0){c=r.value,n=!1;const u=c;if(!this.codec||this.codec===u.codec)yield this.setPublishingLayers(qn(u.codec),u.qualities);else{const d=this.simulcastCodecs.get(u.codec);if(this.log.debug("try setPublishingCodec for ".concat(u.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:d})),!d||!d.sender){for(const h of u.qualities)if(h.enabled){l.push(u.codec);break}}else d.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(u.codec),this.logContext),yield Ib(d.sender,d.encodings,u.qualities,this.senderLock,qn(u.codec),this.log,this.logContext))}}}catch(u){a={error:u}}finally{try{!n&&!s&&(o=i.return)&&(yield o.call(i))}finally{if(a)throw a.error}}return l})}setPublishingLayers(t,n){return P(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield Ib(this.sender,this.encodings,n,this.senderLock,t,this.log,this.logContext))})}prioritizePerformance(){return P(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const t=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((i,r)=>{var s;return Object.assign(Object.assign({},i),{active:r===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((s=this.mediaStreamTrack.getSettings().height)!==null&&s!==void 0?s:360)/360)),scalabilityMode:r===0&&qn(this.codec)?"L1T3":void 0,maxFramerate:r===0?15:0,maxBitrate:r===0?i.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{t()}})}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return P(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),Jv()&&this.isInBackground&&this.source===j.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function Ib(e,t,n,i,r,s,a){return P(this,void 0,void 0,function*(){const o=yield i.lock();s.debug("setPublishingLayersForSender",Object.assign(Object.assign({},a),{sender:e,qualities:n,senderEncodings:t}));try{const c=e.getParameters(),{encodings:l}=c;if(!l)return;if(l.length!==t.length){s.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},a),{encodings:l,senderEncodings:t}));return}let u=!1;!1&&l[0].scalabilityMode||(r&&n.some(p=>p.enabled)&&n.forEach(p=>p.enabled=!0),l.forEach((h,p)=>{var O;let m=(O=h.rid)!==null&&O!==void 0?O:"";m===""&&(m="q");const b=Qb(m),v=n.find(k=>k.quality===b);v&&h.active!==v.enabled&&(u=!0,h.active=v.enabled,s.debug("setting layer ".concat(v.quality," to ").concat(h.active?"enabled":"disabled"),a),Fr()&&(v.enabled?(h.scaleResolutionDownBy=t[p].scaleResolutionDownBy,h.maxBitrate=t[p].maxBitrate,h.maxFrameRate=t[p].maxFrameRate):(h.scaleResolutionDownBy=4,h.maxBitrate=10,h.maxFrameRate=2)))})),u&&(c.encodings=l,s.debug("setting encodings",Object.assign(Object.assign({},a),{encodings:c.encodings})),yield e.setParameters(c))}finally{o()}})}function Qb(e){switch(e){case"f":return On.HIGH;case"h":return On.MEDIUM;case"q":return On.LOW;default:return On.HIGH}}function Nb(e,t,n,i){if(!n)return[new nr({quality:On.HIGH,width:e,height:t,bitrate:0,ssrc:0})];if(i){const r=n[0].scalabilityMode,s=new Ab(r),a=[],o=s.suffix=="h"?1.5:2,c=s.suffix=="h"?2:3;for(let l=0;l<s.spatial;l+=1)a.push(new nr({quality:Math.min(On.HIGH,s.spatial-1)-l,width:Math.ceil(e/Math.pow(o,l)),height:Math.ceil(t/Math.pow(o,l)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(c,l)):0,ssrc:0}));return a}return n.map(r=>{var s,a,o;const c=(s=r.scaleResolutionDownBy)!==null&&s!==void 0?s:1;let l=Qb((a=r.rid)!==null&&a!==void 0?a:"");return new nr({quality:l,width:Math.ceil(e/c),height:Math.ceil(t/c),bitrate:(o=r.maxBitrate)!==null&&o!==void 0?o:0,ssrc:0})})}const Db="_lossy",Mb="_reliable",zR=2*1e3,Oh="leave-reconnect",BR=3e4;var Pn;(function(e){e[e.New=0]="New",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected",e[e.Reconnecting=3]="Reconnecting",e[e.Closed=4]="Closed"})(Pn||(Pn={}));class ZR extends ti.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(t){var n;super(),this.options=t,this.rtcConfig={},this.peerConnectionTimeout=lh.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=Pn.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=ye,this.reliableDataSequence=1,this.reliableMessageBuffer=new mb,this.reliableReceivedState=new pR(BR),this.midToTrackId={},this.isWaitingForNetworkReconnect=!1,this.handleDataChannel=i=>P(this,[i],void 0,function(r){var s=this;let{channel:a}=r;return(function*(){if(a){if(a.label===Mb)s.reliableDCSub=a;else if(a.label===Db)s.lossyDCSub=a;else return;s.log.debug("on data channel ".concat(a.id,", ").concat(a.label),s.logContext),a.onmessage=s.handleDataMessage}})()}),this.handleDataMessage=i=>P(this,void 0,void 0,function*(){var r,s,a,o,c;const l=yield this.dataProcessLock.lock();try{let u;if(i.data instanceof ArrayBuffer)u=i.data;else if(i.data instanceof Blob)u=yield i.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:i.data}));return}const d=Jt.fromBinary(new Uint8Array(u));if(d.sequence>0&&d.participantSid!==""){const h=this.reliableReceivedState.get(d.participantSid);if(h&&d.sequence<=h)return;this.reliableReceivedState.set(d.participantSid,d.sequence)}if(((r=d.value)===null||r===void 0?void 0:r.case)==="speaker")this.emit(te.ActiveSpeakersUpdate,d.value.value.speakers);else if(((s=d.value)===null||s===void 0?void 0:s.case)==="encryptedPacket"){if(!this.e2eeManager){this.log.error("Received encrypted packet but E2EE not set up",this.logContext);return}const h=yield(a=this.e2eeManager)===null||a===void 0?void 0:a.handleEncryptedData(d.value.value.encryptedValue,d.value.value.iv,d.participantIdentity,d.value.value.keyIndex),p=Ig.fromBinary(h.payload),O=new Jt({value:p.value,participantIdentity:d.participantIdentity,participantSid:d.participantSid});((o=O.value)===null||o===void 0?void 0:o.case)==="user"&&Lb(O,O.value.value),this.emit(te.DataPacketReceived,O,d.value.value.encryptionType)}else((c=d.value)===null||c===void 0?void 0:c.case)==="user"&&Lb(d,d.value.value),this.emit(te.DataPacketReceived,d,Pt.NONE)}finally{l()}}),this.handleDataError=i=>{const s=i.currentTarget.maxRetransmits===0?"lossy":"reliable";if(i instanceof ErrorEvent&&i.error){const{error:a}=i.error;this.log.error("DataChannel error on ".concat(s,": ").concat(i.message),Object.assign(Object.assign({},this.logContext),{error:a}))}else this.log.error("Unknown DataChannel error on ".concat(s),Object.assign(Object.assign({},this.logContext),{event:i}))},this.handleBufferedAmountLow=i=>{const s=i.currentTarget.maxRetransmits===0?Pe.LOSSY:Pe.RELIABLE;this.updateAndEmitDCBufferStatus(s)},this.handleDisconnect=(i,r)=>{if(this._isClosed)return;this.log.warn("".concat(i," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const s=c=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(c,"ms. giving up"),this.logContext),this.emit(te.Disconnected),this.close()},a=Date.now()-this.reconnectStart;let o=this.getNextRetryDelay({elapsedMs:a,retryCount:this.reconnectAttempts});if(o===null){s(a);return}i===Oh&&(o=0),this.log.debug("reconnecting in ".concat(o,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=Ut.setTimeout(()=>this.attemptReconnect(r).finally(()=>this.reconnectTimeout=void 0),o)},this.waitForRestarted=()=>new Promise((i,r)=>{this.pcState===Pn.Connected&&i();const s=()=>{this.off(te.Disconnected,a),i()},a=()=>{this.off(te.Restarted,s),r()};this.once(te.Restarted,s),this.once(te.Disconnected,a)}),this.updateAndEmitDCBufferStatus=i=>{if(i===Pe.RELIABLE){const s=this.dataChannelForKind(i);s&&this.reliableMessageBuffer.alignBufferedAmount(s.bufferedAmount)}const r=this.isBufferStatusLow(i);typeof r<"u"&&r!==this.dcBufferStatus.get(i)&&(this.dcBufferStatus.set(i,r),this.emit(te.DCBufferStatusChanged,r,i))},this.isBufferStatusLow=i=>{const r=this.dataChannelForKind(i);if(r)return r.bufferedAmount<=r.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>P(this,void 0,void 0,function*(){!this.url||!(yield fetch(qa(this.url),{method:"HEAD"}).then(r=>r.ok).catch(()=>!1))||(this.log.info("detected network reconnected"),(this.client.currentState===nt.RECONNECTING||this.isWaitingForNetworkReconnect&&this.client.currentState===nt.CONNECTED)&&(this.clearReconnectTimeout(),this.attemptReconnect(Ur.RR_SIGNAL_DISCONNECTED),this.isWaitingForNetworkReconnect=!1))}),this.handleBrowserOffline=()=>P(this,void 0,void 0,function*(){if(this.url)try{yield Promise.race([fetch(qa(this.url),{method:"HEAD"}),qt(4e3).then(()=>Promise.reject())])}catch{window.navigator.onLine===!1&&(this.log.info("detected network interruption"),this.isWaitingForNetworkReconnect=!0)}}),this.log=Ci((n=t.loggerName)!==null&&n!==void 0?n:Un.Engine),this.loggerOptions={loggerName:t.loggerName,loggerContextCb:()=>this.logContext},this.client=new th(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.closingLock=new Kt,this.dataProcessLock=new Kt,this.dcBufferStatus=new Map([[Pe.LOSSY,!0],[Pe.RELIABLE,!0]]),this.client.onParticipantUpdate=i=>this.emit(te.ParticipantUpdate,i),this.client.onConnectionQuality=i=>this.emit(te.ConnectionQualityUpdate,i),this.client.onRoomUpdate=i=>this.emit(te.RoomUpdate,i),this.client.onSubscriptionError=i=>this.emit(te.SubscriptionError,i),this.client.onSubscriptionPermissionUpdate=i=>this.emit(te.SubscriptionPermissionUpdate,i),this.client.onSpeakersChanged=i=>this.emit(te.SpeakersChanged,i),this.client.onStreamStateUpdate=i=>this.emit(te.StreamStateChanged,i),this.client.onRequestResponse=i=>this.emit(te.SignalRequestResponse,i)}get logContext(){var t,n,i,r,s,a;return{room:(n=(t=this.latestJoinResponse)===null||t===void 0?void 0:t.room)===null||n===void 0?void 0:n.name,roomID:(r=(i=this.latestJoinResponse)===null||i===void 0?void 0:i.room)===null||r===void 0?void 0:r.sid,participant:(a=(s=this.latestJoinResponse)===null||s===void 0?void 0:s.participant)===null||a===void 0?void 0:a.identity,pID:this.participantSid}}join(t,n,i,r){return P(this,void 0,void 0,function*(){this.url=t,this.token=n,this.signalOpts=i,this.maxJoinAttempts=i.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const s=yield this.client.join(t,n,i,r);return this._isClosed=!1,this.latestJoinResponse=s,this.subscriberPrimary=s.subscriberPrimary,this.pcManager||(yield this.configure(s)),(!this.subscriberPrimary||s.fastPublish)&&this.negotiate().catch(a=>{ye.error(a,this.logContext)}),this.registerOnLineListener(),this.clientConfiguration=s.clientConfiguration,this.emit(te.SignalConnected,s),s}catch(s){if(s instanceof Ne&&s.reason===ve.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(t,n,i,r);throw s}})}close(){return P(this,void 0,void 0,function*(){const t=yield this.closingLock.lock();if(this.isClosed){t();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(te.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{t()}})}cleanupPeerConnections(){return P(this,void 0,void 0,function*(){var t;yield(t=this.pcManager)===null||t===void 0?void 0:t.close(),this.pcManager=void 0;const n=i=>{i&&(i.close(),i.onbufferedamountlow=null,i.onclose=null,i.onclosing=null,i.onerror=null,i.onmessage=null,i.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new mb,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupClient(){return P(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(t){if(this.pendingTrackResolvers[t.cid])throw new Ri("a track with the same ID has already been published");return new Promise((n,i)=>{const r=setTimeout(()=>{delete this.pendingTrackResolvers[t.cid],i(new Ne("publication of local track timed out, no response from server",ve.Timeout))},1e4);this.pendingTrackResolvers[t.cid]={resolve:s=>{clearTimeout(r),n(s)},reject:()=>{clearTimeout(r),i(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(t)})}removeTrack(t){if(t.track&&this.pendingTrackResolvers[t.track.id]){const{reject:n}=this.pendingTrackResolvers[t.track.id];n&&n(),delete this.pendingTrackResolvers[t.track.id]}try{return this.pcManager.removeTrack(t),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(t,n){this.client.sendMuteTrack(t,n)}get dataSubscriberReadyState(){var t;return(t=this.reliableDCSub)===null||t===void 0?void 0:t.readyState}getConnectedServerAddress(){return P(this,void 0,void 0,function*(){var t;return(t=this.pcManager)===null||t===void 0?void 0:t.getConnectedAddress()})}setRegionUrlProvider(t){this.regionUrlProvider=t}configure(t){return P(this,void 0,void 0,function*(){var n,i;if(this.pcManager&&this.pcManager.currentState!==Ot.NEW)return;this.participantSid=(n=t.participant)===null||n===void 0?void 0:n.sid;const r=this.makeRTCConfiguration(t);this.pcManager=new yR(r,this.options.singlePeerConnection?"publisher-only":t.subscriberPrimary?"subscriber-primary":"publisher-primary",this.loggerOptions),this.emit(te.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(s,a)=>{this.client.sendIceCandidate(s,a)},this.pcManager.onPublisherOffer=(s,a)=>{this.client.sendOffer(s,a)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(s,a,o)=>P(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(s),this.logContext),["closed","disconnected","failed"].includes(a)&&(this.publisherConnectionPromise=void 0),s===Ot.CONNECTED){const u=this.pcState===Pn.New;this.pcState=Pn.Connected,u&&this.emit(te.Connected,t)}else s===Ot.FAILED&&(this.pcState===Pn.Connected||this.pcState===Pn.Reconnecting)&&(this.pcState=Pn.Disconnected,this.handleDisconnect("peerconnection failed",o==="failed"?Ur.RR_SUBSCRIBER_FAILED:Ur.RR_PUBLISHER_FAILED));const c=this.client.isDisconnected||this.client.currentState===nt.RECONNECTING,l=[Ot.FAILED,Ot.CLOSING,Ot.CLOSED].includes(s);c&&l&&!this._isClosed&&this.emit(te.Offline)}),this.pcManager.onTrack=s=>{s.streams.length!==0&&this.emit(te.MediaTrackAdded,s.track,s.streams[0],s.receiver)},jR((i=t.serverInfo)===null||i===void 0?void 0:i.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(t,n,i)=>P(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:t.type,sdp:t.sdp,midToTrackId:i})),this.midToTrackId=i,yield this.pcManager.setPublisherAnswer(t,n))}),this.client.onTrickle=(t,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:t,target:n})),this.pcManager.addIceCandidate(t,n))},this.client.onOffer=(t,n,i)=>P(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;this.midToTrackId=i;const r=yield this.pcManager.createSubscriberAnswerFromOffer(t,n);r&&this.client.sendAnswer(r,n)}),this.client.onLocalTrackPublished=t=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:t.cid,track:(n=t.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[t.cid]){this.log.error("missing track resolver for ".concat(t.cid),Object.assign(Object.assign({},this.logContext),{cid:t.cid}));return}const{resolve:i}=this.pendingTrackResolvers[t.cid];delete this.pendingTrackResolvers[t.cid],i(t.track)},this.client.onLocalTrackUnpublished=t=>{this.emit(te.LocalTrackUnpublished,t)},this.client.onLocalTrackSubscribed=t=>{this.emit(te.LocalTrackSubscribed,t)},this.client.onTokenRefresh=t=>{var n;this.token=t,(n=this.regionUrlProvider)===null||n===void 0||n.updateToken(t)},this.client.onRemoteMuteChanged=(t,n)=>{this.emit(te.RemoteMute,t,n)},this.client.onSubscribedQualityUpdate=t=>{this.emit(te.SubscribedQualityUpdate,t)},this.client.onRoomMoved=t=>{var n;this.participantSid=(n=t.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=t.room),this.emit(te.RoomMoved,t)},this.client.onMediaSectionsRequirement=t=>{var n,i;const r={direction:"recvonly"};for(let s=0;s<t.numAudios;s++)(n=this.pcManager)===null||n===void 0||n.addPublisherTransceiverOfKind("audio",r);for(let s=0;s<t.numVideos;s++)(i=this.pcManager)===null||i===void 0||i.addPublisherTransceiverOfKind("video",r);this.negotiate()},this.client.onClose=()=>{this.handleDisconnect("signal",Ur.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=t=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:t==null?void 0:t.reason})),t.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions({updatedAtInMs:Date.now(),maxAgeInMs:Eb,regionSettings:t.regions})),t.action){case Cs.DISCONNECT:this.emit(te.Disconnected,t==null?void 0:t.reason),this.close();break;case Cs.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(Oh);break;case Cs.RESUME:this.handleDisconnect(Oh)}}}makeRTCConfiguration(t){var n;const i=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),i.encodedInsertableStreams=!0),t.iceServers&&!i.iceServers){const r=[];t.iceServers.forEach(s=>{const a={urls:s.urls};s.username&&(a.username=s.username),s.credential&&(a.credential=s.credential),r.push(a)}),i.iceServers=r}return t.clientConfiguration&&t.clientConfiguration.forceRelay===Ra.ENABLED&&(i.iceTransportPolicy="relay"),i.sdpSemantics="unified-plan",i.continualGatheringPolicy="gather_continually",i}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(Db,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(Mb,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(t,n,i){return P(this,void 0,void 0,function*(){if(Fd())return yield this.createTransceiverRTCRtpSender(t,n,i);if(zd())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(t.mediaStreamTrack);throw new Rt("Required webRTC APIs not supported on this device")})}createSimulcastSender(t,n,i,r){return P(this,void 0,void 0,function*(){if(Fd())return this.createSimulcastTransceiverSender(t,n,i,r);if(zd())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(t.mediaStreamTrack);throw new Rt("Cannot stream on this device")})}createTransceiverRTCRtpSender(t,n,i){return P(this,void 0,void 0,function*(){if(!this.pcManager)throw new Rt("publisher is closed");const r=[];t.mediaStream&&r.push(t.mediaStream),or(t)&&(t.codec=n.videoCodec);const s={direction:"sendonly",streams:r};return i&&(s.sendEncodings=i),(yield this.pcManager.addPublisherTransceiver(t.mediaStreamTrack,s)).sender})}createSimulcastTransceiverSender(t,n,i,r){return P(this,void 0,void 0,function*(){if(!this.pcManager)throw new Rt("publisher is closed");const s={direction:"sendonly"};r&&(s.sendEncodings=r);const a=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,s);if(i.videoCodec)return t.setSimulcastTrackSender(i.videoCodec,a.sender),a.sender})}createRTCRtpSender(t){return P(this,void 0,void 0,function*(){if(!this.pcManager)throw new Rt("publisher is closed");return this.pcManager.addPublisherTrack(t)})}attemptReconnect(t){return P(this,void 0,void 0,function*(){var n,i,r;if(!this._isClosed){if(this.attemptingReconnect){ye.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===Ra.DISABLED||((r=(i=this.pcManager)===null||i===void 0?void 0:i.currentState)!==null&&r!==void 0?r:Ot.NEW)===Ot.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(t),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(s){this.reconnectAttempts+=1;let a=!0;s instanceof Rt?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:s})),a=!1):s instanceof Ds||(this.fullReconnectOnNext=!0),a?this.handleDisconnect("reconnect",Ur.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(te.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(t){try{return this.reconnectPolicy.nextRetryDelayInMs(t)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(t){return P(this,void 0,void 0,function*(){var n,i,r;try{if(!this.url||!this.token)throw new Rt("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(te.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let s;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new Ds;s=yield this.join(t??this.url,this.token,this.signalOpts)}catch(a){throw a instanceof Ne&&a.reason===ve.NotAllowed?new Rt("could not reconnect, token might be expired"):new Ds}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(te.SignalRestarted,s),yield this.waitForPCReconnected(),this.client.currentState!==nt.CONNECTED)throw new Ds("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(te.Restarted)}catch(s){const a=yield(i=this.regionUrlProvider)===null||i===void 0?void 0:i.getNextBestRegionUrl();if(a){yield this.restartConnection(a);return}else throw(r=this.regionUrlProvider)===null||r===void 0||r.resetAttempts(),s}})}resumeConnection(t){return P(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new Rt("could not reconnect, url or token not saved");if(!this.pcManager)throw new Rt("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(te.Resuming);let i;try{this.setupSignalClientCallbacks(),i=yield this.client.reconnect(this.url,this.token,this.participantSid,t)}catch(r){let s="";throw r instanceof Error&&(s=r.message,this.log.error(r.message,Object.assign(Object.assign({},this.logContext),{error:r}))),r instanceof Ne&&r.reason===ve.NotAllowed?new Rt("could not reconnect, token might be expired"):r instanceof Ne&&r.reason===ve.LeaveRequest?r:new Ds(s)}if(this.emit(te.SignalResumed),i){const r=this.makeRTCConfiguration(i);this.pcManager.updateConfiguration(r),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=i.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==nt.CONNECTED)throw new Ds("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),i!=null&&i.lastMessageSeq&&this.resendReliableMessagesForResume(i.lastMessageSeq),this.emit(te.Resumed)})}waitForPCInitialConnection(t,n){return P(this,void 0,void 0,function*(){if(!this.pcManager)throw new Rt("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,t)})}waitForPCReconnected(){return P(this,void 0,void 0,function*(){this.pcState=Pn.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield qt(zR),!this.pcManager)throw new Rt("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=Pn.Connected}catch(t){throw this.pcState=Pn.Disconnected,new Ne("could not establish PC connection, ".concat(t.message),ve.InternalError)}})}publishRpcResponse(t,n,i,r){return P(this,void 0,void 0,function*(){const s=new Jt({destinationIdentities:[t],kind:Pe.RELIABLE,value:{case:"rpcResponse",value:new md({requestId:n,value:r?{case:"error",value:r.toProto()}:{case:"payload",value:i??""}})}});yield this.sendDataPacket(s,Pe.RELIABLE)})}publishRpcAck(t,n){return P(this,void 0,void 0,function*(){const i=new Jt({destinationIdentities:[t],kind:Pe.RELIABLE,value:{case:"rpcAck",value:new fd({requestId:n})}});yield this.sendDataPacket(i,Pe.RELIABLE)})}sendDataPacket(t,n){return P(this,void 0,void 0,function*(){if(yield this.ensurePublisherConnected(n),this.e2eeManager&&this.e2eeManager.isDataChannelEncryptionEnabled){const s=fP(t);if(s){const a=yield this.e2eeManager.encryptData(s.toBinary());t.value={case:"encryptedPacket",value:new Ag({encryptedValue:a.payload,iv:a.iv,keyIndex:a.keyIndex})}}}n===Pe.RELIABLE&&(t.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const i=t.toBinary();yield this.waitForBufferStatusLow(n);const r=this.dataChannelForKind(n);if(r){if(n===Pe.RELIABLE&&this.reliableMessageBuffer.push({data:i,sequence:t.sequence}),this.attemptingReconnect)return;r.send(i)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(t){return P(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(Pe.RELIABLE);const n=this.dataChannelForKind(Pe.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(t),this.reliableMessageBuffer.getAll().forEach(i=>{n.send(i.data)})),this.updateAndEmitDCBufferStatus(Pe.RELIABLE)})}waitForBufferStatusLow(t){return new Promise((n,i)=>P(this,void 0,void 0,function*(){if(this.isBufferStatusLow(t))n();else{const r=()=>i("Engine closed");for(this.once(te.Closing,r);!this.dcBufferStatus.get(t);)yield qt(10);this.off(te.Closing,r),n()}}))}ensureDataTransportConnected(t){return P(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return(function*(){var s;if(!i.pcManager)throw new Rt("PC manager is closed");const a=r?i.pcManager.subscriber:i.pcManager.publisher,o=r?"Subscriber":"Publisher";if(!a)throw new Ne("".concat(o," connection not set"),ve.InternalError);let c=!1;!r&&!i.dataChannelForKind(n,r)&&(i.createDataChannels(),c=!0),!c&&!r&&!i.pcManager.publisher.isICEConnected&&i.pcManager.publisher.getICEConnectionState()!=="checking"&&(c=!0),c&&i.negotiate().catch(d=>{ye.error(d,i.logContext)});const l=i.dataChannelForKind(n,r);if((l==null?void 0:l.readyState)==="open")return;const u=new Date().getTime()+i.peerConnectionTimeout;for(;new Date().getTime()<u;){if(a.isICEConnected&&((s=i.dataChannelForKind(n,r))===null||s===void 0?void 0:s.readyState)==="open")return;yield qt(50)}throw new Ne("could not establish ".concat(o," connection, state: ").concat(a.getICEConnectionState()),ve.InternalError)})()})}ensurePublisherConnected(t){return P(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(t,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==Ot.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return P(this,void 0,void 0,function*(){return new Promise((t,n)=>P(this,void 0,void 0,function*(){if(!this.pcManager){n(new Md("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const i=new AbortController,r=()=>{i.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),t()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(te.Closing,r),this.pcManager.publisher.once(Ns.RTPVideoPayloadTypes,s=>{const a=new Map;s.forEach(o=>{const c=o.codec.toLowerCase();$P(c)&&a.set(o.payload,c)}),this.emit(te.RTPVideoMapUpdate,a)});try{yield this.pcManager.negotiate(i),t()}catch(s){s instanceof Md&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",Ur.RR_UNKNOWN),n(s)}finally{this.off(te.Closing,r)}}))})}dataChannelForKind(t,n){if(n){if(t===Pe.LOSSY)return this.lossyDCSub;if(t===Pe.RELIABLE)return this.reliableDCSub}else{if(t===Pe.LOSSY)return this.lossyDC;if(t===Pe.RELIABLE)return this.reliableDC}}sendSyncState(t,n){var i,r,s,a;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const o=this.pcManager.publisher.getLocalDescription(),c=this.pcManager.publisher.getRemoteDescription(),l=(i=this.pcManager.subscriber)===null||i===void 0?void 0:i.getRemoteDescription(),u=(r=this.pcManager.subscriber)===null||r===void 0?void 0:r.getLocalDescription(),d=(a=(s=this.signalOpts)===null||s===void 0?void 0:s.autoSubscribe)!==null&&a!==void 0?a:!0,h=new Array,p=new Array;t.forEach(O=>{O.isDesired!==d&&h.push(O.trackSid),O.isEnabled||p.push(O.trackSid)}),this.client.sendSyncState(new Sd({answer:this.options.singlePeerConnection?c?Qs({sdp:c.sdp,type:c.type}):void 0:u?Qs({sdp:u.sdp,type:u.type}):void 0,offer:this.options.singlePeerConnection?o?Qs({sdp:o.sdp,type:o.type}):void 0:l?Qs({sdp:l.sdp,type:l.type}):void 0,subscription:new wc({trackSids:h,subscribe:!d,participantTracks:[]}),publishTracks:WP(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:p,datachannelReceiveStates:this.reliableReceivedState.map((O,m)=>new Jg({publisherSid:m,lastSeq:O}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const t=[],n=(i,r)=>{(i==null?void 0:i.id)!==void 0&&i.id!==null&&t.push(new ev({label:i.label,id:i.id,target:r}))};return n(this.dataChannelForKind(Pe.LOSSY),$n.PUBLISHER),n(this.dataChannelForKind(Pe.RELIABLE),$n.PUBLISHER),n(this.dataChannelForKind(Pe.LOSSY,!0),$n.SUBSCRIBER),n(this.dataChannelForKind(Pe.RELIABLE,!0),$n.SUBSCRIBER),t}clearReconnectTimeout(){this.reconnectTimeout&&Ut.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){ln()&&(window.addEventListener("online",this.handleBrowserOnLine),window.addEventListener("offline",this.handleBrowserOffline))}deregisterOnLineListener(){ln()&&(window.removeEventListener("online",this.handleBrowserOnLine),window.removeEventListener("offline",this.handleBrowserOffline))}getTrackIdForReceiver(t){var n;const i=(n=this.pcManager)===null||n===void 0?void 0:n.getMidForReceiver(t);if(i){const r=Object.entries(this.midToTrackId).find(s=>{let[a]=s;return a===i});if(r)return r[1]}}}class Ds extends Error{}function jR(e){return e!==void 0&&e>13}function Lb(e,t){const n=e.participantIdentity?e.participantIdentity:t.participantIdentity;e.participantIdentity=n,t.participantIdentity=n;const i=e.destinationIdentities.length!==0?e.destinationIdentities:t.destinationIdentities;e.destinationIdentities=i,t.destinationIdentities=i}class $b{get info(){return this._info}validateBytesReceived(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(typeof this.totalByteSize!="number"||this.totalByteSize===0)){if(t&&this.bytesReceived<this.totalByteSize)throw new Cn("Not enough chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, only received ").concat(this.bytesReceived," bytes"),en.Incomplete);if(this.bytesReceived>this.totalByteSize)throw new Cn("Extra chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, received ").concat(this.bytesReceived," bytes"),en.LengthExceeded)}}constructor(t,n,i,r){this.reader=n,this.totalByteSize=i,this._info=t,this.bytesReceived=0,this.outOfBandFailureRejectingFuture=r}}class VR extends $b{handleChunkReceived(t){var n;this.bytesReceived+=t.content.byteLength,this.validateBytesReceived();const i=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,i)}[Symbol.asyncIterator](){const t=this.reader.getReader();let n=new xn,i=null,r=null;if(this.signal){const a=this.signal;r=()=>{var o;(o=n.reject)===null||o===void 0||o.call(n,a.reason)},a.addEventListener("abort",r),i=a}const s=()=>{t.releaseLock(),i&&r&&i.removeEventListener("abort",r),this.signal=void 0};return{next:()=>P(this,void 0,void 0,function*(){var a,o;try{const{done:c,value:l}=yield Promise.race([t.read(),n.promise,(o=(a=this.outOfBandFailureRejectingFuture)===null||a===void 0?void 0:a.promise)!==null&&o!==void 0?o:new Promise(()=>{})]);return c?(this.validateBytesReceived(!0),{done:!0,value:void 0}):(this.handleChunkReceived(l),{done:!1,value:l.content})}catch(c){throw s(),c}}),return(){return P(this,void 0,void 0,function*(){return s(),{done:!0,value:void 0}})}}}withAbortSignal(t){return this.signal=t,this}readAll(){return P(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){var i,r,s,a;let o=new Set;const c=n.signal?t.withAbortSignal(n.signal):t;try{for(var l=!0,u=xi(c),d;d=yield u.next(),i=d.done,!i;l=!0){a=d.value,l=!1;const h=a;o.add(h)}}catch(h){r={error:h}}finally{try{!l&&!i&&(s=u.return)&&(yield s.call(u))}finally{if(r)throw r.error}}return Array.from(o)})()})}}class WR extends $b{constructor(t,n,i,r){super(t,n,i,r),this.receivedChunks=new Map}handleChunkReceived(t){var n;const i=Uc(t.chunkIndex),r=this.receivedChunks.get(i);if(r&&r.version>t.version)return;this.receivedChunks.set(i,t),this.bytesReceived+=t.content.byteLength,this.validateBytesReceived();const s=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,s)}[Symbol.asyncIterator](){const t=this.reader.getReader(),n=new TextDecoder("utf-8",{fatal:!0});let i=new xn,r=null,s=null;if(this.signal){const o=this.signal;s=()=>{var c;(c=i.reject)===null||c===void 0||c.call(i,o.reason)},o.addEventListener("abort",s),r=o}const a=()=>{t.releaseLock(),r&&s&&r.removeEventListener("abort",s),this.signal=void 0};return{next:()=>P(this,void 0,void 0,function*(){var o,c;try{const{done:l,value:u}=yield Promise.race([t.read(),i.promise,(c=(o=this.outOfBandFailureRejectingFuture)===null||o===void 0?void 0:o.promise)!==null&&c!==void 0?c:new Promise(()=>{})]);if(l)return this.validateBytesReceived(!0),{done:!0,value:void 0};{this.handleChunkReceived(u);let d;try{d=n.decode(u.content)}catch(h){throw new Cn("Cannot decode datastream chunk ".concat(u.chunkIndex," as text: ").concat(h),en.DecodeFailed)}return{done:!1,value:d}}}catch(l){throw a(),l}}),return(){return P(this,void 0,void 0,function*(){return a(),{done:!0,value:void 0}})}}}withAbortSignal(t){return this.signal=t,this}readAll(){return P(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){var i,r,s,a;let o="";const c=n.signal?t.withAbortSignal(n.signal):t;try{for(var l=!0,u=xi(c),d;d=yield u.next(),i=d.done,!i;l=!0)a=d.value,l=!1,o+=a}catch(h){r={error:h}}finally{try{!l&&!i&&(s=u.return)&&(yield s.call(u))}finally{if(r)throw r.error}}return o})()})}}class GR{constructor(){this.log=ye,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map}registerTextStreamHandler(t,n){if(this.textStreamHandlers.has(t))throw new Cn('A text stream handler for topic "'.concat(t,'" has already been set.'),en.HandlerAlreadyRegistered);this.textStreamHandlers.set(t,n)}unregisterTextStreamHandler(t){this.textStreamHandlers.delete(t)}registerByteStreamHandler(t,n){if(this.byteStreamHandlers.has(t))throw new Cn('A byte stream handler for topic "'.concat(t,'" has already been set.'),en.HandlerAlreadyRegistered);this.byteStreamHandlers.set(t,n)}unregisterByteStreamHandler(t){this.byteStreamHandlers.delete(t)}clearControllers(){this.byteStreamControllers.clear(),this.textStreamControllers.clear()}validateParticipantHasNoActiveDataStreams(t){var n,i,r,s;const a=Array.from(this.textStreamControllers.entries()).filter(c=>c[1].sendingParticipantIdentity===t),o=Array.from(this.byteStreamControllers.entries()).filter(c=>c[1].sendingParticipantIdentity===t);if(a.length>0||o.length>0){const c=new Cn("Participant ".concat(t," unexpectedly disconnected in the middle of sending data"),en.AbnormalEnd);for(const[l,u]of o)(i=(n=u.outOfBandFailureRejectingFuture).reject)===null||i===void 0||i.call(n,c),this.byteStreamControllers.delete(l);for(const[l,u]of a)(s=(r=u.outOfBandFailureRejectingFuture).reject)===null||s===void 0||s.call(r,c),this.textStreamControllers.delete(l)}}handleDataStreamPacket(t,n){return P(this,void 0,void 0,function*(){switch(t.value.case){case"streamHeader":return this.handleStreamHeader(t.value.value,t.participantIdentity,n);case"streamChunk":return this.handleStreamChunk(t.value.value,n);case"streamTrailer":return this.handleStreamTrailer(t.value.value,n);default:throw new Error('DataPacket of value "'.concat(t.value.case,'" is not data stream related!'))}})}handleStreamHeader(t,n,i){return P(this,void 0,void 0,function*(){var r;if(t.contentHeader.case==="byteHeader"){const s=this.byteStreamHandlers.get(t.topic);if(!s){this.log.debug("ignoring incoming byte stream due to no handler for topic",t.topic);return}let a;const o=new xn;o.promise.catch(u=>{this.log.error(u)});const c={id:t.streamId,name:(r=t.contentHeader.value.name)!==null&&r!==void 0?r:"unknown",mimeType:t.mimeType,size:t.totalLength?Number(t.totalLength):void 0,topic:t.topic,timestamp:Uc(t.timestamp),attributes:t.attributes,encryptionType:i},l=new ReadableStream({start:u=>{if(a=u,this.textStreamControllers.has(t.streamId))throw new Cn("A data stream read is already in progress for a stream with id ".concat(t.streamId,"."),en.AlreadyOpened);this.byteStreamControllers.set(t.streamId,{info:c,controller:a,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:o})}});s(new VR(c,l,Uc(t.totalLength),o),{identity:n})}else if(t.contentHeader.case==="textHeader"){const s=this.textStreamHandlers.get(t.topic);if(!s){this.log.debug("ignoring incoming text stream due to no handler for topic",t.topic);return}let a;const o=new xn;o.promise.catch(u=>{this.log.error(u)});const c={id:t.streamId,mimeType:t.mimeType,size:t.totalLength?Number(t.totalLength):void 0,topic:t.topic,timestamp:Number(t.timestamp),attributes:t.attributes,encryptionType:i},l=new ReadableStream({start:u=>{if(a=u,this.textStreamControllers.has(t.streamId))throw new Cn("A data stream read is already in progress for a stream with id ".concat(t.streamId,"."),en.AlreadyOpened);this.textStreamControllers.set(t.streamId,{info:c,controller:a,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:o})}});s(new WR(c,l,Uc(t.totalLength),o),{identity:n})}})}handleStreamChunk(t,n){const i=this.byteStreamControllers.get(t.streamId);i&&(i.info.encryptionType!==n?(i.controller.error(new Cn("Encryption type mismatch for stream ".concat(t.streamId,". Expected ").concat(n,", got ").concat(i.info.encryptionType),en.EncryptionTypeMismatch)),this.byteStreamControllers.delete(t.streamId)):t.content.length>0&&i.controller.enqueue(t));const r=this.textStreamControllers.get(t.streamId);r&&(r.info.encryptionType!==n?(r.controller.error(new Cn("Encryption type mismatch for stream ".concat(t.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),en.EncryptionTypeMismatch)),this.textStreamControllers.delete(t.streamId)):t.content.length>0&&r.controller.enqueue(t))}handleStreamTrailer(t,n){const i=this.textStreamControllers.get(t.streamId);i&&(i.info.encryptionType!==n?i.controller.error(new Cn("Encryption type mismatch for stream ".concat(t.streamId,". Expected ").concat(n,", got ").concat(i.info.encryptionType),en.EncryptionTypeMismatch)):(i.info.attributes=Object.assign(Object.assign({},i.info.attributes),t.attributes),i.controller.close(),this.textStreamControllers.delete(t.streamId)));const r=this.byteStreamControllers.get(t.streamId);r&&(r.info.encryptionType!==n?r.controller.error(new Cn("Encryption type mismatch for stream ".concat(t.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),en.EncryptionTypeMismatch)):(r.info.attributes=Object.assign(Object.assign({},r.info.attributes),t.attributes),r.controller.close()),this.byteStreamControllers.delete(t.streamId))}}class Ub{constructor(t,n,i){this.writableStream=t,this.defaultWriter=t.getWriter(),this.onClose=i,this.info=n}write(t){return this.defaultWriter.write(t)}close(){return P(this,void 0,void 0,function*(){var t;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(t=this.onClose)===null||t===void 0||t.call(this)})}}class YR extends Ub{}class HR extends Ub{}const qb=15e3;class KR{constructor(t,n){this.engine=t,this.log=n}setupEngine(t){this.engine=t}sendText(t,n){return P(this,void 0,void 0,function*(){var i;const r=crypto.randomUUID(),a=new TextEncoder().encode(t).byteLength,o=(i=n==null?void 0:n.attachments)===null||i===void 0?void 0:i.map(()=>crypto.randomUUID()),c=new Array(o?o.length+1:1).fill(0),l=(d,h)=>{var p;c[h]=d;const O=c.reduce((m,b)=>m+b,0);(p=n==null?void 0:n.onProgress)===null||p===void 0||p.call(n,O)},u=yield this.streamText({streamId:r,totalSize:a,destinationIdentities:n==null?void 0:n.destinationIdentities,topic:n==null?void 0:n.topic,attachedStreamIds:o,attributes:n==null?void 0:n.attributes});return yield u.write(t),l(1,0),yield u.close(),n!=null&&n.attachments&&o&&(yield Promise.all(n.attachments.map((d,h)=>P(this,void 0,void 0,function*(){return this._sendFile(o[h],d,{topic:n.topic,mimeType:d.type,onProgress:p=>{l(p,h+1)}})})))),u.info})}streamText(t){return P(this,void 0,void 0,function*(){var n,i,r;const s=(n=t==null?void 0:t.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),a={id:s,mimeType:"text/plain",timestamp:Date.now(),topic:(i=t==null?void 0:t.topic)!==null&&i!==void 0?i:"",size:t==null?void 0:t.totalSize,attributes:t==null?void 0:t.attributes,encryptionType:!((r=this.engine.e2eeManager)===null||r===void 0)&&r.isDataChannelEncryptionEnabled?Pt.GCM:Pt.NONE},o=new kc({streamId:s,mimeType:a.mimeType,topic:a.topic,timestamp:Br(a.timestamp),totalLength:Br(t==null?void 0:t.totalSize),attributes:a.attributes,contentHeader:{case:"textHeader",value:new Bg({version:t==null?void 0:t.version,attachedStreamIds:t==null?void 0:t.attachedStreamIds,replyToStreamId:t==null?void 0:t.replyToStreamId,operationType:(t==null?void 0:t.type)==="update"?Od.UPDATE:Od.CREATE})}}),c=t==null?void 0:t.destinationIdentities,l=new Jt({destinationIdentities:c,value:{case:"streamHeader",value:o}});yield this.engine.sendDataPacket(l,Pe.RELIABLE);let u=0;const d=this.engine,h=new WritableStream({write(m){return P(this,void 0,void 0,function*(){for(const b of BP(m,qb)){const v=new yc({content:b,streamId:s,chunkIndex:Br(u)}),k=new Jt({destinationIdentities:c,value:{case:"streamChunk",value:v}});yield d.sendDataPacket(k,Pe.RELIABLE),u+=1}})},close(){return P(this,void 0,void 0,function*(){const m=new Sc({streamId:s}),b=new Jt({destinationIdentities:c,value:{case:"streamTrailer",value:m}});yield d.sendDataPacket(b,Pe.RELIABLE)})},abort(m){console.log("Sink error:",m)}});let p=()=>P(this,void 0,void 0,function*(){yield O.close()});d.once(te.Closing,p);const O=new YR(h,a,()=>this.engine.off(te.Closing,p));return O})}sendFile(t,n){return P(this,void 0,void 0,function*(){const i=crypto.randomUUID();return yield this._sendFile(i,t,n),{id:i}})}_sendFile(t,n,i){return P(this,void 0,void 0,function*(){var r;const s=yield this.streamBytes({streamId:t,totalSize:n.size,name:n.name,mimeType:(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:n.type,topic:i==null?void 0:i.topic,destinationIdentities:i==null?void 0:i.destinationIdentities}),a=n.stream().getReader();for(;;){const{done:o,value:c}=yield a.read();if(o)break;yield s.write(c)}return yield s.close(),s.info})}streamBytes(t){return P(this,void 0,void 0,function*(){var n,i,r,s,a,o;const c=(n=t==null?void 0:t.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),l=t==null?void 0:t.destinationIdentities,u={id:c,mimeType:(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:"application/octet-stream",topic:(r=t==null?void 0:t.topic)!==null&&r!==void 0?r:"",timestamp:Date.now(),attributes:t==null?void 0:t.attributes,size:t==null?void 0:t.totalSize,name:(s=t==null?void 0:t.name)!==null&&s!==void 0?s:"unknown",encryptionType:!((a=this.engine.e2eeManager)===null||a===void 0)&&a.isDataChannelEncryptionEnabled?Pt.GCM:Pt.NONE},d=new kc({totalLength:Br((o=u.size)!==null&&o!==void 0?o:0),mimeType:u.mimeType,streamId:c,topic:u.topic,timestamp:Br(Date.now()),attributes:u.attributes,contentHeader:{case:"byteHeader",value:new Zg({name:u.name})}}),h=new Jt({destinationIdentities:l,value:{case:"streamHeader",value:d}});yield this.engine.sendDataPacket(h,Pe.RELIABLE);let p=0;const O=new Kt,m=this.engine,b=this.log,v=new WritableStream({write(y){return P(this,void 0,void 0,function*(){const T=yield O.lock();let S=0;try{for(;S<y.byteLength;){const _=y.slice(S,S+qb),x=new Jt({destinationIdentities:l,value:{case:"streamChunk",value:new yc({content:_,streamId:c,chunkIndex:Br(p)})}});yield m.sendDataPacket(x,Pe.RELIABLE),p+=1,S+=_.byteLength}}finally{T()}})},close(){return P(this,void 0,void 0,function*(){const y=new Sc({streamId:c}),T=new Jt({destinationIdentities:l,value:{case:"streamTrailer",value:y}});yield m.sendDataPacket(T,Pe.RELIABLE)})},abort(y){b.error("Sink error:",y)}});return new HR(v,u)})}}class Xb extends j{constructor(t,n,i,r,s){super(t,i,s),this.sid=n,this.receiver=r}get isLocal(){return!1}setMuted(t){this.isMuted!==t&&(this.isMuted=t,this._mediaStreamTrack.enabled=!t,this.emit(t?J.Muted:J.Unmuted,this))}setMediaStream(t){this.mediaStream=t;const n=i=>{i.track===this._mediaStreamTrack&&(t.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(J.Ended,this))};t.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return P(this,void 0,void 0,function*(){var t;return!((t=this.receiver)===null||t===void 0)&&t.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(t){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=t:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),dh)),GP()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const t=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>t());const i=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(i){const{timestamp:r,rtpTimestamp:s}=i;s&&this.rtpTimestamp!==s&&(this.emit(J.TimeSyncUpdate,{timestamp:r,rtpTimestamp:s}),this.rtpTimestamp=s)}};t()}}class JR extends Xb{constructor(t,n,i,r,s,a){super(t,n,j.Kind.Audio,i,a),this.monitorReceiver=()=>P(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const o=yield this.getReceiverStats();o&&this.prevStats&&this.receiver&&(this._currentBitrate=qc(o,this.prevStats)),this.prevStats=o}),this.audioContext=r,this.webAudioPluginNodes=[],s&&(this.sinkId=s.deviceId)}setVolume(t){var n;for(const i of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(t,0,.1):i.volume=t;ni()&&this._mediaStreamTrack._setVolume(t),this.elementVolume=t}getVolume(){if(this.elementVolume)return this.elementVolume;if(ni())return 1;let t=0;return this.attachedElements.forEach(n=>{n.volume>t&&(t=n.volume)}),t}setSinkId(t){return P(this,void 0,void 0,function*(){this.sinkId=t,yield Promise.all(this.attachedElements.map(n=>{if(Bd(n))return n.setSinkId(t)}))})}attach(t){const n=this.attachedElements.length===0;return t?super.attach(t):t=super.attach(),this.sinkId&&Bd(t)&&t.setSinkId(this.sinkId).catch(i=>{this.log.error("Failed to set sink id on remote audio track",i,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,t),t.volume=0,t.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),t}detach(t){let n;return t?(n=super.detach(t),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(t){this.audioContext=t,t&&this.attachedElements.length>0?this.connectWebAudio(t,this.attachedElements[0]):t||this.disconnectWebAudio()}setWebAudioPlugins(t){this.webAudioPluginNodes=t,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(t,n){this.disconnectWebAudio(),this.sourceNode=t.createMediaStreamSource(n.srcObject);let i=this.sourceNode;this.webAudioPluginNodes.forEach(r=>{i.connect(r),i=r}),this.gainNode=t.createGain(),i.connect(this.gainNode),this.gainNode.connect(t.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),t.state!=="running"&&t.resume().then(()=>{t.state!=="running"&&this.emit(J.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(r=>{this.emit(J.AudioPlaybackFailed,r)})}disconnectWebAudio(){var t,n;(t=this.gainNode)===null||t===void 0||t.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return P(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const t=yield this.receiver.getStats();let n;return t.forEach(i=>{i.type==="inbound-rtp"&&(n={type:"audio",streamId:i.id,timestamp:i.timestamp,jitter:i.jitter,bytesReceived:i.bytesReceived,concealedSamples:i.concealedSamples,concealmentEvents:i.concealmentEvents,silentConcealedSamples:i.silentConcealedSamples,silentConcealmentEvents:i.silentConcealmentEvents,totalAudioEnergy:i.totalAudioEnergy,totalSamplesDuration:i.totalSamplesDuration})}),n})}}const gh=100;class eA extends Xb{constructor(t,n,i,r,s){super(t,n,j.Kind.Video,i,s),this.elementInfos=[],this.monitorReceiver=()=>P(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=qc(a,this.prevStats)),this.prevStats=a}),this.debouncedHandleResize=ah(()=>{this.updateDimensions()},gh),this.adaptiveStreamSettings=r}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}setStreamState(t){super.setStreamState(t),this.log.debug("setStreamState",t),this.isAdaptiveStream&&t===j.StreamState.Active&&this.updateVisibility()}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(t){super.setMuted(t),this.attachedElements.forEach(n=>{t?Rs(this._mediaStreamTrack,n):Ps(this._mediaStreamTrack,n)})}attach(t){if(t?super.attach(t):t=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===t)===void 0){const n=new tA(t);this.observeElementInfo(n)}return t}observeElementInfo(t){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===t)===void 0?(t.handleResize=()=>{this.debouncedHandleResize()},t.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(t),t.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(t){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(i=>i===t);for(const i of n)i.stopObserving();this.elementInfos=this.elementInfos.filter(i=>i!==t),this.updateVisibility(),this.debouncedHandleResize()}detach(t){let n=[];if(t)return this.stopObservingElement(t),super.detach(t);n=super.detach();for(const i of n)this.stopObservingElement(i);return n}getDecoderImplementation(){var t;return(t=this.prevStats)===null||t===void 0?void 0:t.decoderImplementation}getReceiverStats(){return P(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const t=yield this.receiver.getStats();let n,i="",r=new Map;return t.forEach(s=>{s.type==="inbound-rtp"?(i=s.codecId,n={type:"video",streamId:s.id,framesDecoded:s.framesDecoded,framesDropped:s.framesDropped,framesReceived:s.framesReceived,packetsReceived:s.packetsReceived,packetsLost:s.packetsLost,frameWidth:s.frameWidth,frameHeight:s.frameHeight,pliCount:s.pliCount,firCount:s.firCount,nackCount:s.nackCount,jitter:s.jitter,timestamp:s.timestamp,bytesReceived:s.bytesReceived,decoderImplementation:s.decoderImplementation}):s.type==="codec"&&r.set(s.id,s)}),n&&i!==""&&r.get(i)&&(n.mimeType=r.get(i).mimeType),n})}stopObservingElement(t){const n=this.elementInfos.filter(i=>i.element===t);for(const i of n)this.stopObservingElementInfo(i)}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return P(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(t){var n,i;const r=this.elementInfos.reduce((c,l)=>Math.max(c,l.visibilityChangedAt||0),0),s=!((i=(n=this.adaptiveStreamSettings)===null||n===void 0?void 0:n.pauseVideoInBackground)!==null&&i!==void 0)||i?this.isInBackground:!1,a=this.elementInfos.some(c=>c.pictureInPicture),o=this.elementInfos.some(c=>c.visible)&&!s||a;if(!(this.lastVisible===o&&!t)){if(!o&&Date.now()-r<gh){Ut.setTimeout(()=>{this.updateVisibility()},gh);return}this.lastVisible=o,this.emit(J.VisibilityChanged,o,this)}}updateDimensions(){var t,n;let i=0,r=0;const s=this.getPixelDensity();for(const a of this.elementInfos){const o=a.width()*s,c=a.height()*s;o+c>i+r&&(i=o,r=c)}((t=this.lastDimensions)===null||t===void 0?void 0:t.width)===i&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===r||(this.lastDimensions={width:i,height:r},this.emit(J.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var t;const n=(t=this.adaptiveStreamSettings)===null||t===void 0?void 0:t.pixelDensity;return n==="screen"?nb():n||(nb()>2?2:1)}}class tA{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(t,n){this.onVisibilityChanged=i=>{var r;const{target:s,isIntersecting:a}=i;s===this.element&&(this.isIntersecting=a,this.isPiP=za(this.element),this.visibilityChangedAt=Date.now(),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this))},this.onEnterPiP=()=>{var i,r,s;(r=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP),this.isPiP=za(this.element),(s=this.handleVisibilityChanged)===null||s===void 0||s.call(this)},this.onLeavePiP=()=>{var i;this.isPiP=za(this.element),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this)},this.element=t,this.isIntersecting=n??vh(t),this.isPiP=ln()&&za(t),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var t,n,i;this.isIntersecting=vh(this.element),this.isPiP=za(this.element),this.element.handleResize=()=>{var r;(r=this.handleResize)===null||r===void 0||r.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,rb().observe(this.element),ib().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(t=window.documentPictureInPicture)===null||t===void 0||t.addEventListener("enter",this.onEnterPiP),(i=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var t,n,i,r,s;(t=rb())===null||t===void 0||t.unobserve(this.element),(n=ib())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(i=window.documentPictureInPicture)===null||i===void 0||i.removeEventListener("enter",this.onEnterPiP),(s=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||s===void 0||s.removeEventListener("pagehide",this.onLeavePiP)}}function za(e){var t,n;return document.pictureInPictureElement===e?!0:!((t=window.documentPictureInPicture)===null||t===void 0)&&t.window?vh(e,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function vh(e,t){const n=t||window;let i=e.offsetTop,r=e.offsetLeft;const s=e.offsetWidth,a=e.offsetHeight,{hidden:o}=e,{display:c}=getComputedStyle(e);for(;e.offsetParent;)e=e.offsetParent,i+=e.offsetTop,r+=e.offsetLeft;return i<n.pageYOffset+n.innerHeight&&r<n.pageXOffset+n.innerWidth&&i+a>n.pageYOffset&&r+s>n.pageXOffset&&!o&&c!=="none"}class Ii extends ti.EventEmitter{constructor(t,n,i,r){var s;super(),this.metadataMuted=!1,this.encryption=Pt.NONE,this.log=ye,this.handleMuted=()=>{this.emit(J.Muted)},this.handleUnmuted=()=>{this.emit(J.Unmuted)},this.log=Ci((s=r==null?void 0:r.loggerName)!==null&&s!==void 0?s:Un.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=t,this.trackSid=n,this.trackName=i,this.source=j.Source.Unknown}setTrack(t){this.track&&(this.track.off(J.Muted,this.handleMuted),this.track.off(J.Unmuted,this.handleUnmuted)),this.track=t,t&&(t.on(J.Muted,this.handleMuted),t.on(J.Unmuted,this.handleUnmuted))}get logContext(){var t;return Object.assign(Object.assign({},(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this)),Re(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Pt.NONE}get audioTrack(){if(ri(this.track))return this.track}get videoTrack(){if(or(this.track))return this.track}updateInfo(t){this.trackSid=t.sid,this.trackName=t.name,this.source=j.sourceFromProto(t.source),this.mimeType=t.mimeType,this.kind===j.Kind.Video&&t.width>0&&(this.dimensions={width:t.width,height:t.height},this.simulcasted=t.simulcast),this.encryption=t.encryption,this.trackInfo=t,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:t}))}}(function(e){(function(t){t.Desired="desired",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed"})(e.SubscriptionStatus||(e.SubscriptionStatus={})),(function(t){t.Allowed="allowed",t.NotAllowed="not_allowed"})(e.PermissionStatus||(e.PermissionStatus={}))})(Ii||(Ii={}));class bh extends Ii{get isUpstreamPaused(){var t;return(t=this.track)===null||t===void 0?void 0:t.isUpstreamPaused}constructor(t,n,i,r){super(t,n.sid,n.name,r),this.track=void 0,this.handleTrackEnded=()=>{this.emit(J.Ended)},this.handleCpuConstrained=()=>{this.track&&or(this.track)&&this.emit(J.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(i)}setTrack(t){this.track&&(this.track.off(J.Ended,this.handleTrackEnded),this.track.off(J.CpuConstrained,this.handleCpuConstrained)),super.setTrack(t),t&&(t.on(J.Ended,this.handleTrackEnded),t.on(J.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return P(this,void 0,void 0,function*(){var t;return(t=this.track)===null||t===void 0?void 0:t.mute()})}unmute(){return P(this,void 0,void 0,function*(){var t;return(t=this.track)===null||t===void 0?void 0:t.unmute()})}pauseUpstream(){return P(this,void 0,void 0,function*(){var t;yield(t=this.track)===null||t===void 0?void 0:t.pauseUpstream()})}resumeUpstream(){return P(this,void 0,void 0,function*(){var t;yield(t=this.track)===null||t===void 0?void 0:t.resumeUpstream()})}getTrackFeatures(){var t;if(ri(this.track)){const n=this.track.getSourceTrackSettings(),i=new Set;return n.autoGainControl&&i.add(Qt.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&i.add(Qt.TF_ECHO_CANCELLATION),n.noiseSuppression&&i.add(Qt.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&i.add(Qt.TF_STEREO),!((t=this.options)===null||t===void 0)&&t.dtx||i.add(Qt.TF_NO_DTX),this.track.enhancedNoiseCancellation&&i.add(Qt.TF_ENHANCED_NOISE_CANCELLATION),Array.from(i.values())}else return[]}}function zc(e,t){return P(this,void 0,void 0,function*(){e??(e={});let n=!1;const{audioProcessor:i,videoProcessor:r,optionsWithoutProcessor:s}=ub(e);let a=s.audio,o=s.video;if(i&&typeof s.audio=="object"&&(s.audio.processor=i),r&&typeof s.video=="object"&&(s.video.processor=r),e.audio&&typeof s.audio=="object"&&typeof s.audio.deviceId=="string"){const d=s.audio.deviceId;s.audio.deviceId={exact:d},n=!0,a=Object.assign(Object.assign({},s.audio),{deviceId:{ideal:d}})}if(s.video&&typeof s.video=="object"&&typeof s.video.deviceId=="string"){const d=s.video.deviceId;s.video.deviceId={exact:d},n=!0,o=Object.assign(Object.assign({},s.video),{deviceId:{ideal:d}})}s.audio===!0?s.audio={deviceId:"default"}:typeof s.audio=="object"&&s.audio!==null&&(s.audio=Object.assign(Object.assign({},s.audio),{deviceId:s.audio.deviceId||"default"})),s.video===!0?s.video={deviceId:"default"}:typeof s.video=="object"&&!s.video.deviceId&&(s.video.deviceId="default");const c=ob(s,Sb,_b),l=Kd(c),u=navigator.mediaDevices.getUserMedia(l);s.audio&&(Nt.userMediaPromiseMap.set("audioinput",u),u.catch(()=>Nt.userMediaPromiseMap.delete("audioinput"))),s.video&&(Nt.userMediaPromiseMap.set("videoinput",u),u.catch(()=>Nt.userMediaPromiseMap.delete("videoinput")));try{const d=yield u;return yield Promise.all(d.getTracks().map(h=>P(this,void 0,void 0,function*(){const p=h.kind==="audio";let O=p?c.audio:c.video;(typeof O=="boolean"||!O)&&(O={});let m;const b=p?l.audio:l.video;typeof b!="boolean"&&(m=b);const v=h.getSettings().deviceId;m!=null&&m.deviceId&&ar(m.deviceId)!==v?m.deviceId=v:m||(m={deviceId:v});const k=AR(h,m,t);return k.kind===j.Kind.Video?k.source=j.Source.Camera:k.kind===j.Kind.Audio&&(k.source=j.Source.Microphone),k.mediaStream=d,ri(k)&&i?yield k.setProcessor(i):or(k)&&r&&(yield k.setProcessor(r)),k})))}catch(d){if(!n)throw d;return zc(Object.assign(Object.assign({},e),{audio:a,video:o}),t)}})}function nA(e){return P(this,void 0,void 0,function*(){return(yield zc({audio:!1,video:!0}))[0]})}function Fb(e){return P(this,void 0,void 0,function*(){return(yield zc({audio:e??!0,video:!1}))[0]})}var ur;(function(e){e.Excellent="excellent",e.Good="good",e.Poor="poor",e.Lost="lost",e.Unknown="unknown"})(ur||(ur={}));function iA(e){switch(e){case Pa.EXCELLENT:return ur.Excellent;case Pa.GOOD:return ur.Good;case Pa.POOR:return ur.Poor;case Pa.LOST:return ur.Lost;default:return ur.Unknown}}class zb extends ti.EventEmitter{get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions)===null||t===void 0?void 0:t.loggerContextCb)===null||n===void 0?void 0:n.call(t))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(t=>t.isEncrypted)}get isAgent(){var t;return((t=this.permissions)===null||t===void 0?void 0:t.agent)||this.kind===Aa.AGENT}get isActive(){var t;return((t=this.participantInfo)===null||t===void 0?void 0:t.state)===Es.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(t,n,i,r,s,a){let o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Aa.STANDARD;var c;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ur.Unknown,this.log=ye,this.log=Ci((c=a==null?void 0:a.loggerName)!==null&&c!==void 0?c:Un.Participant),this.loggerOptions=a,this.setMaxListeners(100),this.sid=t,this.identity=n,this.name=i,this.metadata=r,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=o,this._attributes=s??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(t){for(const[,n]of this.trackPublications)if(n.source===t)return n}getTrackPublicationByName(t){for(const[,n]of this.trackPublications)if(n.trackName===t)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new xn,this.once(ie.Active,()=>{var t,n;(n=(t=this.activeFuture)===null||t===void 0?void 0:t.resolve)===null||n===void 0||n.call(t),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var t;const n=this.getTrackPublication(j.Source.Camera);return!(!((t=n==null?void 0:n.isMuted)!==null&&t!==void 0)||t)}get isMicrophoneEnabled(){var t;const n=this.getTrackPublication(j.Source.Microphone);return!(!((t=n==null?void 0:n.isMuted)!==null&&t!==void 0)||t)}get isScreenShareEnabled(){return!!this.getTrackPublication(j.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(t){var n;return this.participantInfo&&this.participantInfo.sid===t.sid&&this.participantInfo.version>t.version?!1:(this.identity=t.identity,this.sid=t.sid,this._setName(t.name),this._setMetadata(t.metadata),this._setAttributes(t.attributes),t.state===Es.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==Es.ACTIVE&&this.emit(ie.Active),t.permission&&this.setPermissions(t.permission),this.participantInfo=t,!0)}_setMetadata(t){const n=this.metadata!==t,i=this.metadata;this.metadata=t,n&&this.emit(ie.ParticipantMetadataChanged,i)}_setName(t){const n=this.name!==t;this.name=t,n&&this.emit(ie.ParticipantNameChanged,t)}_setAttributes(t){const n=YP(this.attributes,t);this._attributes=t,Object.keys(n).length>0&&this.emit(ie.AttributesChanged,n)}setPermissions(t){var n,i,r,s,a,o;const c=this.permissions,l=t.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||t.canSubscribe!==((i=this.permissions)===null||i===void 0?void 0:i.canSubscribe)||t.canPublishData!==((r=this.permissions)===null||r===void 0?void 0:r.canPublishData)||t.hidden!==((s=this.permissions)===null||s===void 0?void 0:s.hidden)||t.recorder!==((a=this.permissions)===null||a===void 0?void 0:a.recorder)||t.canPublishSources.length!==this.permissions.canPublishSources.length||t.canPublishSources.some((u,d)=>{var h;return u!==((h=this.permissions)===null||h===void 0?void 0:h.canPublishSources[d])})||t.canSubscribeMetrics!==((o=this.permissions)===null||o===void 0?void 0:o.canSubscribeMetrics);return this.permissions=t,l&&this.emit(ie.ParticipantPermissionsChanged,c),l}setIsSpeaking(t){t!==this.isSpeaking&&(this.isSpeaking=t,t&&(this.lastSpokeAt=new Date),this.emit(ie.IsSpeakingChanged,t))}setConnectionQuality(t){const n=this._connectionQuality;this._connectionQuality=iA(t),n!==this._connectionQuality&&this.emit(ie.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var t,n;this.activeFuture&&((n=(t=this.activeFuture).reject)===null||n===void 0||n.call(t,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(t){this.audioContext=t,this.audioTrackPublications.forEach(n=>ri(n.track)&&n.track.setAudioContext(t))}addTrackPublication(t){t.on(J.Muted,()=>{this.emit(ie.TrackMuted,t)}),t.on(J.Unmuted,()=>{this.emit(ie.TrackUnmuted,t)});const n=t;switch(n.track&&(n.track.sid=t.trackSid),this.trackPublications.set(t.trackSid,t),t.kind){case j.Kind.Audio:this.audioTrackPublications.set(t.trackSid,t);break;case j.Kind.Video:this.videoTrackPublications.set(t.trackSid,t);break}}}function rA(e){var t,n,i;if(!e.participantSid&&!e.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new Hg({participantIdentity:(t=e.participantIdentity)!==null&&t!==void 0?t:"",participantSid:(n=e.participantSid)!==null&&n!==void 0?n:"",allTracks:(i=e.allowAll)!==null&&i!==void 0?i:!1,trackSids:e.allowedTrackSids||[]})}class sA extends zb{constructor(t,n,i,r,s,a){super(t,n,void 0,void 0,void 0,{loggerName:r.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Pt.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new xn)},this.handleReconnected=()=>{var o,c;(c=(o=this.reconnectFuture)===null||o===void 0?void 0:o.resolve)===null||c===void 0||c.call(o),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var o,c,l,u,d,h;this.reconnectFuture&&(this.reconnectFuture.promise.catch(p=>this.log.warn(p.message,this.logContext)),(c=(o=this.reconnectFuture)===null||o===void 0?void 0:o.reject)===null||c===void 0||c.call(o,new Error("Got disconnected during reconnection attempt")),this.reconnectFuture=void 0),this.signalConnectedFuture&&((u=(l=this.signalConnectedFuture).reject)===null||u===void 0||u.call(l,new Error("Got disconnected without signal connected")),this.signalConnectedFuture=void 0),(h=(d=this.activeAgentFuture)===null||d===void 0?void 0:d.reject)===null||h===void 0||h.call(d,new Error("Got disconnected without active agent present")),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=o=>{var c,l;o.participant&&this.updateInfo(o.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new xn),(l=(c=this.signalConnectedFuture).resolve)===null||l===void 0||l.call(c)},this.handleSignalRequestResponse=o=>{const{requestId:c,reason:l,message:u}=o,d=this.pendingSignalRequests.get(c);d&&(l!==_d.OK&&d.reject(new Wv(u,l)),this.pendingSignalRequests.delete(c))},this.handleDataPacket=o=>{switch(o.value.case){case"rpcResponse":let c=o.value.value,l=null,u=null;c.value.case==="payload"?l=c.value.value:c.value.case==="error"&&(u=gt.fromProto(c.value.value)),this.handleIncomingRpcResponse(c.requestId,l,u);break;case"rpcAck":let d=o.value.value;this.handleIncomingRpcAck(d.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(o=>rA(o)))},this.onTrackUnmuted=o=>{this.onTrackMuted(o,o.isUpstreamPaused)},this.onTrackMuted=(o,c)=>{if(c===void 0&&(c=!0),!o.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),Re(o)));return}this.engine.updateMuteStatus(o.sid,c)},this.onTrackUpstreamPaused=o=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),Re(o))),this.onTrackMuted(o,!0)},this.onTrackUpstreamResumed=o=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),Re(o))),this.onTrackMuted(o,o.isMuted)},this.onTrackFeatureUpdate=o=>{const c=this.audioTrackPublications.get(o.sid);if(!c){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(o.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(c.trackSid,c.getTrackFeatures())},this.onTrackCpuConstrained=(o,c)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),Re(c))),this.emit(ie.LocalTrackCpuConstrained,o,c)},this.handleSubscribedQualityUpdate=o=>P(this,void 0,void 0,function*(){var c,l,u,d,h;if(!(!((h=this.roomOptions)===null||h===void 0)&&h.dynacast))return;const p=this.videoTrackPublications.get(o.trackSid);if(!p){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}if(!p.videoTrack)return;const O=yield p.videoTrack.setPublishingCodecs(o.subscribedCodecs);try{for(var m=!0,b=xi(O),v;v=yield b.next(),c=v.done,!c;m=!0){d=v.value,m=!1;const k=d;wP(k)&&(this.log.debug("publish ".concat(k," for ").concat(p.videoTrack.sid),Object.assign(Object.assign({},this.logContext),Re(p))),yield this.publishAdditionalCodecForTrack(p.videoTrack,k,p.options))}}catch(k){l={error:k}}finally{try{!m&&!c&&(u=b.return)&&(yield u.call(b))}finally{if(l)throw l.error}}}),this.handleLocalTrackUnpublished=o=>{const c=this.trackPublications.get(o.trackSid);if(!c){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}this.unpublishTrack(c.track)},this.handleTrackEnded=o=>P(this,void 0,void 0,function*(){if(o.source===j.Source.ScreenShare||o.source===j.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),Re(o))),this.unpublishTrack(o);else if(o.isUserProvided)yield o.mute();else if(Ai(o)||cr(o))try{if(ln())try{const c=yield navigator==null?void 0:navigator.permissions.query({name:o.source===j.Source.Camera?"camera":"microphone"});if(c&&c.state==="denied")throw this.log.warn("user has revoked access to ".concat(o.source),Object.assign(Object.assign({},this.logContext),Re(o))),c.onchange=()=>{c.state!=="denied"&&(o.isMuted||o.restartTrack(),c.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}o.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),Re(o))),Ai(o)?yield o.restartTrack({deviceId:"default"}):yield o.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),Re(o))),yield o.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=i,this.roomOptions=r,this.setupEngine(i),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=s,this.roomOutgoingDataStreamManager=a}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Pt.NONE}getTrackPublication(t){const n=super.getTrackPublication(t);if(n)return n}getTrackPublicationByName(t){const n=super.getTrackPublicationByName(t);if(n)return n}setupEngine(t){var n;this.engine=t,this.engine.on(te.RemoteMute,(i,r)=>{const s=this.trackPublications.get(i);!s||!s.track||(r?s.mute():s.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(te.Connected,this.handleReconnected).on(te.SignalConnected,this.handleSignalConnected).on(te.SignalRestarted,this.handleReconnected).on(te.SignalResumed,this.handleReconnected).on(te.Restarting,this.handleReconnecting).on(te.Resuming,this.handleReconnecting).on(te.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(te.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(te.Closing,this.handleClosing).on(te.SignalRequestResponse,this.handleSignalRequestResponse).on(te.DataPacketReceived,this.handleDataPacket)}setMetadata(t){return P(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:t})})}setName(t){return P(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:t})})}setAttributes(t){return P(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:t})})}requestMetadataUpdate(t){return P(this,arguments,void 0,function(n){var i=this;let{metadata:r,name:s,attributes:a}=n;return(function*(){return new Promise((o,c)=>P(i,void 0,void 0,function*(){var l,u;try{let d=!1;const h=yield this.engine.client.sendUpdateLocalMetadata((l=r??this.metadata)!==null&&l!==void 0?l:"",(u=s??this.name)!==null&&u!==void 0?u:"",a),p=performance.now();for(this.pendingSignalRequests.set(h,{resolve:o,reject:O=>{c(O),d=!0},values:{name:s,metadata:r,attributes:a}});performance.now()-p<5e3&&!d;){if((!s||this.name===s)&&(!r||this.metadata===r)&&(!a||Object.entries(a).every(O=>{let[m,b]=O;return this.attributes[m]===b||b===""&&!this.attributes[m]}))){this.pendingSignalRequests.delete(h),o();return}yield qt(50)}c(new Wv("Request to update local metadata timed out","TimeoutError"))}catch(d){d instanceof Error&&c(d)}}))})()})}setCameraEnabled(t,n,i){return this.setTrackEnabled(j.Source.Camera,t,n,i)}setMicrophoneEnabled(t,n,i){return this.setTrackEnabled(j.Source.Microphone,t,n,i)}setScreenShareEnabled(t,n,i){return this.setTrackEnabled(j.Source.ScreenShare,t,n,i)}setE2EEEnabled(t){return P(this,void 0,void 0,function*(){this.encryptionType=t?Pt.GCM:Pt.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(t,n,i,r){return P(this,void 0,void 0,function*(){var s,a;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:t,enabled:n})),this.republishPromise&&(yield this.republishPromise);let o=this.getTrackPublication(t);if(n)if(o)yield o.unmute();else{let c;if(this.pendingPublishing.has(t)){const l=yield this.waitForPendingPublicationOfSource(t);return l||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:t})),yield l==null?void 0:l.unmute(),l}this.pendingPublishing.add(t);try{switch(t){case j.Source.Camera:c=yield this.createTracks({video:(s=i)!==null&&s!==void 0?s:!0});break;case j.Source.Microphone:c=yield this.createTracks({audio:(a=i)!==null&&a!==void 0?a:!0});break;case j.Source.ScreenShare:c=yield this.createScreenTracks(Object.assign({},i));break;default:throw new Ri(t)}}catch(l){throw c==null||c.forEach(u=>{u.stop()}),l instanceof Error&&this.emit(ie.MediaDevicesError,l,Jd(t)),this.pendingPublishing.delete(t),l}for(const l of c){const u=Object.assign(Object.assign({},this.roomOptions.publishDefaults),i);t===j.Source.Microphone&&ri(l)&&u.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),l.startPreConnectBuffer())}try{const l=[];for(const d of c)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),Re(d))),l.push(this.publishTrack(d,r));[o]=yield Promise.all(l)}catch(l){throw c==null||c.forEach(u=>{u.stop()}),l}finally{this.pendingPublishing.delete(t)}}else if(!(o!=null&&o.track)&&this.pendingPublishing.has(t)&&(o=yield this.waitForPendingPublicationOfSource(t),o||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:t}))),o&&o.track)if(t===j.Source.ScreenShare){o=yield this.unpublishTrack(o.track);const c=this.getTrackPublication(j.Source.ScreenShareAudio);c&&c.track&&this.unpublishTrack(c.track)}else yield o.mute();return o})}enableCameraAndMicrophone(){return P(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(j.Source.Camera)||this.pendingPublishing.has(j.Source.Microphone))){this.pendingPublishing.add(j.Source.Camera),this.pendingPublishing.add(j.Source.Microphone);try{const t=yield this.createTracks({audio:!0,video:!0});yield Promise.all(t.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(j.Source.Camera),this.pendingPublishing.delete(j.Source.Microphone)}}})}createTracks(t){return P(this,void 0,void 0,function*(){var n,i;t??(t={});const r=ob(t,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(i=this.roomOptions)===null||i===void 0?void 0:i.videoCaptureDefaults);try{return(yield zc(r,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(o=>(ri(o)&&(this.microphoneError=void 0,o.setAudioContext(this.audioContext),o.source=j.Source.Microphone,this.emit(ie.AudioStreamAcquired)),or(o)&&(this.cameraError=void 0,o.source=j.Source.Camera),o))}catch(s){throw s instanceof Error&&(t.audio&&(this.microphoneError=s),t.video&&(this.cameraError=s)),s}})}createScreenTracks(t){return P(this,void 0,void 0,function*(){if(t===void 0&&(t={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new Dd("getDisplayMedia not supported");t.resolution===void 0&&!IP()&&(t.resolution=Xd.h1080fps30.resolution);const n=VP(t),i=yield navigator.mediaDevices.getDisplayMedia(n),r=i.getVideoTracks();if(r.length===0)throw new Ri("no video track found");const s=new Fc(r[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});s.source=j.Source.ScreenShare,t.contentHint&&(s.mediaStreamTrack.contentHint=t.contentHint);const a=[s];if(i.getAudioTracks().length>0){this.emit(ie.AudioStreamAcquired);const o=new Xc(i.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});o.source=j.Source.ScreenShareAudio,a.push(o)}return a})}publishTrack(t,n){return P(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(t,n)})}publishOrRepublishTrack(t,n){return P(this,arguments,void 0,function(i,r){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return(function*(){var o,c,l,u;Ai(i)&&i.setAudioContext(s.audioContext),yield(o=s.reconnectFuture)===null||o===void 0?void 0:o.promise,s.republishPromise&&!a&&(yield s.republishPromise),As(i)&&s.pendingPublishPromises.has(i)&&(yield s.pendingPublishPromises.get(i));let d;if(i instanceof MediaStreamTrack)d=i.getConstraints();else{d=i.constraints;let v;switch(i.source){case j.Source.Microphone:v="audioinput";break;case j.Source.Camera:v="videoinput"}v&&s.activeDeviceMap.has(v)&&(d=Object.assign(Object.assign({},d),{deviceId:s.activeDeviceMap.get(v)}))}if(i instanceof MediaStreamTrack)switch(i.kind){case"audio":i=new Xc(i,d,!0,s.audioContext,{loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});break;case"video":i=new Fc(i,d,!0,{loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});break;default:throw new Ri("unsupported MediaStreamTrack kind ".concat(i.kind))}else i.updateLoggerOptions({loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});let h;if(s.trackPublications.forEach(v=>{v.track&&v.track===i&&(h=v)}),h)return s.log.warn("track has already been published, skipping",Object.assign(Object.assign({},s.logContext),Re(h))),h;const p=Object.assign(Object.assign({},s.roomOptions.publishDefaults),r),O="channelCount"in i.mediaStreamTrack.getSettings()&&i.mediaStreamTrack.getSettings().channelCount===2||i.mediaStreamTrack.getConstraints().channelCount===2,m=(c=p.forceStereo)!==null&&c!==void 0?c:O;m&&(p.dtx===void 0&&s.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},s.logContext),Re(i))),p.red===void 0&&s.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(l=p.dtx)!==null&&l!==void 0||(p.dtx=!1),(u=p.red)!==null&&u!==void 0||(p.red=!1)),!NP()&&s.roomOptions.e2ee&&(s.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},s.logContext)),p.simulcast=!1),p.source&&(i.source=p.source);const b=new Promise((v,k)=>P(s,void 0,void 0,function*(){try{if(this.engine.client.currentState!==nt.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:Re(i)}));let y=!1;const T=setTimeout(()=>{y=!0,i.stop(),k(new Vv("publishing rejected as engine not connected within timeout",408))},15e3);if(yield this.waitUntilEngineConnected(),clearTimeout(T),y)return;const S=yield this.publish(i,p,m);v(S)}else try{const y=yield this.publish(i,p,m);v(y)}catch(y){k(y)}}catch(y){k(y)}}));s.pendingPublishPromises.set(i,b);try{return yield b}catch(v){throw v}finally{s.pendingPublishPromises.delete(i)}})()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new xn),this.signalConnectedFuture.promise}hasPermissionsToPublish(t){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),Re(t))),!1;const{canPublish:n,canPublishSources:i}=this.permissions;return n&&(i.length===0||i.map(r=>HP(r)).includes(t.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),Re(t))),!1)}publish(t,n,i){return P(this,void 0,void 0,function*(){var r,s,a,o,c,l,u,d,h,p;if(!this.hasPermissionsToPublish(t))throw new Vv("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(L=>As(t)&&L.source===t.source)&&t.source!==j.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(t.source),Object.assign(Object.assign({},this.logContext),Re(t))),n.stopMicTrackOnMute&&ri(t)&&(t.stopOnMute=!0),t.source===j.Source.ScreenShare&&Fr()&&(n.simulcast=!1),n.videoCodec==="av1"&&!PP()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!RP()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=ch),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(L=>n.videoCodec===Xa(L.mime))||(n.videoCodec=Xa(this.enabledPublishVideoCodecs[0].mime)));const m=n.videoCodec;t.on(J.Muted,this.onTrackMuted),t.on(J.Unmuted,this.onTrackUnmuted),t.on(J.Ended,this.handleTrackEnded),t.on(J.UpstreamPaused,this.onTrackUpstreamPaused),t.on(J.UpstreamResumed,this.onTrackUpstreamResumed),t.on(J.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const b=[],v=!(!((r=n.dtx)!==null&&r!==void 0)||r),k=t.getSourceTrackSettings();k.autoGainControl&&b.push(Qt.TF_AUTO_GAIN_CONTROL),k.echoCancellation&&b.push(Qt.TF_ECHO_CANCELLATION),k.noiseSuppression&&b.push(Qt.TF_NOISE_SUPPRESSION),k.channelCount&&k.channelCount>1&&b.push(Qt.TF_STEREO),v&&b.push(Qt.TF_NO_DTX),Ai(t)&&t.hasPreConnectBuffer&&b.push(Qt.TF_PRECONNECT_BUFFER);const y=new Ia({cid:t.mediaStreamTrack.id,name:n.name,type:j.kindToProto(t.kind),muted:t.isMuted,source:j.sourceToProto(t.source),disableDtx:v,encryption:this.encryptionType,stereo:i,disableRed:this.isE2EEEnabled||!(!((s=n.red)!==null&&s!==void 0)||s),stream:n==null?void 0:n.stream,backupCodecPolicy:n==null?void 0:n.backupCodecPolicy,audioFeatures:b});let T;if(t.kind===j.Kind.Video){let L={width:0,height:0};try{L=yield t.waitForDimensions()}catch{const D=(o=(a=this.roomOptions.videoCaptureDefaults)===null||a===void 0?void 0:a.resolution)!==null&&o!==void 0?o:La.h720.resolution;L={width:D.width,height:D.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),Re(t)),{dims:L}))}y.width=L.width,y.height=L.height,cr(t)&&(qn(m)&&(t.source===j.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in t.mediaStreamTrack&&(t.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),Re(t))))),n.scalabilityMode=(c=n.scalabilityMode)!==null&&c!==void 0?c:"L3T3_KEY"),y.simulcastCodecs=[new vd({codec:m,cid:t.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:ch}),n.backupCodec&&m!==n.backupCodec.codec&&y.encryption===Pt.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),y.simulcastCodecs.push(new vd({codec:n.backupCodec.codec,cid:""})))),T=fh(t.source===j.Source.ScreenShare,y.width,y.height,n),y.layers=Nb(y.width,y.height,T,qn(n.videoCodec))}else t.kind===j.Kind.Audio&&(T=[{maxBitrate:(l=n.audioPreset)===null||l===void 0?void 0:l.maxBitrate,priority:(d=(u=n.audioPreset)===null||u===void 0?void 0:u.priority)!==null&&d!==void 0?d:"high",networkPriority:(p=(h=n.audioPreset)===null||h===void 0?void 0:h.priority)!==null&&p!==void 0?p:"high"}]);if(!this.engine||this.engine.isClosed)throw new Rt("cannot publish track when not connected");const S=()=>P(this,void 0,void 0,function*(){var L,w,D;if(!this.engine.pcManager)throw new Rt("pcManager is not ready");if(t.sender=yield this.engine.createSender(t,n,T),this.emit(ie.LocalSenderCreated,t.sender,t),cr(t)&&((L=n.degradationPreference)!==null&&L!==void 0||(n.degradationPreference=XR(t)),t.setDegradationPreference(n.degradationPreference)),T)if(Fr()&&t.kind===j.Kind.Audio){let M;for(const B of this.engine.pcManager.publisher.getTransceivers())if(B.sender===t.sender){M=B;break}M&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:M,codec:"opus",maxbr:!((w=T[0])===null||w===void 0)&&w.maxBitrate?T[0].maxBitrate/1e3:0})}else t.codec&&qn(t.codec)&&(!((D=T[0])===null||D===void 0)&&D.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:y.cid,codec:t.codec,maxbr:T[0].maxBitrate/1e3});yield this.engine.negotiate()});let _;const x=new Promise((L,w)=>P(this,void 0,void 0,function*(){var D;try{_=yield this.engine.addTrack(y),L(_)}catch(M){t.sender&&(!((D=this.engine.pcManager)===null||D===void 0)&&D.publisher)&&(this.engine.pcManager.publisher.removeTrack(t.sender),yield this.engine.negotiate().catch(B=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),Re(t)),{error:B}))})),w(M)}}));if(this.enabledPublishVideoCodecs.length>0)_=(yield Promise.all([x,S()]))[0];else{_=yield x;let L;if(_.codecs.forEach(w=>{L===void 0&&(L=w.mimeType)}),L&&t.kind===j.Kind.Video){const w=Xa(L);w!==m&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),Re(t)),{codec:w})),n.videoCodec=w,T=fh(t.source===j.Source.ScreenShare,y.width,y.height,n))}yield S()}const N=new bh(t.kind,_,t,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(N.on(J.CpuConstrained,L=>this.onTrackCpuConstrained(L,N)),N.options=n,t.sid=_.sid,this.log.debug("publishing ".concat(t.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:T,trackInfo:_})),cr(t)?t.startMonitor(this.engine.client):Ai(t)&&t.startMonitor(),this.addTrackPublication(N),this.emit(ie.LocalTrackPublished,N),Ai(t)&&_.audioFeatures.includes(Qt.TF_PRECONNECT_BUFFER)){const L=t.getPreConnectBuffer(),w=t.getPreConnectBufferMimeType();this.on(ie.LocalTrackSubscribed,D=>{if(D.trackSid===_.sid){if(!t.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),Re(t))),t.stopPreConnectBuffer()}}),L&&new Promise((M,B)=>P(this,void 0,void 0,function*(){var F,q,H,se,Z,de;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),Re(t)));const R=setTimeout(()=>{B(new Error("agent not active within 10 seconds"))},1e4),fe=yield this.waitUntilActiveAgentPresent();clearTimeout(R),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),Re(t)));const Ye=yield this.streamBytes({name:"preconnect-buffer",mimeType:w,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[fe.identity],attributes:{trackId:N.trackSid,sampleRate:String((Z=k.sampleRate)!==null&&Z!==void 0?Z:"48000"),channels:String((de=k.channelCount)!==null&&de!==void 0?de:"1")}});try{for(var I=!0,De=xi(L),Me;Me=yield De.next(),F=Me.done,!F;I=!0){se=Me.value,I=!1;const Qe=se;yield Ye.write(Qe)}}catch(Qe){q={error:Qe}}finally{try{!I&&!F&&(H=De.return)&&(yield H.call(De))}finally{if(q)throw q.error}}yield Ye.close(),M()}catch(R){B(R)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),Re(t)))}).catch(M=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),Re(t)),{error:M}))})}return N})}get isLocal(){return!0}publishAdditionalCodecForTrack(t,n,i){return P(this,void 0,void 0,function*(){var r;if(this.encryptionType!==Pt.NONE)return;let s;if(this.trackPublications.forEach(p=>{p.track&&p.track===t&&(s=p)}),!s)throw new Ri("track is not published");if(!cr(t))throw new Ri("track is not a video track");const a=Object.assign(Object.assign({},(r=this.roomOptions)===null||r===void 0?void 0:r.publishDefaults),i),o=$R(t,n,a);if(!o){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),Re(t)));return}const c=t.addSimulcastTrack(n,o);if(!c)return;const l=new Ia({cid:c.mediaStreamTrack.id,type:j.kindToProto(t.kind),muted:t.isMuted,source:j.sourceToProto(t.source),sid:t.sid,simulcastCodecs:[{codec:a.videoCodec,cid:c.mediaStreamTrack.id}]});if(l.layers=Nb(l.width,l.height,o),!this.engine||this.engine.isClosed)throw new Rt("cannot publish track when not connected");const u=()=>P(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(t,c,a,o),yield this.engine.negotiate()}),h=(yield Promise.all([this.engine.addTrack(l),u()]))[0];this.log.debug("published ".concat(n," for track ").concat(t.sid),Object.assign(Object.assign({},this.logContext),{encodings:o,trackInfo:h}))})}unpublishTrack(t,n){return P(this,void 0,void 0,function*(){var i,r;if(As(t)){const l=this.pendingPublishPromises.get(t);l&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),Re(t))),yield l)}const s=this.getPublicationForTrack(t),a=s?Re(s):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),a)),!s||!s.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),a));return}t=s.track,t.off(J.Muted,this.onTrackMuted),t.off(J.Unmuted,this.onTrackUnmuted),t.off(J.Ended,this.handleTrackEnded),t.off(J.UpstreamPaused,this.onTrackUpstreamPaused),t.off(J.UpstreamResumed,this.onTrackUpstreamResumed),t.off(J.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(r=(i=this.roomOptions)===null||i===void 0?void 0:i.stopLocalTrackOnUnpublish)!==null&&r!==void 0?r:!0),n?t.stop():t.stopMonitor();let o=!1;const c=t.sender;if(t.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<Ot.FAILED&&c)try{for(const l of this.engine.pcManager.publisher.getTransceivers())l.sender===c&&(l.direction="inactive",o=!0);if(this.engine.removeTrack(c)&&(o=!0),cr(t)){for(const[,l]of t.simulcastCodecs)l.sender&&(this.engine.removeTrack(l.sender)&&(o=!0),l.sender=void 0);t.simulcastCodecs.clear()}}catch(l){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),a),{error:l}))}switch(this.trackPublications.delete(s.trackSid),s.kind){case j.Kind.Audio:this.audioTrackPublications.delete(s.trackSid);break;case j.Kind.Video:this.videoTrackPublications.delete(s.trackSid);break}return this.emit(ie.LocalTrackUnpublished,s),s.setTrack(void 0),o&&(yield this.engine.negotiate()),s})}unpublishTracks(t){return P(this,void 0,void 0,function*(){return(yield Promise.all(t.map(i=>this.unpublishTrack(i)))).filter(i=>!!i)})}republishAllTracks(t){return P(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){i.republishPromise&&(yield i.republishPromise),i.republishPromise=new Promise((s,a)=>P(i,void 0,void 0,function*(){try{const o=[];this.trackPublications.forEach(c=>{c.track&&(n&&(c.options=Object.assign(Object.assign({},c.options),n)),o.push(c))}),yield Promise.all(o.map(c=>P(this,void 0,void 0,function*(){const l=c.track;yield this.unpublishTrack(l,!1),r&&!l.isMuted&&l.source!==j.Source.ScreenShare&&l.source!==j.Source.ScreenShareAudio&&(Ai(l)||cr(l))&&!l.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:c.trackSid})),yield l.restartTrack()),yield this.publishOrRepublishTrack(l,c.options,!0)}))),s()}catch(o){a(o)}finally{this.republishPromise=void 0}})),yield i.republishPromise})()})}publishData(t){return P(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){const s=r.reliable?Pe.RELIABLE:Pe.LOSSY,a=r.destinationIdentities,o=r.topic;let c=new hd({participantIdentity:i.identity,payload:n,destinationIdentities:a,topic:o});const l=new Jt({kind:s,value:{case:"user",value:c}});yield i.engine.sendDataPacket(l,s)})()})}publishDtmf(t,n){return P(this,void 0,void 0,function*(){const i=new Jt({kind:Pe.RELIABLE,value:{case:"sipDtmf",value:new Ng({code:t,digit:n})}});yield this.engine.sendDataPacket(i,Pe.RELIABLE)})}sendChatMessage(t,n){return P(this,void 0,void 0,function*(){const i={id:crypto.randomUUID(),message:t,timestamp:Date.now(),attachedFiles:n==null?void 0:n.attachments},r=new Jt({value:{case:"chatMessage",value:new Tc(Object.assign(Object.assign({},i),{timestamp:dt.parse(i.timestamp)}))}});return yield this.engine.sendDataPacket(r,Pe.RELIABLE),this.emit(ie.ChatMessage,i),i})}editChatMessage(t,n){return P(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},n),{message:t,editTimestamp:Date.now()}),r=new Jt({value:{case:"chatMessage",value:new Tc(Object.assign(Object.assign({},i),{timestamp:dt.parse(i.timestamp),editTimestamp:dt.parse(i.editTimestamp)}))}});return yield this.engine.sendDataPacket(r,Pe.RELIABLE),this.emit(ie.ChatMessage,i),i})}sendText(t,n){return P(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendText(t,n)})}streamText(t){return P(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamText(t)})}sendFile(t,n){return P(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendFile(t,n)})}streamBytes(t){return P(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamBytes(t)})}performRpc(t){return P(this,arguments,void 0,function(n){var i=this;let{destinationIdentity:r,method:s,payload:a,responseTimeout:o=15e3}=n;return(function*(){return new Promise((u,d)=>P(i,void 0,void 0,function*(){var h,p,O,m;if(uh(a)>wb){d(gt.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((p=(h=this.engine.latestJoinResponse)===null||h===void 0?void 0:h.serverInfo)===null||p===void 0)&&p.version&&ii((m=(O=this.engine.latestJoinResponse)===null||O===void 0?void 0:O.serverInfo)===null||m===void 0?void 0:m.version,"1.8.0")<0){d(gt.builtIn("UNSUPPORTED_SERVER"));return}const b=Math.max(o,8e3),v=crypto.randomUUID();yield this.publishRpcRequest(r,v,s,a,b);const k=setTimeout(()=>{this.pendingAcks.delete(v),d(gt.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(v),clearTimeout(y)},7e3);this.pendingAcks.set(v,{resolve:()=>{clearTimeout(k)},participantIdentity:r});const y=setTimeout(()=>{this.pendingResponses.delete(v),d(gt.builtIn("RESPONSE_TIMEOUT"))},o);this.pendingResponses.set(v,{resolve:(T,S)=>{clearTimeout(y),this.pendingAcks.has(v)&&(console.warn("RPC response received before ack",v),this.pendingAcks.delete(v),clearTimeout(k)),S?d(S):u(T??"")},participantIdentity:r})}))})()})}registerRpcMethod(t,n){this.rpcHandlers.has(t)&&this.log.warn("you're overriding the RPC handler for method ".concat(t,", in the future this will throw an error")),this.rpcHandlers.set(t,n)}unregisterRpcMethod(t){this.rpcHandlers.delete(t)}setTrackSubscriptionPermissions(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=t,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(t){const n=this.pendingAcks.get(t);n?(n.resolve(),this.pendingAcks.delete(t)):console.error("Ack received for unexpected RPC request",t)}handleIncomingRpcResponse(t,n,i){const r=this.pendingResponses.get(t);r?(r.resolve(n,i),this.pendingResponses.delete(t)):console.error("Response received for unexpected RPC request",t)}publishRpcRequest(t,n,i,r,s){return P(this,void 0,void 0,function*(){const a=new Jt({destinationIdentities:[t],kind:Pe.RELIABLE,value:{case:"rpcRequest",value:new pd({id:n,method:i,payload:r,responseTimeoutMs:s,version:1})}});yield this.engine.sendDataPacket(a,Pe.RELIABLE)})}handleParticipantDisconnected(t){for(const[n,{participantIdentity:i}]of this.pendingAcks)i===t&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:i,resolve:r}]of this.pendingResponses)i===t&&(r(null,gt.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(t){this.enabledPublishVideoCodecs=t.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(t){return super.updateInfo(t)?(t.tracks.forEach(n=>{var i,r;const s=this.trackPublications.get(n.sid);if(s){const a=s.isMuted||((r=(i=s.track)===null||i===void 0?void 0:i.isUpstreamPaused)!==null&&r!==void 0?r:!1);a!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),Re(s)),{mutedOnServer:a})),this.engine.client.sendMuteTrack(n.sid,a))}}),!0):!1}setActiveAgent(t){var n,i,r,s;this.firstActiveAgent=t,t&&!this.firstActiveAgent&&(this.firstActiveAgent=t),t?(i=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||i===void 0||i.call(n,t):(s=(r=this.activeAgentFuture)===null||r===void 0?void 0:r.reject)===null||s===void 0||s.call(r,new Error("Agent disconnected")),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new xn),this.activeAgentFuture.promise)}getPublicationForTrack(t){let n;return this.trackPublications.forEach(i=>{const r=i.track;r&&(t instanceof MediaStreamTrack?(Ai(r)||cr(r))&&r.mediaStreamTrack===t&&(n=i):t===r&&(n=i))}),n}waitForPendingPublicationOfSource(t){return P(this,void 0,void 0,function*(){const i=Date.now();for(;Date.now()<i+1e4;){const r=Array.from(this.pendingPublishPromises.entries()).find(s=>{let[a]=s;return a.source===t});if(r)return r[1];yield qt(20)}})}}class aA extends Ii{constructor(t,n,i,r){super(t,n.sid,n.name,r),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=s=>{this.setTrack(void 0),this.emit(J.Ended,s)},this.handleVisibilityChange=s=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(s),this.logContext),this.visible=s,this.emitTrackUpdate()},this.handleVideoDimensionsChange=s=>{this.log.debug("adaptivestream video dimensions ".concat(s.width,"x").concat(s.height),this.logContext),this.videoDimensionsAdaptiveStream=s,this.emitTrackUpdate()},this.subscribed=i,this.updateInfo(n)}setSubscribed(t){const n=this.subscriptionStatus,i=this.permissionStatus;this.subscribed=t,t&&(this.allowed=!0);const r=new wc({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new Mg({participantSid:"",trackSids:[this.trackSid]})]});this.emit(J.UpdateSubscription,r),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(i)}get subscriptionStatus(){return this.subscribed===!1?Ii.SubscriptionStatus.Unsubscribed:super.isSubscribed?Ii.SubscriptionStatus.Subscribed:Ii.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?Ii.PermissionStatus.Allowed:Ii.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(t){!this.isManualOperationAllowed()||this.requestedDisabled===!t||(this.requestedDisabled=!t,this.emitTrackUpdate())}setVideoQuality(t){!this.isManualOperationAllowed()||this.requestedMaxQuality===t||(this.requestedMaxQuality=t,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(t){var n,i;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===t.width&&((i=this.requestedVideoDimensions)===null||i===void 0?void 0:i.height)===t.height||(Yd(this.track)&&(this.requestedVideoDimensions=t),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(t){this.isManualOperationAllowed()&&Yd(this.track)&&this.fps!==t&&(this.fps=t,this.emitTrackUpdate())}get videoQuality(){var t;return(t=this.requestedMaxQuality)!==null&&t!==void 0?t:On.HIGH}setTrack(t){const n=this.subscriptionStatus,i=this.permissionStatus,r=this.track;r!==t&&(r&&(r.off(J.VideoDimensionsChanged,this.handleVideoDimensionsChange),r.off(J.VisibilityChanged,this.handleVisibilityChange),r.off(J.Ended,this.handleEnded),r.detach(),r.stopMonitor(),this.emit(J.Unsubscribed,r)),super.setTrack(t),t&&(t.sid=this.trackSid,t.on(J.VideoDimensionsChanged,this.handleVideoDimensionsChange),t.on(J.VisibilityChanged,this.handleVisibilityChange),t.on(J.Ended,this.handleEnded),this.emit(J.Subscribed,t)),this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(t){const n=this.subscriptionStatus,i=this.permissionStatus;this.allowed=t,this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(t){this.emit(J.SubscriptionFailed,t)}updateInfo(t){super.updateInfo(t);const n=this.metadataMuted;this.metadataMuted=t.muted,this.track?this.track.setMuted(t.muted):n!==t.muted&&this.emit(t.muted?J.Muted:J.Unmuted)}emitSubscriptionUpdateIfChanged(t){const n=this.subscriptionStatus;t!==n&&this.emit(J.SubscriptionStatusChanged,n,t)}emitPermissionUpdateIfChanged(t){this.permissionStatus!==t&&this.emit(J.SubscriptionPermissionChanged,this.permissionStatus,t)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return Yd(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const t=new Vg({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===j.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)db(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const i=KP(this.trackInfo,this.requestedMaxQuality);i&&db(this.videoDimensionsAdaptiveStream,i)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(t.width=Math.ceil(n.width),t.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),t.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:On.HIGH})),t.quality=On.HIGH)}this.emit(J.UpdateSettings,t)}}class Bc extends zb{static fromParticipantInfo(t,n,i){return new Bc(t,n.sid,n.identity,n.name,n.metadata,n.attributes,i,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(t,n,i,r,s,a,o){let c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:Aa.STANDARD;super(n,i||"",r,s,a,o,c),this.signalClient=t,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(t){super.addTrackPublication(t),t.on(J.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),Re(t)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),t.on(J.UpdateSubscription,n=>{n.participantTracks.forEach(i=>{i.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),t.on(J.SubscriptionPermissionChanged,n=>{this.emit(ie.TrackSubscriptionPermissionChanged,t,n)}),t.on(J.SubscriptionStatusChanged,n=>{this.emit(ie.TrackSubscriptionStatusChanged,t,n)}),t.on(J.Subscribed,n=>{this.emit(ie.TrackSubscribed,n,t)}),t.on(J.Unsubscribed,n=>{this.emit(ie.TrackUnsubscribed,n,t)}),t.on(J.SubscriptionFailed,n=>{this.emit(ie.TrackSubscriptionFailed,t.trackSid,n)})}getTrackPublication(t){const n=super.getTrackPublication(t);if(n)return n}getTrackPublicationByName(t){const n=super.getTrackPublicationByName(t);if(n)return n}setVolume(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:j.Source.Microphone;this.volumeMap.set(n,t);const i=this.getTrackPublication(n);i&&i.track&&i.track.setVolume(t)}getVolume(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:j.Source.Microphone;const n=this.getTrackPublication(t);return n&&n.track?n.track.getVolume():this.volumeMap.get(t)}addSubscribedMediaTrack(t,n,i,r,s,a){let o=this.getTrackPublicationBySid(n);if(o||n.startsWith("TR")||this.trackPublications.forEach(u=>{!o&&t.kind===u.kind.toString()&&(o=u)}),!o){if(a===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(ie.TrackSubscriptionFailed,n);return}a===void 0&&(a=20),setTimeout(()=>{this.addSubscribedMediaTrack(t,n,i,r,s,a-1)},150);return}if(t.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),Re(o))),this.emit(ie.TrackSubscriptionFailed,n);return}const c=t.kind==="video";let l;return c?l=new eA(t,n,r,s):l=new JR(t,n,r,this.audioContext,this.audioOutput),l.source=o.source,l.isMuted=o.isMuted,l.setMediaStream(i),l.start(),o.setTrack(l),this.volumeMap.has(o.source)&&Gd(l)&&ri(l)&&l.setVolume(this.volumeMap.get(o.source)),o}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(t){return this.trackPublications.get(t)}updateInfo(t){if(!super.updateInfo(t))return!1;const n=new Map,i=new Map;return t.tracks.forEach(r=>{var s,a;let o=this.getTrackPublicationBySid(r.sid);if(o)o.updateInfo(r);else{const c=j.kindFromProto(r.type);if(!c)return;o=new aA(c,r,(s=this.signalClient.connectOptions)===null||s===void 0?void 0:s.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(a=this.loggerOptions)===null||a===void 0?void 0:a.loggerName}),o.updateInfo(r),i.set(r.sid,o);const l=Array.from(this.trackPublications.values()).find(u=>u.source===(o==null?void 0:o.source));l&&o.source!==j.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(o.source),Object.assign(Object.assign({},this.logContext),{oldTrack:Re(l),newTrack:Re(o)})),this.addTrackPublication(o)}n.set(r.sid,o)}),this.trackPublications.forEach(r=>{n.has(r.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),Re(r))),this.unpublishTrack(r.trackSid,!0))}),i.forEach(r=>{this.emit(ie.TrackPublished,r)}),!0}unpublishTrack(t,n){const i=this.trackPublications.get(t);if(!i)return;const{track:r}=i;switch(r&&(r.stop(),i.setTrack(void 0)),this.trackPublications.delete(t),i.kind){case j.Kind.Audio:this.audioTrackPublications.delete(t);break;case j.Kind.Video:this.videoTrackPublications.delete(t);break}n&&this.emit(ie.TrackUnpublished,i)}setAudioOutput(t){return P(this,void 0,void 0,function*(){this.audioOutput=t;const n=[];this.audioTrackPublications.forEach(i=>{var r;ri(i.track)&&Gd(i.track)&&n.push(i.track.setSinkId((r=t.deviceId)!==null&&r!==void 0?r:"default"))}),yield Promise.all(n)})}emit(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:t,args:i})),super.emit(t,...i)}}var Be;(function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting"})(Be||(Be={}));const oA=4*1e3;class Ms extends ti.EventEmitter{get hasE2EESetup(){return this.e2eeManager!==void 0}constructor(t){var n,i,r,s;if(super(),n=this,this.state=Be.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=ye,this.bufferedEvents=[],this.isResuming=!1,this.rpcHandlers=new Map,this.connect=(a,o,c)=>P(this,void 0,void 0,function*(){var l;if(!AP())throw ni()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const u=yield this.disconnectLock.lock();if(this.state===Be.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),u(),Promise.resolve();if(this.connectFuture)return u(),this.connectFuture.promise;this.setAndEmitConnectionState(Be.Connecting),((l=this.regionUrlProvider)===null||l===void 0?void 0:l.getServerUrl().toString())!==a&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),$c(new URL(a))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new Ve(a,o):this.regionUrlProvider.updateToken(o),this.regionUrlProvider.fetchRegionSettings().then(p=>{var O;(O=this.regionUrlProvider)===null||O===void 0||O.setServerReportedRegions(p)}).catch(p=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:p}))}));const d=(p,O,m)=>P(this,void 0,void 0,function*(){var b,v;this.abortController&&this.abortController.abort();const k=new AbortController;this.abortController=k,u==null||u();try{if(yield Is.getInstance().getBackOffPromise(a),k.signal.aborted)throw new Ne("Connection attempt aborted",ve.Cancelled);yield this.attemptConnection(m??a,o,c,k),this.abortController=void 0,p()}catch(y){if(this.regionUrlProvider&&y instanceof Ne&&y.reason!==ve.Cancelled&&y.reason!==ve.NotAllowed){let T=null;try{this.log.debug("Fetching next region"),T=yield this.regionUrlProvider.getNextBestRegionUrl((b=this.abortController)===null||b===void 0?void 0:b.signal)}catch(S){if(S instanceof Ne&&(S.status===401||S.reason===ve.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),O(S);return}}[ve.InternalError,ve.ServerUnreachable,ve.Timeout].includes(y.reason)&&(this.log.debug("Adding failed connection attempt to back off"),Is.getInstance().addFailedConnectionAttempt(a)),T&&!(!((v=this.abortController)===null||v===void 0)&&v.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(y.message,". Retrying with another region: ").concat(T),this.logContext),this.recreateEngine(),yield d(p,O,T)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,ab(y)),O(y))}else{let T=Ln.UNKNOWN_REASON;y instanceof Ne&&(T=ab(y)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,T),O(y)}}}),h=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new xn((p,O)=>{d(p,O,h)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(a,o,c,l,u,d)=>P(this,void 0,void 0,function*(){var h,p,O;const m=yield c.join(a,o,{autoSubscribe:l.autoSubscribe,adaptiveStream:typeof u.adaptiveStream=="object"?!0:u.adaptiveStream,maxRetries:l.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:l.websocketTimeout,singlePeerConnection:u.singlePeerConnection},d.signal);let b=m.serverInfo;if(b||(b={version:m.serverVersion,region:m.serverRegion}),this.serverInfo=b,this.log.debug("connected to Livekit Server ".concat(Object.entries(b).map(v=>{let[k,y]=v;return"".concat(k,": ").concat(y)}).join(", ")),{room:(h=m.room)===null||h===void 0?void 0:h.name,roomSid:(p=m.room)===null||p===void 0?void 0:p.sid,identity:(O=m.participant)===null||O===void 0?void 0:O.identity}),!b.version)throw new mP("unknown server version");return b.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),u.dynacast=!1),m}),this.applyJoinResponse=a=>{const o=a.participant;if(this.localParticipant.sid=o.sid,this.localParticipant.identity=o.identity,this.localParticipant.setEnabledPublishCodecs(a.enabledPublishCodecs),this.e2eeManager)try{this.e2eeManager.setSifTrailer(a.sifTrailer)}catch(c){this.log.error(c instanceof Error?c.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:c}))}this.handleParticipantUpdates([o,...a.otherParticipants]),a.room&&this.handleRoomUpdate(a.room)},this.attemptConnection=(a,o,c,l)=>P(this,void 0,void 0,function*(){var u,d;this.state===Be.Reconnecting||this.isResuming||!((u=this.engine)===null||u===void 0)&&u.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((d=this.regionUrlProvider)===null||d===void 0)&&d.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},lh),c),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const h=yield this.connectSignal(a,o,this.engine,this.connOptions,this.options,l);this.applyJoinResponse(h),this.setupLocalParticipantEvents(),this.emit(G.SignalConnected)}catch(h){yield this.engine.close(),this.recreateEngine();const p=new Ne("could not establish signal connection",l.signal.aborted?ve.Cancelled:ve.ServerUnreachable);throw h instanceof Error&&(p.message="".concat(p.message,": ").concat(h.message)),h instanceof Ne&&(p.reason=h.reason,p.status=h.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:h})),p}if(l.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new Ne("Connection attempt aborted",ve.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,l)}catch(h){throw yield this.engine.close(),this.recreateEngine(),h}ln()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),ln()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(Be.Connected),this.emit(G.Connected),Is.getInstance().resetFailedConnectionAttempts(a),this.registerConnectionReconcile(),this.regionUrlProvider&&this.regionUrlProvider.notifyConnected()}),this.disconnect=function(){for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return P(n,[...o],void 0,function(){var l=this;let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){var d,h,p;const O=yield l.disconnectLock.lock();try{if(l.state===Be.Disconnected){l.log.debug("already disconnected",l.logContext);return}if(l.log.info("disconnect from room",Object.assign({},l.logContext)),l.state===Be.Connecting||l.state===Be.Reconnecting||l.isResuming){const m="Abort connection attempt due to user initiated disconnect";l.log.warn(m,l.logContext),(d=l.abortController)===null||d===void 0||d.abort(m),(p=(h=l.connectFuture)===null||h===void 0?void 0:h.reject)===null||p===void 0||p.call(h,new Ne("Client initiated disconnect",ve.Cancelled)),l.connectFuture=void 0}l.engine&&(l.engine.client.isDisconnected||(yield l.engine.client.sendLeave()),yield l.engine.close()),l.handleDisconnect(u,Ln.CLIENT_INITIATED),l.engine=void 0}finally{O()}})()})},this.onPageLeave=()=>P(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>P(this,void 0,void 0,function*(){const a=[],o=cn();if(o&&o.os==="iOS"){const c="livekit-dummy-audio-el";let l=document.getElementById(c);if(!l){l=document.createElement("audio"),l.id=c,l.autoplay=!0,l.hidden=!0;const u=Wd();u.enabled=!0;const d=new MediaStream([u]);l.srcObject=d,document.addEventListener("visibilitychange",()=>{l&&(l.srcObject=document.hidden?null:d,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(l),this.once(G.Disconnected,()=>{l==null||l.remove(),l=null})}a.push(l)}this.remoteParticipants.forEach(c=>{c.audioTrackPublications.forEach(l=>{l.track&&l.track.attachedElements.forEach(u=>{a.push(u)})})});try{yield Promise.all([this.acquireAudioContext(),...a.map(c=>(c.muted=!1,c.play()))]),this.handleAudioPlaybackStarted()}catch(c){throw this.handleAudioPlaybackFailed(c),c}}),this.startVideo=()=>P(this,void 0,void 0,function*(){const a=[];for(const o of this.remoteParticipants.values())o.videoTrackPublications.forEach(c=>{var l;(l=c.track)===null||l===void 0||l.attachedElements.forEach(u=>{a.includes(u)||a.push(u)})});yield Promise.all(a.map(o=>o.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(o=>{o.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const a of this.remoteParticipants.values())this.handleParticipantDisconnected(a.identity,a);this.setAndEmitConnectionState(Be.Reconnecting)&&this.emit(G.Reconnecting)},this.handleSignalRestarted=a=>P(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(a.serverRegion),Object.assign(Object.assign({},this.logContext),{region:a.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(a);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(o){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:o}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:a.serverRegion}))}catch{return}this.setAndEmitConnectionState(Be.Connected),this.emit(G.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=a=>{a.forEach(o=>{var c;if(o.identity===this.localParticipant.identity){this.localParticipant.updateInfo(o);return}o.identity===""&&(o.identity=(c=this.sidToIdentity.get(o.sid))!==null&&c!==void 0?c:"");let l=this.remoteParticipants.get(o.identity);o.state===Es.DISCONNECTED?this.handleParticipantDisconnected(o.identity,l):l=this.getOrCreateParticipant(o.identity,o)})},this.handleActiveSpeakersUpdate=a=>{const o=[],c={};a.forEach(l=>{if(c[l.sid]=!0,l.sid===this.localParticipant.sid)this.localParticipant.audioLevel=l.level,this.localParticipant.setIsSpeaking(!0),o.push(this.localParticipant);else{const u=this.getRemoteParticipantBySid(l.sid);u&&(u.audioLevel=l.level,u.setIsSpeaking(!0),o.push(u))}}),c[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(l=>{c[l.sid]||(l.audioLevel=0,l.setIsSpeaking(!1))}),this.activeSpeakers=o,this.emitWhenConnected(G.ActiveSpeakersChanged,o)},this.handleSpeakersChanged=a=>{const o=new Map;this.activeSpeakers.forEach(l=>{const u=this.remoteParticipants.get(l.identity);u&&u.sid!==l.sid||o.set(l.sid,l)}),a.forEach(l=>{let u=this.getRemoteParticipantBySid(l.sid);l.sid===this.localParticipant.sid&&(u=this.localParticipant),u&&(u.audioLevel=l.level,u.setIsSpeaking(l.active),l.active?o.set(l.sid,u):o.delete(l.sid))});const c=Array.from(o.values());c.sort((l,u)=>u.audioLevel-l.audioLevel),this.activeSpeakers=c,this.emitWhenConnected(G.ActiveSpeakersChanged,c)},this.handleStreamStateUpdate=a=>{a.streamStates.forEach(o=>{const c=this.getRemoteParticipantBySid(o.participantSid);if(!c)return;const l=c.getTrackPublicationBySid(o.trackSid);if(!l||!l.track)return;const u=j.streamStateFromProto(o.state);l.track.setStreamState(u),u!==l.track.streamState&&(c.emit(ie.TrackStreamStateChanged,l,l.track.streamState),this.emitWhenConnected(G.TrackStreamStateChanged,l,l.track.streamState,c))})},this.handleSubscriptionPermissionUpdate=a=>{const o=this.getRemoteParticipantBySid(a.participantSid);if(!o)return;const c=o.getTrackPublicationBySid(a.trackSid);c&&c.setAllowed(a.allowed)},this.handleSubscriptionError=a=>{const o=Array.from(this.remoteParticipants.values()).find(l=>l.trackPublications.has(a.trackSid));if(!o)return;const c=o.getTrackPublicationBySid(a.trackSid);c&&c.setSubscriptionError(a.err)},this.handleDataPacket=(a,o)=>{const c=this.remoteParticipants.get(a.participantIdentity);if(a.value.case==="user")this.handleUserPacket(c,a.value.value,a.kind,o);else if(a.value.case==="transcription")this.handleTranscription(c,a.value.value);else if(a.value.case==="sipDtmf")this.handleSipDtmf(c,a.value.value);else if(a.value.case==="chatMessage")this.handleChatMessage(c,a.value.value);else if(a.value.case==="metrics")this.handleMetrics(a.value.value,c);else if(a.value.case==="streamHeader"||a.value.case==="streamChunk"||a.value.case==="streamTrailer")this.handleDataStream(a,o);else if(a.value.case==="rpcRequest"){const l=a.value.value;this.handleIncomingRpcRequest(a.participantIdentity,l.id,l.method,l.payload,l.responseTimeoutMs,l.version)}},this.handleUserPacket=(a,o,c,l)=>{this.emit(G.DataReceived,o.payload,a,c,o.topic,l),a==null||a.emit(ie.DataReceived,o.payload,c,l)},this.handleSipDtmf=(a,o)=>{this.emit(G.SipDTMFReceived,o,a),a==null||a.emit(ie.SipDTMFReceived,o)},this.handleTranscription=(a,o)=>{const c=o.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(o.transcribedParticipantIdentity),l=c==null?void 0:c.trackPublications.get(o.trackId),u=qP(o,this.transcriptionReceivedTimes);l==null||l.emit(J.TranscriptionReceived,u),c==null||c.emit(ie.TranscriptionReceived,u,l),this.emit(G.TranscriptionReceived,u,c,l)},this.handleChatMessage=(a,o)=>{const c=XP(o);this.emit(G.ChatMessage,c,a)},this.handleMetrics=(a,o)=>{this.emit(G.MetricsReceived,a,o)},this.handleDataStream=(a,o)=>{this.incomingDataStreamManager.handleDataStreamPacket(a,o)},this.bufferedSegments=new Map,this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(G.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=a=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:a})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(G.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(G.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(G.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>P(this,void 0,void 0,function*(){var a;((a=cn())===null||a===void 0?void 0:a.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(G.MediaDevicesChanged)}),this.handleRoomUpdate=a=>{const o=this.roomInfo;this.roomInfo=a,o&&o.metadata!==a.metadata&&this.emitWhenConnected(G.RoomMetadataChanged,a.metadata),(o==null?void 0:o.activeRecording)!==a.activeRecording&&this.emitWhenConnected(G.RecordingStatusChanged,a.activeRecording)},this.handleConnectionQualityUpdate=a=>{a.updates.forEach(o=>{if(o.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(o.quality);return}const c=this.getRemoteParticipantBySid(o.participantSid);c&&c.setConnectionQuality(o.quality)})},this.onLocalParticipantMetadataChanged=a=>{this.emit(G.ParticipantMetadataChanged,a,this.localParticipant)},this.onLocalParticipantNameChanged=a=>{this.emit(G.ParticipantNameChanged,a,this.localParticipant)},this.onLocalAttributesChanged=a=>{this.emit(G.ParticipantAttributesChanged,a,this.localParticipant)},this.onLocalTrackMuted=a=>{this.emit(G.TrackMuted,a,this.localParticipant)},this.onLocalTrackUnmuted=a=>{this.emit(G.TrackUnmuted,a,this.localParticipant)},this.onTrackProcessorUpdate=a=>{var o;(o=a==null?void 0:a.onPublish)===null||o===void 0||o.call(a,this)},this.onLocalTrackPublished=a=>P(this,void 0,void 0,function*(){var o,c,l,u,d,h;(o=a.track)===null||o===void 0||o.on(J.TrackProcessorUpdate,this.onTrackProcessorUpdate),(c=a.track)===null||c===void 0||c.on(J.Restarted,this.onLocalTrackRestarted),(d=(u=(l=a.track)===null||l===void 0?void 0:l.getProcessor())===null||u===void 0?void 0:u.onPublish)===null||d===void 0||d.call(u,this),this.emit(G.LocalTrackPublished,a,this.localParticipant),Ai(a.track)&&(yield a.track.checkForSilence())&&this.emit(G.LocalAudioSilenceDetected,a);const p=yield(h=a.track)===null||h===void 0?void 0:h.getDeviceId(!1),O=Jd(a.source);O&&p&&p!==this.localParticipant.activeDeviceMap.get(O)&&(this.localParticipant.activeDeviceMap.set(O,p),this.emit(G.ActiveDeviceChanged,O,p))}),this.onLocalTrackUnpublished=a=>{var o,c;(o=a.track)===null||o===void 0||o.off(J.TrackProcessorUpdate,this.onTrackProcessorUpdate),(c=a.track)===null||c===void 0||c.off(J.Restarted,this.onLocalTrackRestarted),this.emit(G.LocalTrackUnpublished,a,this.localParticipant)},this.onLocalTrackRestarted=a=>P(this,void 0,void 0,function*(){const o=yield a.getDeviceId(!1),c=Jd(a.source);c&&o&&o!==this.localParticipant.activeDeviceMap.get(c)&&(this.log.debug("local track restarted, setting ".concat(c," ").concat(o," active"),this.logContext),this.localParticipant.activeDeviceMap.set(c,o),this.emit(G.ActiveDeviceChanged,c,o))}),this.onLocalConnectionQualityChanged=a=>{this.emit(G.ConnectionQualityChanged,a,this.localParticipant)},this.onMediaDevicesError=(a,o)=>{this.emit(G.MediaDevicesError,a,o)},this.onLocalParticipantPermissionsChanged=a=>{this.emit(G.ParticipantPermissionsChanged,a,this.localParticipant)},this.onLocalChatMessageSent=a=>{this.emit(G.ChatMessage,a,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},kR),t),this.log=Ci((i=this.options.loggerName)!==null&&i!==void 0?i:Un.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},Sb),t==null?void 0:t.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},_b),t==null?void 0:t.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},TR),t==null?void 0:t.publishDefaults),this.maybeCreateEngine(),this.incomingDataStreamManager=new GR,this.outgoingDataStreamManager=new KR(this.engine,this.log),this.disconnectLock=new Kt,this.localParticipant=new sA("","",this.engine,this.options,this.rpcHandlers,this.outgoingDataStreamManager),(this.options.e2ee||this.options.encryption)&&this.setupE2EE(),this.engine.e2eeManager=this.e2eeManager,this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",ar(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",ar(this.options.audioCaptureDefaults.deviceId)),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&this.switchActiveDevice("audiooutput",ar(this.options.audioOutput.deviceId)).catch(a=>this.log.warn("Could not set audio output: ".concat(a.message),this.logContext)),ln()){const a=new AbortController;(s=navigator.mediaDevices)===null||s===void 0||s.addEventListener("devicechange",this.handleDeviceChange,{signal:a.signal}),Ms.cleanupRegistry&&Ms.cleanupRegistry.register(this,()=>{a.abort()})}}registerTextStreamHandler(t,n){return this.incomingDataStreamManager.registerTextStreamHandler(t,n)}unregisterTextStreamHandler(t){return this.incomingDataStreamManager.unregisterTextStreamHandler(t)}registerByteStreamHandler(t,n){return this.incomingDataStreamManager.registerByteStreamHandler(t,n)}unregisterByteStreamHandler(t){return this.incomingDataStreamManager.unregisterByteStreamHandler(t)}registerRpcMethod(t,n){if(this.rpcHandlers.has(t))throw Error("RPC handler already registered for method ".concat(t,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(t,n)}unregisterRpcMethod(t){this.rpcHandlers.delete(t)}setE2EEEnabled(t){return P(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(t)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(t,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var t;const n=!!this.options.encryption,i=this.options.encryption||this.options.e2ee;i&&("e2eeManager"in i?(this.e2eeManager=i.e2eeManager,this.e2eeManager.isDataChannelEncryptionEnabled=n):this.e2eeManager=new JP(i,n),this.e2eeManager.on(sr.ParticipantEncryptionStatusChanged,(r,s)=>{zP(s)&&(this.isE2EEEnabled=r),this.emit(G.ParticipantEncryptionStatusChanged,r,s)}),this.e2eeManager.on(sr.EncryptionError,(r,s)=>{const a=s?this.getParticipantByIdentity(s):void 0;this.emit(G.EncryptionError,r,a)}),(t=this.e2eeManager)===null||t===void 0||t.setup(this))}get logContext(){var t;return{room:this.name,roomID:(t=this.roomInfo)===null||t===void 0?void 0:t.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return P(this,void 0,void 0,function*(){return this.state===Be.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((t,n)=>{const i=r=>{r.sid!==""&&(this.engine.off(te.RoomUpdate,i),t(r.sid))};this.engine.on(te.RoomUpdate,i),this.once(G.Disconnected,()=>{this.engine.off(te.RoomUpdate,i),n("Room disconnected before room server id was available")})})})}get name(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.name)!==null&&n!==void 0?n:""}get metadata(){var t;return(t=this.roomInfo)===null||t===void 0?void 0:t.metadata}get numParticipants(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new ZR(this.options),this.engine.e2eeManager=this.e2eeManager,this.engine.on(te.ParticipantUpdate,this.handleParticipantUpdates).on(te.RoomUpdate,this.handleRoomUpdate).on(te.SpeakersChanged,this.handleSpeakersChanged).on(te.StreamStateChanged,this.handleStreamStateUpdate).on(te.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(te.SubscriptionError,this.handleSubscriptionError).on(te.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(te.MediaTrackAdded,(t,n,i)=>{this.onTrackAdded(t,n,i)}).on(te.Disconnected,t=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,t)}).on(te.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(te.DataPacketReceived,this.handleDataPacket).on(te.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(Be.SignalReconnecting)&&this.emit(G.SignalReconnecting)}).on(te.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(Be.Connected)&&this.emit(G.Reconnected)}).on(te.SignalResumed,()=>{this.bufferedEvents=[],(this.state===Be.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(te.Restarting,this.handleRestarting).on(te.SignalRestarted,this.handleSignalRestarted).on(te.Offline,()=>{this.setAndEmitConnectionState(Be.Reconnecting)&&this.emit(G.Reconnecting)}).on(te.DCBufferStatusChanged,(t,n)=>{this.emit(G.DCBufferStatusChanged,t,n)}).on(te.LocalTrackSubscribed,t=>{const n=this.localParticipant.getTrackPublications().find(i=>{let{trackSid:r}=i;return r===t});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(ie.LocalTrackSubscribed,n),this.emitWhenConnected(G.LocalTrackSubscribed,n,this.localParticipant)}).on(te.RoomMoved,t=>{this.log.debug("room moved",t),t.room&&this.handleRoomUpdate(t.room),this.remoteParticipants.forEach((n,i)=>{this.handleParticipantDisconnected(i,n)}),this.emit(G.Moved,t.room.name),t.participant?this.handleParticipantUpdates([t.participant,...t.otherParticipants]):this.handleParticipantUpdates(t.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine),this.outgoingDataStreamManager&&this.outgoingDataStreamManager.setupEngine(this.engine))}static getLocalDevices(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Nt.getInstance().getDevices(t,n)}prepareConnection(t,n){return P(this,void 0,void 0,function*(){if(this.state===Be.Disconnected){this.log.debug("prepareConnection to ".concat(t),this.logContext);try{if($c(new URL(t))&&n){this.regionUrlProvider=new Ve(t,n);const i=yield this.regionUrlProvider.getNextBestRegionUrl();i&&this.state===Be.Disconnected&&(this.regionUrl=i,yield fetch(qa(i),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(i),this.logContext))}else yield fetch(qa(t),{method:"HEAD"})}catch(i){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:i}))}}})}getParticipantByIdentity(t){return this.localParticipant.identity===t?this.localParticipant:this.remoteParticipants.get(t)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(t,n){return P(this,void 0,void 0,function*(){let i=()=>P(this,void 0,void 0,function*(){}),r;switch(t){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":r=new ei({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":r=new ei({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":r=new ei({scenario:{case:"serverLeave",value:!0}});break;case"migration":r=new ei({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":i=()=>P(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),r=new ei({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":i=()=>P(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),r=new ei({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":r=new ei({scenario:{case:"switchCandidateProtocol",value:t==="force-tls"?2:1}}),i=()=>P(this,void 0,void 0,function*(){const s=this.engine.client.onLeave;s&&s(new Cc({reason:Ln.CLIENT_INITIATED,action:Cs.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");r=new ei({scenario:{case:"subscriberBandwidth",value:Br(n)}});break;case"leave-full-reconnect":r=new ei({scenario:{case:"leaveRequestFullReconnect",value:!0}})}r&&(yield this.engine.client.sendSimulateScenario(r),yield i())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(t){return this.localParticipant.activeDeviceMap.get(t)}switchActiveDevice(t,n){return P(this,arguments,void 0,function(i,r){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(function*(){var o,c,l,u,d,h,p;let O=!0,m=!1;const b=a?{exact:r}:r;if(i==="audioinput"){m=s.localParticipant.audioTrackPublications.size===0;const v=(o=s.getActiveDevice(i))!==null&&o!==void 0?o:s.options.audioCaptureDefaults.deviceId;s.options.audioCaptureDefaults.deviceId=b;const k=Array.from(s.localParticipant.audioTrackPublications.values()).filter(T=>T.source===j.Source.Microphone);try{O=(yield Promise.all(k.map(T=>{var S;return(S=T.audioTrack)===null||S===void 0?void 0:S.setDeviceId(b)}))).every(T=>T===!0)}catch(T){throw s.options.audioCaptureDefaults.deviceId=v,T}const y=k.some(T=>{var S,_;return(_=(S=T.track)===null||S===void 0?void 0:S.isMuted)!==null&&_!==void 0?_:!1});O&&y&&(m=!0)}else if(i==="videoinput"){m=s.localParticipant.videoTrackPublications.size===0;const v=(c=s.getActiveDevice(i))!==null&&c!==void 0?c:s.options.videoCaptureDefaults.deviceId;s.options.videoCaptureDefaults.deviceId=b;const k=Array.from(s.localParticipant.videoTrackPublications.values()).filter(T=>T.source===j.Source.Camera);try{O=(yield Promise.all(k.map(T=>{var S;return(S=T.videoTrack)===null||S===void 0?void 0:S.setDeviceId(b)}))).every(T=>T===!0)}catch(T){throw s.options.videoCaptureDefaults.deviceId=v,T}const y=k.some(T=>{var S,_;return(_=(S=T.track)===null||S===void 0?void 0:S.isMuted)!==null&&_!==void 0?_:!1});O&&y&&(m=!0)}else if(i==="audiooutput"){if(m=!0,!Bd()&&!s.options.webAudioMix||s.options.webAudioMix&&s.audioContext&&!("setSinkId"in s.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");s.options.webAudioMix&&(r=(l=yield Nt.getInstance().normalizeDeviceId("audiooutput",r))!==null&&l!==void 0?l:""),(u=(p=s.options).audioOutput)!==null&&u!==void 0||(p.audioOutput={});const v=(d=s.getActiveDevice(i))!==null&&d!==void 0?d:s.options.audioOutput.deviceId;s.options.audioOutput.deviceId=r;try{s.options.webAudioMix&&((h=s.audioContext)===null||h===void 0||h.setSinkId(r)),yield Promise.all(Array.from(s.remoteParticipants.values()).map(k=>k.setAudioOutput({deviceId:r})))}catch(k){throw s.options.audioOutput.deviceId=v,k}}return m&&(s.localParticipant.activeDeviceMap.set(i,r),s.emit(G.ActiveDeviceChanged,i,r)),O})()})}setupLocalParticipantEvents(){this.localParticipant.on(ie.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ie.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(ie.AttributesChanged,this.onLocalAttributesChanged).on(ie.TrackMuted,this.onLocalTrackMuted).on(ie.TrackUnmuted,this.onLocalTrackUnmuted).on(ie.LocalTrackPublished,this.onLocalTrackPublished).on(ie.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ie.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ie.MediaDevicesError,this.onMediaDevicesError).on(ie.AudioStreamAcquired,this.startAudio).on(ie.ChatMessage,this.onLocalChatMessageSent).on(ie.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var t;(t=this.engine)===null||t===void 0||t.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(t,n,i){if(this.state===Be.Connecting||this.state===Be.Reconnecting){const d=()=>{this.log.debug("deferring on track for later",{mediaTrackId:t.id,mediaStreamId:n.id,tracksInStream:n.getTracks().map(p=>p.id)}),this.onTrackAdded(t,n,i),h()},h=()=>{this.off(G.Reconnected,d),this.off(G.Connected,d),this.off(G.Disconnected,h)};this.once(G.Reconnected,d),this.once(G.Connected,d),this.once(G.Disconnected,h);return}if(this.state===Be.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(t.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const r=xP(n.id),s=r[0];let a=r[1],o=t.id;if(a&&a.startsWith("TR")&&(o=a),s===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const c=Array.from(this.remoteParticipants.values()).find(d=>d.sid===s);if(!c){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(s),this.logContext);return}if(!o.startsWith("TR")){const d=this.engine.getTrackIdForReceiver(i);if(!d){this.log.error("Tried to add a track whose 'sid' could not be found for a participant, that's not present. Sid: ".concat(s),this.logContext);return}o=d}o.startsWith("TR")||this.log.warn("Tried to add a track whose 'sid' could not be determined for a participant, that's not present. Sid: ".concat(s,", streamId: ").concat(a,", trackId: ").concat(o),Object.assign(Object.assign({},this.logContext),{rpID:s,streamId:a,trackId:o}));let l;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?l=this.options.adaptiveStream:l={});const u=c.addSubscribedMediaTrack(t,o,n,i,l);u!=null&&u.isEncrypted&&!this.e2eeManager&&this.emit(G.EncryptionError,new Error("Encrypted ".concat(u.source," track received from participant ").concat(c.sid,", but room does not have encryption enabled!")))}handleDisconnect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var i;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.incomingDataStreamManager.clearControllers(),this.state!==Be.Disconnected){this.regionUrl=void 0,this.regionUrlProvider&&this.regionUrlProvider.notifyDisconnected();try{this.remoteParticipants.forEach(r=>{r.trackPublications.forEach(s=>{r.unpublishTrack(s.trackSid)})}),this.localParticipant.trackPublications.forEach(r=>{var s,a,o;r.track&&this.localParticipant.unpublishTrack(r.track,t),t?((s=r.track)===null||s===void 0||s.detach(),(a=r.track)===null||a===void 0||a.stop()):(o=r.track)===null||o===void 0||o.stopMonitor()}),this.localParticipant.off(ie.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ie.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(ie.AttributesChanged,this.onLocalAttributesChanged).off(ie.TrackMuted,this.onLocalTrackMuted).off(ie.TrackUnmuted,this.onLocalTrackUnmuted).off(ie.LocalTrackPublished,this.onLocalTrackPublished).off(ie.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ie.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ie.MediaDevicesError,this.onMediaDevicesError).off(ie.AudioStreamAcquired,this.startAudio).off(ie.ChatMessage,this.onLocalChatMessageSent).off(ie.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),ln()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(i=navigator.mediaDevices)===null||i===void 0||i.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(Be.Disconnected),this.emit(G.Disconnected,n)}}}handleParticipantDisconnected(t,n){var i;this.remoteParticipants.delete(t),n&&(this.incomingDataStreamManager.validateParticipantHasNoActiveDataStreams(t),n.trackPublications.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(G.ParticipantDisconnected,n),n.setDisconnected(),(i=this.localParticipant)===null||i===void 0||i.handleParticipantDisconnected(n.identity))}handleIncomingRpcRequest(t,n,i,r,s,a){return P(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(t,n),a!==1){yield this.engine.publishRpcResponse(t,n,null,gt.builtIn("UNSUPPORTED_VERSION"));return}const o=this.rpcHandlers.get(i);if(!o){yield this.engine.publishRpcResponse(t,n,null,gt.builtIn("UNSUPPORTED_METHOD"));return}let c=null,l=null;try{const u=yield o({requestId:n,callerIdentity:t,payload:r,responseTimeout:s});uh(u)>wb?(c=gt.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(i))):l=u}catch(u){u instanceof gt?c=u:(console.warn("Uncaught error returned by RPC handler for ".concat(i,". Returning APPLICATION_ERROR instead."),u),c=gt.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(t,n,l,c)})}selectDefaultDevices(){return P(this,void 0,void 0,function*(){var t,n,i;const r=Nt.getInstance().previousDevices,s=yield Nt.getInstance().getDevices(void 0,!1),a=cn();if((a==null?void 0:a.name)==="Chrome"&&a.os!=="iOS")for(let c of s){const l=r.find(u=>u.deviceId===c.deviceId);l&&l.label!==""&&l.kind===c.kind&&l.label!==c.label&&this.getActiveDevice(c.kind)==="default"&&this.emit(G.ActiveDeviceChanged,c.kind,c.deviceId)}const o=["audiooutput","audioinput","videoinput"];for(let c of o){const l=jP(c),u=this.localParticipant.getTrackPublication(l);if(u&&(!((t=u.track)===null||t===void 0)&&t.isUserProvided))continue;const d=s.filter(p=>p.kind===c),h=this.getActiveDevice(c);if(h===((n=r.filter(p=>p.kind===c)[0])===null||n===void 0?void 0:n.deviceId)&&d.length>0&&((i=d[0])===null||i===void 0?void 0:i.deviceId)!==h){yield this.switchActiveDevice(c,d[0].deviceId);continue}c==="audioinput"&&!$a()||c==="videoinput"||d.length>0&&!d.find(p=>p.deviceId===this.getActiveDevice(c))&&(c!=="audiooutput"||!$a())&&(yield this.switchActiveDevice(c,d[0].deviceId))}})}acquireAudioContext(){return P(this,void 0,void 0,function*(){var t,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(t=lb())!==null&&t!==void 0?t:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(r=>r.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),qt(200)])}catch(r){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:r}))}const i=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";i!==this.canPlaybackAudio&&(this.audioEnabled=i,this.emit(G.AudioPlaybackStatusChanged,i))})}createParticipant(t,n){var i;let r;return n?r=Bc.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):r=new Bc(this.engine.client,"",t,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&r.setAudioContext(this.audioContext),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&r.setAudioOutput(this.options.audioOutput).catch(s=>this.log.warn("Could not set audio output: ".concat(s.message),this.logContext)),r}getOrCreateParticipant(t,n){if(this.remoteParticipants.has(t)){const r=this.remoteParticipants.get(t);return n&&r.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),r}const i=this.createParticipant(t,n);return this.remoteParticipants.set(t,i),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(G.ParticipantConnected,i),i.on(ie.TrackPublished,r=>{this.emitWhenConnected(G.TrackPublished,r,i)}).on(ie.TrackSubscribed,(r,s)=>{r.kind===j.Kind.Audio?(r.on(J.AudioPlaybackStarted,this.handleAudioPlaybackStarted),r.on(J.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):r.kind===j.Kind.Video&&(r.on(J.VideoPlaybackFailed,this.handleVideoPlaybackFailed),r.on(J.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(G.TrackSubscribed,r,s,i)}).on(ie.TrackUnpublished,r=>{this.emit(G.TrackUnpublished,r,i)}).on(ie.TrackUnsubscribed,(r,s)=>{this.emit(G.TrackUnsubscribed,r,s,i)}).on(ie.TrackMuted,r=>{this.emitWhenConnected(G.TrackMuted,r,i)}).on(ie.TrackUnmuted,r=>{this.emitWhenConnected(G.TrackUnmuted,r,i)}).on(ie.ParticipantMetadataChanged,r=>{this.emitWhenConnected(G.ParticipantMetadataChanged,r,i)}).on(ie.ParticipantNameChanged,r=>{this.emitWhenConnected(G.ParticipantNameChanged,r,i)}).on(ie.AttributesChanged,r=>{this.emitWhenConnected(G.ParticipantAttributesChanged,r,i)}).on(ie.ConnectionQualityChanged,r=>{this.emitWhenConnected(G.ConnectionQualityChanged,r,i)}).on(ie.ParticipantPermissionsChanged,r=>{this.emitWhenConnected(G.ParticipantPermissionsChanged,r,i)}).on(ie.TrackSubscriptionStatusChanged,(r,s)=>{this.emitWhenConnected(G.TrackSubscriptionStatusChanged,r,s,i)}).on(ie.TrackSubscriptionFailed,(r,s)=>{this.emit(G.TrackSubscriptionFailed,r,i,s)}).on(ie.TrackSubscriptionPermissionChanged,(r,s)=>{this.emitWhenConnected(G.TrackSubscriptionPermissionChanged,r,s,i)}).on(ie.Active,()=>{this.emitWhenConnected(G.ParticipantActive,i),i.kind===Aa.AGENT&&this.localParticipant.setActiveAgent(i)}),n&&i.updateInfo(n),i}sendSyncState(){const t=Array.from(this.remoteParticipants.values()).reduce((i,r)=>(i.push(...r.getTrackPublications()),i),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(t,n)}updateSubscriptions(){for(const t of this.remoteParticipants.values())for(const n of t.videoTrackPublications.values())n.isSubscribed&&FP(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(t){const n=this.sidToIdentity.get(t);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let t=0;this.connectionReconcileInterval=Ut.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(t++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:t,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),t>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Ln.STATE_MISMATCH))):t=0},oA)}clearConnectionReconcile(){this.connectionReconcileInterval&&Ut.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(t){return t===this.state?!1:(this.state=t,this.emit(G.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(t=>{let[n,i]=t;this.emit(n,...i)}),this.bufferedEvents=[]}emitWhenConnected(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(this.state===Be.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([t,i]);else if(this.state===Be.Connected)return this.emit(t,...i);return!1}simulateParticipants(t){return P(this,void 0,void 0,function*(){var n,i;const r=Object.assign({audio:!0,video:!0,useRealTracks:!1},t.publish),s=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},t.participants);if(this.handleDisconnect(),this.roomInfo=new vc({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:dt.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new qr({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(G.SignalConnected),this.emit(G.Connected),this.setAndEmitConnectionState(Be.Connected),r.video){const a=new bh(j.Kind.Video,new ws({source:St.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Mn.AUDIO,name:"video-dummy"}),new Fc(r.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:sb(160*((n=s.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(a),this.localParticipant.emit(ie.LocalTrackPublished,a)}if(r.audio){const a=new bh(j.Kind.Audio,new ws({source:St.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Mn.AUDIO}),new Xc(r.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Wd(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(a),this.localParticipant.emit(ie.LocalTrackPublished,a)}for(let a=0;a<s.count-1;a+=1){let o=new qr({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(a),state:Es.ACTIVE,tracks:[],joinedAt:dt.parse(Date.now())});const c=this.getOrCreateParticipant(o.identity,o);if(s.video){const l=sb(160*((i=s.aspectRatios[a%s.aspectRatios.length])!==null&&i!==void 0?i:1),160,!1,!0),u=new ws({source:St.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Mn.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l]),new RTCRtpReceiver),o.tracks=[...o.tracks,u]}if(s.audio){const l=Wd(),u=new ws({source:St.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Mn.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l]),new RTCRtpReceiver),o.tracks=[...o.tracks,u]}c.updateInfo(o)}})}emit(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(t!==G.ActiveSpeakersChanged&&t!==G.TranscriptionReceived){const s=Bb(i).filter(a=>a!==void 0);(t===G.TrackSubscribed||t===G.TrackUnsubscribed)&&this.log.trace("subscribe trace: ".concat(t),Object.assign(Object.assign({},this.logContext),{event:t,args:s})),this.log.debug("room event ".concat(t),Object.assign(Object.assign({},this.logContext),{event:t,args:s}))}return super.emit(t,...i)}}Ms.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(e=>{e()});function Bb(e){return e.map(t=>{if(t)return Array.isArray(t)?Bb(t):typeof t=="object"?"logContext"in t?t.logContext:void 0:t})}var Fn;(function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.SKIPPED=2]="SKIPPED",e[e.SUCCESS=3]="SUCCESS",e[e.FAILED=4]="FAILED"})(Fn||(Fn={}));class dr extends ti.EventEmitter{constructor(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=Fn.IDLE,this.logs=[],this.options={},this.url=t,this.token=n,this.name=this.constructor.name,this.room=new Ms(i.roomOptions),this.connectOptions=i.connectOptions,this.options=i}run(t){return P(this,void 0,void 0,function*(){if(this.status!==Fn.IDLE)throw Error("check is running already");this.setStatus(Fn.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==Fn.SKIPPED&&this.setStatus(this.isSuccess()?Fn.SUCCESS:Fn.FAILED),t&&t(),this.getInfo()})}isSuccess(){return!this.logs.some(t=>t.level==="error")}connect(t){return P(this,void 0,void 0,function*(){return this.room.state===Be.Connected?this.room:(t||(t=this.url),yield this.room.connect(t,this.token,this.connectOptions),this.room)})}disconnect(){return P(this,void 0,void 0,function*(){this.room&&this.room.state!==Be.Disconnected&&(yield this.room.disconnect(),yield new Promise(t=>setTimeout(t,500)))})}skip(){this.setStatus(Fn.SKIPPED)}switchProtocol(t){return P(this,void 0,void 0,function*(){let n=!1,i=!1;if(this.room.on(G.Reconnecting,()=>{n=!0}),this.room.once(G.Reconnected,()=>{i=!0}),this.room.simulateScenario("force-".concat(t)),yield new Promise(s=>setTimeout(s,1e3)),!n)return;const r=Date.now()+1e4;for(;Date.now()<r;){if(i)return;yield qt(100)}throw new Error("Could not reconnect using ".concat(t," protocol after 10 seconds"))})}appendMessage(t){this.logs.push({level:"info",message:t}),this.emit("update",this.getInfo())}appendWarning(t){this.logs.push({level:"warning",message:t}),this.emit("update",this.getInfo())}appendError(t){this.logs.push({level:"error",message:t}),this.emit("update",this.getInfo())}setStatus(t){this.status=t,this.emit("update",this.getInfo())}get engine(){var t;return(t=this.room)===null||t===void 0?void 0:t.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class cA extends dr{get description(){return"Cloud regions"}perform(){return P(this,void 0,void 0,function*(){const t=new Ve(this.url,this.token);if(!t.isCloud()){this.skip();return}const n=[],i=new Set;for(let s=0;s<3;s++){const a=yield t.getNextBestRegionUrl();if(!a)break;if(i.has(a))continue;i.add(a);const o=yield this.checkCloudRegion(a);this.appendMessage("".concat(o.region," RTT: ").concat(o.rtt,"ms, duration: ").concat(o.duration,"ms")),n.push(o)}n.sort((s,a)=>(s.duration-a.duration)*.5+(s.rtt-a.rtt)*.5);const r=n[0];this.bestStats=r,this.appendMessage("best Cloud region: ".concat(r.region))})}getInfo(){const t=super.getInfo();return t.data=this.bestStats,t}checkCloudRegion(t){return P(this,void 0,void 0,function*(){var n,i;yield this.connect(t),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const r=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!r)throw new Error("Region not found");const s=yield this.room.localParticipant.streamText({topic:"test"}),a=1e3,c=1e6/a,l="A".repeat(a),u=Date.now();for(let O=0;O<c;O++)yield s.write(l);yield s.close();const d=Date.now(),h=yield(i=this.room.engine.pcManager)===null||i===void 0?void 0:i.publisher.getStats(),p={region:r,rtt:1e4,duration:d-u};return h==null||h.forEach(O=>{O.type==="candidate-pair"&&O.nominated&&(p.rtt=O.currentRoundTripTime*1e3)}),yield this.disconnect(),p})}}const Th=1e4;class lA extends dr{get description(){return"Connection via UDP vs TCP"}perform(){return P(this,void 0,void 0,function*(){const t=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=t,t.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(t.packetsLost-n.packetsLost)/t.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const i=this.bestStats;this.appendMessage("upstream bitrate: ".concat((i.bitrateTotal/i.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((i.rttTotal/i.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((i.jitterTotal/i.count*1e3).toFixed(2)," ms")),i.packetsLost>0&&this.appendWarning("packets lost: ".concat((i.packetsLost/i.packetsSent*100).toFixed(2),"%")),i.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((i.qualityLimitationDurations.bandwidth/(Th/1e3)*100).toFixed(2),"%")),i.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((i.qualityLimitationDurations.cpu/(Th/1e3)*100).toFixed(2),"%"))})}getInfo(){const t=super.getInfo();return t.data=this.bestStats,t}checkConnectionProtocol(t){return P(this,void 0,void 0,function*(){yield this.connect(),t==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const i=n.getContext("2d");if(!i)throw new Error("Could not get canvas context");let r=0;const s=()=>{r=(r+1)%360,i.fillStyle="hsl(".concat(r,", 100%, 50%)"),i.fillRect(0,0,n.width,n.height),requestAnimationFrame(s)};s();const o=n.captureStream(30).getVideoTracks()[0],l=(yield this.room.localParticipant.publishTrack(o,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,u={protocol:t,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},d=setInterval(()=>P(this,void 0,void 0,function*(){const h=yield l.getRTCStatsReport();h==null||h.forEach(p=>{p.type==="outbound-rtp"?(u.packetsSent=p.packetsSent,u.qualityLimitationDurations=p.qualityLimitationDurations,u.bitrateTotal+=p.targetBitrate,u.count++):p.type==="remote-inbound-rtp"&&(u.packetsLost=p.packetsLost,u.rttTotal+=p.roundTripTime,u.jitterTotal+=p.jitter)})}),1e3);return yield new Promise(h=>setTimeout(h,Th)),clearInterval(d),o.stop(),n.remove(),yield this.disconnect(),u})}}class uA extends dr{get description(){return"Can publish audio"}perform(){return P(this,void 0,void 0,function*(){var t;const n=yield this.connect(),i=yield Fb();if(yield cb(i,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(i),yield new Promise(o=>setTimeout(o,3e3));const s=yield(t=i.sender)===null||t===void 0?void 0:t.getStats();if(!s)throw new Error("Could not get RTCStats");let a=0;if(s.forEach(o=>{o.type==="outbound-rtp"&&(o.kind==="audio"||!o.kind&&o.mediaType==="audio")&&(a=o.packetsSent)}),a===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(a," audio packets"))})}}class dA extends dr{get description(){return"Can publish video"}perform(){return P(this,void 0,void 0,function*(){var t;const n=yield this.connect(),i=yield nA();yield this.checkForVideo(i.mediaStreamTrack),n.localParticipant.publishTrack(i),yield new Promise(a=>setTimeout(a,5e3));const r=yield(t=i.sender)===null||t===void 0?void 0:t.getStats();if(!r)throw new Error("Could not get RTCStats");let s=0;if(r.forEach(a=>{a.type==="outbound-rtp"&&(a.kind==="video"||!a.kind&&a.mediaType==="video")&&(s+=a.packetsSent)}),s===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(s," video packets"))})}checkForVideo(t){return P(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(t.clone());const i=document.createElement("video");i.srcObject=n,i.muted=!0,i.autoplay=!0,i.playsInline=!0,i.setAttribute("playsinline","true"),document.body.appendChild(i),yield new Promise(r=>{i.onplay=()=>{setTimeout(()=>{var s,a,o,c;const l=document.createElement("canvas"),u=t.getSettings(),d=(a=(s=u.width)!==null&&s!==void 0?s:i.videoWidth)!==null&&a!==void 0?a:1280,h=(c=(o=u.height)!==null&&o!==void 0?o:i.videoHeight)!==null&&c!==void 0?c:720;l.width=d,l.height=h;const p=l.getContext("2d");p.drawImage(i,0,0);const m=p.getImageData(0,0,l.width,l.height).data;let b=!0;for(let v=0;v<m.length;v+=4)if(m[v]!==0||m[v+1]!==0||m[v+2]!==0){b=!1;break}b?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),r()},1e3)},i.play()}),n.getTracks().forEach(r=>r.stop()),i.remove()})}}class hA extends dr{get description(){return"Resuming connection after interruption"}perform(){return P(this,void 0,void 0,function*(){var t;const n=yield this.connect();let i=!1,r=!1,s;const a=new Promise(l=>{setTimeout(l,5e3),s=l}),o=()=>{i=!0};n.on(G.SignalReconnecting,o).on(G.Reconnecting,o).on(G.Reconnected,()=>{r=!0,s(!0)}),(t=n.engine.client.ws)===null||t===void 0||t.close();const c=n.engine.client.onClose;if(c&&c(""),yield a,i){if(!r||n.state!==Be.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class pA extends dr{get description(){return"Can connect via TURN"}perform(){return P(this,void 0,void 0,function*(){var t,n;const i=new th,r=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1});let s=!1,a=!1,o=!1;for(let c of r.iceServers)for(let l of c.urls)l.startsWith("turn:")?(a=!0,o=!0):l.startsWith("turns:")&&(a=!0,o=!0,s=!0),l.startsWith("stun:")&&(o=!0);o?a&&!s&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield i.close(),!((n=(t=this.connectOptions)===null||t===void 0?void 0:t.rtcConfig)===null||n===void 0)&&n.iceServers||a?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(c=>setTimeout(c,0)))})}}class fA extends dr{get description(){return"Establishing WebRTC connection"}perform(){return P(this,void 0,void 0,function*(){let t=!1,n=!1;this.room.on(G.SignalConnected,()=>{var i;const r=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(s,a)=>{if(s.candidate){const o=new RTCIceCandidate(s);let c="".concat(o.protocol," ").concat(o.address,":").concat(o.port," ").concat(o.type);o.address&&(mA(o.address)?c+=" (private)":o.protocol==="tcp"&&o.tcpType==="passive"?(t=!0,c+=" (passive)"):o.protocol==="udp"&&(n=!0)),this.appendMessage(c)}r&&r(s,a)},!((i=this.room.engine.pcManager)===null||i===void 0)&&i.subscriber&&(this.room.engine.pcManager.subscriber.onIceCandidateError=s=>{s instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(s.errorCode," ").concat(s.errorText," ").concat(s.url))})});try{yield this.connect(),ye.info("now the room is connected")}catch(i){throw this.appendWarning("ports need to be open on firewall in order to connect."),i}t||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function mA(e){const t=e.split(".");if(t.length===4){if(t[0]==="10")return!0;if(t[0]==="192"&&t[1]==="168")return!0;if(t[0]==="172"){const n=parseInt(t[1],10);if(n>=16&&n<=31)return!0}}return!1}class OA extends dr{get description(){return"Connecting to signal connection via WebSocket"}perform(){return P(this,void 0,void 0,function*(){var t,n,i;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let r=new th;const s=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1});this.appendMessage("Connected to server, version ".concat(s.serverVersion,".")),((t=s.serverInfo)===null||t===void 0?void 0:t.edition)===$g.Cloud&&(!((n=s.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((i=s.serverInfo)===null||i===void 0?void 0:i.region)),yield r.close()})}}class Ej extends ti.EventEmitter{constructor(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=t,this.token=n,this.options=i}getNextCheckId(){const t=this.checkResults.size;return this.checkResults.set(t,{logs:[],status:Fn.IDLE,name:"",description:""}),t}updateCheck(t,n){this.checkResults.set(t,n),this.emit("checkUpdate",t,n)}isSuccess(){return Array.from(this.checkResults.values()).every(t=>t.status!==Fn.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(t){return P(this,void 0,void 0,function*(){const n=this.getNextCheckId(),i=new t(this.url,this.token,this.options),r=a=>{this.updateCheck(n,a)};i.on("update",r);const s=yield i.run();return i.off("update",r),s})}checkWebsocket(){return P(this,void 0,void 0,function*(){return this.createAndRunCheck(OA)})}checkWebRTC(){return P(this,void 0,void 0,function*(){return this.createAndRunCheck(fA)})}checkTURN(){return P(this,void 0,void 0,function*(){return this.createAndRunCheck(pA)})}checkReconnect(){return P(this,void 0,void 0,function*(){return this.createAndRunCheck(hA)})}checkPublishAudio(){return P(this,void 0,void 0,function*(){return this.createAndRunCheck(uA)})}checkPublishVideo(){return P(this,void 0,void 0,function*(){return this.createAndRunCheck(dA)})}checkConnectionProtocol(){return P(this,void 0,void 0,function*(){const t=yield this.createAndRunCheck(lA);if(t.data&&"protocol"in t.data){const n=t.data;this.options.protocol=n.protocol}return t})}checkCloudRegion(){return P(this,void 0,void 0,function*(){return this.createAndRunCheck(cA)})}}function Ae(e,t,n){return(t=vA(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gA(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vA(e){var t=gA(e,"string");return typeof t=="symbol"?t:t+""}new TextEncoder,new TextDecoder;class tn extends Error{constructor(t,n){var i;super(t,n),Ae(this,"code","ERR_JOSE_GENERIC"),this.name=this.constructor.name,(i=Error.captureStackTrace)===null||i===void 0||i.call(Error,this,this.constructor)}}Ae(tn,"code","ERR_JOSE_GENERIC");class bA extends tn{constructor(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(t,{cause:{claim:i,reason:r,payload:n}}),Ae(this,"code","ERR_JWT_CLAIM_VALIDATION_FAILED"),Ae(this,"claim",void 0),Ae(this,"reason",void 0),Ae(this,"payload",void 0),this.claim=i,this.reason=r,this.payload=n}}Ae(bA,"code","ERR_JWT_CLAIM_VALIDATION_FAILED");class TA extends tn{constructor(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(t,{cause:{claim:i,reason:r,payload:n}}),Ae(this,"code","ERR_JWT_EXPIRED"),Ae(this,"claim",void 0),Ae(this,"reason",void 0),Ae(this,"payload",void 0),this.claim=i,this.reason=r,this.payload=n}}Ae(TA,"code","ERR_JWT_EXPIRED");class kA extends tn{constructor(){super(...arguments),Ae(this,"code","ERR_JOSE_ALG_NOT_ALLOWED")}}Ae(kA,"code","ERR_JOSE_ALG_NOT_ALLOWED");class yA extends tn{constructor(){super(...arguments),Ae(this,"code","ERR_JOSE_NOT_SUPPORTED")}}Ae(yA,"code","ERR_JOSE_NOT_SUPPORTED");class SA extends tn{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"decryption operation failed",n=arguments.length>1?arguments[1]:void 0;super(t,n),Ae(this,"code","ERR_JWE_DECRYPTION_FAILED")}}Ae(SA,"code","ERR_JWE_DECRYPTION_FAILED");class _A extends tn{constructor(){super(...arguments),Ae(this,"code","ERR_JWE_INVALID")}}Ae(_A,"code","ERR_JWE_INVALID");class EA extends tn{constructor(){super(...arguments),Ae(this,"code","ERR_JWS_INVALID")}}Ae(EA,"code","ERR_JWS_INVALID");class wA extends tn{constructor(){super(...arguments),Ae(this,"code","ERR_JWT_INVALID")}}Ae(wA,"code","ERR_JWT_INVALID");class CA extends tn{constructor(){super(...arguments),Ae(this,"code","ERR_JWK_INVALID")}}Ae(CA,"code","ERR_JWK_INVALID");class xA extends tn{constructor(){super(...arguments),Ae(this,"code","ERR_JWKS_INVALID")}}Ae(xA,"code","ERR_JWKS_INVALID");class PA extends tn{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"no applicable key found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(t,n),Ae(this,"code","ERR_JWKS_NO_MATCHING_KEY")}}Ae(PA,"code","ERR_JWKS_NO_MATCHING_KEY");class RA extends tn{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"multiple matching keys found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(t,n),Ae(this,Symbol.asyncIterator,void 0),Ae(this,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS")}}Ae(RA,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS");class AA extends tn{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"request timed out",n=arguments.length>1?arguments[1]:void 0;super(t,n),Ae(this,"code","ERR_JWKS_TIMEOUT")}}Ae(AA,"code","ERR_JWKS_TIMEOUT");class IA extends tn{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"signature verification failed",n=arguments.length>1?arguments[1]:void 0;super(t,n),Ae(this,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED")}}Ae(IA,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED");function Qi(){return Qi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Qi.apply(null,arguments)}const Zb=new Uint8Array(0);class Ba{static getFullOptions(t){return Qi({clientTools:{},onConnect:()=>{},onDebug:()=>{},onDisconnect:()=>{},onError:()=>{},onMessage:()=>{},onAudio:()=>{},onModeChange:()=>{},onStatusChange:()=>{},onCanSendFeedbackChange:()=>{},onInterruption:()=>{}},t)}constructor(t,n){var i=this;this.options=void 0,this.connection=void 0,this.lastInterruptTimestamp=0,this.mode="listening",this.status="connecting",this.volume=1,this.currentEventId=1,this.lastFeedbackEventId=0,this.canSendFeedback=!1,this.endSessionWithDetails=async function(r){i.status!=="connected"&&i.status!=="connecting"||(i.updateStatus("disconnecting"),await i.handleEndSession(),i.updateStatus("disconnected"),i.options.onDisconnect&&i.options.onDisconnect(r))},this.onMessage=async function(r){switch(r.type){case"interruption":return void i.handleInterruption(r);case"agent_response":return void i.handleAgentResponse(r);case"user_transcript":return void i.handleUserTranscript(r);case"internal_tentative_agent_response":return void i.handleTentativeAgentResponse(r);case"client_tool_call":try{await i.handleClientToolCall(r)}catch(s){i.onError(`Unexpected error in client tool call handling: ${s instanceof Error?s.message:String(s)}`,{clientToolName:r.client_tool_call.tool_name,toolCallId:r.client_tool_call.tool_call_id})}return;case"audio":return void i.handleAudio(r);case"vad_score":return void i.handleVadScore(r);case"ping":return void i.connection.sendMessage({type:"pong",event_id:r.ping_event.event_id});case"mcp_tool_call":return void i.handleMCPToolCall(r);case"mcp_connection_status":return void i.handleMCPConnectionStatus(r);case"agent_tool_request":return void i.handleAgentToolRequest(r);case"agent_tool_response":return void i.handleAgentToolResponse(r);case"conversation_initiation_metadata":return void i.handleConversationMetadata(r);case"asr_initiation_metadata":return void i.handleAsrInitiationMetadata(r);case"agent_chat_response_part":return void i.handleAgentChatResponsePart(r);case"error":return void i.handleErrorEvent(r);default:return void(i.options.onDebug&&i.options.onDebug(r))}},this.setVolume=({volume:r})=>{this.volume=r},this.options=t,this.connection=n,this.options.onConnect&&this.options.onConnect({conversationId:n.conversationId}),this.connection.onMessage(this.onMessage),this.connection.onDisconnect(this.endSessionWithDetails),this.connection.onModeChange(r=>this.updateMode(r)),this.updateStatus("connected")}endSession(){return this.endSessionWithDetails({reason:"user"})}async handleEndSession(){this.connection.close()}updateMode(t){t!==this.mode&&(this.mode=t,this.options.onModeChange&&this.options.onModeChange({mode:t}))}updateStatus(t){t!==this.status&&(this.status=t,this.options.onStatusChange&&this.options.onStatusChange({status:t}))}updateCanSendFeedback(){const t=this.currentEventId!==this.lastFeedbackEventId;this.canSendFeedback!==t&&(this.canSendFeedback=t,this.options.onCanSendFeedbackChange&&this.options.onCanSendFeedbackChange({canSendFeedback:t}))}handleInterruption(t){t.interruption_event&&(this.lastInterruptTimestamp=t.interruption_event.event_id,this.options.onInterruption&&this.options.onInterruption({event_id:t.interruption_event.event_id}))}handleAgentResponse(t){this.options.onMessage&&this.options.onMessage({source:"ai",role:"agent",message:t.agent_response_event.agent_response})}handleUserTranscript(t){this.options.onMessage&&this.options.onMessage({source:"user",role:"user",message:t.user_transcription_event.user_transcript})}handleTentativeAgentResponse(t){this.options.onDebug&&this.options.onDebug({type:"tentative_agent_response",response:t.tentative_agent_response_internal_event.tentative_agent_response})}handleVadScore(t){this.options.onVadScore&&this.options.onVadScore({vadScore:t.vad_score_event.vad_score})}async handleClientToolCall(t){if(Object.prototype.hasOwnProperty.call(this.options.clientTools,t.client_tool_call.tool_name))try{var n;const i=(n=await this.options.clientTools[t.client_tool_call.tool_name](t.client_tool_call.parameters))!=null?n:"Client tool execution successful.",r=typeof i=="object"?JSON.stringify(i):String(i);this.connection.sendMessage({type:"client_tool_result",tool_call_id:t.client_tool_call.tool_call_id,result:r,is_error:!1})}catch(i){this.onError(`Client tool execution failed with following error: ${i==null?void 0:i.message}`,{clientToolName:t.client_tool_call.tool_name}),this.connection.sendMessage({type:"client_tool_result",tool_call_id:t.client_tool_call.tool_call_id,result:`Client tool execution failed: ${i==null?void 0:i.message}`,is_error:!0})}else{if(this.options.onUnhandledClientToolCall)return void this.options.onUnhandledClientToolCall(t.client_tool_call);this.onError(`Client tool with name ${t.client_tool_call.tool_name} is not defined on client`,{clientToolName:t.client_tool_call.tool_name}),this.connection.sendMessage({type:"client_tool_result",tool_call_id:t.client_tool_call.tool_call_id,result:`Client tool with name ${t.client_tool_call.tool_name} is not defined on client`,is_error:!0})}}handleAudio(t){}handleMCPToolCall(t){this.options.onMCPToolCall&&this.options.onMCPToolCall(t.mcp_tool_call)}handleMCPConnectionStatus(t){this.options.onMCPConnectionStatus&&this.options.onMCPConnectionStatus(t.mcp_connection_status)}handleAgentToolRequest(t){this.options.onAgentToolRequest&&this.options.onAgentToolRequest(t.agent_tool_request)}handleAgentToolResponse(t){t.agent_tool_response.tool_name==="end_call"&&this.endSessionWithDetails({reason:"agent",context:new CloseEvent("end_call",{reason:"Agent ended the call"})}),this.options.onAgentToolResponse&&this.options.onAgentToolResponse(t.agent_tool_response)}handleConversationMetadata(t){this.options.onConversationMetadata&&this.options.onConversationMetadata(t.conversation_initiation_metadata_event)}handleAsrInitiationMetadata(t){this.options.onAsrInitiationMetadata&&this.options.onAsrInitiationMetadata(t.asr_initiation_metadata_event)}handleAgentChatResponsePart(t){this.options.onAgentChatResponsePart&&this.options.onAgentChatResponsePart(t.text_response_part)}handleErrorEvent(t){const n=t.error_event.error_type,i=t.error_event.message||t.error_event.reason||"Unknown error";n!=="max_duration_exceeded"?this.onError(`Server error: ${i}`,{errorType:n,code:t.error_event.code,debugMessage:t.error_event.debug_message,details:t.error_event.details}):this.endSessionWithDetails({reason:"error",message:i,context:new Event("max_duration_exceeded")})}onError(t,n){console.error(t,n),this.options.onError&&this.options.onError(t,n)}getId(){return this.connection.conversationId}isOpen(){return this.status==="connected"}setMicMuted(t){this.connection.setMicMuted(t)}getInputByteFrequencyData(){return Zb}getOutputByteFrequencyData(){return Zb}getInputVolume(){return 0}getOutputVolume(){return 0}sendFeedback(t){this.canSendFeedback?(this.connection.sendMessage({type:"feedback",score:t?"like":"dislike",event_id:this.currentEventId}),this.lastFeedbackEventId=this.currentEventId,this.updateCanSendFeedback()):console.warn(this.lastFeedbackEventId===0?"Cannot send feedback: the conversation has not started yet.":"Cannot send feedback: feedback has already been sent for the current response.")}sendContextualUpdate(t){this.connection.sendMessage({type:"contextual_update",text:t})}sendUserMessage(t){this.connection.sendMessage({type:"user_message",text:t})}sendUserActivity(){this.connection.sendMessage({type:"user_activity"})}sendMCPToolApprovalResult(t,n){this.connection.sendMessage({type:"mcp_tool_approval_result",tool_call_id:t,is_approved:n})}}class jb{constructor(t={}){this.queue=[],this.disconnectionDetails=null,this.onDisconnectCallback=null,this.onMessageCallback=null,this.onModeChangeCallback=null,this.onDebug=void 0,this.onDebug=t.onDebug}debug(t){this.onDebug&&this.onDebug(t)}onMessage(t){this.onMessageCallback=t;const n=this.queue;this.queue=[],n.length>0&&queueMicrotask(()=>{n.forEach(t)})}onDisconnect(t){this.onDisconnectCallback=t;const n=this.disconnectionDetails;n&&queueMicrotask(()=>{t(n)})}onModeChange(t){this.onModeChangeCallback=t}updateMode(t){var n;(n=this.onModeChangeCallback)==null||n.call(this,t)}disconnect(t){var n;this.disconnectionDetails||(this.disconnectionDetails=t,(n=this.onDisconnectCallback)==null||n.call(this,t))}handleMessage(t){this.onMessageCallback?this.onMessageCallback(t):this.queue.push(t)}}function Zc(e){const[t,n]=e.split("_");if(!["pcm","ulaw"].includes(t))throw new Error(`Invalid format: ${e}`);const i=Number.parseInt(n);if(Number.isNaN(i))throw new Error(`Invalid sample rate: ${n}`);return{format:t,sampleRate:i}}const Vb="0.12.2";function kh(e){return!!e.type}const Wb="conversation_initiation_client_data";function Gb(e){var t;const n={type:Wb};var i,r,s,a,o,c;return e.overrides&&(n.conversation_config_override={agent:{prompt:(i=e.overrides.agent)==null?void 0:i.prompt,first_message:(r=e.overrides.agent)==null?void 0:r.firstMessage,language:(s=e.overrides.agent)==null?void 0:s.language},tts:{voice_id:(a=e.overrides.tts)==null?void 0:a.voiceId,speed:(o=e.overrides.tts)==null?void 0:o.speed},conversation:{text_only:(c=e.overrides.conversation)==null?void 0:c.textOnly}}),e.customLlmExtraBody&&(n.custom_llm_extra_body=e.customLlmExtraBody),e.dynamicVariables&&(n.dynamic_variables=e.dynamicVariables),e.userId&&(n.user_id=e.userId),(t=e.overrides)!=null&&t.client&&(n.source_info={source:e.overrides.client.source,version:e.overrides.client.version}),n}class Za extends jb{constructor(t,n,i,r){super(),this.socket=void 0,this.conversationId=void 0,this.inputFormat=void 0,this.outputFormat=void 0,this.socket=t,this.conversationId=n,this.inputFormat=i,this.outputFormat=r,this.socket.addEventListener("error",s=>{setTimeout(()=>this.disconnect({reason:"error",message:"The connection was closed due to a socket error.",context:s}),0)}),this.socket.addEventListener("close",s=>{this.disconnect(s.code===1e3?{reason:"agent",context:s}:{reason:"error",message:s.reason||"The connection was closed by the server.",context:s})}),this.socket.addEventListener("message",s=>{try{const a=JSON.parse(s.data);if(!kh(a))return void this.debug({type:"invalid_event",message:"Received invalid socket event",data:s.data});this.handleMessage(a)}catch(a){this.debug({type:"parsing_error",message:"Failed to parse socket message",error:a instanceof Error?a.message:String(a),data:s.data})}})}static async create(t){let n=null;try{var i,r,s;const o=(i=t.origin)!=null?i:"wss://api.elevenlabs.io";let c;const l=((r=t.overrides)==null||(r=r.client)==null?void 0:r.version)||Vb,u=((s=t.overrides)==null||(s=s.client)==null?void 0:s.source)||"js_sdk";if(t.signedUrl){const k=t.signedUrl.includes("?")?"&":"?";c=`${t.signedUrl}${k}source=${u}&version=${l}`}else c=`${o}/v1/convai/conversation?agent_id=${t.agentId}&source=${u}&version=${l}`;const d=["convai"];t.authorization&&d.push(`bearer.${t.authorization}`),n=new WebSocket(c,d);const h=await new Promise((k,y)=>{n.addEventListener("open",()=>{var T;const S=Gb(t);(T=n)==null||T.send(JSON.stringify(S))},{once:!0}),n.addEventListener("error",T=>{setTimeout(()=>y(T),0)}),n.addEventListener("close",y),n.addEventListener("message",T=>{const S=JSON.parse(T.data);kh(S)&&(S.type==="conversation_initiation_metadata"?k(S.conversation_initiation_metadata_event):console.warn("First received message is not conversation metadata."))},{once:!0})}),{conversation_id:p,agent_output_audio_format:O,user_input_audio_format:m}=h,b=Zc(m??"pcm_16000"),v=Zc(O);return new Za(n,p,b,v)}catch(o){var a;throw(a=n)==null||a.close(),o}}close(){this.socket.close(1e3,"User ended conversation")}sendMessage(t){this.socket.send(JSON.stringify(t))}async setMicMuted(t){console.warn(`WebSocket connection setMicMuted called with ${t}, but this is handled by VoiceConversation`)}}function Yb(e){const t=new Uint8Array(e);return window.btoa(String.fromCharCode(...t))}function QA(e){const t=window.atob(e),n=t.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=t.charCodeAt(r);return i.buffer}const jc=new Map;function Hb(e,t){return async(n,i)=>{const r=jc.get(e);if(r)return n.addModule(r);if(i)try{return await n.addModule(i),void jc.set(e,i)}catch(o){throw new Error(`Failed to load the ${e} worklet module from path: ${i}. Error: ${o}`)}const s=new Blob([t],{type:"application/javascript"}),a=URL.createObjectURL(s);try{return await n.addModule(a),void jc.set(e,a)}catch{URL.revokeObjectURL(a)}try{const o=`data:application/javascript;base64,${btoa(t)}`;await n.addModule(o),jc.set(e,o)}catch{throw new Error(`Failed to load the ${e} worklet module. Make sure the browser supports AudioWorklets. If you are using a strict CSP, you may need to self-host the worklet files.`)}}}const Kb=Hb("rawAudioProcessor",`/*
 * ulaw encoding logic taken from the wavefile library
 * https://github.com/rochars/wavefile/blob/master/lib/codecs/mulaw.js
 * USED BY @elevenlabs/client
 */

const BIAS = 0x84;
const CLIP = 32635;
const encodeTable = [
  0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,
  4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
  5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
  5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
];

function encodeSample(sample) {
  let sign;
  let exponent;
  let mantissa;
  let muLawSample;
  sign = (sample >> 8) & 0x80;
  if (sign !== 0) sample = -sample;
  sample = sample + BIAS;
  if (sample > CLIP) sample = CLIP;
  exponent = encodeTable[(sample>>7) & 0xFF];
  mantissa = (sample >> (exponent+3)) & 0x0F;
  muLawSample = ~(sign | (exponent << 4) | mantissa);
  
  return muLawSample;
}

class RawAudioProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
              
    this.port.onmessage = ({ data }) => {
      switch (data.type) {
        case "setFormat":
          this.isMuted = false;
          this.buffer = []; // Initialize an empty buffer
          this.bufferSize = data.sampleRate / 4;
          this.format = data.format;

          if (globalThis.LibSampleRate && sampleRate !== data.sampleRate) {
            globalThis.LibSampleRate.create(1, sampleRate, data.sampleRate).then(resampler => {
              this.resampler = resampler;
            });
          }
          break;
        case "setMuted":
          this.isMuted = data.isMuted;
          break;
      }
    };
  }
  process(inputs) {
    if (!this.buffer) {
      return true;
    }
    
    const input = inputs[0]; // Get the first input node
    if (input.length > 0) {
      let channelData = input[0]; // Get the first channel's data

      // Resample the audio if necessary
      if (this.resampler) {
        channelData = this.resampler.full(channelData);
      }

      // Add channel data to the buffer
      this.buffer.push(...channelData);
      // Get max volume 
      let sum = 0.0;
      for (let i = 0; i < channelData.length; i++) {
        sum += channelData[i] * channelData[i];
      }
      const maxVolume = Math.sqrt(sum / channelData.length);
      // Check if buffer size has reached or exceeded the threshold
      if (this.buffer.length >= this.bufferSize) {
        const float32Array = this.isMuted 
          ? new Float32Array(this.buffer.length)
          : new Float32Array(this.buffer);

        let encodedArray = this.format === "ulaw"
          ? new Uint8Array(float32Array.length)
          : new Int16Array(float32Array.length);

        // Iterate through the Float32Array and convert each sample to PCM16
        for (let i = 0; i < float32Array.length; i++) {
          // Clamp the value to the range [-1, 1]
          let sample = Math.max(-1, Math.min(1, float32Array[i]));

          // Scale the sample to the range [-32768, 32767]
          let value = sample < 0 ? sample * 32768 : sample * 32767;
          if (this.format === "ulaw") {
            value = encodeSample(Math.round(value));
          }

          encodedArray[i] = value;
        }

        // Send the buffered data to the main script
        this.port.postMessage([encodedArray, maxVolume]);

        // Clear the buffer after sending
        this.buffer = [];
      }
    }
    return true; // Continue processing
  }
}
registerProcessor("rawAudioProcessor", RawAudioProcessor);
`);class Ni extends jb{constructor(t,n,i,r,s={}){super(s),this.conversationId=void 0,this.inputFormat=void 0,this.outputFormat=void 0,this.room=void 0,this.isConnected=!1,this.audioEventId=1,this.audioCaptureContext=null,this.audioElements=[],this.outputDeviceId=null,this.outputAnalyser=null,this.outputFrequencyData=null,this.room=t,this.conversationId=n,this.inputFormat=i,this.outputFormat=r,this.setupRoomEventListeners()}static async create(t){let n;if("conversationToken"in t&&t.conversationToken)n=t.conversationToken;else{if(!("agentId"in t)||!t.agentId)throw new Error("Either conversationToken or agentId is required for WebRTC connection");try{var i,r,s;const l=((i=t.overrides)==null||(i=i.client)==null?void 0:i.version)||Vb,u=((r=t.overrides)==null||(r=r.client)==null?void 0:r.source)||"js_sdk",d=`${a=(s=t.origin)!=null?s:"https://api.elevenlabs.io",a.replace(/^wss:\/\//,"https://")}/v1/convai/conversation/token?agent_id=${t.agentId}&source=${u}&version=${l}`,h=await fetch(d);if(!h.ok)throw new Error(`ElevenLabs API returned ${h.status} ${h.statusText}`);if(n=(await h.json()).token,!n)throw new Error("No conversation token received from API")}catch(l){let u=l instanceof Error?l.message:String(l);throw l instanceof Error&&l.message.includes("401")&&(u="Your agent has authentication enabled, but no signed URL or conversation token was provided."),new Error(`Failed to fetch conversation token for agent ${t.agentId}: ${u}`)}}var a;const o=new Ms;try{const l=`room_${Date.now()}`,u=Zc("pcm_48000"),d=Zc("pcm_48000"),h=new Ni(o,l,u,d,t),p=t.livekitUrl||"wss://livekit.rtc.elevenlabs.io";var c;await o.connect(p,n),await new Promise(m=>{if(h.isConnected)m();else{const b=()=>{o.off(G.Connected,b),m()};o.on(G.Connected,b)}}),o.name&&(h.conversationId=((c=o.name.match(/(conv_[a-zA-Z0-9]+)/))==null?void 0:c[0])||o.name),t.textOnly||await o.localParticipant.setMicrophoneEnabled(!0);const O=Gb(t);return h.debug({type:Wb,message:O}),await h.sendMessage(O),h}catch(l){throw await o.disconnect(),l}}setupRoomEventListeners(){var t=this;this.room.on(G.Connected,async function(){t.isConnected=!0,console.info("WebRTC room connected")}),this.room.on(G.Disconnected,n=>{this.isConnected=!1,this.disconnect({reason:"agent",context:new CloseEvent("close",{reason:n==null?void 0:n.toString()})})}),this.room.on(G.ConnectionStateChanged,n=>{n===Be.Disconnected&&(this.isConnected=!1,this.disconnect({reason:"error",message:`LiveKit connection state changed to ${n}`,context:new Event("connection_state_changed")}))}),this.room.on(G.DataReceived,(n,i)=>{try{const r=JSON.parse(new TextDecoder().decode(n));if(r.type==="audio")return;kh(r)?this.handleMessage(r):console.warn("Invalid socket event received:",r)}catch(r){console.warn("Failed to parse incoming data message:",r),console.warn("Raw payload:",new TextDecoder().decode(n))}}),this.room.on(G.TrackSubscribed,async function(n,i,r){if(n.kind===j.Kind.Audio&&r.identity.includes("agent")){const s=n,a=s.attach();if(a.autoplay=!0,a.controls=!1,t.outputDeviceId&&a.setSinkId)try{await a.setSinkId(t.outputDeviceId)}catch(o){console.warn("Failed to set output device for new audio element:",o)}a.style.display="none",document.body.appendChild(a),t.audioElements.push(a),t.audioElements.length===1&&(t.onDebug==null||t.onDebug({type:"audio_element_ready"})),await t.setupAudioCapture(s)}}),this.room.on(G.ActiveSpeakersChanged,async function(n){t.updateMode(n.length>0&&n[0].identity.startsWith("agent")?"speaking":"listening")}),this.room.on(G.ParticipantDisconnected,n=>{var i;(i=n.identity)!=null&&i.startsWith("agent")&&this.disconnect({reason:"agent",context:new CloseEvent("close",{reason:"agent disconnected"})})})}close(){if(this.isConnected){try{this.room.localParticipant.audioTrackPublications.forEach(t=>{t.track&&t.track.stop()})}catch(t){console.warn("Error stopping local tracks:",t)}this.audioCaptureContext&&(this.audioCaptureContext.close().catch(t=>{console.warn("Error closing audio capture context:",t)}),this.audioCaptureContext=null),this.audioElements.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),this.audioElements=[],this.room.disconnect()}}async sendMessage(t){if(this.isConnected&&this.room.localParticipant){if(!("user_audio_chunk"in t))try{const n=new TextEncoder().encode(JSON.stringify(t));await this.room.localParticipant.publishData(n,{reliable:!0})}catch(n){this.debug({type:"send_message_error",message:{message:t,error:n}}),console.error("Failed to send message via WebRTC:",n)}}else console.warn("Cannot send message: room not connected or no local participant")}getRoom(){return this.room}async setMicMuted(t){if(!this.isConnected||!this.room.localParticipant)return void console.warn("Cannot set microphone muted: room not connected or no local participant");const n=this.room.localParticipant.getTrackPublication(j.Source.Microphone);if(n!=null&&n.track)try{t?await n.track.mute():await n.track.unmute()}catch{await this.room.localParticipant.setMicrophoneEnabled(!t)}else await this.room.localParticipant.setMicrophoneEnabled(!t)}async setupAudioCapture(t){try{const n=new AudioContext;this.audioCaptureContext=n,this.outputAnalyser=n.createAnalyser(),this.outputAnalyser.fftSize=2048,this.outputAnalyser.smoothingTimeConstant=.8;const i=new MediaStream([t.mediaStreamTrack]),r=n.createMediaStreamSource(i);r.connect(this.outputAnalyser),await Kb(n.audioWorklet);const s=new AudioWorkletNode(n,"rawAudioProcessor");this.outputAnalyser.connect(s),s.port.postMessage({type:"setFormat",format:this.outputFormat.format,sampleRate:this.outputFormat.sampleRate}),s.port.onmessage=a=>{const[o,c]=a.data;if(c>.01){const l=Yb(o.buffer),u=this.audioEventId++;this.handleMessage({type:"audio",audio_event:{audio_base_64:l,event_id:u}})}},r.connect(s)}catch(n){console.warn("Failed to set up audio capture:",n)}}setAudioVolume(t){this.audioElements.forEach(n=>{n.volume=t})}async setAudioOutputDevice(t){if(!("setSinkId"in HTMLAudioElement.prototype))throw new Error("setSinkId is not supported in this browser");const n=this.audioElements.map(async function(i){try{await i.setSinkId(t)}catch(r){throw console.error("Failed to set sink ID for audio element:",r),r}});await Promise.all(n),this.outputDeviceId=t}async setAudioInputDevice(t){if(!this.isConnected||!this.room.localParticipant)throw new Error("Cannot change input device: room not connected or no local participant");try{const n=this.room.localParticipant.getTrackPublication(j.Source.Microphone);n!=null&&n.track&&(await n.track.stop(),await this.room.localParticipant.unpublishTrack(n.track));const i={deviceId:{exact:t},echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:{ideal:1}},r=await Fb(i);await this.room.localParticipant.publishTrack(r,{name:"microphone",source:j.Source.Microphone})}catch(n){console.error("Failed to change input device:",n);try{await this.room.localParticipant.setMicrophoneEnabled(!0)}catch(i){console.error("Failed to recover microphone after device switch error:",i)}throw n}}getOutputByteFrequencyData(){return this.outputAnalyser?(this.outputFrequencyData!=null||(this.outputFrequencyData=new Uint8Array(this.outputAnalyser.frequencyBinCount)),this.outputAnalyser.getByteFrequencyData(this.outputFrequencyData),this.outputFrequencyData):null}}async function Jb(e){const t=(function(n){return n.connectionType?n.connectionType:"conversationToken"in n&&n.conversationToken?"webrtc":"websocket"})(e);switch(t){case"websocket":return Za.create(e);case"webrtc":return Ni.create(e);default:throw new Error(`Unknown connection type: ${t}`)}}function yh(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}async function e0(e={default:0,android:3e3}){let t=e.default;var n;if(/android/i.test(navigator.userAgent))t=(n=e.android)!=null?n:t;else if(yh()){var i;t=(i=e.ios)!=null?i:t}t>0&&await new Promise(r=>setTimeout(r,t))}class Sh extends Ba{static async startSession(t){const n=Ba.getFullOptions(t);n.onStatusChange&&n.onStatusChange({status:"connecting"}),n.onCanSendFeedbackChange&&n.onCanSendFeedbackChange({canSendFeedback:!1}),n.onModeChange&&n.onModeChange({mode:"listening"}),n.onCanSendFeedbackChange&&n.onCanSendFeedbackChange({canSendFeedback:!1});let i=null;try{return await e0(n.connectionDelay),i=await Jb(t),new Sh(n,i)}catch(s){var r;throw n.onStatusChange&&n.onStatusChange({status:"disconnected"}),(r=i)==null||r.close(),s}}}const t0={echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:{ideal:1}};let n0=class Ru{static async create({sampleRate:t,format:n,preferHeadphonesForIosDevices:i,inputDeviceId:r,workletPaths:s,libsampleratePath:a}){let o=null,c=null;try{const d=Qi({sampleRate:{ideal:t}},t0);if(yh()&&i){const v=(await window.navigator.mediaDevices.enumerateDevices()).find(k=>k.kind==="audioinput"&&["airpod","headphone","earphone"].find(y=>k.label.toLowerCase().includes(y)));v&&(d.deviceId={ideal:v.deviceId})}r&&(d.deviceId=Ru.getDeviceIdConstraint(r));const h=navigator.mediaDevices.getSupportedConstraints().sampleRate;o=new window.AudioContext(h?{sampleRate:t}:{});const p=o.createAnalyser();if(!h){const v=a||"https://cdn.jsdelivr.net/npm/@alexanderolsen/libsamplerate-js@2.1.2/dist/libsamplerate.worklet.js";await o.audioWorklet.addModule(v)}await Kb(o.audioWorklet,s==null?void 0:s.rawAudioProcessor);const O=Qi({voiceIsolation:!0},d);c=await navigator.mediaDevices.getUserMedia({audio:O});const m=o.createMediaStreamSource(c),b=new AudioWorkletNode(o,"rawAudioProcessor");return b.port.postMessage({type:"setFormat",format:n,sampleRate:t}),m.connect(p),p.connect(b),await o.resume(),new Ru(o,p,b,c,m)}catch(d){var l,u;throw(l=c)==null||l.getTracks().forEach(h=>{h.stop()}),(u=o)==null||u.close(),d}}static getDeviceIdConstraint(t){if(t)return yh()?{ideal:t}:{exact:t}}constructor(t,n,i,r,s){this.context=void 0,this.analyser=void 0,this.worklet=void 0,this.inputStream=void 0,this.mediaStreamSource=void 0,this.context=t,this.analyser=n,this.worklet=i,this.inputStream=r,this.mediaStreamSource=s}async close(){this.inputStream.getTracks().forEach(t=>{t.stop()}),this.mediaStreamSource.disconnect(),await this.context.close()}setMuted(t){this.worklet.port.postMessage({type:"setMuted",isMuted:t})}async setInputDevice(t){try{const n=Qi({},t0);t&&(n.deviceId=Ru.getDeviceIdConstraint(t));const i=Qi({voiceIsolation:!0},n),r=await navigator.mediaDevices.getUserMedia({audio:i});this.inputStream.getTracks().forEach(s=>{s.stop()}),this.mediaStreamSource.disconnect(),this.inputStream=r,this.mediaStreamSource=this.context.createMediaStreamSource(r),this.mediaStreamSource.connect(this.analyser)}catch(n){throw console.error("Failed to switch input device:",n),n}}};const NA=Hb("audioConcatProcessor",`/*
 * ulaw decoding logic taken from the wavefile library
 * https://github.com/rochars/wavefile/blob/master/lib/codecs/mulaw.js
 * USED BY @elevenlabs/client
 */

const decodeTable = [0,132,396,924,1980,4092,8316,16764];

function decodeSample(muLawSample) {
  let sign;
  let exponent;
  let mantissa;
  let sample;
  muLawSample = ~muLawSample;
  sign = (muLawSample & 0x80);
  exponent = (muLawSample >> 4) & 0x07;
  mantissa = muLawSample & 0x0F;
  sample = decodeTable[exponent] + (mantissa << (exponent+3));
  if (sign !== 0) sample = -sample;

  return sample;
}

class AudioConcatProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.buffers = []; // Initialize an empty buffer
    this.cursor = 0;
    this.currentBuffer = null;
    this.wasInterrupted = false;
    this.finished = false;
    
    this.port.onmessage = ({ data }) => {
      switch (data.type) {
        case "setFormat":
          this.format = data.format;
          break;
        case "buffer":
          this.wasInterrupted = false;
          this.buffers.push(
            this.format === "ulaw"
              ? new Uint8Array(data.buffer)
              : new Int16Array(data.buffer)
          );
          break;
        case "interrupt":
          this.wasInterrupted = true;
          break;
        case "clearInterrupted":
          if (this.wasInterrupted) {
            this.wasInterrupted = false;
            this.buffers = [];
            this.currentBuffer = null;
          }
      }
    };
  }
  process(_, outputs) {
    let finished = false;
    const output = outputs[0][0];
    for (let i = 0; i < output.length; i++) {
      if (!this.currentBuffer) {
        if (this.buffers.length === 0) {
          finished = true;
          break;
        }
        this.currentBuffer = this.buffers.shift();
        this.cursor = 0;
      }

      let value = this.currentBuffer[this.cursor];
      if (this.format === "ulaw") {
        value = decodeSample(value);
      }
      output[i] = value / 32768;
      this.cursor++;

      if (this.cursor >= this.currentBuffer.length) {
        this.currentBuffer = null;
      }
    }

    if (this.finished !== finished) {
      this.finished = finished;
      this.port.postMessage({ type: "process", finished });
    }

    return true; // Continue processing
  }
}

registerProcessor("audioConcatProcessor", AudioConcatProcessor);
`);class Vc{static async create({sampleRate:t,format:n,outputDeviceId:i,workletPaths:r}){let s=null,a=null;try{s=new AudioContext({sampleRate:t});const l=s.createAnalyser(),u=s.createGain();a=new Audio,a.src="",a.load(),a.autoplay=!0,a.style.display="none",document.body.appendChild(a);const d=s.createMediaStreamDestination();a.srcObject=d.stream,u.connect(l),l.connect(d),await NA(s.audioWorklet,r==null?void 0:r.audioConcatProcessor);const h=new AudioWorkletNode(s,"audioConcatProcessor");return h.port.postMessage({type:"setFormat",format:n}),h.connect(u),await s.resume(),i&&a.setSinkId&&await a.setSinkId(i),new Vc(s,l,u,h,a)}catch(l){var o,c;throw(o=a)!=null&&o.parentNode&&a.parentNode.removeChild(a),(c=a)==null||c.pause(),s&&s.state!=="closed"&&await s.close(),l}}constructor(t,n,i,r,s){this.context=void 0,this.analyser=void 0,this.gain=void 0,this.worklet=void 0,this.audioElement=void 0,this.context=t,this.analyser=n,this.gain=i,this.worklet=r,this.audioElement=s}async setOutputDevice(t){if(!("setSinkId"in HTMLAudioElement.prototype))throw new Error("setSinkId is not supported in this browser");await this.audioElement.setSinkId(t||"")}async close(){this.audioElement.parentNode&&this.audioElement.parentNode.removeChild(this.audioElement),this.audioElement.pause(),await this.context.close()}}class ja extends Ba{static async requestWakeLock(){if("wakeLock"in navigator)try{return await navigator.wakeLock.request("screen")}catch{}return null}static async startSession(t){var n;const i=Ba.getFullOptions(t);i.onStatusChange&&i.onStatusChange({status:"connecting"}),i.onCanSendFeedbackChange&&i.onCanSendFeedbackChange({canSendFeedback:!1});let r=null,s=null,a=null,o=null,c=null;((n=t.useWakeLock)==null||n)&&(c=await ja.requestWakeLock());try{var l;return o=await navigator.mediaDevices.getUserMedia({audio:!0}),await e0(i.connectionDelay),s=await Jb(t),[r,a]=await Promise.all([n0.create(Qi({},s.inputFormat,{preferHeadphonesForIosDevices:t.preferHeadphonesForIosDevices,inputDeviceId:t.inputDeviceId,workletPaths:t.workletPaths,libsampleratePath:t.libsampleratePath})),Vc.create(Qi({},s.outputFormat,{outputDeviceId:t.outputDeviceId,workletPaths:t.workletPaths}))]),(l=o)==null||l.getTracks().forEach(m=>{m.stop()}),o=null,new ja(i,s,r,a,c)}catch(m){var u,d,h,p;i.onStatusChange&&i.onStatusChange({status:"disconnected"}),(u=o)==null||u.getTracks().forEach(b=>{b.stop()}),(d=s)==null||d.close(),await((h=r)==null?void 0:h.close()),await((p=a)==null?void 0:p.close());try{var O;await((O=c)==null?void 0:O.release()),c=null}catch{}throw m}}constructor(t,n,i,r,s){super(t,n),this.input=void 0,this.output=void 0,this.wakeLock=void 0,this.inputFrequencyData=void 0,this.outputFrequencyData=void 0,this.visibilityChangeHandler=null,this.onInputWorkletMessage=a=>{this.status==="connected"&&this.connection.sendMessage({user_audio_chunk:Yb(a.data[0].buffer)})},this.onOutputWorkletMessage=({data:a})=>{a.type==="process"&&this.updateMode(a.finished?"listening":"speaking")},this.addAudioBase64Chunk=a=>{this.output.gain.gain.cancelScheduledValues(this.output.context.currentTime),this.output.gain.gain.value=this.volume,this.output.worklet.port.postMessage({type:"clearInterrupted"}),this.output.worklet.port.postMessage({type:"buffer",buffer:QA(a)})},this.fadeOutAudio=()=>{this.updateMode("listening"),this.output.worklet.port.postMessage({type:"interrupt"}),this.output.gain.gain.exponentialRampToValueAtTime(1e-4,this.output.context.currentTime+2),setTimeout(()=>{this.output.gain.gain.value=this.volume,this.output.worklet.port.postMessage({type:"clearInterrupted"})},2e3)},this.calculateVolume=a=>{if(a.length===0)return 0;let o=0;for(let c=0;c<a.length;c++)o+=a[c]/255;return o/=a.length,o<0?0:o>1?1:o},this.setVolume=({volume:a})=>{const o=Number.isFinite(a)?Math.min(1,Math.max(0,a)):1;this.volume=o,this.connection instanceof Ni?this.connection.setAudioVolume(o):this.output.gain.gain.value=o},this.input=i,this.output=r,this.wakeLock=s,this.input.worklet.port.onmessage=this.onInputWorkletMessage,this.output.worklet.port.onmessage=this.onOutputWorkletMessage,s&&(this.visibilityChangeHandler=()=>{var a;document.visibilityState==="visible"&&(a=this.wakeLock)!=null&&a.released&&ja.requestWakeLock().then(o=>{this.wakeLock=o})},document.addEventListener("visibilitychange",this.visibilityChangeHandler))}async handleEndSession(){await super.handleEndSession(),this.visibilityChangeHandler&&document.removeEventListener("visibilitychange",this.visibilityChangeHandler);try{var t;await((t=this.wakeLock)==null?void 0:t.release()),this.wakeLock=null}catch{}await this.input.close(),await this.output.close()}handleInterruption(t){super.handleInterruption(t),this.fadeOutAudio()}handleAudio(t){var n,i;this.lastInterruptTimestamp<=t.audio_event.event_id&&((n=(i=this.options).onAudio)==null||n.call(i,t.audio_event.audio_base_64),this.connection instanceof Ni||this.addAudioBase64Chunk(t.audio_event.audio_base_64),this.currentEventId=t.audio_event.event_id,this.updateCanSendFeedback(),this.updateMode("speaking"))}setMicMuted(t){this.connection instanceof Ni?this.connection.setMicMuted(t):this.input.setMuted(t)}getInputByteFrequencyData(){return this.inputFrequencyData!=null||(this.inputFrequencyData=new Uint8Array(this.input.analyser.frequencyBinCount)),this.input.analyser.getByteFrequencyData(this.inputFrequencyData),this.inputFrequencyData}getOutputByteFrequencyData(){return this.connection instanceof Ni?this.connection.getOutputByteFrequencyData()||new Uint8Array(1024):(this.outputFrequencyData!=null||(this.outputFrequencyData=new Uint8Array(this.output.analyser.frequencyBinCount)),this.output.analyser.getByteFrequencyData(this.outputFrequencyData),this.outputFrequencyData)}getInputVolume(){return this.calculateVolume(this.getInputByteFrequencyData())}getOutputVolume(){return this.calculateVolume(this.getOutputByteFrequencyData())}async changeInputDevice({sampleRate:t,format:n,preferHeadphonesForIosDevices:i,inputDeviceId:r}){try{if(this.connection instanceof Za)try{return await this.input.setInputDevice(r),this.input}catch(a){console.warn("Failed to change device on existing input, recreating:",a)}this.connection instanceof Ni&&await this.connection.setAudioInputDevice(r||""),await this.input.close();const s=await n0.create({sampleRate:t??this.connection.inputFormat.sampleRate,format:n??this.connection.inputFormat.format,preferHeadphonesForIosDevices:i,inputDeviceId:r,workletPaths:this.options.workletPaths,libsampleratePath:this.options.libsampleratePath});return this.input=s,this.input.worklet.port.onmessage=this.onInputWorkletMessage,this.input}catch(s){throw console.error("Error changing input device",s),s}}async changeOutputDevice({sampleRate:t,format:n,outputDeviceId:i}){try{if(this.connection instanceof Za)try{return await this.output.setOutputDevice(i),this.output}catch(s){console.warn("Failed to change device on existing output, recreating:",s)}this.connection instanceof Ni&&await this.connection.setAudioOutputDevice(i||""),await this.output.close();const r=await Vc.create({sampleRate:t??this.connection.outputFormat.sampleRate,format:n??this.connection.outputFormat.format,outputDeviceId:i,workletPaths:this.options.workletPaths});return this.output=r,this.output}catch(r){throw console.error("Error changing output device",r),r}}}function i0(e,t,n="https://api.elevenlabs.io"){const i={};return typeof t=="boolean"?i.feedback=t?"like":"dislike":(i.rating=t.rating,i.comment=t.comment),fetch(`${n}/v1/convai/conversations/${e}/feedback`,{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}})}var r0;(function(e){e.SESSION_STARTED="session_started",e.PARTIAL_TRANSCRIPT="partial_transcript",e.COMMITTED_TRANSCRIPT="committed_transcript",e.COMMITTED_TRANSCRIPT_WITH_TIMESTAMPS="committed_transcript_with_timestamps",e.AUTH_ERROR="auth_error",e.ERROR="error",e.OPEN="open",e.CLOSE="close",e.QUOTA_EXCEEDED="quota_exceeded",e.COMMIT_THROTTLED="commit_throttled",e.TRANSCRIBER_ERROR="transcriber_error",e.UNACCEPTED_TERMS="unaccepted_terms",e.RATE_LIMITED="rate_limited",e.INPUT_ERROR="input_error",e.QUEUE_OVERFLOW="queue_overflow",e.RESOURCE_EXHAUSTED="resource_exhausted",e.SESSION_TIME_LIMIT_EXCEEDED="session_time_limit_exceeded",e.CHUNK_SIZE_EXCEEDED="chunk_size_exceeded",e.INSUFFICIENT_AUDIO_ACTIVITY="insufficient_audio_activity"})(r0||(r0={}));var s0,a0;(function(e){e.PCM_8000="pcm_8000",e.PCM_16000="pcm_16000",e.PCM_22050="pcm_22050",e.PCM_24000="pcm_24000",e.PCM_44100="pcm_44100",e.PCM_48000="pcm_48000",e.ULAW_8000="ulaw_8000"})(s0||(s0={})),(function(e){e.MANUAL="manual",e.VAD="vad"})(a0||(a0={}));class DA extends Ba{static startSession(t){return t.textOnly?Sh.startSession(t):ja.startSession(t)}}var MA=Object.defineProperty,LA=(e,t,n)=>t in e?MA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,be=(e,t,n)=>LA(e,typeof t!="symbol"?t+"":t,n);function zn(e){return e?e==="true"?!0:e==="false"?!1:null:null}const _h=["variant","placement","override-config","avatar-image-url","avatar-orb-color-1","avatar-orb-color-2","agent-id","signed-url","terms-key","server-location","language","dynamic-variables","show-avatar-when-collapsed","override-prompt","override-first-message","override-language","override-voice-id","override-text-only","mic-muting","transcript","text-input","text-contents","default-expanded","always-expanded","user-id","use-rtc","collect-feedback","syntax-highlight-theme","markdown-link-allowed-hosts","markdown-link-include-www","markdown-link-allow-http","worklet-path-raw-audio-processor","worklet-path-audio-concat-processor","worklet-path-libsamplerate"],$A='@import"https://fonts.googleapis.com/css2?family=Inter:wght@400,500&display=swap";*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:currentColor}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.\\!container{width:100%!important}.container{width:100%}@media(min-width:640px){.\\!container{max-width:640px!important}.container{max-width:640px}}@media(min-width:768px){.\\!container{max-width:768px!important}.container{max-width:768px}}@media(min-width:1024px){.\\!container{max-width:1024px!important}.container{max-width:1024px}}@media(min-width:1280px){.\\!container{max-width:1280px!important}.container{max-width:1280px}}@media(min-width:1536px){.\\!container{max-width:1536px!important}.container{max-width:1536px}}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.\\!visible{visibility:visible!important}.visible{visibility:visible}.collapse{visibility:collapse}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{top:0;right:0;bottom:0;left:0}.-bottom-3{bottom:-12px}.bottom-0{bottom:0}.bottom-20{bottom:80px}.end-3{inset-inline-end:12px}.left-0{left:0}.left-1\\/2{left:50%}.left-4{left:16px}.right-0{right:0}.right-1{right:4px}.start-3{inset-inline-start:12px}.top-0{top:0}.top-1{top:4px}.top-1\\/2{top:50%}.top-16{top:64px}.top-20{top:80px}.top-4{top:16px}.top-\\[40\\%\\]{top:40%}.top-\\[88px\\]{top:88px}.z-1{z-index:1}.z-10{z-index:10}.z-2{z-index:2}.m-0{margin:0}.m-1{margin:4px}.-mx-0\\.5{margin-left:-2px;margin-right:-2px}.mx-1{margin-left:4px;margin-right:4px}.my-4{margin-top:16px;margin-bottom:16px}.my-6{margin-top:24px;margin-bottom:24px}.-mr-1\\.5{margin-right:-6px}.mb-0\\.5{margin-bottom:2px}.mb-1{margin-bottom:4px}.mb-2{margin-bottom:8px}.mb-4{margin-bottom:16px}.ml-4{margin-left:16px}.ml-auto{margin-left:auto}.ms-auto{margin-inline-start:auto}.mt-2{margin-top:8px}.mt-3{margin-top:12px}.mt-4{margin-top:16px}.mt-6{margin-top:24px}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.\\!flex{display:flex!important}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.table-cell{display:table-cell}.table-row{display:table-row}.grid{display:grid}.contents{display:contents}.list-item{display:list-item}.hidden{display:none}.h-16{height:64px}.h-4{height:16px}.h-48{height:192px}.h-5{height:20px}.h-6{height:24px}.h-8{height:32px}.h-9{height:36px}.h-full{height:100%}.h-screen{height:100vh}.max-h-\\[50\\%\\]{max-height:50%}.max-h-\\[min\\(384px\\,var\\(--radix-select-content-available-height\\)\\)\\]{max-height:min(384px,var(--radix-select-content-available-height))}.min-h-0{min-height:0px}.min-h-\\[4\\.5rem\\]{min-height:4.5rem}.min-h-\\[6lh\\]{min-height:6lh}.min-h-full{min-height:100%}.min-h-min{min-height:-moz-min-content;min-height:min-content}.w-1\\/2{width:50%}.w-20{width:80px}.w-4{width:16px}.w-48{width:192px}.w-5{width:20px}.w-6{width:24px}.w-64{width:256px}.w-8{width:32px}.w-9{width:36px}.w-full{width:100%}.w-screen{width:100vw}.\\!min-w-60{min-width:240px!important}.min-w-0{min-width:0px}.min-w-60{min-width:240px}.min-w-9{min-width:36px}.min-w-\\[var\\(--radix-select-trigger-width\\)\\]{min-width:var(--radix-select-trigger-width)}.min-w-max{min-width:-moz-max-content;min-width:max-content}.min-w-min{min-width:-moz-min-content;min-width:min-content}.max-w-\\[400px\\]{max-width:400px}.flex-1{flex:1 1 0%}.shrink-0{flex-shrink:0}.grow{flex-grow:1}.border-collapse{border-collapse:collapse}.origin-bottom{transform-origin:bottom}.origin-bottom-left{transform-origin:bottom left}.origin-bottom-right{transform-origin:bottom right}.origin-top{transform-origin:top}.origin-top-left{transform-origin:top left}.origin-top-right{transform-origin:top right}.-translate-x-1\\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-\\[calc\\(var\\(--el-overlay-padding\\)\\)\\]{--tw-translate-y: calc(calc(var(--el-overlay-padding)) * -1);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-full{--tw-translate-y: -100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-1\\/2{--tw-translate-y: 50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-\\[calc\\(var\\(--el-overlay-padding\\)\\)\\]{--tw-translate-y: calc(var(--el-overlay-padding));transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-full{--tw-translate-y: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-rotate-180{--tw-rotate: -180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-rotate-90{--tw-rotate: -90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-100{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-150{--tw-scale-x: 1.5;--tw-scale-y: 1.5;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-75{--tw-scale-x: .75;--tw-scale-y: .75;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-90{--tw-scale-x: .9;--tw-scale-y: .9;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-\\[0\\.1667\\]{--tw-scale-x: .1667;--tw-scale-y: .1667;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-default{cursor:default}.cursor-pointer{cursor:pointer}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.resize-none{resize:none}.resize{resize:both}.list-outside{list-style-position:outside}.list-decimal{list-style-type:decimal}.list-disc{list-style-type:disc}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-col-reverse{flex-direction:column-reverse}.place-content-center{place-content:center}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:4px}.gap-1\\.5{gap:6px}.gap-2{gap:8px}.gap-2\\.5{gap:10px}.gap-3{gap:12px}.gap-6{gap:24px}.gap-8{gap:32px}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse: 0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse))}.divide-base-border>:not([hidden])~:not([hidden]){border-color:var(--el-base-border)}.self-auto{align-self:auto}.self-stretch{align-self:stretch}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.overflow-x-hidden{overflow-x:hidden}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-normal{white-space:normal}.whitespace-nowrap{white-space:nowrap}.whitespace-pre{white-space:pre}.whitespace-pre-wrap{white-space:pre-wrap}.break-all{word-break:break-all}.rounded-\\[calc\\(var\\(--el-button-radius\\)\\+4px\\)\\]{border-radius:calc(var(--el-button-radius) + 4px)}.rounded-\\[calc\\(var\\(--el-sheet-radius\\)-8px\\)\\]{border-radius:calc(var(--el-sheet-radius) - 8px)}.rounded-bubble{border-radius:var(--el-bubble-radius)}.rounded-button{border-radius:var(--el-button-radius)}.rounded-compact-sheet{border-radius:var(--el-compact-sheet-radius)}.rounded-dropdown-sheet{border-radius:var(--el-dropdown-sheet-radius)}.rounded-full{border-radius:9999px}.rounded-input{border-radius:var(--el-input-radius)}.rounded-sheet{border-radius:var(--el-sheet-radius)}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-l-4{border-left-width:4px}.border-r{border-right-width:1px}.border-accent{border-color:var(--el-accent)}.border-base{border-color:var(--el-base)}.border-base-border{border-color:var(--el-base-border)}.bg-accent{background-color:var(--el-accent)}.bg-base{background-color:var(--el-base)}.bg-base-active{background-color:var(--el-base-active)}.bg-base-border{background-color:var(--el-base-border)}.bg-base-hover{background-color:var(--el-base-hover)}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.bg-gradient-to-t{background-image:linear-gradient(to top,var(--tw-gradient-stops))}.from-base{--tw-gradient-from: var(--el-base) var(--tw-gradient-from-position);--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.bg-cover{background-size:cover}.object-cover{-o-object-fit:cover;object-fit:cover}.p-1{padding:4px}.p-1\\.5{padding:6px}.p-2{padding:8px}.p-3{padding:12px}.p-4{padding:16px}.px-1{padding-left:4px;padding-right:4px}.px-1\\.5{padding-left:6px;padding-right:6px}.px-2{padding-left:8px;padding-right:8px}.px-2\\.5{padding-left:10px;padding-right:10px}.px-3{padding-left:12px;padding-right:12px}.px-4{padding-left:16px;padding-right:16px}.px-8{padding-left:32px;padding-right:32px}.py-0\\.5{padding-top:2px;padding-bottom:2px}.py-1{padding-top:4px;padding-bottom:4px}.py-1\\.5{padding-top:6px;padding-bottom:6px}.py-2{padding-top:8px;padding-bottom:8px}.py-2\\.5{padding-top:10px;padding-bottom:10px}.py-4{padding-top:16px;padding-bottom:16px}.py-\\[calc\\(theme\\(spacing\\.2\\)-1px\\)\\]{padding-top:7px;padding-bottom:7px}.pb-1{padding-bottom:4px}.pb-2{padding-bottom:8px}.pb-3{padding-bottom:12px}.pb-4{padding-bottom:16px}.pb-\\[60px\\]{padding-bottom:60px}.pl-1\\.5{padding-left:6px}.pl-16{padding-left:64px}.pl-4{padding-left:16px}.pr-16{padding-right:64px}.pr-3{padding-right:12px}.pr-8{padding-right:32px}.pt-1{padding-top:4px}.pt-1\\.5{padding-top:6px}.pt-2{padding-top:8px}.pt-20{padding-top:80px}.pt-4{padding-top:16px}.text-left{text-align:left}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-\\[10px\\]{font-size:10px}.text-\\[13px\\]{font-size:13px}.text-lg{font-size:18px;line-height:26px}.text-md{font-size:16px;line-height:24px}.text-sm{font-size:14px;line-height:20px}.text-xl{font-size:20px;line-height:28px}.text-xs{font-size:12px;line-height:16px}.font-medium{font-weight:500}.font-semibold{font-weight:600}.italic{font-style:italic}.leading-5{line-height:1.25rem}.text-accent-primary{color:var(--el-accent-primary)}.text-base-border{color:var(--el-base-border)}.text-base-error{color:var(--el-base-error)}.text-base-primary{color:var(--el-base-primary)}.text-base-subtle{color:var(--el-base-subtle)}.underline{text-decoration-line:underline}.opacity-0{opacity:0}.opacity-30{opacity:.3}.shadow-header{--tw-shadow: 0 0 1px 0 rgba(0, 0, 0, .4), 0 2px 2px 0 rgba(0, 0, 0, .04);--tw-shadow-colored: 0 0 1px 0 var(--tw-shadow-color), 0 2px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 2px 40px 1px rgba(0, 0, 0, .12);--tw-shadow-colored: 0 2px 40px 1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0 2px 24px 1px rgba(0, 0, 0, .16);--tw-shadow-colored: 0 2px 24px 1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-scroll-fade-bottom{--tw-shadow: 0 8px 16px -4px rgba(0, 0, 0, .1);--tw-shadow-colored: 0 8px 16px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-scroll-fade-top{--tw-shadow: 0 -8px 16px -4px rgba(0, 0, 0, .1);--tw-shadow-colored: 0 -8px 16px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.ring-2{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-accent{--tw-ring-color: var(--el-accent)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-\\[1px\\]{--tw-backdrop-blur: blur(1px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[border-radius\\]{transition-property:border-radius;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[colors\\,opacity\\]{transition-property:colors,opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[margin\\]{transition-property:margin;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[opacity\\,transform\\]{transition-property:opacity,transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[opacity\\,width\\,height\\,transform\\,flex-grow\\]{transition-property:opacity,width,height,transform,flex-grow;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[opacity\\]{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[transform\\,left\\,top\\,opacity\\,scale\\]{transition-property:transform,left,top,opacity,scale;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[transform\\,opacity\\]{transition-property:transform,opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[width\\,height\\,max-width\\,max-height\\,transform\\,border-radius\\,opacity\\,inset\\,bottom\\,top\\,left\\,right\\,margin\\,padding\\]{transition-property:width,height,max-width,max-height,transform,border-radius,opacity,inset,bottom,top,left,right,margin,padding;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-shadow{transition-property:box-shadow;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}.overlay{position:absolute;inset:var(--el-overlay-padding);right:calc(var(--el-overlay-padding) + var(--removed-body-scroll-bar-size, 0px))}.focus-ring{--tw-ring-color: var(--el-accent);--tw-ring-offset-width: 2px;--tw-ring-offset-color: var(--el-base)}.focus-ring:focus-visible{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}[data-variant=compact].sheet{height:calc(100% - 80px)}[data-variant=compact].sheet{max-height:550px}[data-variant=compact].sheet{width:100%}[data-variant=compact].sheet{max-width:400px}[data-variant=compact].sheet{border-radius:var(--el-sheet-radius)}[data-variant=expanded].sheet{height:100%}[data-variant=expanded].sheet{max-height:calc(100% - 80px)}[data-variant=expanded].sheet{width:100%}[data-variant=expanded].sheet{max-width:600px}[data-variant=expanded].sheet{border-radius:var(--el-sheet-radius)}[data-variant=fullscreen].sheet{bottom:0}[data-variant=fullscreen].sheet{height:100%}[data-variant=fullscreen].sheet{max-height:100dvh}[data-variant=fullscreen].sheet{width:100%}[data-variant=fullscreen].sheet{max-width:100dvw}[data-variant=fullscreen].sheet{border-radius:0}[data-variant=fullscreen].sheet{padding-bottom:24px}[data-variant=fullscreen].sheet{margin:calc(-1 * var(--el-overlay-padding));width:calc(100% + 2 * var(--el-overlay-padding));height:calc(100% + 2 * var(--el-overlay-padding))}.animate-text{background-image:linear-gradient(75deg,var(--el-base-primary),var(--el-base-subtle),var(--el-base-primary),var(--el-base-subtle));background-size:300% 100%;-webkit-background-clip:text;background-clip:text;color:transparent;animation:TextAnimation 2s linear infinite}@keyframes TextAnimation{0%{background-position:0 0}to{background-position:100% 0}}.\\!terms h6,.terms h6{font-size:12px;line-height:16px;font-weight:500;color:var(--el-base-primary)}.\\!terms h5,.terms h5{font-size:14px;line-height:20px;font-weight:500;color:var(--el-base-primary)}.\\!terms h4,.terms h4{font-size:16px;line-height:24px;font-weight:500;color:var(--el-base-primary)}.\\!terms h3,.terms h3{font-size:18px;line-height:26px;font-weight:500;color:var(--el-base-primary)}.\\!terms h2,.terms h2{font-size:20px;line-height:28px;font-weight:500;color:var(--el-base-primary)}.\\!terms h2,.terms h2{font-size:24px;line-height:30px;font-weight:500;color:var(--el-base-primary)}.\\[field-sizing\\:content\\]{field-sizing:content}.\\[line-height\\:var\\(--el-overlay-padding\\)\\]{line-height:var(--el-overlay-padding)}.\\[mask-image\\:linear-gradient\\(to_bottom\\,black\\,transparent\\)\\]{-webkit-mask-image:linear-gradient(to bottom,black,transparent);mask-image:linear-gradient(to bottom,black,transparent)}.\\[mask-image\\:linear-gradient\\(to_top\\,black\\,transparent\\)\\]{-webkit-mask-image:linear-gradient(to top,black,transparent);mask-image:linear-gradient(to top,black,transparent)}.\\[overflow-wrap\\:break-word\\]{overflow-wrap:break-word}.dev-host,:host{pointer-events:none;position:fixed;top:0;right:0;bottom:0;left:0;z-index:1000;font-size:16px;line-height:24px;color:var(--el-base-primary);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;scrollbar-color:#e5e7eb transparent}.markdown{text-autospace:normal;text-spacing-trim:trim-start}.markdown h1,.markdown h2,.markdown h3,.markdown h4,.markdown h5,.markdown h6{word-break:auto-phrase}.tok-comment,.tok-meta{color:#6a737d}.tok-keyword{color:#d73a49}.tok-atom,.tok-bool,.tok-literal,.tok-number{color:#005cc5}.tok-string,.tok-string2{color:#032f62}.tok-variableName{color:#24292e}.tok-variableName.tok-definition{color:#6f42c1}.tok-variableName.tok-local{color:#24292e}.tok-variableName2,.tok-macroName,.tok-typeName,.tok-namespace,.tok-className{color:#6f42c1}.tok-propertyName{color:#24292e}.tok-propertyName.tok-definition{color:#005cc5}.tok-labelName{color:#22863a}.tok-url,.tok-link{text-decoration:underline;color:#032f62}.tok-operator{color:#d73a49}.tok-punctuation{color:#24292e}.tok-invalid{color:#b31d28}.tok-deleted{color:#b31d28;background-color:#ffeef0}.tok-inserted{color:#22863a;background-color:#f0fff4}.tok-heading{font-weight:700;color:#005cc5}.tok-emphasis{font-style:italic;color:#24292e}.tok-strong{font-weight:700;color:#24292e}.tok-strikethrough{text-decoration:line-through}.tok-monospace{color:#005cc5}.tok-processingInstruction,[data-syntax-theme=dark] .tok-comment,[data-syntax-theme=dark] .tok-meta{color:#6a737d}[data-syntax-theme=dark] .tok-keyword{color:#f97583}[data-syntax-theme=dark] .tok-atom,[data-syntax-theme=dark] .tok-bool,[data-syntax-theme=dark] .tok-literal,[data-syntax-theme=dark] .tok-number,[data-syntax-theme=dark] .tok-propertyName.tok-definition{color:#79b8ff}[data-syntax-theme=dark] .tok-string,[data-syntax-theme=dark] .tok-string2{color:#9ecbff}[data-syntax-theme=dark] .tok-url,[data-syntax-theme=dark] .tok-link{color:#dbedff}[data-syntax-theme=dark] .tok-variableName,[data-syntax-theme=dark] .tok-variableName.tok-local,[data-syntax-theme=dark] .tok-propertyName,[data-syntax-theme=dark] .tok-emphasis,[data-syntax-theme=dark] .tok-strong{color:#e1e4e8}[data-syntax-theme=dark] .tok-variableName.tok-definition,[data-syntax-theme=dark] .tok-variableName2,[data-syntax-theme=dark] .tok-macroName,[data-syntax-theme=dark] .tok-typeName,[data-syntax-theme=dark] .tok-namespace,[data-syntax-theme=dark] .tok-className{color:#b392f0}[data-syntax-theme=dark] .tok-labelName{color:#85e89d}[data-syntax-theme=dark] .tok-invalid{color:#fdaeb7}[data-syntax-theme=dark] .tok-deleted{color:#fdaeb7;background-color:#86181d}[data-syntax-theme=dark] .tok-inserted{color:#85e89d;background-color:#144620}[data-syntax-theme=dark] .tok-heading{color:#79b8ff}[data-syntax-theme=dark] .tok-operator{color:#f97583}[data-syntax-theme=dark] .tok-punctuation{color:#e1e4e8}[data-syntax-theme=dark] .tok-monospace{color:#79b8ff}[data-syntax-theme=dark] .tok-processingInstruction{color:#6a737d}.placeholder\\:text-base-subtle::-moz-placeholder{color:var(--el-base-subtle)}.placeholder\\:text-base-subtle::placeholder{color:var(--el-base-subtle)}.hover\\:border-accent-hover:hover{border-color:var(--el-accent-hover)}.hover\\:border-base-hover:hover{border-color:var(--el-base-hover)}.hover\\:bg-accent-hover:hover{background-color:var(--el-accent-hover)}.hover\\:bg-base-hover:hover{background-color:var(--el-base-hover)}.hover\\:opacity-50:hover{opacity:.5}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\\:underline-offset-2:focus-visible{text-underline-offset:2px}.focus-visible\\:opacity-100:focus-visible{opacity:1}.focus-visible\\:outline-none:focus-visible{outline:2px solid transparent;outline-offset:2px}.active\\:border-accent-active:active{border-color:var(--el-accent-active)}.active\\:border-base-active:active{border-color:var(--el-base-active)}.active\\:bg-accent-active:active{background-color:var(--el-accent-active)}.active\\:bg-base-active:active{background-color:var(--el-base-active)}.disabled\\:pointer-events-none:disabled{pointer-events:none}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}.group:focus-within .group-focus-within\\:pointer-events-auto{pointer-events:auto}.group:focus-within .group-focus-within\\:opacity-100{opacity:1}.group:hover .group-hover\\:pointer-events-auto{pointer-events:auto}.group:hover .group-hover\\:opacity-100{opacity:1}.data-hidden\\:-translate-y-4[data-shown=false]{--tw-translate-y: -16px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-hidden\\:translate-x-full[data-shown=false]{--tw-translate-x: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-hidden\\:translate-y-2[data-shown=false]{--tw-translate-y: 8px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-hidden\\:scale-100[data-shown=false]{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-hidden\\:scale-75[data-shown=false]{--tw-scale-x: .75;--tw-scale-y: .75;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-hidden\\:scale-90[data-shown=false]{--tw-scale-x: .9;--tw-scale-y: .9;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-hidden\\:opacity-0[data-shown=false]{opacity:0}.data-\\[highlighted\\]\\:bg-base-active[data-highlighted]{background-color:var(--el-base-active)}';function Xt(e,t){UA(e)&&(e="100%");const n=qA(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function Wc(e){return Math.min(1,Math.max(0,e))}function UA(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function qA(e){return typeof e=="string"&&e.indexOf("%")!==-1}function o0(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Gc(e){return Number(e)<=1?`${Number(e)*100}%`:e}function Zr(e){return e.length===1?"0"+e:String(e)}function XA(e,t,n){return{r:Xt(e,255)*255,g:Xt(t,255)*255,b:Xt(n,255)*255}}function c0(e,t,n){e=Xt(e,255),t=Xt(t,255),n=Xt(n,255);const i=Math.max(e,t,n),r=Math.min(e,t,n);let s=0,a=0;const o=(i+r)/2;if(i===r)a=0,s=0;else{const c=i-r;switch(a=o>.5?c/(2-i-r):c/(i+r),i){case e:s=(t-n)/c+(t<n?6:0);break;case t:s=(n-e)/c+2;break;case n:s=(e-t)/c+4;break}s/=6}return{h:s,s:a,l:o}}function Eh(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*(6*n):n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function FA(e,t,n){let i,r,s;if(e=Xt(e,360),t=Xt(t,100),n=Xt(n,100),t===0)r=n,s=n,i=n;else{const a=n<.5?n*(1+t):n+t-n*t,o=2*n-a;i=Eh(o,a,e+1/3),r=Eh(o,a,e),s=Eh(o,a,e-1/3)}return{r:i*255,g:r*255,b:s*255}}function l0(e,t,n){e=Xt(e,255),t=Xt(t,255),n=Xt(n,255);const i=Math.max(e,t,n),r=Math.min(e,t,n);let s=0;const a=i,o=i-r,c=i===0?0:o/i;if(i===r)s=0;else{switch(i){case e:s=(t-n)/o+(t<n?6:0);break;case t:s=(n-e)/o+2;break;case n:s=(e-t)/o+4;break}s/=6}return{h:s,s:c,v:a}}function zA(e,t,n){e=Xt(e,360)*6,t=Xt(t,100),n=Xt(n,100);const i=Math.floor(e),r=e-i,s=n*(1-t),a=n*(1-r*t),o=n*(1-(1-r)*t),c=i%6,l=[n,a,s,s,o,n][c],u=[o,n,n,a,s,s][c],d=[s,s,o,n,n,a][c];return{r:l*255,g:u*255,b:d*255}}function u0(e,t,n,i){const r=[Zr(Math.round(e).toString(16)),Zr(Math.round(t).toString(16)),Zr(Math.round(n).toString(16))];return i&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function BA(e,t,n,i,r){const s=[Zr(Math.round(e).toString(16)),Zr(Math.round(t).toString(16)),Zr(Math.round(n).toString(16)),Zr(jA(i))];return r&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function ZA(e,t,n,i){const r=e/100,s=t/100,a=n/100,o=i/100,c=255*(1-r)*(1-o),l=255*(1-s)*(1-o),u=255*(1-a)*(1-o);return{r:c,g:l,b:u}}function d0(e,t,n){let i=1-e/255,r=1-t/255,s=1-n/255,a=Math.min(i,r,s);return a===1?(i=0,r=0,s=0):(i=(i-a)/(1-a)*100,r=(r-a)/(1-a)*100,s=(s-a)/(1-a)*100),a*=100,{c:Math.round(i),m:Math.round(r),y:Math.round(s),k:Math.round(a)}}function jA(e){return Math.round(parseFloat(e)*255).toString(16)}function h0(e){return gn(e)/255}function gn(e){return parseInt(e,16)}function VA(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}const wh={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function WA(e){let t={r:0,g:0,b:0},n=1,i=null,r=null,s=null,a=!1,o=!1;return typeof e=="string"&&(e=HA(e)),typeof e=="object"&&(vn(e.r)&&vn(e.g)&&vn(e.b)?(t=XA(e.r,e.g,e.b),a=!0,o=String(e.r).substr(-1)==="%"?"prgb":"rgb"):vn(e.h)&&vn(e.s)&&vn(e.v)?(i=Gc(e.s),r=Gc(e.v),t=zA(e.h,i,r),a=!0,o="hsv"):vn(e.h)&&vn(e.s)&&vn(e.l)?(i=Gc(e.s),s=Gc(e.l),t=FA(e.h,i,s),a=!0,o="hsl"):vn(e.c)&&vn(e.m)&&vn(e.y)&&vn(e.k)&&(t=ZA(e.c,e.m,e.y,e.k),a=!0,o="cmyk"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=o0(n),{ok:a,format:e.format||o,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}const GA="[-\\+]?\\d+%?",YA="[-\\+]?\\d*\\.\\d+%?",hr="(?:"+YA+")|(?:"+GA+")",Ch="[\\s|\\(]+("+hr+")[,|\\s]+("+hr+")[,|\\s]+("+hr+")\\s*\\)?",Yc="[\\s|\\(]+("+hr+")[,|\\s]+("+hr+")[,|\\s]+("+hr+")[,|\\s]+("+hr+")\\s*\\)?",Rn={CSS_UNIT:new RegExp(hr),rgb:new RegExp("rgb"+Ch),rgba:new RegExp("rgba"+Yc),hsl:new RegExp("hsl"+Ch),hsla:new RegExp("hsla"+Yc),hsv:new RegExp("hsv"+Ch),hsva:new RegExp("hsva"+Yc),cmyk:new RegExp("cmyk"+Yc),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function HA(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;let t=!1;if(wh[e])e=wh[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};let n=Rn.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=Rn.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Rn.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=Rn.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Rn.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=Rn.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Rn.cmyk.exec(e),n?{c:n[1],m:n[2],y:n[3],k:n[4]}:(n=Rn.hex8.exec(e),n?{r:gn(n[1]),g:gn(n[2]),b:gn(n[3]),a:h0(n[4]),format:t?"name":"hex8"}:(n=Rn.hex6.exec(e),n?{r:gn(n[1]),g:gn(n[2]),b:gn(n[3]),format:t?"name":"hex"}:(n=Rn.hex4.exec(e),n?{r:gn(n[1]+n[1]),g:gn(n[2]+n[2]),b:gn(n[3]+n[3]),a:h0(n[4]+n[4]),format:t?"name":"hex8"}:(n=Rn.hex3.exec(e),n?{r:gn(n[1]+n[1]),g:gn(n[2]+n[2]),b:gn(n[3]+n[3]),format:t?"name":"hex"}:!1))))))))))}function vn(e){return typeof e=="number"?!Number.isNaN(e):Rn.CSS_UNIT.test(e)}class bt{constructor(t="",n={}){if(t instanceof bt)return t;typeof t=="number"&&(t=VA(t)),this.originalInput=t;const i=WA(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=n.format??i.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}isDark(){return this.getBrightness()<128}isLight(){return!this.isDark()}getBrightness(){const t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3}getLuminance(){const t=this.toRgb();let n,i,r;const s=t.r/255,a=t.g/255,o=t.b/255;return s<=.03928?n=s/12.92:n=Math.pow((s+.055)/1.055,2.4),a<=.03928?i=a/12.92:i=Math.pow((a+.055)/1.055,2.4),o<=.03928?r=o/12.92:r=Math.pow((o+.055)/1.055,2.4),.2126*n+.7152*i+.0722*r}getAlpha(){return this.a}setAlpha(t){return this.a=o0(t),this.roundA=Math.round(100*this.a)/100,this}isMonochrome(){const{s:t}=this.toHsl();return t===0}toHsv(){const t=l0(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}}toHsvString(){const t=l0(this.r,this.g,this.b),n=Math.round(t.h*360),i=Math.round(t.s*100),r=Math.round(t.v*100);return this.a===1?`hsv(${n}, ${i}%, ${r}%)`:`hsva(${n}, ${i}%, ${r}%, ${this.roundA})`}toHsl(){const t=c0(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}}toHslString(){const t=c0(this.r,this.g,this.b),n=Math.round(t.h*360),i=Math.round(t.s*100),r=Math.round(t.l*100);return this.a===1?`hsl(${n}, ${i}%, ${r}%)`:`hsla(${n}, ${i}%, ${r}%, ${this.roundA})`}toHex(t=!1){return u0(this.r,this.g,this.b,t)}toHexString(t=!1){return"#"+this.toHex(t)}toHex8(t=!1){return BA(this.r,this.g,this.b,this.a,t)}toHex8String(t=!1){return"#"+this.toHex8(t)}toHexShortString(t=!1){return this.a===1?this.toHexString(t):this.toHex8String(t)}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbString(){const t=Math.round(this.r),n=Math.round(this.g),i=Math.round(this.b);return this.a===1?`rgb(${t}, ${n}, ${i})`:`rgba(${t}, ${n}, ${i}, ${this.roundA})`}toPercentageRgb(){const t=n=>`${Math.round(Xt(n,255)*100)}%`;return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}}toPercentageRgbString(){const t=n=>Math.round(Xt(n,255)*100);return this.a===1?`rgb(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%)`:`rgba(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%, ${this.roundA})`}toCmyk(){return{...d0(this.r,this.g,this.b)}}toCmykString(){const{c:t,m:n,y:i,k:r}=d0(this.r,this.g,this.b);return`cmyk(${t}, ${n}, ${i}, ${r})`}toName(){if(this.a===0)return"transparent";if(this.a<1)return!1;const t="#"+u0(this.r,this.g,this.b,!1);for(const[n,i]of Object.entries(wh))if(t===i)return n;return!1}toString(t){const n=!!t;t=t??this.format;let i=!1;const r=this.a<1&&this.a>=0;return!n&&r&&(t.startsWith("hex")||t==="name")?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(i=this.toRgbString()),t==="prgb"&&(i=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(i=this.toHexString()),t==="hex3"&&(i=this.toHexString(!0)),t==="hex4"&&(i=this.toHex8String(!0)),t==="hex8"&&(i=this.toHex8String()),t==="name"&&(i=this.toName()),t==="hsl"&&(i=this.toHslString()),t==="hsv"&&(i=this.toHsvString()),t==="cmyk"&&(i=this.toCmykString()),i||this.toHexString())}toNumber(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)}clone(){return new bt(this.toString())}lighten(t=10){const n=this.toHsl();return n.l+=t/100,n.l=Wc(n.l),new bt(n)}brighten(t=10){const n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),new bt(n)}darken(t=10){const n=this.toHsl();return n.l-=t/100,n.l=Wc(n.l),new bt(n)}tint(t=10){return this.mix("white",t)}shade(t=10){return this.mix("black",t)}desaturate(t=10){const n=this.toHsl();return n.s-=t/100,n.s=Wc(n.s),new bt(n)}saturate(t=10){const n=this.toHsl();return n.s+=t/100,n.s=Wc(n.s),new bt(n)}greyscale(){return this.desaturate(100)}spin(t){const n=this.toHsl(),i=(n.h+t)%360;return n.h=i<0?360+i:i,new bt(n)}mix(t,n=50){const i=this.toRgb(),r=new bt(t).toRgb(),s=n/100,a={r:(r.r-i.r)*s+i.r,g:(r.g-i.g)*s+i.g,b:(r.b-i.b)*s+i.b,a:(r.a-i.a)*s+i.a};return new bt(a)}analogous(t=6,n=30){const i=this.toHsl(),r=360/n,s=[this];for(i.h=(i.h-(r*t>>1)+720)%360;--t;)i.h=(i.h+r)%360,s.push(new bt(i));return s}complement(){const t=this.toHsl();return t.h=(t.h+180)%360,new bt(t)}monochromatic(t=6){const n=this.toHsv(),{h:i}=n,{s:r}=n;let{v:s}=n;const a=[],o=1/t;for(;t--;)a.push(new bt({h:i,s:r,v:s})),s=(s+o)%1;return a}splitcomplement(){const t=this.toHsl(),{h:n}=t;return[this,new bt({h:(n+72)%360,s:t.s,l:t.l}),new bt({h:(n+216)%360,s:t.s,l:t.l})]}onBackground(t){const n=this.toRgb(),i=new bt(t).toRgb(),r=n.a+i.a*(1-n.a);return new bt({r:(n.r*n.a+i.r*i.a*(1-n.a))/r,g:(n.g*n.a+i.g*i.a*(1-n.a))/r,b:(n.b*n.a+i.b*i.a*(1-n.a))/r,a:r})}triad(){return this.polyad(3)}tetrad(){return this.polyad(4)}polyad(t){const n=this.toHsl(),{h:i}=n,r=[this],s=360/t;for(let a=1;a<t;a++)r.push(new bt({h:(i+a*s)%360,s:n.s,l:n.l}));return r}equals(t){const n=new bt(t);return this.format==="cmyk"||n.format==="cmyk"?this.toCmykString()===n.toCmykString():this.toRgbString()===n.toRgbString()}}const p0=["tiny","compact","full"];function KA(e){return p0.includes(e)?e:p0[0]}const JA=["top-left","top","top-right","bottom-left","bottom","bottom-right"];function eI(e){return JA.includes(e)?e:"bottom-right"}const f0={main_label:"Need help?",start_call:"Start a call",start_chat:"Start a chat",send_message:"Send",new_call:"New call",end_call:"End",mute_microphone:"Mute microphone",text_mode:"Switch to text mode",voice_mode:"Switch to voice mode",switched_to_text_mode:"Switched to text mode",switched_to_voice_mode:"Switched to voice mode",change_language:"Change language",collapse:"Collapse",expand:"Expand",copied:"Copied!",accept_terms:"Accept",dismiss_terms:"Cancel",listening_status:"Listening",speaking_status:"Talk to interrupt",connecting_status:"Connecting",chatting_status:"Chatting with AI Agent",input_label:"Text message input",input_placeholder:"Send a message...",input_placeholder_text_only:"Send a message...",input_placeholder_new_conversation:"Start a new conversation",user_ended_conversation:"You ended the conversation",agent_ended_conversation:"The agent ended the conversation",conversation_id:"ID",error_occurred:"An error occurred",copy_id:"Copy ID",initiate_feedback:"How was this conversation?",request_follow_up_feedback:"Tell us more",thanks_for_feedback:"Thank you for your feedback!",thanks_for_feedback_details:"Your feedback helps us improve our service and better support you in the future.",follow_up_feedback_placeholder:"Tell us more about your experience...",submit:"Submit",go_back:"Go back",copy:"Copy",download:"Download",wrap:"Wrap"},tI=Object.keys(f0),xh={base:"#ffffff",base_hover:"#f9fafb",base_active:"#f3f4f6",base_border:"#e5e7eb",base_subtle:"#6b7280",base_primary:"#000000",base_error:"#ef4444",accent:"#000000",accent_hover:"#1f2937",accent_active:"#374151",accent_border:"#4b5563",accent_subtle:"#6b7280",accent_primary:"#ffffff",overlay_padding:32,button_radius:18,input_radius:10,bubble_radius:15,sheet_radius:"calc(var(--el-button-radius) + 6px)",compact_sheet_radius:"calc(var(--el-button-radius) + 12px)",dropdown_sheet_radius:"calc(var(--el-input-radius) + 6px)"},nI=Object.keys(xh);function iI(e="us"){switch(e){case"eu-residency":case"in-residency":case"us":case"global":return e;default:return console.warn(`[ConversationalAI] Invalid server-location: ${e}. Defaulting to "us"`),"us"}}function Vt(e){const t=fn(e);if(t==null)throw new Error(`${e.displayName} cannot be used outside of provider`);return t}const m0=ot(null);function rI({value:e,children:t}){const n=$e(()=>Object.fromEntries(_h.map(i=>[i,Nn(e[i])])),[]);return _h.forEach(i=>{n[i].value=e[i]}),g(m0.Provider,{value:n,children:t})}function sI(){return Vt(m0)}function Ce(e){return sI()[e]}const O0=ot(null);function aI({children:e}){const t=Ce("server-location"),n=$e(()=>{const i=jt(()=>iI(t.value)),r={us:"https://api.us.elevenlabs.io","eu-residency":"https://api.eu.residency.elevenlabs.io","in-residency":"https://api.in.residency.elevenlabs.io",global:"https://api.elevenlabs.io"},s={us:"wss://api.us.elevenlabs.io","eu-residency":"wss://api.eu.residency.elevenlabs.io","in-residency":"wss://api.in.residency.elevenlabs.io",global:"wss://api.elevenlabs.io"};return{location:i,serverUrl:jt(()=>r[i.value]),webSocketUrl:jt(()=>s[i.value])}},[]);return g(O0.Provider,{value:n,children:e})}function Ph(){return Vt(O0)}const Va={en:{name:"English",flagCode:"us",languageCode:"en"},zh:{name:"",flagCode:"cn",languageCode:"zh"},es:{name:"Espaol",flagCode:"es",languageCode:"es"},hi:{name:"",flagCode:"in",languageCode:"hi"},pt:{name:"Portugus (Portugal)",flagCode:"pt",languageCode:"pt"},"pt-br":{name:"Portugus (Brasil)",flagCode:"br",languageCode:"pt-br"},fr:{name:"Franais",flagCode:"fr",languageCode:"fr"},de:{name:"Deutsch",flagCode:"de",languageCode:"de"},ja:{name:"",flagCode:"jp",languageCode:"ja"},ar:{name:"",flagCode:"ae",languageCode:"ar"},ru:{name:"",flagCode:"ru",languageCode:"ru"},ko:{name:"",flagCode:"kr",languageCode:"ko"},id:{name:"Bahasa Indonesia",flagCode:"id",languageCode:"id"},it:{name:"Italiano",flagCode:"it",languageCode:"it"},nl:{name:"Nederlands",flagCode:"nl",languageCode:"nl"},tr:{name:"Trke",flagCode:"tr",languageCode:"tr"},pl:{name:"Polski",flagCode:"pl",languageCode:"pl"},sv:{name:"Svenska",flagCode:"se",languageCode:"sv"},ms:{name:"Bahasa Melayu",flagCode:"my",languageCode:"ms"},ro:{name:"Romn",flagCode:"ro",languageCode:"ro"},uk:{name:"",flagCode:"ua",languageCode:"uk"},el:{name:"",flagCode:"gr",languageCode:"el"},cs:{name:"etina",flagCode:"cz",languageCode:"cs"},da:{name:"Dansk",flagCode:"dk",languageCode:"da"},fi:{name:"Suomi",flagCode:"fi",languageCode:"fi"},bg:{name:"",flagCode:"bg",languageCode:"bg"},hr:{name:"Hrvatski",flagCode:"hr",languageCode:"hr"},sk:{name:"Slovenina",flagCode:"sk",languageCode:"sk"},ta:{name:"",flagCode:"in",languageCode:"ta"},hu:{name:"Magyar",flagCode:"hu",languageCode:"hu"},no:{name:"Norsk",flagCode:"no",languageCode:"no"},vi:{name:"Ting Vit",flagCode:"vn",languageCode:"vi"},tl:{name:"Filipino",flagCode:"ph",languageCode:"tl"},af:{name:"Afrikaans",flagCode:"za",languageCode:"af"},hy:{name:"",flagCode:"am",languageCode:"hy"},as:{name:"",flagCode:"in",languageCode:"as"},az:{name:"Azrbaycan",flagCode:"az",languageCode:"az"},be:{name:"",flagCode:"by",languageCode:"be"},bn:{name:"",flagCode:"in",languageCode:"bn"},bs:{name:"Bosanski",flagCode:"ba",languageCode:"bs"},ca:{name:"Catal",flagCode:"es-ct",languageCode:"ca"},et:{name:"Eesti",flagCode:"ee",languageCode:"et"},gl:{name:"Galego",flagCode:"es-ga",languageCode:"gl"},ka:{name:"",flagCode:"ge",languageCode:"ka"},gu:{name:"",flagCode:"in",languageCode:"gu"},ha:{name:"Hausa",flagCode:"ng",languageCode:"ha"},he:{name:"",flagCode:"il",languageCode:"he"},is:{name:"slenska",flagCode:"is",languageCode:"is"},ga:{name:"Gaeilge",flagCode:"ie",languageCode:"ga"},jv:{name:"Basa Jawa",flagCode:"id",languageCode:"jv"},kn:{name:"",flagCode:"in",languageCode:"kn"},kk:{name:"",flagCode:"kz",languageCode:"kk"},ky:{name:"",flagCode:"kg",languageCode:"ky"},lv:{name:"Latvieu",flagCode:"lv",languageCode:"lv"},lt:{name:"Lietuvi",flagCode:"lt",languageCode:"lt"},lb:{name:"Ltzebuergesch",flagCode:"lu",languageCode:"lb"},mk:{name:"",flagCode:"mk",languageCode:"mk"},ml:{name:"",flagCode:"in",languageCode:"ml"},mr:{name:"",flagCode:"in",languageCode:"mr"},ne:{name:"",flagCode:"np",languageCode:"ne"},ps:{name:"",flagCode:"af",languageCode:"ps"},fa:{name:"",flagCode:"ir",languageCode:"fa"},pa:{name:"",flagCode:"in",languageCode:"pa"},sr:{name:"",flagCode:"rs",languageCode:"sr"},sd:{name:"",flagCode:"in",languageCode:"sd"},sl:{name:"Slovenina",flagCode:"si",languageCode:"sl"},so:{name:"Soomaali",flagCode:"so",languageCode:"so"},sw:{name:"Kiswahili",flagCode:"ke",languageCode:"sw"},te:{name:"",flagCode:"in",languageCode:"te"},th:{name:"",flagCode:"th",languageCode:"th"},ur:{name:"",flagCode:"pk",languageCode:"ur"},cy:{name:"Cymraeg",flagCode:"gb-wls",languageCode:"cy"}};function Rh(e){return Object.keys(Va).includes(e??"")}const g0=ot(null);function oI({children:e}){const t=Et(),n=Ce("language"),i=Ce("override-language"),r=He(n.peek()??t.peek().language),s=ge(()=>(t.value.supported_language_overrides??[]).filter(Rh)),a=ge(()=>s.value.map(c=>Va[c]).sort((c,l)=>c.name.localeCompare(l.name))),o=$e(()=>({language:jt(()=>Rh(i.value)?Va[i.value]:Rh(r.value)&&s.value.includes(r.value)?Va[r.value]:Va[t.value.language]),setLanguage:c=>{r.value=c},options:a,showPicker:jt(()=>a.value.length>0)}),[]);return g(g0.Provider,{value:o,children:e})}function jr(){return Vt(g0)}const cI="0.6.0-beta.8",v0=ot(null);function lI({children:e}){const{language:t}=jr(),n=Ce("override-prompt"),i=Ce("override-first-message"),r=Ce("override-voice-id"),s=Ce("override-text-only"),a=Ce("user-id"),o=ge(()=>({agent:{prompt:{prompt:n.value},firstMessage:i.value,language:t.value.languageCode},tts:{voiceId:r.value},conversation:{textOnly:zn(s.value)??void 0}})),c=Ce("dynamic-variables"),l=ge(()=>{if(c.value)try{return JSON.parse(c.value)}catch(y){console.error(`[ConversationalAI] Cannot parse dynamic-variables: ${y==null?void 0:y.message}`)}}),u=Ce("worklet-path-raw-audio-processor"),d=Ce("worklet-path-audio-concat-processor"),h=Ce("worklet-path-libsamplerate"),{webSocketUrl:p}=Ph(),O=Ce("agent-id"),m=Ce("signed-url"),b=Kc(),v=vI(),k=ge(()=>{const y=v.value,T={dynamicVariables:l.value,overrides:o.value,connectionDelay:{default:300},textOnly:b.value,userId:a.value||void 0,libsampleratePath:h.value,workletPaths:{rawAudioProcessor:u.value,audioConcatProcessor:d.value}};return O.value?y?{agentId:O.value,origin:p.value,connectionType:"webrtc",...T}:{agentId:O.value,origin:p.value,connectionType:"websocket",...T}:m.value?{signedUrl:m.value,connectionType:"websocket",...T}:(console.error("[ConversationalAI] Either agent-id or signed-url is required"),null)});return k.value?g(v0.Provider,{value:k,children:e}):null}function uI(){return Vt(v0)}const b0=ot(null);function dI({children:e}){const t=E0(),n=He(!1),i=He(!1),r=$e(()=>{const s=jt(()=>!t.value.terms_html||i.value);let a=[];return{termsShown:n,termsAccepted:s,dismissTerms:()=>{n.value=!1,a.forEach(o=>o.reject()),a=[]},acceptTerms:()=>{i.value=!0,n.value=!1;const o=t.peek().terms_key;o&&localStorage.setItem(o,"true"),a.forEach(c=>c.resolve()),a=[]},requestTerms:async()=>{s.peek()||(n.value=!0,await new Promise((o,c)=>{a.push({resolve:o,reject:c})}))}}},[n,i,t]);return Dn(()=>{const s=t.value.terms_key,a=s?!!localStorage.getItem(s):!1;i.value=a}),g(b0.Provider,{value:r,children:e})}function Hc(){return Vt(b0)}const T0=ot(null);function hI({children:e}){const t=He(null),n=oe(i=>{t.value=pI(i)},[t]);return g(T0.Provider,{value:t,children:[g("template",{ref:n}),e]})}function k0(){return Vt(T0)}function pI(e){if(!e)return null;const t=e==null?void 0:e.getRootNode();return t instanceof ShadowRoot&&t.host instanceof HTMLElement?t.host:e.parentElement}const y0=ot(null);function fI({children:e}){const t=mI();return Dn(()=>{if(t.conversationTextOnly.value===!0){t.transcript.value;const n=setTimeout(()=>{t.endSession()},600*1e3);return()=>{clearTimeout(n)}}}),g(y0.Provider,{value:t,children:e})}function _t(){return Vt(y0)}function mI(){const e=ue(null),t=ue(null),n=ue(!1),i=ue(null),r=ue(!1),s=k0(),a=Et(),o=_0(),c=Hc(),l=uI();return ke(()=>()=>{var u;(u=e.current)==null||u.endSession()},[]),$e(()=>{const u=Nn("disconnected"),d=jt(()=>u.value==="disconnected"),h=Nn("listening"),p=jt(()=>h.value==="speaking"),O=Nn(null),m=Nn(null),b=Nn(!1),v=Nn([]),k=Nn(0),y=Nn(null);return{status:u,isSpeaking:p,mode:h,isDisconnected:d,lastId:m,error:O,canSendFeedback:b,conversationIndex:k,conversationTextOnly:y,transcript:v,startSession:async(T,S)=>{var _,x,N,L,w,D,M;if(await c.requestTerms(),(_=e.current)!=null&&_.isOpen())return e.current.getId();if(t.current)return(await t.current).getId();let B=structuredClone(l.peek());S&&a.value.supports_text_only&&(B.textOnly=!0,a.value.text_only||(B.overrides??(B.overrides={}),(x=B.overrides).conversation??(x.conversation={}),B.overrides.conversation.textOnly=!0));try{B=OI(s.value??T,B)}catch(F){console.error("[ConversationalAI] Error triggering call event:",F)}y.value=B.textOnly??!1,v.value=S?[{type:"message",role:"user",message:S,isText:!0,conversationIndex:k.peek()}]:[];try{if(t.current=DA.startSession({...B,overrides:{...B.overrides,client:{...(N=B.overrides)==null?void 0:N.client,source:((w=(L=B.overrides)==null?void 0:L.client)==null?void 0:w.source)||"widget",version:((M=(D=B.overrides)==null?void 0:D.client)==null?void 0:M.version)||cI}},onModeChange:q=>{h.value=q.mode},onStatusChange:q=>{u.value=q.status},onCanSendFeedbackChange:q=>{b.value=q.canSendFeedback},onMessage:({role:q,message:H})=>{if(o.peek()&&y.peek()===!0&&q==="agent"&&!n.current){n.current=!0;return}else q==="agent"&&(n.current=!0);if(q==="agent"&&r.current){const se=i.current;if(se!==null){const Z=[...v.peek()];Z[se]={type:"message",role:"agent",message:H,isText:!0,conversationIndex:k.peek()},v.value=Z}r.current=!1;return}v.value=[...v.peek(),{type:"message",role:q,message:H,isText:!1,conversationIndex:k.peek()}]},onAgentChatResponsePart:({text:q,type:H})=>{if(o.peek()&&y.peek()===!0&&!n.current)return;const se=v.peek();if(H==="start")r.current=!0,i.current=se.length;else if(H==="delta"){const Z=i.current;if(Z!==null&&q){const de=[...se],I=de[Z]??(de[Z]={type:"message",role:"agent",message:"",isText:!0,conversationIndex:k.peek()});I.type==="message"&&(de[Z]={...I,message:I.message+q},v.value=de)}}else H==="stop"&&(i.current=null)},onDisconnect:q=>{n.current=!1,y.value=null,i.current=null,r.current=!1,v.value=[...v.peek(),q.reason==="error"?{type:"error",message:q.message,conversationIndex:k.peek()}:{type:"disconnection",role:q.reason==="user"?"user":"agent",conversationIndex:k.peek()}],k.value++,q.reason==="error"&&(O.value=q.message,console.error("[ConversationalAI] Disconnected due to an error:",q.message))}}),e.current=await t.current,S){const q=e.current;setTimeout(()=>q.sendUserMessage(S),100)}const F=e.current.getId();return m.value=F,O.value=null,F}catch(F){let q="Could not start a conversation.";F instanceof CloseEvent?q=F.reason||q:F instanceof Error&&(q=F.message||q),O.value=q,v.value=[...v.value,{type:"error",message:q,conversationIndex:k.peek()}]}finally{t.current=null}},endSession:async()=>{const T=e.current;e.current=null,await(T==null?void 0:T.endSession())},getInputVolume:()=>{var T;return((T=e.current)==null?void 0:T.getInputVolume())??0},getOutputVolume:()=>{var T;return((T=e.current)==null?void 0:T.getOutputVolume())??0},setVolume:T=>{var S;(S=e.current)==null||S.setVolume({volume:T})},setMicMuted:T=>{var S;(S=e.current)==null||S.setMicMuted(T)},sendFeedback:T=>{var S;(S=e.current)==null||S.sendFeedback(T)},sendUserMessage:T=>{var S;(S=e.current)==null||S.sendUserMessage(T),v.value=[...v.value,{type:"message",role:"user",message:T,isText:!0,conversationIndex:k.peek()}]},sendUserActivity:()=>{var T;(T=e.current)==null||T.sendUserActivity()},addModeToggleEntry:T=>{var S;(S=e.current)!=null&&S.isOpen()&&(v.value=[...v.value,{type:"mode_toggle",mode:T,conversationIndex:k.peek()}])}}},[l])}function OI(e,t){try{const n=new CustomEvent("elevenlabs-convai:call",{bubbles:!0,composed:!0,detail:{config:t}});return e.dispatchEvent(n),n.detail.config}catch(n){return console.error("[ConversationalAI] Could not trigger call event:",n),t}}const S0=ot(null);function gI({children:e}){const{serverUrl:t}=Ph(),n=Ce("agent-id"),i=Ce("override-config"),r=Ce("signed-url"),s=He(null);Dn(()=>{if(i.value)try{const T=JSON.parse(i.value);if(T){s.value=T;return}}catch(T){console.error(`[ConversationalAI] Cannot parse override-config: ${T==null?void 0:T.message}`)}let v=n.value,k;if(r.value){const T=new URL(r.value).searchParams;v=T.get("agent_id")??n.value,k=T.get("conversation_signature")??void 0}if(!v){s.value=null;return}const y=new AbortController;return yI(v,t.value,y.signal,k).then(T=>{y.signal.aborted||(s.value=T)}).catch(T=>{console.error(`[ConversationalAI] Cannot fetch config for agent ${n.value}: ${T==null?void 0:T.message}`),y.signal.aborted||(s.value=null)}),()=>{y.abort()}});const a=Ce("variant"),o=Ce("placement"),c=Ce("terms-key"),l=Ce("mic-muting"),u=Ce("transcript"),d=Ce("text-input"),h=Ce("default-expanded"),p=Ce("always-expanded"),O=Ce("override-text-only"),m=Ce("use-rtc"),b=ge(()=>{if(!s.value)return null;const v=a.value??s.value.variant,k=o.value??s.value.placement,y=c.value??s.value.terms_key,T=zn(O.value)??s.value.text_only??!1,S=zn(l.value)??s.value.mic_muting_enabled,_=zn(u.value)??s.value.transcript_enabled,x=zn(d.value)??s.value.text_input_enabled,N=zn(p.value)??s.value.always_expanded??!1,L=zn(h.value)??s.value.default_expanded??!1,w=zn(m.value)??s.value.use_rtc??!1;return{...s.value,variant:KA(v),placement:eI(k),terms_key:y,mic_muting_enabled:!T&&S,transcript_enabled:T||_,text_input_enabled:T||x,always_expanded:N,default_expanded:L,use_rtc:w}});return b.value?g(S0.Provider,{value:b,children:e}):null}function Et(){return Vt(S0)}function Kc(){const e=Ce("override-text-only"),t=Et();return ge(()=>zn(e.value)??t.value.text_only??!1)}function Wa(){const e=Kc(),{conversationTextOnly:t}=_t();return ge(()=>t.value??e.value)}function _0(){const e=Ce("override-first-message"),t=Et(),{language:n}=jr();return ge(()=>{var i,r;return e.value??((r=(i=t.value.language_presets)==null?void 0:i[n.value.languageCode])==null?void 0:r.first_message)??t.value.first_message??null})}function Ah(){const e=Et();return ge(()=>e.value.text_input_enabled??!1)}function E0(){const e=Et(),{language:t}=jr();return ge(()=>{var n;const i=(n=e.value.language_presets)==null?void 0:n[t.value.languageCode];return{terms_html:(i==null?void 0:i.terms_html)??e.value.terms_html,terms_text:(i==null?void 0:i.terms_text)??e.value.terms_text,terms_key:(i==null?void 0:i.terms_key)??e.value.terms_key}})}function vI(){const e=Et();return ge(()=>e.value.use_rtc??!1)}function bI(){const e=Et();return ge(()=>{var t;return((t=e.value.end_feedback)==null?void 0:t.type)??null})}function TI(){const e=Ce("markdown-link-allowed-hosts"),t=Ce("markdown-link-include-www"),n=Ce("markdown-link-allow-http"),i=Et();return ge(()=>{let r=[];if(e.value)r=e.value.split(",").map(o=>o.trim()).filter(Boolean);else{const o=i.value.markdown_link_allowed_hosts;o&&o.length>0&&(o.some(c=>c.hostname==="*")?r=["*"]:r=o.map(c=>c.hostname))}const s=zn(t.value)??i.value.markdown_link_include_www??!0,a=zn(n.value)??i.value.markdown_link_allow_http??!0;return{allowedHosts:r,includeWww:s,allowHttp:a}})}function kI(){const e=Ce("syntax-highlight-theme"),t=Et();return ge(()=>{var n;const i=e.value??t.value.syntax_highlight_theme;if(i==="light"||i==="dark")return i;const r=((n=t.value.styles)==null?void 0:n.base_active)??xh.base_active,s=new bt(r);return s.isValid&&s.isDark()?"dark":"light"})}async function yI(e,t,n,i){const r=await(await fetch(`${t}/v1/convai/agents/${e}/widget${i?`?conversation_signature=${encodeURIComponent(i)}`:""}`,{signal:n})).json();if(!r.widget_config)throw new Error("Response does not contain widget_config");return r.widget_config}const SI=ze(function(){const e=Et(),t=ge(()=>{const n=e.value.styles;return`:host, :root {
${nI.map(i=>`${_I(i)}: ${EI((n==null?void 0:n[i])??xh[i])};`).join(`
`)}
}`});return g("style",{children:[t,$A]})});function _I(e){return`--el-${e.replace(/_/g,"-")}`}function EI(e){return typeof e=="number"?`${e}px`:e}const w0=ot(null);function wI({children:e}){const t=He("voice"),{isDisconnected:n,addModeToggleEntry:i,setVolume:r}=_t();Dn(()=>{const a=t.value==="text";r(a?0:1)});const s=$e(()=>({mode:jt(()=>t.value),setMode:a=>{t.value!==a&&(t.value=a,n.value||i(a))},isTextMode:jt(()=>t.value==="text"),isVoiceMode:jt(()=>t.value==="voice")}),[n,i]);return g(w0.Provider,{value:s,children:e})}function Jc(){return Vt(w0)}const C0=ot(null);function CI({children:e}){const t=Et(),{isTextMode:n}=Jc(),{setMicMuted:i}=_t(),r=ge(()=>t.value.mic_muting_enabled??!1),s=He(!1),a=ue(null);Dn(()=>{n.value?(a.current===null&&(a.current=s.peek()),i(!0)):(a.current!==null&&(s.value=a.current,a.current=null),i(r.value?s.value:!1))});const o=$e(()=>({isMuted:jt(()=>n.value?!0:r.value?s.value:!1),setIsMuted:c=>{s.value=c},isMutingEnabled:r}),[]);return g(C0.Provider,{value:o,children:e})}function xI(){return Vt(C0)}const x0=ot(null);function PI({children:e}){const t=Et(),{language:n}=jr(),i=Ce("text-contents"),r=ge(()=>{try{if(i.value){const a=JSON.parse(i.value);if(typeof a=="object")return a}}catch(a){console.error("[ConversationalAI] Cannot parse text-contents:",a)}return{}}),s=$e(()=>Object.fromEntries(tI.map(a=>[a,jt(()=>{var o,c,l,u;return r.value[a]??((l=(c=(o=t.value.language_presets)==null?void 0:o[n.value.languageCode])==null?void 0:c.text_contents)==null?void 0:l[a])??((u=t.value.text_contents)==null?void 0:u[a])??f0[a]})])),[]);return g(x0.Provider,{value:s,children:e})}function st(){return Vt(x0)}const P0=ot(null);function RI({children:e}){const t=Et(),n=Ce("avatar-image-url"),i=Ce("avatar-orb-color-1"),r=Ce("avatar-orb-color-2"),s=He(""),a=ge(()=>n.value?{type:"image",url:n.value}:i.value&&r.value?{type:"orb",color_1:i.value,color_2:r.value}:t.value.avatar),o=ge(()=>{switch(a.value.type){case"url":return a.value.custom_url;case"orb":return s.value;case"image":return a.value.url}}),c=$e(()=>({config:a,previewUrl:o,canvasUrl:s}),[]);return g(P0.Provider,{value:c,children:e})}function Ih(){return Vt(P0)}const R0=ot(null);function el({children:e,...t}){const[n,i]=pe(null);return g("div",{ref:i,...t,children:n&&g(R0.Provider,{value:n,children:e})})}function AI(){return Vt(R0)}function Qh(e){return e&&typeof e=="object"&&"peek"in e}function II(e){const t=Qh(e),n=He(t?e.peek():e);return t?e:(n.value=e,n)}function A0(e){return Qh(e)?e.value:e}function QI(e){return Qh(e)?e.peek():e}function I0(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Nh(...e){return t=>{let n=!1;const i=e.map(r=>{const s=I0(r,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():I0(e[r],null)}}}}function Ft(...e){return oe(Nh(...e),e)}var NI=Symbol.for("react.lazy"),tl=ed[" use ".trim().toString()];function DI(e){return typeof e=="object"&&e!==null&&"then"in e}function Q0(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===NI&&"_payload"in e&&DI(e._payload)}function MI(e){const t=LI(e),n=we((i,r)=>{let{children:s,...a}=i;Q0(s)&&typeof tl=="function"&&(s=tl(s._payload));const o=mn.toArray(s),c=o.find(UI);if(c){const l=c.props.children,u=o.map(d=>d===c?mn.count(l)>1?mn.only(null):xt(l)?l.props.children:null:d);return g(t,{...a,ref:r,children:xt(l)?Lr(l,void 0,u):null})}return g(t,{...a,ref:r,children:s})});return n.displayName=`${e}.Slot`,n}var N0=MI("Slot");function LI(e){const t=we((n,i)=>{let{children:r,...s}=n;if(Q0(r)&&typeof tl=="function"&&(r=tl(r._payload)),xt(r)){const a=XI(r),o=qI(s,r.props);return r.type!==Fe&&(o.ref=i?Nh(i,a):a),Lr(r,o)}return mn.count(r)>1?mn.only(null):null});return t.displayName=`${e}.SlotClone`,t}var $I=Symbol("radix.slottable");function UI(e){return xt(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===$I}function qI(e,t){const n={...t};for(const i in t){const r=e[i],s=t[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{const o=s(...a);return r(...a),o}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...e,...n}}function XI(e){var t,n;let i=(t=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:t.get,r=i&&"isReactWarning"in i&&i.isReactWarning;return r?e.ref:(i=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,r=i&&"isReactWarning"in i&&i.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const Dh=window.matchMedia("(prefers-reduced-motion: reduce)");function D0(){const e=He(Dh.matches);return ke(()=>{const t=n=>{e.value=n.matches};return Dh.addEventListener("change",t),()=>Dh.removeEventListener("change",t)},[]),e}function M0({onStart:e,onEnd:t}){const n=ue();n.current??(n.current=new Set);const i=ue(e);i.current=e;const r=ue(t);r.current=t;const s=He(!1),a=oe(c=>{var l,u;c.target===c.currentTarget&&((l=n.current)==null||l.add(c.propertyName),s.peek()||(s.value=!0,(u=i.current)==null||u.call(i)))},[]),o=oe(c=>{var l,u,d;c.target===c.currentTarget&&((l=n.current)==null||l.delete(c.propertyName),(u=n.current)!=null&&u.size||(s.value=!1,(d=r.current)==null||d.call(r)))},[]);return{transitioning:s,handlers:{onTransitionStart:a,onTransitionEnd:o}}}function Wt(e){const t=D0().value?FI:zI;return g(t,{...e})}function FI({active:e,...t}){return A0(e)?g(N0,{"data-shown":!0,...t}):null}function zI({active:e,initial:t=e,...n}){const i=II(e),r=He(QI(t));Dn(()=>{i.value&&(r.value=i.value)});const{handlers:s}=M0({onEnd:()=>{r.value=i.value}});return!i.value&&!r.value?null:g(N0,{"data-shown":i.value&&r.value,...s,...n})}function L0(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=L0(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function ht(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=L0(e))&&(i&&(i+=" "),i+=t);return i}const BI=(e,t)=>{const n=new Array(e.length+t.length);for(let i=0;i<e.length;i++)n[i]=e[i];for(let i=0;i<t.length;i++)n[e.length+i]=t[i];return n},ZI=(e,t)=>({classGroupId:e,validator:t}),$0=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),nl="-",U0=[],jI="arbitrary..",VI=e=>{const t=GI(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:r=>{if(r.startsWith("[")&&r.endsWith("]"))return WI(r);const s=r.split(nl),a=s[0]===""&&s.length>1?1:0;return q0(s,a,t)},getConflictingClassGroupIds:(r,s)=>{if(s){const a=i[r],o=n[r];return a?o?BI(o,a):a:o||U0}return n[r]||U0}}},q0=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const i=e[t],r=n.nextPart.get(i);if(r){const c=q0(e,t+1,r);if(c)return c}const s=n.validators;if(s===null)return;const a=t===0?e.join(nl):e.slice(t).join(nl),o=s.length;for(let c=0;c<o;c++){const l=s[c];if(l.validator(a))return l.classGroupId}},WI=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),i=t.slice(0,n);return i?jI+i:void 0})(),GI=e=>{const{theme:t,classGroups:n}=e;return YI(n,t)},YI=(e,t)=>{const n=$0();for(const i in e){const r=e[i];Mh(r,n,i,t)}return n},Mh=(e,t,n,i)=>{const r=e.length;for(let s=0;s<r;s++){const a=e[s];HI(a,t,n,i)}},HI=(e,t,n,i)=>{if(typeof e=="string"){KI(e,t,n);return}if(typeof e=="function"){JI(e,t,n,i);return}eQ(e,t,n,i)},KI=(e,t,n)=>{const i=e===""?t:X0(t,e);i.classGroupId=n},JI=(e,t,n,i)=>{if(tQ(e)){Mh(e(i),t,n,i);return}t.validators===null&&(t.validators=[]),t.validators.push(ZI(n,e))},eQ=(e,t,n,i)=>{const r=Object.entries(e),s=r.length;for(let a=0;a<s;a++){const[o,c]=r[a];Mh(c,X0(t,o),n,i)}},X0=(e,t)=>{let n=e;const i=t.split(nl),r=i.length;for(let s=0;s<r;s++){const a=i[s];let o=n.nextPart.get(a);o||(o=$0(),n.nextPart.set(a,o)),n=o}return n},tQ=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,nQ=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),i=Object.create(null);const r=(s,a)=>{n[s]=a,t++,t>e&&(t=0,i=n,n=Object.create(null))};return{get(s){let a=n[s];if(a!==void 0)return a;if((a=i[s])!==void 0)return r(s,a),a},set(s,a){s in n?n[s]=a:r(s,a)}}},Lh="!",F0=":",iQ=[],z0=(e,t,n,i,r)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:i,isExternal:r}),rQ=e=>{const{prefix:t,experimentalParseClassName:n}=e;let i=r=>{const s=[];let a=0,o=0,c=0,l;const u=r.length;for(let m=0;m<u;m++){const b=r[m];if(a===0&&o===0){if(b===F0){s.push(r.slice(c,m)),c=m+1;continue}if(b==="/"){l=m;continue}}b==="["?a++:b==="]"?a--:b==="("?o++:b===")"&&o--}const d=s.length===0?r:r.slice(c);let h=d,p=!1;d.endsWith(Lh)?(h=d.slice(0,-1),p=!0):d.startsWith(Lh)&&(h=d.slice(1),p=!0);const O=l&&l>c?l-c:void 0;return z0(s,p,h,O)};if(t){const r=t+F0,s=i;i=a=>a.startsWith(r)?s(a.slice(r.length)):z0(iQ,!1,a,void 0,!0)}if(n){const r=i;i=s=>n({className:s,parseClassName:r})}return i},sQ=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,i)=>{t.set(n,1e6+i)}),n=>{const i=[];let r=[];for(let s=0;s<n.length;s++){const a=n[s],o=a[0]==="[",c=t.has(a);o||c?(r.length>0&&(r.sort(),i.push(...r),r=[]),i.push(a)):r.push(a)}return r.length>0&&(r.sort(),i.push(...r)),i}},aQ=e=>({cache:nQ(e.cacheSize),parseClassName:rQ(e),sortModifiers:sQ(e),...VI(e)}),oQ=/\s+/,cQ=(e,t)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:r,sortModifiers:s}=t,a=[],o=e.trim().split(oQ);let c="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{isExternal:d,modifiers:h,hasImportantModifier:p,baseClassName:O,maybePostfixModifierPosition:m}=n(u);if(d){c=u+(c.length>0?" "+c:c);continue}let b=!!m,v=i(b?O.substring(0,m):O);if(!v){if(!b){c=u+(c.length>0?" "+c:c);continue}if(v=i(O),!v){c=u+(c.length>0?" "+c:c);continue}b=!1}const k=h.length===0?"":h.length===1?h[0]:s(h).join(":"),y=p?k+Lh:k,T=y+v;if(a.indexOf(T)>-1)continue;a.push(T);const S=r(v,b);for(let _=0;_<S.length;++_){const x=S[_];a.push(y+x)}c=u+(c.length>0?" "+c:c)}return c},lQ=(...e)=>{let t=0,n,i,r="";for(;t<e.length;)(n=e[t++])&&(i=B0(n))&&(r&&(r+=" "),r+=i);return r},B0=e=>{if(typeof e=="string")return e;let t,n="";for(let i=0;i<e.length;i++)e[i]&&(t=B0(e[i]))&&(n&&(n+=" "),n+=t);return n},uQ=(e,...t)=>{let n,i,r,s;const a=c=>{const l=t.reduce((u,d)=>d(u),e());return n=aQ(l),i=n.cache.get,r=n.cache.set,s=o,o(c)},o=c=>{const l=i(c);if(l)return l;const u=cQ(c,n);return r(c,u),u};return s=a,(...c)=>s(lQ(...c))},dQ=[],At=e=>{const t=n=>n[e]||dQ;return t.isThemeGetter=!0,t},Z0=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,j0=/^\((?:(\w[\w-]*):)?(.+)\)$/i,hQ=/^\d+\/\d+$/,pQ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fQ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,mQ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,OQ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,gQ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ls=e=>hQ.test(e),Ee=e=>!!e&&!Number.isNaN(Number(e)),pr=e=>!!e&&Number.isInteger(Number(e)),$h=e=>e.endsWith("%")&&Ee(e.slice(0,-1)),Di=e=>pQ.test(e),vQ=()=>!0,bQ=e=>fQ.test(e)&&!mQ.test(e),V0=()=>!1,TQ=e=>OQ.test(e),kQ=e=>gQ.test(e),yQ=e=>!ce(e)&&!le(e),SQ=e=>$s(e,K0,V0),ce=e=>Z0.test(e),Vr=e=>$s(e,J0,bQ),Uh=e=>$s(e,xQ,Ee),W0=e=>$s(e,Y0,V0),_Q=e=>$s(e,H0,kQ),il=e=>$s(e,eT,TQ),le=e=>j0.test(e),Ga=e=>Us(e,J0),EQ=e=>Us(e,PQ),G0=e=>Us(e,Y0),wQ=e=>Us(e,K0),CQ=e=>Us(e,H0),rl=e=>Us(e,eT,!0),$s=(e,t,n)=>{const i=Z0.exec(e);return i?i[1]?t(i[1]):n(i[2]):!1},Us=(e,t,n=!1)=>{const i=j0.exec(e);return i?i[1]?t(i[1]):n:!1},Y0=e=>e==="position"||e==="percentage",H0=e=>e==="image"||e==="url",K0=e=>e==="length"||e==="size"||e==="bg-size",J0=e=>e==="length",xQ=e=>e==="number",PQ=e=>e==="family-name",eT=e=>e==="shadow",RQ=()=>{const e=At("color"),t=At("font"),n=At("text"),i=At("font-weight"),r=At("tracking"),s=At("leading"),a=At("breakpoint"),o=At("container"),c=At("spacing"),l=At("radius"),u=At("shadow"),d=At("inset-shadow"),h=At("text-shadow"),p=At("drop-shadow"),O=At("blur"),m=At("perspective"),b=At("aspect"),v=At("ease"),k=At("animate"),y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...T(),le,ce],_=()=>["auto","hidden","clip","visible","scroll"],x=()=>["auto","contain","none"],N=()=>[le,ce,c],L=()=>[Ls,"full","auto",...N()],w=()=>[pr,"none","subgrid",le,ce],D=()=>["auto",{span:["full",pr,le,ce]},pr,le,ce],M=()=>[pr,"auto",le,ce],B=()=>["auto","min","max","fr",le,ce],F=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],q=()=>["start","end","center","stretch","center-safe","end-safe"],H=()=>["auto",...N()],se=()=>[Ls,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],Z=()=>[e,le,ce],de=()=>[...T(),G0,W0,{position:[le,ce]}],I=()=>["no-repeat",{repeat:["","x","y","space","round"]}],De=()=>["auto","cover","contain",wQ,SQ,{size:[le,ce]}],Me=()=>[$h,Ga,Vr],R=()=>["","none","full",l,le,ce],fe=()=>["",Ee,Ga,Vr],Ye=()=>["solid","dashed","dotted","double"],Qe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ae=()=>[Ee,$h,G0,W0],Le=()=>["","none",O,le,ce],Xe=()=>["none",Ee,le,ce],Te=()=>["none",Ee,le,ce],je=()=>[Ee,le,ce],it=()=>[Ls,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Di],breakpoint:[Di],color:[vQ],container:[Di],"drop-shadow":[Di],ease:["in","out","in-out"],font:[yQ],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Di],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Di],shadow:[Di],spacing:["px",Ee],text:[Di],"text-shadow":[Di],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ls,ce,le,b]}],container:["container"],columns:[{columns:[Ee,ce,le,o]}],"break-after":[{"break-after":y()}],"break-before":[{"break-before":y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:x()}],"overscroll-x":[{"overscroll-x":x()}],"overscroll-y":[{"overscroll-y":x()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:L()}],"inset-x":[{"inset-x":L()}],"inset-y":[{"inset-y":L()}],start:[{start:L()}],end:[{end:L()}],top:[{top:L()}],right:[{right:L()}],bottom:[{bottom:L()}],left:[{left:L()}],visibility:["visible","invisible","collapse"],z:[{z:[pr,"auto",le,ce]}],basis:[{basis:[Ls,"full","auto",o,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ee,Ls,"auto","initial","none",ce]}],grow:[{grow:["",Ee,le,ce]}],shrink:[{shrink:["",Ee,le,ce]}],order:[{order:[pr,"first","last","none",le,ce]}],"grid-cols":[{"grid-cols":w()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":w()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":B()}],"auto-rows":[{"auto-rows":B()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...F(),"normal"]}],"justify-items":[{"justify-items":[...q(),"normal"]}],"justify-self":[{"justify-self":["auto",...q()]}],"align-content":[{content:["normal",...F()]}],"align-items":[{items:[...q(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...q(),{baseline:["","last"]}]}],"place-content":[{"place-content":F()}],"place-items":[{"place-items":[...q(),"baseline"]}],"place-self":[{"place-self":["auto",...q()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:H()}],mx:[{mx:H()}],my:[{my:H()}],ms:[{ms:H()}],me:[{me:H()}],mt:[{mt:H()}],mr:[{mr:H()}],mb:[{mb:H()}],ml:[{ml:H()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:se()}],w:[{w:[o,"screen",...se()]}],"min-w":[{"min-w":[o,"screen","none",...se()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...se()]}],h:[{h:["screen","lh",...se()]}],"min-h":[{"min-h":["screen","lh","none",...se()]}],"max-h":[{"max-h":["screen","lh",...se()]}],"font-size":[{text:["base",n,Ga,Vr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,le,Uh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",$h,ce]}],"font-family":[{font:[EQ,ce,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,le,ce]}],"line-clamp":[{"line-clamp":[Ee,"none",le,Uh]}],leading:[{leading:[s,...N()]}],"list-image":[{"list-image":["none",le,ce]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",le,ce]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Z()}],"text-color":[{text:Z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ye(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ee,"from-font","auto",le,Vr]}],"text-decoration-color":[{decoration:Z()}],"underline-offset":[{"underline-offset":[Ee,"auto",le,ce]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",le,ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",le,ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:de()}],"bg-repeat":[{bg:I()}],"bg-size":[{bg:De()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},pr,le,ce],radial:["",le,ce],conic:[pr,le,ce]},CQ,_Q]}],"bg-color":[{bg:Z()}],"gradient-from-pos":[{from:Me()}],"gradient-via-pos":[{via:Me()}],"gradient-to-pos":[{to:Me()}],"gradient-from":[{from:Z()}],"gradient-via":[{via:Z()}],"gradient-to":[{to:Z()}],rounded:[{rounded:R()}],"rounded-s":[{"rounded-s":R()}],"rounded-e":[{"rounded-e":R()}],"rounded-t":[{"rounded-t":R()}],"rounded-r":[{"rounded-r":R()}],"rounded-b":[{"rounded-b":R()}],"rounded-l":[{"rounded-l":R()}],"rounded-ss":[{"rounded-ss":R()}],"rounded-se":[{"rounded-se":R()}],"rounded-ee":[{"rounded-ee":R()}],"rounded-es":[{"rounded-es":R()}],"rounded-tl":[{"rounded-tl":R()}],"rounded-tr":[{"rounded-tr":R()}],"rounded-br":[{"rounded-br":R()}],"rounded-bl":[{"rounded-bl":R()}],"border-w":[{border:fe()}],"border-w-x":[{"border-x":fe()}],"border-w-y":[{"border-y":fe()}],"border-w-s":[{"border-s":fe()}],"border-w-e":[{"border-e":fe()}],"border-w-t":[{"border-t":fe()}],"border-w-r":[{"border-r":fe()}],"border-w-b":[{"border-b":fe()}],"border-w-l":[{"border-l":fe()}],"divide-x":[{"divide-x":fe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":fe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ye(),"hidden","none"]}],"divide-style":[{divide:[...Ye(),"hidden","none"]}],"border-color":[{border:Z()}],"border-color-x":[{"border-x":Z()}],"border-color-y":[{"border-y":Z()}],"border-color-s":[{"border-s":Z()}],"border-color-e":[{"border-e":Z()}],"border-color-t":[{"border-t":Z()}],"border-color-r":[{"border-r":Z()}],"border-color-b":[{"border-b":Z()}],"border-color-l":[{"border-l":Z()}],"divide-color":[{divide:Z()}],"outline-style":[{outline:[...Ye(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ee,le,ce]}],"outline-w":[{outline:["",Ee,Ga,Vr]}],"outline-color":[{outline:Z()}],shadow:[{shadow:["","none",u,rl,il]}],"shadow-color":[{shadow:Z()}],"inset-shadow":[{"inset-shadow":["none",d,rl,il]}],"inset-shadow-color":[{"inset-shadow":Z()}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Z()}],"ring-offset-w":[{"ring-offset":[Ee,Vr]}],"ring-offset-color":[{"ring-offset":Z()}],"inset-ring-w":[{"inset-ring":fe()}],"inset-ring-color":[{"inset-ring":Z()}],"text-shadow":[{"text-shadow":["none",h,rl,il]}],"text-shadow-color":[{"text-shadow":Z()}],opacity:[{opacity:[Ee,le,ce]}],"mix-blend":[{"mix-blend":[...Qe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Qe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ee]}],"mask-image-linear-from-pos":[{"mask-linear-from":ae()}],"mask-image-linear-to-pos":[{"mask-linear-to":ae()}],"mask-image-linear-from-color":[{"mask-linear-from":Z()}],"mask-image-linear-to-color":[{"mask-linear-to":Z()}],"mask-image-t-from-pos":[{"mask-t-from":ae()}],"mask-image-t-to-pos":[{"mask-t-to":ae()}],"mask-image-t-from-color":[{"mask-t-from":Z()}],"mask-image-t-to-color":[{"mask-t-to":Z()}],"mask-image-r-from-pos":[{"mask-r-from":ae()}],"mask-image-r-to-pos":[{"mask-r-to":ae()}],"mask-image-r-from-color":[{"mask-r-from":Z()}],"mask-image-r-to-color":[{"mask-r-to":Z()}],"mask-image-b-from-pos":[{"mask-b-from":ae()}],"mask-image-b-to-pos":[{"mask-b-to":ae()}],"mask-image-b-from-color":[{"mask-b-from":Z()}],"mask-image-b-to-color":[{"mask-b-to":Z()}],"mask-image-l-from-pos":[{"mask-l-from":ae()}],"mask-image-l-to-pos":[{"mask-l-to":ae()}],"mask-image-l-from-color":[{"mask-l-from":Z()}],"mask-image-l-to-color":[{"mask-l-to":Z()}],"mask-image-x-from-pos":[{"mask-x-from":ae()}],"mask-image-x-to-pos":[{"mask-x-to":ae()}],"mask-image-x-from-color":[{"mask-x-from":Z()}],"mask-image-x-to-color":[{"mask-x-to":Z()}],"mask-image-y-from-pos":[{"mask-y-from":ae()}],"mask-image-y-to-pos":[{"mask-y-to":ae()}],"mask-image-y-from-color":[{"mask-y-from":Z()}],"mask-image-y-to-color":[{"mask-y-to":Z()}],"mask-image-radial":[{"mask-radial":[le,ce]}],"mask-image-radial-from-pos":[{"mask-radial-from":ae()}],"mask-image-radial-to-pos":[{"mask-radial-to":ae()}],"mask-image-radial-from-color":[{"mask-radial-from":Z()}],"mask-image-radial-to-color":[{"mask-radial-to":Z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[Ee]}],"mask-image-conic-from-pos":[{"mask-conic-from":ae()}],"mask-image-conic-to-pos":[{"mask-conic-to":ae()}],"mask-image-conic-from-color":[{"mask-conic-from":Z()}],"mask-image-conic-to-color":[{"mask-conic-to":Z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:de()}],"mask-repeat":[{mask:I()}],"mask-size":[{mask:De()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",le,ce]}],filter:[{filter:["","none",le,ce]}],blur:[{blur:Le()}],brightness:[{brightness:[Ee,le,ce]}],contrast:[{contrast:[Ee,le,ce]}],"drop-shadow":[{"drop-shadow":["","none",p,rl,il]}],"drop-shadow-color":[{"drop-shadow":Z()}],grayscale:[{grayscale:["",Ee,le,ce]}],"hue-rotate":[{"hue-rotate":[Ee,le,ce]}],invert:[{invert:["",Ee,le,ce]}],saturate:[{saturate:[Ee,le,ce]}],sepia:[{sepia:["",Ee,le,ce]}],"backdrop-filter":[{"backdrop-filter":["","none",le,ce]}],"backdrop-blur":[{"backdrop-blur":Le()}],"backdrop-brightness":[{"backdrop-brightness":[Ee,le,ce]}],"backdrop-contrast":[{"backdrop-contrast":[Ee,le,ce]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ee,le,ce]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ee,le,ce]}],"backdrop-invert":[{"backdrop-invert":["",Ee,le,ce]}],"backdrop-opacity":[{"backdrop-opacity":[Ee,le,ce]}],"backdrop-saturate":[{"backdrop-saturate":[Ee,le,ce]}],"backdrop-sepia":[{"backdrop-sepia":["",Ee,le,ce]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",le,ce]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ee,"initial",le,ce]}],ease:[{ease:["linear","initial",v,le,ce]}],delay:[{delay:[Ee,le,ce]}],animate:[{animate:["none",k,le,ce]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,le,ce]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:Xe()}],"rotate-x":[{"rotate-x":Xe()}],"rotate-y":[{"rotate-y":Xe()}],"rotate-z":[{"rotate-z":Xe()}],scale:[{scale:Te()}],"scale-x":[{"scale-x":Te()}],"scale-y":[{"scale-y":Te()}],"scale-z":[{"scale-z":Te()}],"scale-3d":["scale-3d"],skew:[{skew:je()}],"skew-x":[{"skew-x":je()}],"skew-y":[{"skew-y":je()}],transform:[{transform:[le,ce,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:it()}],"translate-x":[{"translate-x":it()}],"translate-y":[{"translate-y":it()}],"translate-z":[{"translate-z":it()}],"translate-none":["translate-none"],accent:[{accent:Z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",le,ce]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",le,ce]}],fill:[{fill:["none",...Z()]}],"stroke-w":[{stroke:[Ee,Ga,Vr,Uh]}],stroke:[{stroke:["none",...Z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},AQ=uQ(RQ),_e=(...e)=>AQ(ht(e)),tT=ot(null);function IQ({children:e}){const t=He(null),n=He(""),i=He("initial"),{lastId:r}=_t(),s=Ce("agent-id"),{serverUrl:a}=Ph(),o=oe(async d=>{const h=r.value,p=s.value;if(!h||!p){console.warn("[ConversationalAI] Cannot submit rating: missing agent_id or conversation_id");return}try{t.value=d,i.value="submitted-rating",await i0(h,{rating:d},a.value)}catch(O){console.error("[ConversationalAI] Failed to submit rating:",O)}},[]),c=oe(async()=>{const d=r.value,h=s.value;if(!d||!h){console.warn("[ConversationalAI] Cannot submit feedback: missing agent_id or conversation_id");return}if(t.value===null){console.warn("[ConversationalAI] Cannot submit feedback: rating not set");return}if(n.value)try{i.value="submitted-follow-up",await i0(d,{rating:t.value,comment:n.value||void 0},a.value)}catch(p){console.error("[ConversationalAI] Failed to submit feedback:",p)}},[]),l=oe(()=>{t.value=null,n.value="",i.value="initial"},[]);Dn(()=>{r.value!==null&&l()});const u=$e(()=>({rating:t,feedbackText:n,feedbackProgress:i,submitRating:o,submitFeedback:c,reset:l}),[o,c,l]);return g(tT.Provider,{value:u,children:e})}function qh(){return Vt(tT)}const nT=ot(null);function QQ({defaultContent:e="transcript",children:t}){const n=He(e),i=$e(()=>{const r=n.value==="feedback"?{showHeaderBack:!0,onHeaderBack:()=>{n.value="transcript"}}:{showHeaderBack:!1};return{currentContent:n,currentConfig:r}},[n.value]);return g(nT.Provider,{value:i,children:t})}function Xh(){return Vt(nT)}const NQ={phone:MQ,"phone-off":LQ,chat:$Q,mic:UQ,"mic-off":qQ,soundwave:XQ,check:BQ,"chevron-down":FQ,"chevron-up":zQ,send:ZQ,star:jQ,copy:VQ,download:WQ,wrap:GQ,maximize:HQ,minimize:KQ},DQ={xs:"text-xs",sm:"text-sm",md:"text-lg",lg:"text-xl"};function si({name:e,size:t="md",className:n}){const i=NQ[e];return g("slot",{name:`icon-${e}`,className:ht("flex",DQ[t],n),"aria-hidden":!0,children:g(i,{})})}function MQ(e){return g("svg",{height:"1em",width:"1em",viewBox:"0 0 18 18",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:g("path",{d:"M3.7489 2.25C2.93286 2.25 2.21942 2.92142 2.27338 3.7963C2.6686 10.2041 7.79483 15.3303 14.2026 15.7255C15.0775 15.7795 15.7489 15.066 15.7489 14.25V11.958C15.7489 11.2956 15.3144 10.7116 14.6799 10.5213L12.6435 9.91035C12.1149 9.75179 11.542 9.89623 11.1518 10.2864L10.5901 10.8482C9.15291 10.0389 7.95998 8.84599 7.15074 7.40881L7.71246 6.84709C8.10266 6.45689 8.24711 5.88396 8.08854 5.35541L7.47761 3.31898C7.28727 2.6845 6.70329 2.25 6.04087 2.25H3.7489Z"})})}function LQ(e){return g("svg",{height:"1em",width:"1em",viewBox:"0 0 19 18",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[g("path",{d:"M16.0303 3.53033C16.3232 3.23744 16.3232 2.76256 16.0303 2.46967C15.7374 2.17678 15.2626 2.17678 14.9697 2.46967L8.6271 8.81224C8.25925 8.3778 7.93185 7.90804 7.65074 7.40881L8.21246 6.84709C8.60266 6.45689 8.74711 5.88396 8.58854 5.35541L7.97761 3.31898C7.78727 2.6845 7.20329 2.25 6.54087 2.25H4.2489C3.43286 2.25 2.71942 2.92142 2.77338 3.7963C2.95462 6.73468 4.13069 9.40357 5.96899 11.4703L2.96967 14.4697C2.67678 14.7626 2.67678 15.2374 2.96967 15.5303C3.26256 15.8232 3.73744 15.8232 4.03033 15.5303L16.0303 3.53033Z"}),g("path",{d:"M14.7026 15.7255C12.2994 15.5773 10.0765 14.7636 8.21584 13.4665L10.9278 10.7545C10.9815 10.7863 11.0356 10.8175 11.0901 10.8482L11.6518 10.2864C12.042 9.89623 12.6149 9.75179 13.1435 9.91035L15.1799 10.5213C15.8144 10.7116 16.2489 11.2956 16.2489 11.958V14.25C16.2489 15.066 15.5775 15.7795 14.7026 15.7255Z"})]})}function $Q(e){return g("svg",{height:"1em",width:"1em",viewBox:"0 0 19 18",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:g("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.5 6.75C1.5 4.26472 3.51472 2.25 6 2.25H12C14.4853 2.25 16.5 4.26472 16.5 6.75V11.25C16.5 13.7353 14.4853 15.75 12 15.75H2.25C1.83579 15.75 1.5 15.4142 1.5 15V6.75ZM6 9.9375C5.48223 9.9375 5.0625 9.51777 5.0625 9C5.0625 8.48223 5.48223 8.0625 6 8.0625C6.51777 8.0625 6.9375 8.48223 6.9375 9C6.9375 9.51777 6.51777 9.9375 6 9.9375ZM9 9.9375C8.48223 9.9375 8.0625 9.51777 8.0625 9C8.0625 8.48223 8.48223 8.0625 9 8.0625C9.51777 8.0625 9.9375 8.48223 9.9375 9C9.9375 9.51777 9.51777 9.9375 9 9.9375ZM11.0625 9C11.0625 9.51777 11.4822 9.9375 12 9.9375C12.5178 9.9375 12.9375 9.51777 12.9375 9C12.9375 8.48223 12.5178 8.0625 12 8.0625C11.4822 8.0625 11.0625 8.48223 11.0625 9Z"})})}function UQ(e){return g("svg",{height:"1em",width:"1em",viewBox:"0 0 19 18",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[g("path",{d:"M9.50008 1.5C7.42901 1.5 5.75008 3.17893 5.75008 5.25V8.25C5.75008 10.3211 7.42901 12 9.50008 12C11.5712 12 13.2501 10.3211 13.2501 8.25V5.25C13.2501 3.17893 11.5712 1.5 9.50008 1.5Z"}),g("path",{d:"M4.88997 10.8417C4.66448 10.4943 4.20002 10.3954 3.85256 10.6209C3.50509 10.8463 3.40621 11.3108 3.63169 11.6583C4.47442 12.9569 6.08493 14.6838 8.75008 14.9616V15.75C8.75008 16.1642 9.08587 16.5 9.50008 16.5C9.9143 16.5 10.2501 16.1642 10.2501 15.75V14.9616C12.9152 14.6838 14.5257 12.9569 15.3685 11.6583C15.594 11.3108 15.4951 10.8463 15.1476 10.6209C14.8001 10.3954 14.3357 10.4943 14.1102 10.8417C13.3305 12.0432 11.9002 13.5 9.50008 13.5C7.1 13.5 5.66968 12.0432 4.88997 10.8417Z"})]})}function qQ(e){return g("svg",{height:"1em",width:"1em",viewBox:"0 0 19 18",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[g("path",{d:"M13.25 8.25C13.25 8.64791 13.188 9.03135 13.0732 9.39119L6.57947 2.8975C7.26687 2.04521 8.31974 1.5 9.49995 1.5C11.571 1.5 13.25 3.17893 13.25 5.25V8.25Z"}),g("path",{d:"M2.21967 1.71967C2.51256 1.42678 2.98744 1.42678 3.28033 1.71967L16.7803 15.2197C17.0732 15.5126 17.0732 15.9874 16.7803 16.2803C16.4874 16.5732 16.0126 16.5732 15.7197 16.2803L13.2828 13.8435C12.4719 14.4022 11.4678 14.8338 10.25 14.9614V15.75C10.25 16.1642 9.91422 16.5 9.50001 16.5C9.08579 16.5 8.75001 16.1642 8.75001 15.75V14.9616C6.08485 14.6838 4.47434 12.9569 3.63162 11.6583C3.40614 11.3108 3.50502 10.8463 3.85248 10.6209C4.19995 10.3954 4.66441 10.4943 4.88989 10.8417C5.6696 12.0432 7.09993 13.5 9.50001 13.5C10.5978 13.5 11.4845 13.1981 12.1992 12.7598L11.0875 11.6482C10.605 11.8739 10.0667 12 9.50001 12C7.42894 12 5.75001 10.3211 5.75001 8.25V6.31067L2.21967 2.78033C1.92678 2.48744 1.92678 2.01256 2.21967 1.71967Z"})]})}function XQ(e){return g("svg",{height:"1em",width:"1em",viewBox:"0 0 18 18",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[g("rect",{x:"1.5",y:"6.75",width:"2",height:"4.5",rx:"1"}),g("rect",{x:"5",y:"4.5",width:"2",height:"9",rx:"1"}),g("rect",{x:"8.5",y:"2.25",width:"2",height:"13.5",rx:"1"}),g("rect",{x:"12",y:"4.5",width:"2",height:"9",rx:"1"}),g("rect",{x:"15.5",y:"6.75",width:"2",height:"4.5",rx:"1"})]})}function FQ(e){return g("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:g("path",{d:"m6 9 6 6 6-6"})})}function zQ(e){return g("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:g("path",{d:"m18 15-6-6-6 6"})})}function BQ(e){return g("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:g("path",{d:"M20 6 9 17l-5-5"})})}function ZQ(e){return g("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",viewBox:"0 0 20 20",fill:"currentColor",...e,children:g("path",{d:"M4.64337 17.6645C3.243 18.1313 1.97185 16.6817 2.6176 15.3543L8.50148 3.25965C9.10962 2.00957 10.8908 2.00958 11.4989 3.25965L17.3828 15.3543C18.0286 16.6817 16.7574 18.1313 15.357 17.6645L10.8334 16.1567L10.8334 12.5005C10.8334 12.0403 10.4603 11.6672 10 11.6672C9.5398 11.6672 9.16671 12.0403 9.16671 12.5005L9.16671 16.1568L4.64337 17.6645Z"})})}function jQ(e){return g("svg",{height:"1em",width:"1em",viewBox:"0 0 21 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:g("path",{d:"M11.8621 0.854898C11.3145 -0.284967 9.68804 -0.284965 9.1404 0.854899L6.77181 5.78487C6.77181 5.78487 6.76902 5.78867 6.7646 5.78925L1.31499 6.50272C0.0591912 6.66713 -0.452868 8.21568 0.474832 9.09033L4.45896 12.8466C4.46075 12.8483 4.46059 12.8502 4.46059 12.8502L3.46003 18.2169C3.22657 19.4691 4.55184 20.4152 5.66108 19.8172L10.4957 17.2111C10.4991 17.2093 10.5035 17.2093 10.5068 17.2111L15.3415 19.8172C16.4507 20.4152 17.776 19.4691 17.5425 18.2169L16.542 12.8502C16.542 12.8502 16.5418 12.8483 16.5436 12.8466L20.5277 9.09033C21.4554 8.21568 20.9434 6.66713 19.6876 6.50272L14.2379 5.78925C14.2335 5.78867 14.2307 5.78487 14.2307 5.78487L11.8621 0.854898Z"})})}function VQ(e){return g("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:[g("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),g("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}function WQ(e){return g("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:[g("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),g("polyline",{points:"7 10 12 15 17 10"}),g("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]})}function GQ(e){return g("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:[g("line",{x1:"3",x2:"21",y1:"6",y2:"6"}),g("path",{d:"M3 12h15a3 3 0 1 1 0 6h-4"}),g("polyline",{points:"16 16 14 18 16 20"}),g("line",{x1:"3",x2:"10",y1:"18",y2:"18"})]})}function YQ({orbColor:e,circleBackgroundColor:t,starColor:n,className:i}){return g("slot",{name:"icon-feedback",className:ht("flex",i),"aria-hidden":!0,children:g("svg",{width:"100%",height:"100%",viewBox:"0 0 82 88",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9 42C9 59.6731 23.3269 74 41 74C58.6731 74 73 59.6731 73 42C73 24.3269 58.6731 10 41 10C23.3269 10 9 24.3269 9 42ZM29.4529 18.5973C31.1347 18.0574 32.8641 17.5023 34.9844 16.6005C42.2533 13.5091 48.3526 11.9217 51.7782 14.094C53.5063 15.1899 54.4051 16.7749 55.6117 18.9024C56.7969 20.9922 58.279 23.6057 61.1358 26.7937C62.2737 28.0636 63.3886 29.2195 64.4371 30.3064C68.7007 34.7263 71.8645 38.0061 70.9949 43.1697C70.2965 47.316 67.9794 49.4559 65.6038 51.65C63.4317 53.656 61.2107 55.7073 60.1332 59.3786C57.8774 67.0653 53.5327 71.9113 48.3526 72.7468C43.1725 73.5823 36.6555 75.1698 29.8043 70.1567C26.1949 67.5157 25.229 64.3182 24.1947 60.894C23.2657 57.8184 22.2814 54.56 19.2768 51.3577C14.1619 45.9062 10.2533 29.6345 19.2768 23.0339C23.736 20.4327 26.5223 19.5382 29.4529 18.5973Z",fill:e,"fill-opacity":"0.15",stroke:e,"stroke-opacity":"0.35"}),g("path",{d:"M43.5 73.4212C40.4387 73.4212 35.0039 71.1025 37.556 56.4696C40.143 41.6365 42.6582 40.577 44.6991 25.744C46.3318 13.8775 41.1635 8.87964 33 10.9988",stroke:e,"stroke-opacity":"0.35"}),g("path",{d:"M43.5 73.4212C40.4387 73.4212 35.0039 71.1025 37.556 56.4696C40.143 41.6365 42.6582 40.577 44.6991 25.744C46.3318 13.8775 41.1635 8.87964 33 10.9988",stroke:e,"stroke-opacity":"0.35"}),g("path",{d:"M21.9366 68.1987C21.3549 66.5119 21.0386 60.9231 28.1376 53.3448C37.0114 43.8719 40.5 43.9579 51.4911 31.7482C59.5691 22.7747 59.1723 17.0524 58.0993 15.4626",stroke:e,"stroke-opacity":"0.35"}),g("path",{d:"M9.26819 42.161C10.4003 43.5337 15.6951 46.3853 25.7661 44.3926C38.3548 41.9018 52.434 40.307 57.694 41.0287C70.352 42.7655 71.4138 51.3035 71.4138 51.3035",stroke:e,"stroke-opacity":"0.35"}),g("path",{d:"M22 16.4916C18.815 21.85 19.6451 26.0591 27.9943 32.0828C38.4307 39.6124 50.2985 48.8304 53.5024 53.1027C58.6684 59.9914 59.5 67.928 59.5 67.928",stroke:e,"stroke-opacity":"0.35"}),g("rect",{x:"9.26099",y:"10",width:"63.7129",height:"63.7129",rx:"31.8565",stroke:e,"stroke-opacity":"0.43","stroke-width":"1.5"}),g("g",{"clip-path":"url(#clip0_7006_42127)",children:[g("circle",{cx:"62.4996",cy:"18.2032",r:"15.0195",transform:"rotate(6.27205 62.4996 18.2032)",fill:t}),g("path",{d:"M60.7142 12.1753C62.057 10.0714 65.2294 10.4202 66.0833 12.7654L66.6158 14.2308L68.1251 14.6217C70.5415 15.2484 71.1908 18.3742 69.2237 19.911L67.9944 20.8704L68.0896 22.4262C68.2403 24.9178 65.4681 26.5011 63.3987 25.1056L62.1065 24.2326L60.6555 24.8041C58.3322 25.7172 55.9702 23.5694 56.6585 21.1698L57.0884 19.6717L56.0977 18.4684C54.5112 16.541 55.8231 13.6307 58.318 13.5438L59.8751 13.4899L60.7142 12.1753Z",fill:n,stroke:t,"stroke-width":"3.27381"}),g("path",{d:"M63.925 5.23719C71.0867 6.02431 76.2545 12.4676 75.4676 19.6293C74.6805 26.7911 68.2364 31.959 61.0746 31.1718C53.9129 30.3845 48.7459 23.9406 49.533 16.7789C50.3203 9.61739 56.7634 4.45029 63.925 5.23719ZM63.6957 7.32326C57.6866 6.66302 52.2797 10.9991 51.6191 17.0082C50.9586 23.0174 55.2946 28.4251 61.3038 29.0858C67.3132 29.7462 72.7211 25.4094 73.3816 19.4C74.0418 13.3908 69.705 7.98372 63.6957 7.32326Z",fill:n,stroke:t,"stroke-width":"0.3","stroke-linecap":"round","stroke-linejoin":"round"})]}),g("ellipse",{cx:"41",cy:"85",rx:"15",ry:"3",fill:e,"fill-opacity":"0.35"}),g("defs",{children:g("clipPath",{id:"clip0_7006_42127",children:g("rect",{width:"33",height:"33",fill:"white",transform:"translate(47.9012) rotate(6.27205)"})})})]})})}function HQ(e){return g("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:[g("path",{d:"M15 3h6v6"}),g("path",{d:"m21 3-7 7"}),g("path",{d:"m3 21 7-7"}),g("path",{d:"M9 21H3v-6"})]})}function KQ(e){return g("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:[g("path",{d:"m14 10 7-7"}),g("path",{d:"M20 10h-6V4"}),g("path",{d:"m3 21 7-7"}),g("path",{d:"M4 14h6v6"})]})}function Bn(e){const t=D0().value?JQ:eN;return g(t,{...e})}function JQ({visible:e,className:t,grow:n,dep:i,...r}){return e?g("div",{className:ht(n&&"grow",t),...r}):null}function eN({visible:e,children:t,className:n,grow:i,dep:r,...s}){const[a,o]=pe(e),[c,l]=pe(null),[u,d]=pe(null),h=ue(t);e&&(h.current=t);const p=oe(b=>{l(b),b&&!e&&(b.style.width="0px",b.style.height="0px")},[]);ke(()=>{u&&(u.style.transition="none",u.style.opacity="0",u.offsetWidth,u.style.transition="",u.style.opacity="")},[r]),$e(()=>{c&&(c.style.width=`${c.offsetWidth}px`,c.style.height=`${c.offsetHeight}px`)},[c,e,r]),ke(()=>{if(!c||!u)return;e&&o(!0);const b=e?u.offsetWidth:0,v=e?u.offsetHeight:0;c.style.width=!e||c.offsetWidth!==b?`${b}px`:"",c.style.height=!e||c.offsetHeight!==v?`${v}px`:""},[c,u,e,r]);const{transitioning:O,handlers:m}=M0({onEnd:()=>{e?(c.style.width="",c.style.height=""):o(!1)}});return g("div",{ref:p,className:ht("relative inline-flex shrink-0 justify-center items-center transition-[opacity,width,height,transform,flex-grow] duration-200 min-w-0",!e&&"opacity-0 scale-75",e&&i&&"grow",e&&a&&!O.value&&"z-1"),...m,children:g("div",{ref:d,className:ht("shrink-0 min-h-min min-w-min transition-opacity duration-200",i&&"grow",n),...s,children:(e||a)&&h.current})})}const tN={primary:"text-accent-primary border border-accent bg-accent hover:border-accent-hover hover:bg-accent-hover active:border-accent-active active:bg-accent-active",secondary:"text-base-primary border border-base-border bg-base hover:bg-base-hover active:bg-base-active",ghost:"text-base-primary border border-base bg-base hover:bg-base-hover hover:border-base-hover active:bg-base-active active:border-base-active","md-button":"text-base-primary border border-base-border bg-base hover:bg-base-hover active:bg-base-active text-sm h-6"},Dt=we(function({variant:e="secondary",children:t,icon:n,className:i,iconClassName:r,truncate:s=!0,...a},o){const c=!!n&&!t;return g("button",{ref:o,className:_e("h-9 flex px-2.5 text-sm items-center transition-[colors,opacity] justify-center rounded-button duration-200 focus-ring overflow-hidden select-none","disabled:opacity-50 disabled:pointer-events-none",tN[e],c&&"min-w-9",i),type:"button",...a,children:[n&&g(si,{className:_e("transition-[margin] duration-200",c&&"-mx-0.5",e==="md-button"&&"text-sm",r),name:n}),g(Bn,{visible:!!t,dep:t,children:g("span",{className:_e("block whitespace-nowrap max-w-64 truncate",e==="md-button"?"pl-1.5":"px-1.5"),children:t})})]})}),iT=(e,t)=>Array.from({length:t-e+1},(n,i)=>i+e),nN=({isFilled:e,iconName:t})=>g("span",{className:ht("w-8 h-8 grid place-content-center",e?"text-base-primary":"text-base-border"),children:g(si,{name:t,size:"lg"})}),iN=({value:e,rating:t,hoverRating:n,onClick:i,onHover:r,onKeyDown:s,iconName:a})=>{const o=t.value!==null&&e<=t.value,c=n.value!==null&&e<=n.value,l=oe(d=>{d.stopPropagation(),i(e)},[i,e]),u=oe(d=>{s(d,e)},[s,e]);return g("button",{type:"button",role:"radio","aria-checked":o,"aria-label":e.toString(),onMouseEnter:()=>r(e),onClick:l,onKeyDown:u,className:ht("w-8 h-8 grid place-content-center rounded-full focus-ring transition-colors cursor-pointer",o||c?"text-base-primary":"text-base-border"),children:g(si,{name:a,size:"lg"})})},rN=({onRate:e,min:t=1,max:n=5,ariaLabel:i,icon:r="star"})=>{const s=He(null),a=He(null),o=iT(t,n),c=oe(h=>{a.value=h},[a]),l=oe(()=>{a.value=null},[a]),u=oe(h=>{s.value=h,e(h)},[s,e]),d=oe((h,p)=>{if(h.key==="Enter"||h.key===" ")h.preventDefault(),s.value=p,e(p);else if(h.key==="ArrowLeft"||h.key==="ArrowDown"){if(h.preventDefault(),p-1>=t){const O=h.currentTarget,m=O==null?void 0:O.previousElementSibling;m==null||m.focus()}}else if((h.key==="ArrowRight"||h.key==="ArrowUp")&&(h.preventDefault(),p+1<=n)){const O=h.currentTarget,m=O==null?void 0:O.nextElementSibling;m==null||m.focus()}},[s,e,t,n]);return g("div",{role:"radiogroup","aria-label":i,className:"flex no-wrap cursor-pointer",onMouseLeave:l,children:o.map(h=>g(iN,{value:h,rating:s,hoverRating:a,onClick:u,onHover:c,onKeyDown:d,iconName:r},h))})};function rT({rating:e,min:t=1,max:n=5,icon:i="star"}){const r=iT(t,n);return g("div",{className:"flex no-wrap",role:"img","aria-label":`Rating: ${e} out of ${n}`,children:r.map(s=>g(nN,{isFilled:e>=s,iconName:i},s))})}function sN({icon:e,onRate:t}){const n=st();return g("div",{className:"flex flex-col items-center",children:[g("div",{className:"text-sm text-base-primary font-medium",children:n.initiate_feedback}),g("div",{className:"py-4",children:g(rN,{onRate:t,ariaLabel:n.initiate_feedback,icon:e})})]})}function aN({icon:e,rating:t,showFollowUpButton:n,onFollowUpClick:i}){const r=st();return g("div",{className:"flex flex-col items-center gap-3 mb-4",children:[g("div",{className:"text-sm text-base-primary font-medium",children:r.thanks_for_feedback}),g(rT,{rating:t,min:1,max:5,icon:e}),n&&g(Dt,{variant:"secondary",onClick:i,children:r.request_follow_up_feedback})]})}function oN({icon:e="star"}){const{currentContent:t}=Xh(),{rating:n,feedbackProgress:i,submitRating:r}=qh(),s=i.value!=="initial"&&n.value!==null,a=oe(c=>{r(c),t.value="feedback"},[r]),o=oe(()=>{t.value="feedback"},[]);return s?g(aN,{icon:e,rating:n.value??0,showFollowUpButton:i.value!=="submitted-follow-up",onFollowUpClick:o}):g(sN,{icon:e,onRate:a})}const sT=-1,sl=0,Ya=1,al=2,Fh=3,zh=4,Bh=5,Zh=6,aT=7,oT=8,cT=typeof self=="object"?self:globalThis,cN=(e,t)=>{const n=(r,s)=>(e.set(s,r),r),i=r=>{if(e.has(r))return e.get(r);const[s,a]=t[r];switch(s){case sl:case sT:return n(a,r);case Ya:{const o=n([],r);for(const c of a)o.push(i(c));return o}case al:{const o=n({},r);for(const[c,l]of a)o[i(c)]=i(l);return o}case Fh:return n(new Date(a),r);case zh:{const{source:o,flags:c}=a;return n(new RegExp(o,c),r)}case Bh:{const o=n(new Map,r);for(const[c,l]of a)o.set(i(c),i(l));return o}case Zh:{const o=n(new Set,r);for(const c of a)o.add(i(c));return o}case aT:{const{name:o,message:c}=a;return n(new cT[o](c),r)}case oT:return n(BigInt(a),r);case"BigInt":return n(Object(BigInt(a)),r);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:o}=new Uint8Array(a);return n(new DataView(o),a)}}return n(new cT[s](a),r)};return i},lT=e=>cN(new Map,e)(0),qs="",{toString:lN}={},{keys:uN}=Object,Ha=e=>{const t=typeof e;if(t!=="object"||!e)return[sl,t];const n=lN.call(e).slice(8,-1);switch(n){case"Array":return[Ya,qs];case"Object":return[al,qs];case"Date":return[Fh,qs];case"RegExp":return[zh,qs];case"Map":return[Bh,qs];case"Set":return[Zh,qs];case"DataView":return[Ya,n]}return n.includes("Array")?[Ya,n]:n.includes("Error")?[aT,n]:[al,n]},ol=([e,t])=>e===sl&&(t==="function"||t==="symbol"),dN=(e,t,n,i)=>{const r=(a,o)=>{const c=i.push(a)-1;return n.set(o,c),c},s=a=>{if(n.has(a))return n.get(a);let[o,c]=Ha(a);switch(o){case sl:{let u=a;switch(c){case"bigint":o=oT,u=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return r([sT],a)}return r([o,u],a)}case Ya:{if(c){let h=a;return c==="DataView"?h=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(h=new Uint8Array(a)),r([c,[...h]],a)}const u=[],d=r([o,u],a);for(const h of a)u.push(s(h));return d}case al:{if(c)switch(c){case"BigInt":return r([c,a.toString()],a);case"Boolean":case"Number":case"String":return r([c,a.valueOf()],a)}if(t&&"toJSON"in a)return s(a.toJSON());const u=[],d=r([o,u],a);for(const h of uN(a))(e||!ol(Ha(a[h])))&&u.push([s(h),s(a[h])]);return d}case Fh:return r([o,a.toISOString()],a);case zh:{const{source:u,flags:d}=a;return r([o,{source:u,flags:d}],a)}case Bh:{const u=[],d=r([o,u],a);for(const[h,p]of a)(e||!(ol(Ha(h))||ol(Ha(p))))&&u.push([s(h),s(p)]);return d}case Zh:{const u=[],d=r([o,u],a);for(const h of a)(e||!ol(Ha(h)))&&u.push(s(h));return d}}const{message:l}=a;return r([o,{name:c,message:l}],a)};return s},uT=(e,{json:t,lossy:n}={})=>{const i=[];return dN(!(t||n),!!t,new Map,i)(e),i},Wr=typeof structuredClone=="function"?((e,t)=>t&&("json"in t||"lossy"in t)?lT(uT(e,t)):structuredClone(e)):(e,t)=>lT(uT(e,t)),cl=dT("end"),ai=dT("start");function dT(e){return t;function t(n){const i=n&&n.position&&n.position[e]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function hT(e){const t=ai(e),n=cl(e);if(t&&n)return{start:t,end:n}}const Gr=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],Ka={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...Gr,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...Gr],h2:[["className","sr-only"]],img:[...Gr,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...Gr,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...Gr],table:[...Gr],ul:[...Gr,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},fr={}.hasOwnProperty;function hN(e,t){let n={type:"root",children:[]};const i={schema:t?{...Ka,...t}:Ka,stack:[]},r=pT(i,e);return r&&(Array.isArray(r)?r.length===1?n=r[0]:n.children=r:n=r),n}function pT(e,t){if(t&&typeof t=="object"){const n=t;switch(typeof n.type=="string"?n.type:""){case"comment":return pN(e,n);case"doctype":return fN(e,n);case"element":return mN(e,n);case"root":return ON(e,n);case"text":return gN(e,n)}}}function pN(e,t){if(e.schema.allowComments){const n=typeof t.value=="string"?t.value:"",i=n.indexOf("-->"),r={type:"comment",value:i<0?n:n.slice(0,i)};return Ja(r,t),r}}function fN(e,t){if(e.schema.allowDoctypes){const n={type:"doctype"};return Ja(n,t),n}}function mN(e,t){const n=typeof t.tagName=="string"?t.tagName:"";e.stack.push(n);const i=fT(e,t.children),r=vN(e,t.properties);e.stack.pop();let s=!1;if(n&&n!=="*"&&(!e.schema.tagNames||e.schema.tagNames.includes(n))&&(s=!0,e.schema.ancestors&&fr.call(e.schema.ancestors,n))){const o=e.schema.ancestors[n];let c=-1;for(s=!1;++c<o.length;)e.stack.includes(o[c])&&(s=!0)}if(!s)return e.schema.strip&&!e.schema.strip.includes(n)?i:void 0;const a={type:"element",tagName:n,properties:r,children:i};return Ja(a,t),a}function ON(e,t){const n={type:"root",children:fT(e,t.children)};return Ja(n,t),n}function gN(e,t){const n={type:"text",value:typeof t.value=="string"?t.value:""};return Ja(n,t),n}function fT(e,t){const n=[];if(Array.isArray(t)){const i=t;let r=-1;for(;++r<i.length;){const s=pT(e,i[r]);s&&(Array.isArray(s)?n.push(...s):n.push(s))}}return n}function vN(e,t){const n=e.stack[e.stack.length-1],i=e.schema.attributes,r=e.schema.required,s=i&&fr.call(i,n)?i[n]:void 0,a=i&&fr.call(i,"*")?i["*"]:void 0,o=t&&typeof t=="object"?t:{},c={};let l;for(l in o)if(fr.call(o,l)){const u=o[l];let d=mT(e,gT(s,l),l,u);d==null&&(d=mT(e,gT(a,l),l,u)),d!=null&&(c[l]=d)}if(r&&fr.call(r,n)){const u=r[n];for(l in u)fr.call(u,l)&&!fr.call(c,l)&&(c[l]=u[l])}return c}function mT(e,t,n,i){return t?Array.isArray(i)?bN(e,t,n,i):OT(e,t,n,i):void 0}function bN(e,t,n,i){let r=-1;const s=[];for(;++r<i.length;){const a=OT(e,t,n,i[r]);(typeof a=="number"||typeof a=="string")&&s.push(a)}return s}function OT(e,t,n,i){if(!(typeof i!="boolean"&&typeof i!="number"&&typeof i!="string")&&TN(e,n,i)){if(typeof t=="object"&&t.length>1){let r=!1,s=0;for(;++s<t.length;){const a=t[s];if(a&&typeof a=="object"&&"flags"in a){if(a.test(String(i))){r=!0;break}}else if(a===i){r=!0;break}}if(!r)return}return e.schema.clobber&&e.schema.clobberPrefix&&e.schema.clobber.includes(n)?e.schema.clobberPrefix+i:i}}function TN(e,t,n){const i=e.schema.protocols&&fr.call(e.schema.protocols,t)?e.schema.protocols[t]:void 0;if(!i||i.length===0)return!0;const r=String(n),s=r.indexOf(":"),a=r.indexOf("?"),o=r.indexOf("#"),c=r.indexOf("/");if(s<0||c>-1&&s>c||a>-1&&s>a||o>-1&&s>o)return!0;let l=-1;for(;++l<i.length;){const u=i[l];if(s===u.length&&r.slice(0,u.length)===u)return!0}return!1}function Ja(e,t){const n=hT(t);t.data&&(e.data=Wr(t.data)),n&&(e.position=n)}function gT(e,t){let n,i=-1;if(e)for(;++i<e.length;){const r=e[i],s=typeof r=="string"?r:r[0];if(s===t)return r;s==="data*"&&(n=r)}if(t.length>4&&t.slice(0,4).toLowerCase()==="data")return n}function kN(e){return function(t){return hN(t,e)}}class eo{constructor(t,n,i){this.normal=n,this.property=t,i&&(this.space=i)}}eo.prototype.normal={},eo.prototype.property={},eo.prototype.space=void 0;function vT(e,t){const n={},i={};for(const r of e)Object.assign(n,r.property),Object.assign(i,r.normal);return new eo(n,i,t)}function to(e){return e.toLowerCase()}class un{constructor(t,n){this.attribute=n,this.property=t}}un.prototype.attribute="",un.prototype.booleanish=!1,un.prototype.boolean=!1,un.prototype.commaOrSpaceSeparated=!1,un.prototype.commaSeparated=!1,un.prototype.defined=!1,un.prototype.mustUseProperty=!1,un.prototype.number=!1,un.prototype.overloadedBoolean=!1,un.prototype.property="",un.prototype.spaceSeparated=!1,un.prototype.space=void 0;let yN=0;const Se=Yr(),wt=Yr(),jh=Yr(),K=Yr(),at=Yr(),Xs=Yr(),bn=Yr();function Yr(){return 2**++yN}const Vh=Object.freeze(Object.defineProperty({__proto__:null,boolean:Se,booleanish:wt,commaOrSpaceSeparated:bn,commaSeparated:Xs,number:K,overloadedBoolean:jh,spaceSeparated:at},Symbol.toStringTag,{value:"Module"})),Wh=Object.keys(Vh);class Gh extends un{constructor(t,n,i,r){let s=-1;if(super(t,n),bT(this,"space",r),typeof i=="number")for(;++s<Wh.length;){const a=Wh[s];bT(this,Wh[s],(i&Vh[a])===Vh[a])}}}Gh.prototype.defined=!0;function bT(e,t,n){n&&(e[t]=n)}function Fs(e){const t={},n={};for(const[i,r]of Object.entries(e.properties)){const s=new Gh(i,e.transform(e.attributes||{},i),r,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),t[i]=s,n[to(i)]=i,n[to(s.attribute)]=i}return new eo(t,n,e.space)}const TT=Fs({properties:{ariaActiveDescendant:null,ariaAtomic:wt,ariaAutoComplete:null,ariaBusy:wt,ariaChecked:wt,ariaColCount:K,ariaColIndex:K,ariaColSpan:K,ariaControls:at,ariaCurrent:null,ariaDescribedBy:at,ariaDetails:null,ariaDisabled:wt,ariaDropEffect:at,ariaErrorMessage:null,ariaExpanded:wt,ariaFlowTo:at,ariaGrabbed:wt,ariaHasPopup:null,ariaHidden:wt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:at,ariaLevel:K,ariaLive:null,ariaModal:wt,ariaMultiLine:wt,ariaMultiSelectable:wt,ariaOrientation:null,ariaOwns:at,ariaPlaceholder:null,ariaPosInSet:K,ariaPressed:wt,ariaReadOnly:wt,ariaRelevant:null,ariaRequired:wt,ariaRoleDescription:at,ariaRowCount:K,ariaRowIndex:K,ariaRowSpan:K,ariaSelected:wt,ariaSetSize:K,ariaSort:null,ariaValueMax:K,ariaValueMin:K,ariaValueNow:K,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function kT(e,t){return t in e?e[t]:t}function yT(e,t){return kT(e,t.toLowerCase())}const SN=Fs({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Xs,acceptCharset:at,accessKey:at,action:null,allow:null,allowFullScreen:Se,allowPaymentRequest:Se,allowUserMedia:Se,alt:null,as:null,async:Se,autoCapitalize:null,autoComplete:at,autoFocus:Se,autoPlay:Se,blocking:at,capture:null,charSet:null,checked:Se,cite:null,className:at,cols:K,colSpan:null,content:null,contentEditable:wt,controls:Se,controlsList:at,coords:K|Xs,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Se,defer:Se,dir:null,dirName:null,disabled:Se,download:jh,draggable:wt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Se,formTarget:null,headers:at,height:K,hidden:jh,high:K,href:null,hrefLang:null,htmlFor:at,httpEquiv:at,id:null,imageSizes:null,imageSrcSet:null,inert:Se,inputMode:null,integrity:null,is:null,isMap:Se,itemId:null,itemProp:at,itemRef:at,itemScope:Se,itemType:at,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Se,low:K,manifest:null,max:null,maxLength:K,media:null,method:null,min:null,minLength:K,multiple:Se,muted:Se,name:null,nonce:null,noModule:Se,noValidate:Se,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Se,optimum:K,pattern:null,ping:at,placeholder:null,playsInline:Se,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Se,referrerPolicy:null,rel:at,required:Se,reversed:Se,rows:K,rowSpan:K,sandbox:at,scope:null,scoped:Se,seamless:Se,selected:Se,shadowRootClonable:Se,shadowRootDelegatesFocus:Se,shadowRootMode:null,shape:null,size:K,sizes:null,slot:null,span:K,spellCheck:wt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:K,step:null,style:null,tabIndex:K,target:null,title:null,translate:null,type:null,typeMustMatch:Se,useMap:null,value:wt,width:K,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:at,axis:null,background:null,bgColor:null,border:K,borderColor:null,bottomMargin:K,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Se,declare:Se,event:null,face:null,frame:null,frameBorder:null,hSpace:K,leftMargin:K,link:null,longDesc:null,lowSrc:null,marginHeight:K,marginWidth:K,noResize:Se,noHref:Se,noShade:Se,noWrap:Se,object:null,profile:null,prompt:null,rev:null,rightMargin:K,rules:null,scheme:null,scrolling:wt,standby:null,summary:null,text:null,topMargin:K,valueType:null,version:null,vAlign:null,vLink:null,vSpace:K,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Se,disableRemotePlayback:Se,prefix:null,property:null,results:K,security:null,unselectable:null},space:"html",transform:yT}),_N=Fs({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:bn,accentHeight:K,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:K,amplitude:K,arabicForm:null,ascent:K,attributeName:null,attributeType:null,azimuth:K,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:K,by:null,calcMode:null,capHeight:K,className:at,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:K,diffuseConstant:K,direction:null,display:null,dur:null,divisor:K,dominantBaseline:null,download:Se,dx:null,dy:null,edgeMode:null,editable:null,elevation:K,enableBackground:null,end:null,event:null,exponent:K,externalResourcesRequired:null,fill:null,fillOpacity:K,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Xs,g2:Xs,glyphName:Xs,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:K,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:K,horizOriginX:K,horizOriginY:K,id:null,ideographic:K,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:K,k:K,k1:K,k2:K,k3:K,k4:K,kernelMatrix:bn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:K,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:K,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:K,overlineThickness:K,paintOrder:null,panose1:null,path:null,pathLength:K,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:at,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:K,pointsAtY:K,pointsAtZ:K,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:bn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:bn,rev:bn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:bn,requiredFeatures:bn,requiredFonts:bn,requiredFormats:bn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:K,specularExponent:K,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:K,strikethroughThickness:K,string:null,stroke:null,strokeDashArray:bn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:K,strokeOpacity:K,strokeWidth:null,style:null,surfaceScale:K,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:bn,tabIndex:K,tableValues:null,target:null,targetX:K,targetY:K,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:bn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:K,underlineThickness:K,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:K,values:null,vAlphabetic:K,vMathematical:K,vectorEffect:null,vHanging:K,vIdeographic:K,version:null,vertAdvY:K,vertOriginX:K,vertOriginY:K,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:K,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:kT}),ST=Fs({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),_T=Fs({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:yT}),ET=Fs({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),EN={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},wN=/[A-Z]/g,wT=/-[a-z]/g,CN=/^data[-\w.:]+$/i;function ll(e,t){const n=to(t);let i=t,r=un;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&CN.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(wT,PN);i="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!wT.test(s)){let a=s.replace(wN,xN);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}r=Gh}return new r(i,t)}function xN(e){return"-"+e.toLowerCase()}function PN(e){return e.charAt(1).toUpperCase()}const no=vT([TT,SN,ST,_T,ET],"html"),mr=vT([TT,_N,ST,_T,ET],"svg");function CT(e){const t=[],n=String(e||"");let i=n.indexOf(","),r=0,s=!1;for(;!s;){i===-1&&(i=n.length,s=!0);const a=n.slice(r,i).trim();(a||!s)&&t.push(a),r=i+1,i=n.indexOf(",",r)}return t}function xT(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const PT=/[#.]/g;function RN(e,t){const n=e||"",i={};let r=0,s,a;for(;r<n.length;){PT.lastIndex=r;const o=PT.exec(n),c=n.slice(r,o?o.index:n.length);c&&(s?s==="#"?i.id=c:Array.isArray(i.className)?i.className.push(c):i.className=[c]:a=c,r+=c.length),o&&(s=o[0],r++)}return{type:"element",tagName:a||t||"div",properties:i,children:[]}}function RT(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function AT(e){return e.join(" ").trim()}function IT(e,t,n){const i=n?NN(n):void 0;function r(s,a,...o){let c;if(s==null){c={type:"root",children:[]};const l=a;o.unshift(l)}else{c=RN(s,t);const l=c.tagName.toLowerCase(),u=i?i.get(l):void 0;if(c.tagName=u||l,AN(a))o.unshift(a);else for(const[d,h]of Object.entries(a))IN(e,c.properties,d,h)}for(const l of o)Yh(c.children,l);return c.type==="element"&&c.tagName==="template"&&(c.content={type:"root",children:c.children},c.children=[]),c}return r}function AN(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,n=Object.keys(e);for(const i of n){const r=t[i];if(r&&typeof r=="object"){if(!Array.isArray(r))return!0;const s=r;for(const a of s)if(typeof a!="number"&&typeof a!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function IN(e,t,n,i){const r=ll(e,n);let s;if(i!=null){if(typeof i=="number"){if(Number.isNaN(i))return;s=i}else typeof i=="boolean"?s=i:typeof i=="string"?r.spaceSeparated?s=RT(i):r.commaSeparated?s=CT(i):r.commaOrSpaceSeparated?s=RT(CT(i).join(" ")):s=QT(r,r.property,i):Array.isArray(i)?s=[...i]:s=r.property==="style"?QN(i):String(i);if(Array.isArray(s)){const a=[];for(const o of s)a.push(QT(r,r.property,o));s=a}r.property==="className"&&Array.isArray(t.className)&&(s=t.className.concat(s)),t[r.property]=s}}function Yh(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const n of t)Yh(e,n);else if(typeof t=="object"&&"type"in t)t.type==="root"?Yh(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function QT(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||to(n)===to(t)))return!0}return n}function QN(e){const t=[];for(const[n,i]of Object.entries(e))t.push([n,i].join(": "));return t.join("; ")}function NN(e){const t=new Map;for(const n of e)t.set(n.toLowerCase(),n);return t}const DN=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],MN=IT(no,"div"),LN=IT(mr,"g",DN);function $N(e){const t=String(e),n=[];return{toOffset:r,toPoint:i};function i(s){if(typeof s=="number"&&s>-1&&s<=t.length){let a=0;for(;;){let o=n[a];if(o===void 0){const c=NT(t,n[a-1]);o=c===-1?t.length+1:c+1,n[a]=o}if(o>s)return{line:a+1,column:s-(a>0?n[a-1]:0)+1,offset:s};a++}}}function r(s){if(s&&typeof s.line=="number"&&typeof s.column=="number"&&!Number.isNaN(s.line)&&!Number.isNaN(s.column)){for(;n.length<s.line;){const o=n[n.length-1],c=NT(t,o),l=c===-1?t.length+1:c+1;if(o===l)break;n.push(l)}const a=(s.line>1?n[s.line-2]:0)+s.column-1;if(a<n[s.line-1])return a}}}function NT(e,t){const n=e.indexOf("\r",t),i=e.indexOf(`
`,t);return i===-1?n:n===-1||n+1===i?i:n<i?n:i}const Hr={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},DT={}.hasOwnProperty,UN=Object.prototype;function qN(e,t){const n=t||{};return Hh({file:n.file||void 0,location:!1,schema:n.space==="svg"?mr:no,verbose:n.verbose||!1},e)}function Hh(e,t){let n;switch(t.nodeName){case"#comment":{const i=t;return n={type:"comment",value:i.data},ul(e,i,n),n}case"#document":case"#document-fragment":{const i=t,r="mode"in i?i.mode==="quirks"||i.mode==="limited-quirks":!1;if(n={type:"root",children:MT(e,t.childNodes),data:{quirksMode:r}},e.file&&e.location){const s=String(e.file),a=$N(s),o=a.toPoint(0),c=a.toPoint(s.length);n.position={start:o,end:c}}return n}case"#documentType":{const i=t;return n={type:"doctype"},ul(e,i,n),n}case"#text":{const i=t;return n={type:"text",value:i.value},ul(e,i,n),n}default:return n=XN(e,t),n}}function MT(e,t){let n=-1;const i=[];for(;++n<t.length;){const r=Hh(e,t[n]);i.push(r)}return i}function XN(e,t){const n=e.schema;e.schema=t.namespaceURI===Hr.svg?mr:no;let i=-1;const r={};for(;++i<t.attrs.length;){const a=t.attrs[i],o=(a.prefix?a.prefix+":":"")+a.name;DT.call(UN,o)||(r[o]=a.value)}const s=(e.schema.space==="svg"?LN:MN)(t.tagName,r,MT(e,t.childNodes));if(ul(e,t,s),s.tagName==="template"){const a=t,o=a.sourceCodeLocation,c=o&&o.startTag&&zs(o.startTag),l=o&&o.endTag&&zs(o.endTag),u=Hh(e,a.content);c&&l&&e.file&&(u.position={start:c.end,end:l.start}),s.content=u}return e.schema=n,s}function ul(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const i=FN(e,n,t.sourceCodeLocation);i&&(e.location=!0,n.position=i)}}function FN(e,t,n){const i=zs(n);if(t.type==="element"){const r=t.children[t.children.length-1];if(i&&!n.endTag&&r&&r.position&&r.position.end&&(i.end=Object.assign({},r.position.end)),e.verbose){const s={};let a;if(n.attrs)for(a in n.attrs)DT.call(n.attrs,a)&&(s[ll(e.schema,a).property]=zs(n.attrs[a]));n.startTag;const o=zs(n.startTag),c=n.endTag?zs(n.endTag):void 0,l={opening:o};c&&(l.closing=c),l.properties=s,t.data={position:l}}}return i}function zs(e){const t=LT({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=LT({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function LT(e){return e.line&&e.column?e:void 0}const $T={}.hasOwnProperty;function UT(e,t){const n=t||{};function i(r,...s){let a=i.invalid;const o=i.handlers;if(r&&$T.call(r,e)){const c=String(r[e]);a=$T.call(o,c)?o[c]:i.unknown}if(a)return a.call(this,r,...s)}return i.handlers=n.handlers||{},i.invalid=n.invalid,i.unknown=n.unknown,i}const zN={},BN={}.hasOwnProperty,qT=UT("type",{handlers:{root:jN,element:HN,text:GN,comment:YN,doctype:WN}});function ZN(e,t){const n=(t||zN).space;return qT(e,n==="svg"?mr:no)}function jN(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=Kh(e.children,n,t),Bs(e,n),n}function VN(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=Kh(e.children,n,t),Bs(e,n),n}function WN(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Bs(e,t),t}function GN(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Bs(e,t),t}function YN(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Bs(e,t),t}function HN(e,t){const n=t;let i=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(i=mr);const r=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&BN.call(e.properties,s)){const c=KN(i,s,e.properties[s]);c&&r.push(c)}}const a=i.space,o={nodeName:e.tagName,tagName:e.tagName,attrs:r,namespaceURI:Hr[a],childNodes:[],parentNode:null};return o.childNodes=Kh(e.children,o,i),Bs(e,o),e.tagName==="template"&&e.content&&(o.content=VN(e.content,i)),o}function KN(e,t,n){const i=ll(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&i.boolean)return;Array.isArray(n)&&(n=i.commaSeparated?xT(n):AT(n));const r={name:i.attribute,value:n===!0?"":String(n)};if(i.space&&i.space!=="html"&&i.space!=="svg"){const s=r.name.indexOf(":");s<0?r.prefix="":(r.name=r.name.slice(s+1),r.prefix=i.attribute.slice(0,s)),r.namespace=Hr[i.space]}return r}function Kh(e,t,n){let i=-1;const r=[];if(e)for(;++i<e.length;){const s=qT(e[i],n);s.parentNode=t,r.push(s)}return r}function Bs(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const JN=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],e2=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),pt="";var E;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(E||(E={}));const dn={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function XT(e){return e>=55296&&e<=57343}function t2(e){return e>=56320&&e<=57343}function n2(e,t){return(e-55296)*1024+9216+t}function FT(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function zT(e){return e>=64976&&e<=65007||e2.has(e)}var X;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(X||(X={}));const i2=65536;class r2{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=i2,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,n){const{line:i,col:r,offset:s}=this,a=r+n,o=s+n;return{code:t,startLine:i,endLine:i,startCol:a,endCol:a,startOffset:o,endOffset:o}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(t2(n))return this.pos++,this._addGap(),n2(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,E.EOF;return this._err(X.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let i=0;i<t.length;i++)if((this.html.charCodeAt(this.pos+i)|32)!==t.charCodeAt(i))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,E.EOF;const i=this.html.charCodeAt(n);return i===E.CARRIAGE_RETURN?E.LINE_FEED:i}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,E.EOF;let t=this.html.charCodeAt(this.pos);return t===E.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,E.LINE_FEED):t===E.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,XT(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===E.LINE_FEED||t===E.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){FT(t)?this._err(X.controlCharacterInInputStream):zT(t)&&this._err(X.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var xe;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(xe||(xe={}));function BT(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const s2=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),a2=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function o2(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=a2.get(e))!==null&&t!==void 0?t:e}var Mt;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Mt||(Mt={}));const c2=32;var Or;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Or||(Or={}));function Jh(e){return e>=Mt.ZERO&&e<=Mt.NINE}function l2(e){return e>=Mt.UPPER_A&&e<=Mt.UPPER_F||e>=Mt.LOWER_A&&e<=Mt.LOWER_F}function u2(e){return e>=Mt.UPPER_A&&e<=Mt.UPPER_Z||e>=Mt.LOWER_A&&e<=Mt.LOWER_Z||Jh(e)}function d2(e){return e===Mt.EQUALS||u2(e)}var Lt;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Lt||(Lt={}));var Mi;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Mi||(Mi={}));class h2{constructor(t,n,i){this.decodeTree=t,this.emitCodePoint=n,this.errors=i,this.state=Lt.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Mi.Strict}startEntity(t){this.decodeMode=t,this.state=Lt.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Lt.EntityStart:return t.charCodeAt(n)===Mt.NUM?(this.state=Lt.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Lt.NamedEntity,this.stateNamedEntity(t,n));case Lt.NumericStart:return this.stateNumericStart(t,n);case Lt.NumericDecimal:return this.stateNumericDecimal(t,n);case Lt.NumericHex:return this.stateNumericHex(t,n);case Lt.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|c2)===Mt.LOWER_X?(this.state=Lt.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Lt.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,i,r){if(n!==i){const s=i-n;this.result=this.result*Math.pow(r,s)+Number.parseInt(t.substr(n,s),r),this.consumed+=s}}stateNumericHex(t,n){const i=n;for(;n<t.length;){const r=t.charCodeAt(n);if(Jh(r)||l2(r))n+=1;else return this.addToNumericResult(t,i,n,16),this.emitNumericEntity(r,3)}return this.addToNumericResult(t,i,n,16),-1}stateNumericDecimal(t,n){const i=n;for(;n<t.length;){const r=t.charCodeAt(n);if(Jh(r))n+=1;else return this.addToNumericResult(t,i,n,10),this.emitNumericEntity(r,2)}return this.addToNumericResult(t,i,n,10),-1}emitNumericEntity(t,n){var i;if(this.consumed<=n)return(i=this.errors)===null||i===void 0||i.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Mt.SEMI)this.consumed+=1;else if(this.decodeMode===Mi.Strict)return 0;return this.emitCodePoint(o2(this.result),this.consumed),this.errors&&(t!==Mt.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:i}=this;let r=i[this.treeIndex],s=(r&Or.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const a=t.charCodeAt(n);if(this.treeIndex=p2(i,r,this.treeIndex+Math.max(1,s),a),this.treeIndex<0)return this.result===0||this.decodeMode===Mi.Attribute&&(s===0||d2(a))?0:this.emitNotTerminatedNamedEntity();if(r=i[this.treeIndex],s=(r&Or.VALUE_LENGTH)>>14,s!==0){if(a===Mt.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Mi.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:i}=this,r=(i[n]&Or.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,r,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,i){const{decodeTree:r}=this;return this.emitCodePoint(n===1?r[t]&~Or.VALUE_LENGTH:r[t+1],i),n===3&&this.emitCodePoint(r[t+2],i),i}end(){var t;switch(this.state){case Lt.NamedEntity:return this.result!==0&&(this.decodeMode!==Mi.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Lt.NumericDecimal:return this.emitNumericEntity(0,2);case Lt.NumericHex:return this.emitNumericEntity(0,3);case Lt.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Lt.EntityStart:return 0}}}function p2(e,t,n,i){const r=(t&Or.BRANCH_LENGTH)>>7,s=t&Or.JUMP_TABLE;if(r===0)return s!==0&&i===s?n:-1;if(s){const c=i-s;return c<0||c>=r?-1:e[n+c]-1}let a=n,o=a+r-1;for(;a<=o;){const c=a+o>>>1,l=e[c];if(l<i)a=c+1;else if(l>i)o=c-1;else return e[c+r]}return-1}var W;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(W||(W={}));var Kr;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Kr||(Kr={}));var An;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(An||(An={}));var $;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})($||($={}));var f;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(f||(f={}));const f2=new Map([[$.A,f.A],[$.ADDRESS,f.ADDRESS],[$.ANNOTATION_XML,f.ANNOTATION_XML],[$.APPLET,f.APPLET],[$.AREA,f.AREA],[$.ARTICLE,f.ARTICLE],[$.ASIDE,f.ASIDE],[$.B,f.B],[$.BASE,f.BASE],[$.BASEFONT,f.BASEFONT],[$.BGSOUND,f.BGSOUND],[$.BIG,f.BIG],[$.BLOCKQUOTE,f.BLOCKQUOTE],[$.BODY,f.BODY],[$.BR,f.BR],[$.BUTTON,f.BUTTON],[$.CAPTION,f.CAPTION],[$.CENTER,f.CENTER],[$.CODE,f.CODE],[$.COL,f.COL],[$.COLGROUP,f.COLGROUP],[$.DD,f.DD],[$.DESC,f.DESC],[$.DETAILS,f.DETAILS],[$.DIALOG,f.DIALOG],[$.DIR,f.DIR],[$.DIV,f.DIV],[$.DL,f.DL],[$.DT,f.DT],[$.EM,f.EM],[$.EMBED,f.EMBED],[$.FIELDSET,f.FIELDSET],[$.FIGCAPTION,f.FIGCAPTION],[$.FIGURE,f.FIGURE],[$.FONT,f.FONT],[$.FOOTER,f.FOOTER],[$.FOREIGN_OBJECT,f.FOREIGN_OBJECT],[$.FORM,f.FORM],[$.FRAME,f.FRAME],[$.FRAMESET,f.FRAMESET],[$.H1,f.H1],[$.H2,f.H2],[$.H3,f.H3],[$.H4,f.H4],[$.H5,f.H5],[$.H6,f.H6],[$.HEAD,f.HEAD],[$.HEADER,f.HEADER],[$.HGROUP,f.HGROUP],[$.HR,f.HR],[$.HTML,f.HTML],[$.I,f.I],[$.IMG,f.IMG],[$.IMAGE,f.IMAGE],[$.INPUT,f.INPUT],[$.IFRAME,f.IFRAME],[$.KEYGEN,f.KEYGEN],[$.LABEL,f.LABEL],[$.LI,f.LI],[$.LINK,f.LINK],[$.LISTING,f.LISTING],[$.MAIN,f.MAIN],[$.MALIGNMARK,f.MALIGNMARK],[$.MARQUEE,f.MARQUEE],[$.MATH,f.MATH],[$.MENU,f.MENU],[$.META,f.META],[$.MGLYPH,f.MGLYPH],[$.MI,f.MI],[$.MO,f.MO],[$.MN,f.MN],[$.MS,f.MS],[$.MTEXT,f.MTEXT],[$.NAV,f.NAV],[$.NOBR,f.NOBR],[$.NOFRAMES,f.NOFRAMES],[$.NOEMBED,f.NOEMBED],[$.NOSCRIPT,f.NOSCRIPT],[$.OBJECT,f.OBJECT],[$.OL,f.OL],[$.OPTGROUP,f.OPTGROUP],[$.OPTION,f.OPTION],[$.P,f.P],[$.PARAM,f.PARAM],[$.PLAINTEXT,f.PLAINTEXT],[$.PRE,f.PRE],[$.RB,f.RB],[$.RP,f.RP],[$.RT,f.RT],[$.RTC,f.RTC],[$.RUBY,f.RUBY],[$.S,f.S],[$.SCRIPT,f.SCRIPT],[$.SEARCH,f.SEARCH],[$.SECTION,f.SECTION],[$.SELECT,f.SELECT],[$.SOURCE,f.SOURCE],[$.SMALL,f.SMALL],[$.SPAN,f.SPAN],[$.STRIKE,f.STRIKE],[$.STRONG,f.STRONG],[$.STYLE,f.STYLE],[$.SUB,f.SUB],[$.SUMMARY,f.SUMMARY],[$.SUP,f.SUP],[$.TABLE,f.TABLE],[$.TBODY,f.TBODY],[$.TEMPLATE,f.TEMPLATE],[$.TEXTAREA,f.TEXTAREA],[$.TFOOT,f.TFOOT],[$.TD,f.TD],[$.TH,f.TH],[$.THEAD,f.THEAD],[$.TITLE,f.TITLE],[$.TR,f.TR],[$.TRACK,f.TRACK],[$.TT,f.TT],[$.U,f.U],[$.UL,f.UL],[$.SVG,f.SVG],[$.VAR,f.VAR],[$.WBR,f.WBR],[$.XMP,f.XMP]]);function Zs(e){var t;return(t=f2.get(e))!==null&&t!==void 0?t:f.UNKNOWN}const Y=f,m2={[W.HTML]:new Set([Y.ADDRESS,Y.APPLET,Y.AREA,Y.ARTICLE,Y.ASIDE,Y.BASE,Y.BASEFONT,Y.BGSOUND,Y.BLOCKQUOTE,Y.BODY,Y.BR,Y.BUTTON,Y.CAPTION,Y.CENTER,Y.COL,Y.COLGROUP,Y.DD,Y.DETAILS,Y.DIR,Y.DIV,Y.DL,Y.DT,Y.EMBED,Y.FIELDSET,Y.FIGCAPTION,Y.FIGURE,Y.FOOTER,Y.FORM,Y.FRAME,Y.FRAMESET,Y.H1,Y.H2,Y.H3,Y.H4,Y.H5,Y.H6,Y.HEAD,Y.HEADER,Y.HGROUP,Y.HR,Y.HTML,Y.IFRAME,Y.IMG,Y.INPUT,Y.LI,Y.LINK,Y.LISTING,Y.MAIN,Y.MARQUEE,Y.MENU,Y.META,Y.NAV,Y.NOEMBED,Y.NOFRAMES,Y.NOSCRIPT,Y.OBJECT,Y.OL,Y.P,Y.PARAM,Y.PLAINTEXT,Y.PRE,Y.SCRIPT,Y.SECTION,Y.SELECT,Y.SOURCE,Y.STYLE,Y.SUMMARY,Y.TABLE,Y.TBODY,Y.TD,Y.TEMPLATE,Y.TEXTAREA,Y.TFOOT,Y.TH,Y.THEAD,Y.TITLE,Y.TR,Y.TRACK,Y.UL,Y.WBR,Y.XMP]),[W.MATHML]:new Set([Y.MI,Y.MO,Y.MN,Y.MS,Y.MTEXT,Y.ANNOTATION_XML]),[W.SVG]:new Set([Y.TITLE,Y.FOREIGN_OBJECT,Y.DESC]),[W.XLINK]:new Set,[W.XML]:new Set,[W.XMLNS]:new Set},ep=new Set([Y.H1,Y.H2,Y.H3,Y.H4,Y.H5,Y.H6]);$.STYLE,$.SCRIPT,$.XMP,$.IFRAME,$.NOEMBED,$.NOFRAMES,$.PLAINTEXT;var C;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(C||(C={}));const Tt={DATA:C.DATA,RCDATA:C.RCDATA,RAWTEXT:C.RAWTEXT,SCRIPT_DATA:C.SCRIPT_DATA,PLAINTEXT:C.PLAINTEXT,CDATA_SECTION:C.CDATA_SECTION};function O2(e){return e>=E.DIGIT_0&&e<=E.DIGIT_9}function io(e){return e>=E.LATIN_CAPITAL_A&&e<=E.LATIN_CAPITAL_Z}function g2(e){return e>=E.LATIN_SMALL_A&&e<=E.LATIN_SMALL_Z}function gr(e){return g2(e)||io(e)}function ZT(e){return gr(e)||O2(e)}function dl(e){return e+32}function jT(e){return e===E.SPACE||e===E.LINE_FEED||e===E.TABULATION||e===E.FORM_FEED}function VT(e){return jT(e)||e===E.SOLIDUS||e===E.GREATER_THAN_SIGN}function v2(e){return e===E.NULL?X.nullCharacterReference:e>1114111?X.characterReferenceOutsideUnicodeRange:XT(e)?X.surrogateCharacterReference:zT(e)?X.noncharacterCharacterReference:FT(e)||e===E.CARRIAGE_RETURN?X.controlCharacterReference:null}class b2{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=C.DATA,this.returnState=C.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new r2(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new h2(s2,(i,r)=>{this.preprocessor.pos=this.entityStartPos+r-1,this._flushCodePointConsumedAsCharacterReference(i)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(X.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:i=>{this._err(X.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+i)},validateNumericCharacterReference:i=>{const r=v2(i);r&&this._err(r,1)}}:void 0)}_err(t,n=0){var i,r;(r=(i=this.handler).onParseError)===null||r===void 0||r.call(i,this.preprocessor.getError(t,n))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,i){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||i==null||i()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:xe.START_TAG,tagName:"",tagID:f.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:xe.END_TAG,tagName:"",tagID:f.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:xe.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:xe.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const i=this.currentToken;if(BT(i,this.currentAttr.name)===null){if(i.attrs.push(this.currentAttr),i.location&&this.currentLocation){const r=(t=(n=i.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);r[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(X.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Zs(t.tagName),t.type===xe.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(X.endTagWithAttributes),t.selfClosing&&this._err(X.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case xe.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case xe.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case xe.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:xe.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,n)}_emitCodePoint(t){const n=jT(t)?xe.WHITESPACE_CHARACTER:t===E.NULL?xe.NULL_CHARACTER:xe.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(xe.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=C.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Mi.Attribute:Mi.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===C.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===C.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===C.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case C.DATA:{this._stateData(t);break}case C.RCDATA:{this._stateRcdata(t);break}case C.RAWTEXT:{this._stateRawtext(t);break}case C.SCRIPT_DATA:{this._stateScriptData(t);break}case C.PLAINTEXT:{this._statePlaintext(t);break}case C.TAG_OPEN:{this._stateTagOpen(t);break}case C.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case C.TAG_NAME:{this._stateTagName(t);break}case C.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case C.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case C.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case C.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case C.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case C.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case C.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case C.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case C.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case C.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case C.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case C.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case C.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case C.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case C.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case C.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case C.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case C.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case C.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case C.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case C.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case C.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case C.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case C.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case C.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case C.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case C.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case C.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case C.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case C.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case C.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case C.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case C.BOGUS_COMMENT:{this._stateBogusComment(t);break}case C.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case C.COMMENT_START:{this._stateCommentStart(t);break}case C.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case C.COMMENT:{this._stateComment(t);break}case C.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case C.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case C.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case C.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case C.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case C.COMMENT_END:{this._stateCommentEnd(t);break}case C.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case C.DOCTYPE:{this._stateDoctype(t);break}case C.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case C.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case C.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case C.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case C.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case C.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case C.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case C.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case C.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case C.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case C.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case C.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case C.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case C.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case C.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case C.CDATA_SECTION:{this._stateCdataSection(t);break}case C.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case C.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case C.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case C.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case E.LESS_THAN_SIGN:{this.state=C.TAG_OPEN;break}case E.AMPERSAND:{this._startCharacterReference();break}case E.NULL:{this._err(X.unexpectedNullCharacter),this._emitCodePoint(t);break}case E.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case E.AMPERSAND:{this._startCharacterReference();break}case E.LESS_THAN_SIGN:{this.state=C.RCDATA_LESS_THAN_SIGN;break}case E.NULL:{this._err(X.unexpectedNullCharacter),this._emitChars(pt);break}case E.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case E.LESS_THAN_SIGN:{this.state=C.RAWTEXT_LESS_THAN_SIGN;break}case E.NULL:{this._err(X.unexpectedNullCharacter),this._emitChars(pt);break}case E.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case E.LESS_THAN_SIGN:{this.state=C.SCRIPT_DATA_LESS_THAN_SIGN;break}case E.NULL:{this._err(X.unexpectedNullCharacter),this._emitChars(pt);break}case E.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case E.NULL:{this._err(X.unexpectedNullCharacter),this._emitChars(pt);break}case E.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(gr(t))this._createStartTagToken(),this.state=C.TAG_NAME,this._stateTagName(t);else switch(t){case E.EXCLAMATION_MARK:{this.state=C.MARKUP_DECLARATION_OPEN;break}case E.SOLIDUS:{this.state=C.END_TAG_OPEN;break}case E.QUESTION_MARK:{this._err(X.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=C.BOGUS_COMMENT,this._stateBogusComment(t);break}case E.EOF:{this._err(X.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(X.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=C.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(gr(t))this._createEndTagToken(),this.state=C.TAG_NAME,this._stateTagName(t);else switch(t){case E.GREATER_THAN_SIGN:{this._err(X.missingEndTagName),this.state=C.DATA;break}case E.EOF:{this._err(X.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(X.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=C.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:{this.state=C.BEFORE_ATTRIBUTE_NAME;break}case E.SOLIDUS:{this.state=C.SELF_CLOSING_START_TAG;break}case E.GREATER_THAN_SIGN:{this.state=C.DATA,this.emitCurrentTagToken();break}case E.NULL:{this._err(X.unexpectedNullCharacter),n.tagName+=pt;break}case E.EOF:{this._err(X.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(io(t)?dl(t):t)}}_stateRcdataLessThanSign(t){t===E.SOLIDUS?this.state=C.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=C.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){gr(t)?(this.state=C.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=C.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=C.BEFORE_ATTRIBUTE_NAME,!1;case E.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=C.SELF_CLOSING_START_TAG,!1;case E.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=C.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=C.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===E.SOLIDUS?this.state=C.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=C.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){gr(t)?(this.state=C.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=C.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=C.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case E.SOLIDUS:{this.state=C.SCRIPT_DATA_END_TAG_OPEN;break}case E.EXCLAMATION_MARK:{this.state=C.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=C.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){gr(t)?(this.state=C.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=C.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=C.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===E.HYPHEN_MINUS?(this.state=C.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=C.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===E.HYPHEN_MINUS?(this.state=C.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=C.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case E.HYPHEN_MINUS:{this.state=C.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case E.LESS_THAN_SIGN:{this.state=C.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case E.NULL:{this._err(X.unexpectedNullCharacter),this._emitChars(pt);break}case E.EOF:{this._err(X.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case E.HYPHEN_MINUS:{this.state=C.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case E.LESS_THAN_SIGN:{this.state=C.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case E.NULL:{this._err(X.unexpectedNullCharacter),this.state=C.SCRIPT_DATA_ESCAPED,this._emitChars(pt);break}case E.EOF:{this._err(X.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=C.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case E.HYPHEN_MINUS:{this._emitChars("-");break}case E.LESS_THAN_SIGN:{this.state=C.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case E.GREATER_THAN_SIGN:{this.state=C.SCRIPT_DATA,this._emitChars(">");break}case E.NULL:{this._err(X.unexpectedNullCharacter),this.state=C.SCRIPT_DATA_ESCAPED,this._emitChars(pt);break}case E.EOF:{this._err(X.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=C.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===E.SOLIDUS?this.state=C.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:gr(t)?(this._emitChars("<"),this.state=C.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=C.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){gr(t)?(this.state=C.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=C.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=C.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(dn.SCRIPT,!1)&&VT(this.preprocessor.peek(dn.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<dn.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=C.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case E.HYPHEN_MINUS:{this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case E.LESS_THAN_SIGN:{this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case E.NULL:{this._err(X.unexpectedNullCharacter),this._emitChars(pt);break}case E.EOF:{this._err(X.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case E.HYPHEN_MINUS:{this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case E.LESS_THAN_SIGN:{this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case E.NULL:{this._err(X.unexpectedNullCharacter),this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(pt);break}case E.EOF:{this._err(X.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case E.HYPHEN_MINUS:{this._emitChars("-");break}case E.LESS_THAN_SIGN:{this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case E.GREATER_THAN_SIGN:{this.state=C.SCRIPT_DATA,this._emitChars(">");break}case E.NULL:{this._err(X.unexpectedNullCharacter),this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(pt);break}case E.EOF:{this._err(X.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===E.SOLIDUS?(this.state=C.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(dn.SCRIPT,!1)&&VT(this.preprocessor.peek(dn.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<dn.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=C.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:break;case E.SOLIDUS:case E.GREATER_THAN_SIGN:case E.EOF:{this.state=C.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case E.EQUALS_SIGN:{this._err(X.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=C.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=C.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:case E.SOLIDUS:case E.GREATER_THAN_SIGN:case E.EOF:{this._leaveAttrName(),this.state=C.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case E.EQUALS_SIGN:{this._leaveAttrName(),this.state=C.BEFORE_ATTRIBUTE_VALUE;break}case E.QUOTATION_MARK:case E.APOSTROPHE:case E.LESS_THAN_SIGN:{this._err(X.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case E.NULL:{this._err(X.unexpectedNullCharacter),this.currentAttr.name+=pt;break}default:this.currentAttr.name+=String.fromCodePoint(io(t)?dl(t):t)}}_stateAfterAttributeName(t){switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:break;case E.SOLIDUS:{this.state=C.SELF_CLOSING_START_TAG;break}case E.EQUALS_SIGN:{this.state=C.BEFORE_ATTRIBUTE_VALUE;break}case E.GREATER_THAN_SIGN:{this.state=C.DATA,this.emitCurrentTagToken();break}case E.EOF:{this._err(X.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=C.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:break;case E.QUOTATION_MARK:{this.state=C.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case E.APOSTROPHE:{this.state=C.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case E.GREATER_THAN_SIGN:{this._err(X.missingAttributeValue),this.state=C.DATA,this.emitCurrentTagToken();break}default:this.state=C.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case E.QUOTATION_MARK:{this.state=C.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case E.AMPERSAND:{this._startCharacterReference();break}case E.NULL:{this._err(X.unexpectedNullCharacter),this.currentAttr.value+=pt;break}case E.EOF:{this._err(X.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case E.APOSTROPHE:{this.state=C.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case E.AMPERSAND:{this._startCharacterReference();break}case E.NULL:{this._err(X.unexpectedNullCharacter),this.currentAttr.value+=pt;break}case E.EOF:{this._err(X.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:{this._leaveAttrValue(),this.state=C.BEFORE_ATTRIBUTE_NAME;break}case E.AMPERSAND:{this._startCharacterReference();break}case E.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=C.DATA,this.emitCurrentTagToken();break}case E.NULL:{this._err(X.unexpectedNullCharacter),this.currentAttr.value+=pt;break}case E.QUOTATION_MARK:case E.APOSTROPHE:case E.LESS_THAN_SIGN:case E.EQUALS_SIGN:case E.GRAVE_ACCENT:{this._err(X.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case E.EOF:{this._err(X.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:{this._leaveAttrValue(),this.state=C.BEFORE_ATTRIBUTE_NAME;break}case E.SOLIDUS:{this._leaveAttrValue(),this.state=C.SELF_CLOSING_START_TAG;break}case E.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=C.DATA,this.emitCurrentTagToken();break}case E.EOF:{this._err(X.eofInTag),this._emitEOFToken();break}default:this._err(X.missingWhitespaceBetweenAttributes),this.state=C.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case E.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=C.DATA,this.emitCurrentTagToken();break}case E.EOF:{this._err(X.eofInTag),this._emitEOFToken();break}default:this._err(X.unexpectedSolidusInTag),this.state=C.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case E.GREATER_THAN_SIGN:{this.state=C.DATA,this.emitCurrentComment(n);break}case E.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case E.NULL:{this._err(X.unexpectedNullCharacter),n.data+=pt;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(dn.DASH_DASH,!0)?(this._createCommentToken(dn.DASH_DASH.length+1),this.state=C.COMMENT_START):this._consumeSequenceIfMatch(dn.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(dn.DOCTYPE.length+1),this.state=C.DOCTYPE):this._consumeSequenceIfMatch(dn.CDATA_START,!0)?this.inForeignNode?this.state=C.CDATA_SECTION:(this._err(X.cdataInHtmlContent),this._createCommentToken(dn.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=C.BOGUS_COMMENT):this._ensureHibernation()||(this._err(X.incorrectlyOpenedComment),this._createCommentToken(2),this.state=C.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case E.HYPHEN_MINUS:{this.state=C.COMMENT_START_DASH;break}case E.GREATER_THAN_SIGN:{this._err(X.abruptClosingOfEmptyComment),this.state=C.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=C.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case E.HYPHEN_MINUS:{this.state=C.COMMENT_END;break}case E.GREATER_THAN_SIGN:{this._err(X.abruptClosingOfEmptyComment),this.state=C.DATA,this.emitCurrentComment(n);break}case E.EOF:{this._err(X.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=C.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case E.HYPHEN_MINUS:{this.state=C.COMMENT_END_DASH;break}case E.LESS_THAN_SIGN:{n.data+="<",this.state=C.COMMENT_LESS_THAN_SIGN;break}case E.NULL:{this._err(X.unexpectedNullCharacter),n.data+=pt;break}case E.EOF:{this._err(X.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case E.EXCLAMATION_MARK:{n.data+="!",this.state=C.COMMENT_LESS_THAN_SIGN_BANG;break}case E.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=C.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===E.HYPHEN_MINUS?this.state=C.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=C.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===E.HYPHEN_MINUS?this.state=C.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=C.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==E.GREATER_THAN_SIGN&&t!==E.EOF&&this._err(X.nestedComment),this.state=C.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case E.HYPHEN_MINUS:{this.state=C.COMMENT_END;break}case E.EOF:{this._err(X.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=C.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case E.GREATER_THAN_SIGN:{this.state=C.DATA,this.emitCurrentComment(n);break}case E.EXCLAMATION_MARK:{this.state=C.COMMENT_END_BANG;break}case E.HYPHEN_MINUS:{n.data+="-";break}case E.EOF:{this._err(X.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=C.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case E.HYPHEN_MINUS:{n.data+="--!",this.state=C.COMMENT_END_DASH;break}case E.GREATER_THAN_SIGN:{this._err(X.incorrectlyClosedComment),this.state=C.DATA,this.emitCurrentComment(n);break}case E.EOF:{this._err(X.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=C.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:{this.state=C.BEFORE_DOCTYPE_NAME;break}case E.GREATER_THAN_SIGN:{this.state=C.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case E.EOF:{this._err(X.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(X.missingWhitespaceBeforeDoctypeName),this.state=C.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(io(t))this._createDoctypeToken(String.fromCharCode(dl(t))),this.state=C.DOCTYPE_NAME;else switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:break;case E.NULL:{this._err(X.unexpectedNullCharacter),this._createDoctypeToken(pt),this.state=C.DOCTYPE_NAME;break}case E.GREATER_THAN_SIGN:{this._err(X.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=C.DATA;break}case E.EOF:{this._err(X.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=C.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:{this.state=C.AFTER_DOCTYPE_NAME;break}case E.GREATER_THAN_SIGN:{this.state=C.DATA,this.emitCurrentDoctype(n);break}case E.NULL:{this._err(X.unexpectedNullCharacter),n.name+=pt;break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(io(t)?dl(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:break;case E.GREATER_THAN_SIGN:{this.state=C.DATA,this.emitCurrentDoctype(n);break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(dn.PUBLIC,!1)?this.state=C.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(dn.SYSTEM,!1)?this.state=C.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(X.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:{this.state=C.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case E.QUOTATION_MARK:{this._err(X.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=C.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case E.APOSTROPHE:{this._err(X.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=C.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case E.GREATER_THAN_SIGN:{this._err(X.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=C.DATA,this.emitCurrentDoctype(n);break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(X.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:break;case E.QUOTATION_MARK:{n.publicId="",this.state=C.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case E.APOSTROPHE:{n.publicId="",this.state=C.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case E.GREATER_THAN_SIGN:{this._err(X.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=C.DATA,this.emitCurrentDoctype(n);break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(X.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case E.QUOTATION_MARK:{this.state=C.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case E.NULL:{this._err(X.unexpectedNullCharacter),n.publicId+=pt;break}case E.GREATER_THAN_SIGN:{this._err(X.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=C.DATA;break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case E.APOSTROPHE:{this.state=C.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case E.NULL:{this._err(X.unexpectedNullCharacter),n.publicId+=pt;break}case E.GREATER_THAN_SIGN:{this._err(X.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=C.DATA;break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:{this.state=C.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case E.GREATER_THAN_SIGN:{this.state=C.DATA,this.emitCurrentDoctype(n);break}case E.QUOTATION_MARK:{this._err(X.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case E.APOSTROPHE:{this._err(X.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(X.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:break;case E.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=C.DATA;break}case E.QUOTATION_MARK:{n.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case E.APOSTROPHE:{n.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(X.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:{this.state=C.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case E.QUOTATION_MARK:{this._err(X.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case E.APOSTROPHE:{this._err(X.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case E.GREATER_THAN_SIGN:{this._err(X.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=C.DATA,this.emitCurrentDoctype(n);break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(X.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:break;case E.QUOTATION_MARK:{n.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case E.APOSTROPHE:{n.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case E.GREATER_THAN_SIGN:{this._err(X.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=C.DATA,this.emitCurrentDoctype(n);break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(X.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case E.QUOTATION_MARK:{this.state=C.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case E.NULL:{this._err(X.unexpectedNullCharacter),n.systemId+=pt;break}case E.GREATER_THAN_SIGN:{this._err(X.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=C.DATA;break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case E.APOSTROPHE:{this.state=C.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case E.NULL:{this._err(X.unexpectedNullCharacter),n.systemId+=pt;break}case E.GREATER_THAN_SIGN:{this._err(X.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=C.DATA;break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:break;case E.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=C.DATA;break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(X.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case E.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=C.DATA;break}case E.NULL:{this._err(X.unexpectedNullCharacter);break}case E.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case E.RIGHT_SQUARE_BRACKET:{this.state=C.CDATA_SECTION_BRACKET;break}case E.EOF:{this._err(X.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===E.RIGHT_SQUARE_BRACKET?this.state=C.CDATA_SECTION_END:(this._emitChars("]"),this.state=C.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case E.GREATER_THAN_SIGN:{this.state=C.DATA;break}case E.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=C.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(E.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&ZT(this.preprocessor.peek(1))?C.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){ZT(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===E.SEMICOLON&&this._err(X.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}}const WT=new Set([f.DD,f.DT,f.LI,f.OPTGROUP,f.OPTION,f.P,f.RB,f.RP,f.RT,f.RTC]),GT=new Set([...WT,f.CAPTION,f.COLGROUP,f.TBODY,f.TD,f.TFOOT,f.TH,f.THEAD,f.TR]),hl=new Set([f.APPLET,f.CAPTION,f.HTML,f.MARQUEE,f.OBJECT,f.TABLE,f.TD,f.TEMPLATE,f.TH]),T2=new Set([...hl,f.OL,f.UL]),k2=new Set([...hl,f.BUTTON]),YT=new Set([f.ANNOTATION_XML,f.MI,f.MN,f.MO,f.MS,f.MTEXT]),HT=new Set([f.DESC,f.FOREIGN_OBJECT,f.TITLE]),y2=new Set([f.TR,f.TEMPLATE,f.HTML]),S2=new Set([f.TBODY,f.TFOOT,f.THEAD,f.TEMPLATE,f.HTML]),_2=new Set([f.TABLE,f.TEMPLATE,f.HTML]),E2=new Set([f.TD,f.TH]);class w2{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,i){this.treeAdapter=n,this.handler=i,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=f.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===f.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===W.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const i=this._indexOf(t);this.items[i]=n,i===this.stackTop&&(this.current=n)}insertAfter(t,n,i){const r=this._indexOf(t)+1;this.items.splice(r,0,n),this.tagIDs.splice(r,0,i),this.stackTop++,r===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,r===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==W.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(Math.max(n,0))}popUntilPopped(t,n){const i=this._indexOfTagNames(t,n);this.shortenToLength(Math.max(i,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(ep,W.HTML)}popUntilTableCellPopped(){this.popUntilPopped(E2,W.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let i=this.stackTop;i>=0;i--)if(t.has(this.tagIDs[i])&&this.treeAdapter.getNamespaceURI(this.items[i])===n)return i;return-1}clearBackTo(t,n){const i=this._indexOfTagNames(t,n);this.shortenToLength(i+1)}clearBackToTableContext(){this.clearBackTo(_2,W.HTML)}clearBackToTableBodyContext(){this.clearBackTo(S2,W.HTML)}clearBackToTableRowContext(){this.clearBackTo(y2,W.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===f.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===f.HTML}hasInDynamicScope(t,n){for(let i=this.stackTop;i>=0;i--){const r=this.tagIDs[i];switch(this.treeAdapter.getNamespaceURI(this.items[i])){case W.HTML:{if(r===t)return!0;if(n.has(r))return!1;break}case W.SVG:{if(HT.has(r))return!1;break}case W.MATHML:{if(YT.has(r))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,hl)}hasInListItemScope(t){return this.hasInDynamicScope(t,T2)}hasInButtonScope(t){return this.hasInDynamicScope(t,k2)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case W.HTML:{if(ep.has(n))return!0;if(hl.has(n))return!1;break}case W.SVG:{if(HT.has(n))return!1;break}case W.MATHML:{if(YT.has(n))return!1;break}}}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===W.HTML)switch(this.tagIDs[n]){case t:return!0;case f.TABLE:case f.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===W.HTML)switch(this.tagIDs[t]){case f.TBODY:case f.THEAD:case f.TFOOT:return!0;case f.TABLE:case f.HTML:return!1}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===W.HTML)switch(this.tagIDs[n]){case t:return!0;case f.OPTION:case f.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&WT.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&GT.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&GT.has(this.currentTagId);)this.pop()}}const tp=3;var oi;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(oi||(oi={}));const KT={type:oi.Marker};class C2{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const i=[],r=n.length,s=this.treeAdapter.getTagName(t),a=this.treeAdapter.getNamespaceURI(t);for(let o=0;o<this.entries.length;o++){const c=this.entries[o];if(c.type===oi.Marker)break;const{element:l}=c;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===a){const u=this.treeAdapter.getAttrList(l);u.length===r&&i.push({idx:o,attrs:u})}}return i}_ensureNoahArkCondition(t){if(this.entries.length<tp)return;const n=this.treeAdapter.getAttrList(t),i=this._getNoahArkConditionCandidates(t,n);if(i.length<tp)return;const r=new Map(n.map(a=>[a.name,a.value]));let s=0;for(let a=0;a<i.length;a++){const o=i[a];o.attrs.every(c=>r.get(c.name)===c.value)&&(s+=1,s>=tp&&this.entries.splice(o.idx,1))}}insertMarker(){this.entries.unshift(KT)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:oi.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const i=this.entries.indexOf(this.bookmark);this.entries.splice(i,0,{type:oi.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(KT);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const n=this.entries.find(i=>i.type===oi.Marker||this.treeAdapter.getTagName(i.element)===t);return n&&n.type===oi.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===oi.Element&&n.element===t)}}const vr={createDocument(){return{nodeName:"#document",mode:An.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const i=e.childNodes.indexOf(n);e.childNodes.splice(i,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,i){const r=e.childNodes.find(s=>s.nodeName==="#documentType");if(r)r.name=t,r.publicId=n,r.systemId=i;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:i,parentNode:null};vr.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(vr.isTextNode(n)){n.value+=t;return}}vr.appendChild(e,vr.createTextNode(t))},insertTextBefore(e,t,n){const i=e.childNodes[e.childNodes.indexOf(n)-1];i&&vr.isTextNode(i)?i.value+=t:vr.insertBefore(e,vr.createTextNode(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(i=>i.name));for(let i=0;i<t.length;i++)n.has(t[i].name)||e.attrs.push(t[i])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},JT="html",x2="about:legacy-compat",P2="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",ek=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],R2=[...ek,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],A2=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),tk=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],I2=[...tk,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function nk(e,t){return t.some(n=>e.startsWith(n))}function Q2(e){return e.name===JT&&e.publicId===null&&(e.systemId===null||e.systemId===x2)}function N2(e){if(e.name!==JT)return An.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===P2)return An.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),A2.has(n))return An.QUIRKS;let i=t===null?R2:ek;if(nk(n,i))return An.QUIRKS;if(i=t===null?tk:I2,nk(n,i))return An.LIMITED_QUIRKS}return An.NO_QUIRKS}const ik={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},D2="definitionurl",M2="definitionURL",L2=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),$2=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:W.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:W.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:W.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:W.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:W.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:W.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:W.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:W.XML}],["xml:space",{prefix:"xml",name:"space",namespace:W.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:W.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:W.XMLNS}]]),U2=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),q2=new Set([f.B,f.BIG,f.BLOCKQUOTE,f.BODY,f.BR,f.CENTER,f.CODE,f.DD,f.DIV,f.DL,f.DT,f.EM,f.EMBED,f.H1,f.H2,f.H3,f.H4,f.H5,f.H6,f.HEAD,f.HR,f.I,f.IMG,f.LI,f.LISTING,f.MENU,f.META,f.NOBR,f.OL,f.P,f.PRE,f.RUBY,f.S,f.SMALL,f.SPAN,f.STRONG,f.STRIKE,f.SUB,f.SUP,f.TABLE,f.TT,f.U,f.UL,f.VAR]);function X2(e){const t=e.tagID;return t===f.FONT&&e.attrs.some(({name:n})=>n===Kr.COLOR||n===Kr.SIZE||n===Kr.FACE)||q2.has(t)}function rk(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===D2){e.attrs[t].name=M2;break}}function sk(e){for(let t=0;t<e.attrs.length;t++){const n=L2.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function np(e){for(let t=0;t<e.attrs.length;t++){const n=$2.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function F2(e){const t=U2.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Zs(e.tagName))}function z2(e,t){return t===W.MATHML&&(e===f.MI||e===f.MO||e===f.MN||e===f.MS||e===f.MTEXT)}function B2(e,t,n){if(t===W.MATHML&&e===f.ANNOTATION_XML){for(let i=0;i<n.length;i++)if(n[i].name===Kr.ENCODING){const r=n[i].value.toLowerCase();return r===ik.TEXT_HTML||r===ik.APPLICATION_XML}}return t===W.SVG&&(e===f.FOREIGN_OBJECT||e===f.DESC||e===f.TITLE)}function Z2(e,t,n,i){return(!i||i===W.HTML)&&B2(e,t,n)||(!i||i===W.MATHML)&&z2(e,t)}const j2="hidden",V2=8,W2=3;var A;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(A||(A={}));const G2={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},ak=new Set([f.TABLE,f.TBODY,f.TFOOT,f.THEAD,f.TR]),ok={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:vr,onParseError:null};let ck=class{constructor(e,t,n=null,i=null){this.fragmentContext=n,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=A.INITIAL,this.originalInsertionMode=A.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...ok,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=t??this.treeAdapter.createDocument(),this.tokenizer=new b2(this.options,this),this.activeFormattingElements=new C2(this.treeAdapter),this.fragmentContextID=n?Zs(this.treeAdapter.getTagName(n)):f.UNKNOWN,this._setContextModes(n??this.document,this.fragmentContextID),this.openElements=new w2(this.document,this.treeAdapter,this)}static parse(e,t){const n=new this(t);return n.tokenizer.write(e,!0),n.document}static getFragmentParser(e,t){const n={...ok,...t};e??(e=n.treeAdapter.createElement($.TEMPLATE,W.HTML,[]));const i=n.treeAdapter.createElement("documentmock",W.HTML,[]),r=new this(n,i,e);return r.fragmentContextID===f.TEMPLATE&&r.tmplInsertionModeStack.unshift(A.IN_TEMPLATE),r._initTokenizerForFragmentParsing(),r._insertFakeRootElement(),r._resetInsertionMode(),r._findFormInFragmentContext(),r}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),t=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,t),t}_err(e,t,n){var i;if(!this.onParseError)return;const r=(i=e.location)!==null&&i!==void 0?i:G2,s={code:t,startLine:r.startLine,startCol:r.startCol,startOffset:r.startOffset,endLine:n?r.startLine:r.endLine,endCol:n?r.startCol:r.endCol,endOffset:n?r.startOffset:r.endOffset};this.onParseError(s)}onItemPush(e,t,n){var i,r;(r=(i=this.treeAdapter).onItemPush)===null||r===void 0||r.call(i,e),n&&this.openElements.stackTop>0&&this._setContextModes(e,t)}onItemPop(e,t){var n,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(i=(n=this.treeAdapter).onItemPop)===null||i===void 0||i.call(n,e,this.openElements.current),t){let r,s;this.openElements.stackTop===0&&this.fragmentContext?(r=this.fragmentContext,s=this.fragmentContextID):{current:r,currentTagId:s}=this.openElements,this._setContextModes(r,s)}}_setContextModes(e,t){const n=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===W.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&e!==void 0&&t!==void 0&&!this._isIntegrationPoint(t,e)}_switchToTextParsing(e,t){this._insertElement(e,W.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=A.TEXT}switchToPlaintextParsing(){this.insertionMode=A.TEXT,this.originalInsertionMode=A.IN_BODY,this.tokenizer.state=Tt.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===$.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==W.HTML))switch(this.fragmentContextID){case f.TITLE:case f.TEXTAREA:{this.tokenizer.state=Tt.RCDATA;break}case f.STYLE:case f.XMP:case f.IFRAME:case f.NOEMBED:case f.NOFRAMES:case f.NOSCRIPT:{this.tokenizer.state=Tt.RAWTEXT;break}case f.SCRIPT:{this.tokenizer.state=Tt.SCRIPT_DATA;break}case f.PLAINTEXT:{this.tokenizer.state=Tt.PLAINTEXT;break}}}_setDocumentType(e){const t=e.name||"",n=e.publicId||"",i=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,t,n,i),e.location){const r=this.treeAdapter.getChildNodes(this.document).find(s=>this.treeAdapter.isDocumentTypeNode(s));r&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}}_attachElementToTree(e,t){if(this.options.sourceCodeLocationInfo){const n=t&&{...t,startTag:t};this.treeAdapter.setNodeSourceCodeLocation(e,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const n=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(n??this.document,e)}}_appendElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location)}_insertElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID)}_insertFakeElement(e,t){const n=this.treeAdapter.createElement(e,W.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,t)}_insertTemplate(e){const t=this.treeAdapter.createElement(e.tagName,W.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t,e.location),this.openElements.push(t,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement($.HTML,W.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,f.HTML)}_appendCommentNode(e,t){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,e.location)}_insertCharacters(e){let t,n;if(this._shouldFosterParentOnInsertion()?({parent:t,beforeElement:n}=this._findFosterParentingLocation(),n?this.treeAdapter.insertTextBefore(t,e.chars,n):this.treeAdapter.insertText(t,e.chars)):(t=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(t,e.chars)),!e.location)return;const i=this.treeAdapter.getChildNodes(t),r=n?i.lastIndexOf(n):i.length,s=i[r-1];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:a,endCol:o,endOffset:c}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:a,endCol:o,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,e.location)}_adoptNodes(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const n=t.location,i=this.treeAdapter.getTagName(e),r=t.type===xe.END_TAG&&i===t.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,r)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let t,n;return this.openElements.stackTop===0&&this.fragmentContext?(t=this.fragmentContext,n=this.fragmentContextID):{current:t,currentTagId:n}=this.openElements,e.tagID===f.SVG&&this.treeAdapter.getTagName(t)===$.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(t)===W.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===f.MGLYPH||e.tagID===f.MALIGNMARK)&&n!==void 0&&!this._isIntegrationPoint(n,t,W.HTML)}_processToken(e){switch(e.type){case xe.CHARACTER:{this.onCharacter(e);break}case xe.NULL_CHARACTER:{this.onNullCharacter(e);break}case xe.COMMENT:{this.onComment(e);break}case xe.DOCTYPE:{this.onDoctype(e);break}case xe.START_TAG:{this._processStartTag(e);break}case xe.END_TAG:{this.onEndTag(e);break}case xe.EOF:{this.onEof(e);break}case xe.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,t,n){const i=this.treeAdapter.getNamespaceURI(t),r=this.treeAdapter.getAttrList(t);return Z2(e,i,r,n)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const t=this.activeFormattingElements.entries.findIndex(i=>i.type===oi.Marker||this.openElements.contains(i.element)),n=t===-1?e-1:t-1;for(let i=n;i>=0;i--){const r=this.activeFormattingElements.entries[i];this._insertElement(r.token,this.treeAdapter.getNamespaceURI(r.element)),r.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=A.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(f.P),this.openElements.popUntilTagNamePopped(f.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case f.TR:{this.insertionMode=A.IN_ROW;return}case f.TBODY:case f.THEAD:case f.TFOOT:{this.insertionMode=A.IN_TABLE_BODY;return}case f.CAPTION:{this.insertionMode=A.IN_CAPTION;return}case f.COLGROUP:{this.insertionMode=A.IN_COLUMN_GROUP;return}case f.TABLE:{this.insertionMode=A.IN_TABLE;return}case f.BODY:{this.insertionMode=A.IN_BODY;return}case f.FRAMESET:{this.insertionMode=A.IN_FRAMESET;return}case f.SELECT:{this._resetInsertionModeForSelect(e);return}case f.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case f.HTML:{this.insertionMode=this.headElement?A.AFTER_HEAD:A.BEFORE_HEAD;return}case f.TD:case f.TH:{if(e>0){this.insertionMode=A.IN_CELL;return}break}case f.HEAD:{if(e>0){this.insertionMode=A.IN_HEAD;return}break}}this.insertionMode=A.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){const n=this.openElements.tagIDs[t];if(n===f.TEMPLATE)break;if(n===f.TABLE){this.insertionMode=A.IN_SELECT_IN_TABLE;return}}this.insertionMode=A.IN_SELECT}_isElementCausesFosterParenting(e){return ak.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const t=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case f.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(t)===W.HTML)return{parent:this.treeAdapter.getTemplateContent(t),beforeElement:null};break}case f.TABLE:{const n=this.treeAdapter.getParentNode(t);return n?{parent:n,beforeElement:t}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_isSpecialElement(e,t){const n=this.treeAdapter.getNamespaceURI(e);return m2[n].has(t)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){EM(this,e);return}switch(this.insertionMode){case A.INITIAL:{ro(this,e);break}case A.BEFORE_HTML:{so(this,e);break}case A.BEFORE_HEAD:{ao(this,e);break}case A.IN_HEAD:{oo(this,e);break}case A.IN_HEAD_NO_SCRIPT:{co(this,e);break}case A.AFTER_HEAD:{lo(this,e);break}case A.IN_BODY:case A.IN_CAPTION:case A.IN_CELL:case A.IN_TEMPLATE:{uk(this,e);break}case A.TEXT:case A.IN_SELECT:case A.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case A.IN_TABLE:case A.IN_TABLE_BODY:case A.IN_ROW:{ap(this,e);break}case A.IN_TABLE_TEXT:{vk(this,e);break}case A.IN_COLUMN_GROUP:{ml(this,e);break}case A.AFTER_BODY:{vl(this,e);break}case A.AFTER_AFTER_BODY:{bl(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){_M(this,e);return}switch(this.insertionMode){case A.INITIAL:{ro(this,e);break}case A.BEFORE_HTML:{so(this,e);break}case A.BEFORE_HEAD:{ao(this,e);break}case A.IN_HEAD:{oo(this,e);break}case A.IN_HEAD_NO_SCRIPT:{co(this,e);break}case A.AFTER_HEAD:{lo(this,e);break}case A.TEXT:{this._insertCharacters(e);break}case A.IN_TABLE:case A.IN_TABLE_BODY:case A.IN_ROW:{ap(this,e);break}case A.IN_COLUMN_GROUP:{ml(this,e);break}case A.AFTER_BODY:{vl(this,e);break}case A.AFTER_AFTER_BODY:{bl(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){rp(this,e);return}switch(this.insertionMode){case A.INITIAL:case A.BEFORE_HTML:case A.BEFORE_HEAD:case A.IN_HEAD:case A.IN_HEAD_NO_SCRIPT:case A.AFTER_HEAD:case A.IN_BODY:case A.IN_TABLE:case A.IN_CAPTION:case A.IN_COLUMN_GROUP:case A.IN_TABLE_BODY:case A.IN_ROW:case A.IN_CELL:case A.IN_SELECT:case A.IN_SELECT_IN_TABLE:case A.IN_TEMPLATE:case A.IN_FRAMESET:case A.AFTER_FRAMESET:{rp(this,e);break}case A.IN_TABLE_TEXT:{po(this,e);break}case A.AFTER_BODY:{nD(this,e);break}case A.AFTER_AFTER_BODY:case A.AFTER_AFTER_FRAMESET:{iD(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case A.INITIAL:{rD(this,e);break}case A.BEFORE_HEAD:case A.IN_HEAD:case A.IN_HEAD_NO_SCRIPT:case A.AFTER_HEAD:{this._err(e,X.misplacedDoctype);break}case A.IN_TABLE_TEXT:{po(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,X.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?wM(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case A.INITIAL:{ro(this,e);break}case A.BEFORE_HTML:{sD(this,e);break}case A.BEFORE_HEAD:{oD(this,e);break}case A.IN_HEAD:{Zn(this,e);break}case A.IN_HEAD_NO_SCRIPT:{uD(this,e);break}case A.AFTER_HEAD:{hD(this,e);break}case A.IN_BODY:{Gt(this,e);break}case A.IN_TABLE:{js(this,e);break}case A.IN_TABLE_TEXT:{po(this,e);break}case A.IN_CAPTION:{cM(this,e);break}case A.IN_COLUMN_GROUP:{op(this,e);break}case A.IN_TABLE_BODY:{Ol(this,e);break}case A.IN_ROW:{gl(this,e);break}case A.IN_CELL:{dM(this,e);break}case A.IN_SELECT:{kk(this,e);break}case A.IN_SELECT_IN_TABLE:{pM(this,e);break}case A.IN_TEMPLATE:{mM(this,e);break}case A.AFTER_BODY:{gM(this,e);break}case A.IN_FRAMESET:{vM(this,e);break}case A.AFTER_FRAMESET:{TM(this,e);break}case A.AFTER_AFTER_BODY:{yM(this,e);break}case A.AFTER_AFTER_FRAMESET:{SM(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?CM(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case A.INITIAL:{ro(this,e);break}case A.BEFORE_HTML:{aD(this,e);break}case A.BEFORE_HEAD:{cD(this,e);break}case A.IN_HEAD:{lD(this,e);break}case A.IN_HEAD_NO_SCRIPT:{dD(this,e);break}case A.AFTER_HEAD:{pD(this,e);break}case A.IN_BODY:{fl(this,e);break}case A.TEXT:{KD(this,e);break}case A.IN_TABLE:{uo(this,e);break}case A.IN_TABLE_TEXT:{po(this,e);break}case A.IN_CAPTION:{lM(this,e);break}case A.IN_COLUMN_GROUP:{uM(this,e);break}case A.IN_TABLE_BODY:{cp(this,e);break}case A.IN_ROW:{Tk(this,e);break}case A.IN_CELL:{hM(this,e);break}case A.IN_SELECT:{yk(this,e);break}case A.IN_SELECT_IN_TABLE:{fM(this,e);break}case A.IN_TEMPLATE:{OM(this,e);break}case A.AFTER_BODY:{_k(this,e);break}case A.IN_FRAMESET:{bM(this,e);break}case A.AFTER_FRAMESET:{kM(this,e);break}case A.AFTER_AFTER_BODY:{bl(this,e);break}}}onEof(e){switch(this.insertionMode){case A.INITIAL:{ro(this,e);break}case A.BEFORE_HTML:{so(this,e);break}case A.BEFORE_HEAD:{ao(this,e);break}case A.IN_HEAD:{oo(this,e);break}case A.IN_HEAD_NO_SCRIPT:{co(this,e);break}case A.AFTER_HEAD:{lo(this,e);break}case A.IN_BODY:case A.IN_TABLE:case A.IN_CAPTION:case A.IN_COLUMN_GROUP:case A.IN_TABLE_BODY:case A.IN_ROW:case A.IN_CELL:case A.IN_SELECT:case A.IN_SELECT_IN_TABLE:{Ok(this,e);break}case A.TEXT:{JD(this,e);break}case A.IN_TABLE_TEXT:{po(this,e);break}case A.IN_TEMPLATE:{Sk(this,e);break}case A.AFTER_BODY:case A.IN_FRAMESET:case A.AFTER_FRAMESET:case A.AFTER_AFTER_BODY:case A.AFTER_AFTER_FRAMESET:{sp(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===E.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case A.IN_HEAD:case A.IN_HEAD_NO_SCRIPT:case A.AFTER_HEAD:case A.TEXT:case A.IN_COLUMN_GROUP:case A.IN_SELECT:case A.IN_SELECT_IN_TABLE:case A.IN_FRAMESET:case A.AFTER_FRAMESET:{this._insertCharacters(e);break}case A.IN_BODY:case A.IN_CAPTION:case A.IN_CELL:case A.IN_TEMPLATE:case A.AFTER_BODY:case A.AFTER_AFTER_BODY:case A.AFTER_AFTER_FRAMESET:{lk(this,e);break}case A.IN_TABLE:case A.IN_TABLE_BODY:case A.IN_ROW:{ap(this,e);break}case A.IN_TABLE_TEXT:{gk(this,e);break}}}};function Y2(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):mk(e,t),n}function H2(e,t){let n=null,i=e.openElements.stackTop;for(;i>=0;i--){const r=e.openElements.items[i];if(r===t.element)break;e._isSpecialElement(r,e.openElements.tagIDs[i])&&(n=r)}return n||(e.openElements.shortenToLength(Math.max(i,0)),e.activeFormattingElements.removeEntry(t)),n}function K2(e,t,n){let i=t,r=e.openElements.getCommonAncestor(t);for(let s=0,a=r;a!==n;s++,a=r){r=e.openElements.getCommonAncestor(a);const o=e.activeFormattingElements.getElementEntry(a),c=o&&s>=W2;!o||c?(c&&e.activeFormattingElements.removeEntry(o),e.openElements.remove(a)):(a=J2(e,o),i===t&&(e.activeFormattingElements.bookmark=o),e.treeAdapter.detachNode(i),e.treeAdapter.appendChild(a,i),i=a)}return i}function J2(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),i=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,i),t.element=i,i}function eD(e,t,n){const i=e.treeAdapter.getTagName(t),r=Zs(i);if(e._isElementCausesFosterParenting(r))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);r===f.TEMPLATE&&s===W.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function tD(e,t,n){const i=e.treeAdapter.getNamespaceURI(n.element),{token:r}=n,s=e.treeAdapter.createElement(r.tagName,i,r.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,r),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,r.tagID)}function ip(e,t){for(let n=0;n<V2;n++){const i=Y2(e,t);if(!i)break;const r=H2(e,i);if(!r)break;e.activeFormattingElements.bookmark=i;const s=K2(e,r,i.element),a=e.openElements.getCommonAncestor(i.element);e.treeAdapter.detachNode(s),a&&eD(e,a,s),tD(e,r,i)}}function rp(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function nD(e,t){e._appendCommentNode(t,e.openElements.items[0])}function iD(e,t){e._appendCommentNode(t,e.document)}function sp(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let i=e.openElements.stackTop;i>=n;i--)e._setEndLocation(e.openElements.items[i],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const i=e.openElements.items[0],r=e.treeAdapter.getNodeSourceCodeLocation(i);if(r&&!r.endTag&&(e._setEndLocation(i,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],a=e.treeAdapter.getNodeSourceCodeLocation(s);a&&!a.endTag&&e._setEndLocation(s,t)}}}}function rD(e,t){e._setDocumentType(t);const n=t.forceQuirks?An.QUIRKS:N2(t);Q2(t)||e._err(t,X.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=A.BEFORE_HTML}function ro(e,t){e._err(t,X.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,An.QUIRKS),e.insertionMode=A.BEFORE_HTML,e._processToken(t)}function sD(e,t){t.tagID===f.HTML?(e._insertElement(t,W.HTML),e.insertionMode=A.BEFORE_HEAD):so(e,t)}function aD(e,t){const n=t.tagID;(n===f.HTML||n===f.HEAD||n===f.BODY||n===f.BR)&&so(e,t)}function so(e,t){e._insertFakeRootElement(),e.insertionMode=A.BEFORE_HEAD,e._processToken(t)}function oD(e,t){switch(t.tagID){case f.HTML:{Gt(e,t);break}case f.HEAD:{e._insertElement(t,W.HTML),e.headElement=e.openElements.current,e.insertionMode=A.IN_HEAD;break}default:ao(e,t)}}function cD(e,t){const n=t.tagID;n===f.HEAD||n===f.BODY||n===f.HTML||n===f.BR?ao(e,t):e._err(t,X.endTagWithoutMatchingOpenElement)}function ao(e,t){e._insertFakeElement($.HEAD,f.HEAD),e.headElement=e.openElements.current,e.insertionMode=A.IN_HEAD,e._processToken(t)}function Zn(e,t){switch(t.tagID){case f.HTML:{Gt(e,t);break}case f.BASE:case f.BASEFONT:case f.BGSOUND:case f.LINK:case f.META:{e._appendElement(t,W.HTML),t.ackSelfClosing=!0;break}case f.TITLE:{e._switchToTextParsing(t,Tt.RCDATA);break}case f.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Tt.RAWTEXT):(e._insertElement(t,W.HTML),e.insertionMode=A.IN_HEAD_NO_SCRIPT);break}case f.NOFRAMES:case f.STYLE:{e._switchToTextParsing(t,Tt.RAWTEXT);break}case f.SCRIPT:{e._switchToTextParsing(t,Tt.SCRIPT_DATA);break}case f.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=A.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(A.IN_TEMPLATE);break}case f.HEAD:{e._err(t,X.misplacedStartTagForHeadElement);break}default:oo(e,t)}}function lD(e,t){switch(t.tagID){case f.HEAD:{e.openElements.pop(),e.insertionMode=A.AFTER_HEAD;break}case f.BODY:case f.BR:case f.HTML:{oo(e,t);break}case f.TEMPLATE:{Jr(e,t);break}default:e._err(t,X.endTagWithoutMatchingOpenElement)}}function Jr(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==f.TEMPLATE&&e._err(t,X.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(f.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,X.endTagWithoutMatchingOpenElement)}function oo(e,t){e.openElements.pop(),e.insertionMode=A.AFTER_HEAD,e._processToken(t)}function uD(e,t){switch(t.tagID){case f.HTML:{Gt(e,t);break}case f.BASEFONT:case f.BGSOUND:case f.HEAD:case f.LINK:case f.META:case f.NOFRAMES:case f.STYLE:{Zn(e,t);break}case f.NOSCRIPT:{e._err(t,X.nestedNoscriptInHead);break}default:co(e,t)}}function dD(e,t){switch(t.tagID){case f.NOSCRIPT:{e.openElements.pop(),e.insertionMode=A.IN_HEAD;break}case f.BR:{co(e,t);break}default:e._err(t,X.endTagWithoutMatchingOpenElement)}}function co(e,t){const n=t.type===xe.EOF?X.openElementsLeftAfterEof:X.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=A.IN_HEAD,e._processToken(t)}function hD(e,t){switch(t.tagID){case f.HTML:{Gt(e,t);break}case f.BODY:{e._insertElement(t,W.HTML),e.framesetOk=!1,e.insertionMode=A.IN_BODY;break}case f.FRAMESET:{e._insertElement(t,W.HTML),e.insertionMode=A.IN_FRAMESET;break}case f.BASE:case f.BASEFONT:case f.BGSOUND:case f.LINK:case f.META:case f.NOFRAMES:case f.SCRIPT:case f.STYLE:case f.TEMPLATE:case f.TITLE:{e._err(t,X.abandonedHeadElementChild),e.openElements.push(e.headElement,f.HEAD),Zn(e,t),e.openElements.remove(e.headElement);break}case f.HEAD:{e._err(t,X.misplacedStartTagForHeadElement);break}default:lo(e,t)}}function pD(e,t){switch(t.tagID){case f.BODY:case f.HTML:case f.BR:{lo(e,t);break}case f.TEMPLATE:{Jr(e,t);break}default:e._err(t,X.endTagWithoutMatchingOpenElement)}}function lo(e,t){e._insertFakeElement($.BODY,f.BODY),e.insertionMode=A.IN_BODY,pl(e,t)}function pl(e,t){switch(t.type){case xe.CHARACTER:{uk(e,t);break}case xe.WHITESPACE_CHARACTER:{lk(e,t);break}case xe.COMMENT:{rp(e,t);break}case xe.START_TAG:{Gt(e,t);break}case xe.END_TAG:{fl(e,t);break}case xe.EOF:{Ok(e,t);break}}}function lk(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function uk(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function fD(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function mD(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function OD(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,W.HTML),e.insertionMode=A.IN_FRAMESET)}function gD(e,t){e.openElements.hasInButtonScope(f.P)&&e._closePElement(),e._insertElement(t,W.HTML)}function vD(e,t){e.openElements.hasInButtonScope(f.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&ep.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,W.HTML)}function bD(e,t){e.openElements.hasInButtonScope(f.P)&&e._closePElement(),e._insertElement(t,W.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function TD(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(f.P)&&e._closePElement(),e._insertElement(t,W.HTML),n||(e.formElement=e.openElements.current))}function kD(e,t){e.framesetOk=!1;const n=t.tagID;for(let i=e.openElements.stackTop;i>=0;i--){const r=e.openElements.tagIDs[i];if(n===f.LI&&r===f.LI||(n===f.DD||n===f.DT)&&(r===f.DD||r===f.DT)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.popUntilTagNamePopped(r);break}if(r!==f.ADDRESS&&r!==f.DIV&&r!==f.P&&e._isSpecialElement(e.openElements.items[i],r))break}e.openElements.hasInButtonScope(f.P)&&e._closePElement(),e._insertElement(t,W.HTML)}function yD(e,t){e.openElements.hasInButtonScope(f.P)&&e._closePElement(),e._insertElement(t,W.HTML),e.tokenizer.state=Tt.PLAINTEXT}function SD(e,t){e.openElements.hasInScope(f.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(f.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,W.HTML),e.framesetOk=!1}function _D(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName($.A);n&&(ip(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,W.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function ED(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,W.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function wD(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(f.NOBR)&&(ip(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,W.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function CD(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,W.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function xD(e,t){e.treeAdapter.getDocumentMode(e.document)!==An.QUIRKS&&e.openElements.hasInButtonScope(f.P)&&e._closePElement(),e._insertElement(t,W.HTML),e.framesetOk=!1,e.insertionMode=A.IN_TABLE}function dk(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,W.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function hk(e){const t=BT(e,Kr.TYPE);return t!=null&&t.toLowerCase()===j2}function PD(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,W.HTML),hk(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function RD(e,t){e._appendElement(t,W.HTML),t.ackSelfClosing=!0}function AD(e,t){e.openElements.hasInButtonScope(f.P)&&e._closePElement(),e._appendElement(t,W.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function ID(e,t){t.tagName=$.IMG,t.tagID=f.IMG,dk(e,t)}function QD(e,t){e._insertElement(t,W.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Tt.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=A.TEXT}function ND(e,t){e.openElements.hasInButtonScope(f.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Tt.RAWTEXT)}function DD(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Tt.RAWTEXT)}function pk(e,t){e._switchToTextParsing(t,Tt.RAWTEXT)}function MD(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,W.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===A.IN_TABLE||e.insertionMode===A.IN_CAPTION||e.insertionMode===A.IN_TABLE_BODY||e.insertionMode===A.IN_ROW||e.insertionMode===A.IN_CELL?A.IN_SELECT_IN_TABLE:A.IN_SELECT}function LD(e,t){e.openElements.currentTagId===f.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,W.HTML)}function $D(e,t){e.openElements.hasInScope(f.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,W.HTML)}function UD(e,t){e.openElements.hasInScope(f.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(f.RTC),e._insertElement(t,W.HTML)}function qD(e,t){e._reconstructActiveFormattingElements(),rk(t),np(t),t.selfClosing?e._appendElement(t,W.MATHML):e._insertElement(t,W.MATHML),t.ackSelfClosing=!0}function XD(e,t){e._reconstructActiveFormattingElements(),sk(t),np(t),t.selfClosing?e._appendElement(t,W.SVG):e._insertElement(t,W.SVG),t.ackSelfClosing=!0}function fk(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,W.HTML)}function Gt(e,t){switch(t.tagID){case f.I:case f.S:case f.B:case f.U:case f.EM:case f.TT:case f.BIG:case f.CODE:case f.FONT:case f.SMALL:case f.STRIKE:case f.STRONG:{ED(e,t);break}case f.A:{_D(e,t);break}case f.H1:case f.H2:case f.H3:case f.H4:case f.H5:case f.H6:{vD(e,t);break}case f.P:case f.DL:case f.OL:case f.UL:case f.DIV:case f.DIR:case f.NAV:case f.MAIN:case f.MENU:case f.ASIDE:case f.CENTER:case f.FIGURE:case f.FOOTER:case f.HEADER:case f.HGROUP:case f.DIALOG:case f.DETAILS:case f.ADDRESS:case f.ARTICLE:case f.SEARCH:case f.SECTION:case f.SUMMARY:case f.FIELDSET:case f.BLOCKQUOTE:case f.FIGCAPTION:{gD(e,t);break}case f.LI:case f.DD:case f.DT:{kD(e,t);break}case f.BR:case f.IMG:case f.WBR:case f.AREA:case f.EMBED:case f.KEYGEN:{dk(e,t);break}case f.HR:{AD(e,t);break}case f.RB:case f.RTC:{$D(e,t);break}case f.RT:case f.RP:{UD(e,t);break}case f.PRE:case f.LISTING:{bD(e,t);break}case f.XMP:{ND(e,t);break}case f.SVG:{XD(e,t);break}case f.HTML:{fD(e,t);break}case f.BASE:case f.LINK:case f.META:case f.STYLE:case f.TITLE:case f.SCRIPT:case f.BGSOUND:case f.BASEFONT:case f.TEMPLATE:{Zn(e,t);break}case f.BODY:{mD(e,t);break}case f.FORM:{TD(e,t);break}case f.NOBR:{wD(e,t);break}case f.MATH:{qD(e,t);break}case f.TABLE:{xD(e,t);break}case f.INPUT:{PD(e,t);break}case f.PARAM:case f.TRACK:case f.SOURCE:{RD(e,t);break}case f.IMAGE:{ID(e,t);break}case f.BUTTON:{SD(e,t);break}case f.APPLET:case f.OBJECT:case f.MARQUEE:{CD(e,t);break}case f.IFRAME:{DD(e,t);break}case f.SELECT:{MD(e,t);break}case f.OPTION:case f.OPTGROUP:{LD(e,t);break}case f.NOEMBED:case f.NOFRAMES:{pk(e,t);break}case f.FRAMESET:{OD(e,t);break}case f.TEXTAREA:{QD(e,t);break}case f.NOSCRIPT:{e.options.scriptingEnabled?pk(e,t):fk(e,t);break}case f.PLAINTEXT:{yD(e,t);break}case f.COL:case f.TH:case f.TD:case f.TR:case f.HEAD:case f.FRAME:case f.TBODY:case f.TFOOT:case f.THEAD:case f.CAPTION:case f.COLGROUP:break;default:fk(e,t)}}function FD(e,t){if(e.openElements.hasInScope(f.BODY)&&(e.insertionMode=A.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function zD(e,t){e.openElements.hasInScope(f.BODY)&&(e.insertionMode=A.AFTER_BODY,_k(e,t))}function BD(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function ZD(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(f.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(f.FORM):n&&e.openElements.remove(n))}function jD(e){e.openElements.hasInButtonScope(f.P)||e._insertFakeElement($.P,f.P),e._closePElement()}function VD(e){e.openElements.hasInListItemScope(f.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(f.LI),e.openElements.popUntilTagNamePopped(f.LI))}function WD(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function GD(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function YD(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function HD(e){e._reconstructActiveFormattingElements(),e._insertFakeElement($.BR,f.BR),e.openElements.pop(),e.framesetOk=!1}function mk(e,t){const n=t.tagName,i=t.tagID;for(let r=e.openElements.stackTop;r>0;r--){const s=e.openElements.items[r],a=e.openElements.tagIDs[r];if(i===a&&(i!==f.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.stackTop>=r&&e.openElements.shortenToLength(r);break}if(e._isSpecialElement(s,a))break}}function fl(e,t){switch(t.tagID){case f.A:case f.B:case f.I:case f.S:case f.U:case f.EM:case f.TT:case f.BIG:case f.CODE:case f.FONT:case f.NOBR:case f.SMALL:case f.STRIKE:case f.STRONG:{ip(e,t);break}case f.P:{jD(e);break}case f.DL:case f.UL:case f.OL:case f.DIR:case f.DIV:case f.NAV:case f.PRE:case f.MAIN:case f.MENU:case f.ASIDE:case f.BUTTON:case f.CENTER:case f.FIGURE:case f.FOOTER:case f.HEADER:case f.HGROUP:case f.DIALOG:case f.ADDRESS:case f.ARTICLE:case f.DETAILS:case f.SEARCH:case f.SECTION:case f.SUMMARY:case f.LISTING:case f.FIELDSET:case f.BLOCKQUOTE:case f.FIGCAPTION:{BD(e,t);break}case f.LI:{VD(e);break}case f.DD:case f.DT:{WD(e,t);break}case f.H1:case f.H2:case f.H3:case f.H4:case f.H5:case f.H6:{GD(e);break}case f.BR:{HD(e);break}case f.BODY:{FD(e,t);break}case f.HTML:{zD(e,t);break}case f.FORM:{ZD(e);break}case f.APPLET:case f.OBJECT:case f.MARQUEE:{YD(e,t);break}case f.TEMPLATE:{Jr(e,t);break}default:mk(e,t)}}function Ok(e,t){e.tmplInsertionModeStack.length>0?Sk(e,t):sp(e,t)}function KD(e,t){var n;t.tagID===f.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function JD(e,t){e._err(t,X.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function ap(e,t){if(e.openElements.currentTagId!==void 0&&ak.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=A.IN_TABLE_TEXT,t.type){case xe.CHARACTER:{vk(e,t);break}case xe.WHITESPACE_CHARACTER:{gk(e,t);break}}else ho(e,t)}function eM(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,W.HTML),e.insertionMode=A.IN_CAPTION}function tM(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,W.HTML),e.insertionMode=A.IN_COLUMN_GROUP}function nM(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement($.COLGROUP,f.COLGROUP),e.insertionMode=A.IN_COLUMN_GROUP,op(e,t)}function iM(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,W.HTML),e.insertionMode=A.IN_TABLE_BODY}function rM(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement($.TBODY,f.TBODY),e.insertionMode=A.IN_TABLE_BODY,Ol(e,t)}function sM(e,t){e.openElements.hasInTableScope(f.TABLE)&&(e.openElements.popUntilTagNamePopped(f.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function aM(e,t){hk(t)?e._appendElement(t,W.HTML):ho(e,t),t.ackSelfClosing=!0}function oM(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,W.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function js(e,t){switch(t.tagID){case f.TD:case f.TH:case f.TR:{rM(e,t);break}case f.STYLE:case f.SCRIPT:case f.TEMPLATE:{Zn(e,t);break}case f.COL:{nM(e,t);break}case f.FORM:{oM(e,t);break}case f.TABLE:{sM(e,t);break}case f.TBODY:case f.TFOOT:case f.THEAD:{iM(e,t);break}case f.INPUT:{aM(e,t);break}case f.CAPTION:{eM(e,t);break}case f.COLGROUP:{tM(e,t);break}default:ho(e,t)}}function uo(e,t){switch(t.tagID){case f.TABLE:{e.openElements.hasInTableScope(f.TABLE)&&(e.openElements.popUntilTagNamePopped(f.TABLE),e._resetInsertionMode());break}case f.TEMPLATE:{Jr(e,t);break}case f.BODY:case f.CAPTION:case f.COL:case f.COLGROUP:case f.HTML:case f.TBODY:case f.TD:case f.TFOOT:case f.TH:case f.THEAD:case f.TR:break;default:ho(e,t)}}function ho(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,pl(e,t),e.fosterParentingEnabled=n}function gk(e,t){e.pendingCharacterTokens.push(t)}function vk(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function po(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)ho(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const bk=new Set([f.CAPTION,f.COL,f.COLGROUP,f.TBODY,f.TD,f.TFOOT,f.TH,f.THEAD,f.TR]);function cM(e,t){const n=t.tagID;bk.has(n)?e.openElements.hasInTableScope(f.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(f.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=A.IN_TABLE,js(e,t)):Gt(e,t)}function lM(e,t){const n=t.tagID;switch(n){case f.CAPTION:case f.TABLE:{e.openElements.hasInTableScope(f.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(f.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=A.IN_TABLE,n===f.TABLE&&uo(e,t));break}case f.BODY:case f.COL:case f.COLGROUP:case f.HTML:case f.TBODY:case f.TD:case f.TFOOT:case f.TH:case f.THEAD:case f.TR:break;default:fl(e,t)}}function op(e,t){switch(t.tagID){case f.HTML:{Gt(e,t);break}case f.COL:{e._appendElement(t,W.HTML),t.ackSelfClosing=!0;break}case f.TEMPLATE:{Zn(e,t);break}default:ml(e,t)}}function uM(e,t){switch(t.tagID){case f.COLGROUP:{e.openElements.currentTagId===f.COLGROUP&&(e.openElements.pop(),e.insertionMode=A.IN_TABLE);break}case f.TEMPLATE:{Jr(e,t);break}case f.COL:break;default:ml(e,t)}}function ml(e,t){e.openElements.currentTagId===f.COLGROUP&&(e.openElements.pop(),e.insertionMode=A.IN_TABLE,e._processToken(t))}function Ol(e,t){switch(t.tagID){case f.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,W.HTML),e.insertionMode=A.IN_ROW;break}case f.TH:case f.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement($.TR,f.TR),e.insertionMode=A.IN_ROW,gl(e,t);break}case f.CAPTION:case f.COL:case f.COLGROUP:case f.TBODY:case f.TFOOT:case f.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=A.IN_TABLE,js(e,t));break}default:js(e,t)}}function cp(e,t){const n=t.tagID;switch(t.tagID){case f.TBODY:case f.TFOOT:case f.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=A.IN_TABLE);break}case f.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=A.IN_TABLE,uo(e,t));break}case f.BODY:case f.CAPTION:case f.COL:case f.COLGROUP:case f.HTML:case f.TD:case f.TH:case f.TR:break;default:uo(e,t)}}function gl(e,t){switch(t.tagID){case f.TH:case f.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,W.HTML),e.insertionMode=A.IN_CELL,e.activeFormattingElements.insertMarker();break}case f.CAPTION:case f.COL:case f.COLGROUP:case f.TBODY:case f.TFOOT:case f.THEAD:case f.TR:{e.openElements.hasInTableScope(f.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=A.IN_TABLE_BODY,Ol(e,t));break}default:js(e,t)}}function Tk(e,t){switch(t.tagID){case f.TR:{e.openElements.hasInTableScope(f.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=A.IN_TABLE_BODY);break}case f.TABLE:{e.openElements.hasInTableScope(f.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=A.IN_TABLE_BODY,cp(e,t));break}case f.TBODY:case f.TFOOT:case f.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(f.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=A.IN_TABLE_BODY,cp(e,t));break}case f.BODY:case f.CAPTION:case f.COL:case f.COLGROUP:case f.HTML:case f.TD:case f.TH:break;default:uo(e,t)}}function dM(e,t){const n=t.tagID;bk.has(n)?(e.openElements.hasInTableScope(f.TD)||e.openElements.hasInTableScope(f.TH))&&(e._closeTableCell(),gl(e,t)):Gt(e,t)}function hM(e,t){const n=t.tagID;switch(n){case f.TD:case f.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=A.IN_ROW);break}case f.TABLE:case f.TBODY:case f.TFOOT:case f.THEAD:case f.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Tk(e,t));break}case f.BODY:case f.CAPTION:case f.COL:case f.COLGROUP:case f.HTML:break;default:fl(e,t)}}function kk(e,t){switch(t.tagID){case f.HTML:{Gt(e,t);break}case f.OPTION:{e.openElements.currentTagId===f.OPTION&&e.openElements.pop(),e._insertElement(t,W.HTML);break}case f.OPTGROUP:{e.openElements.currentTagId===f.OPTION&&e.openElements.pop(),e.openElements.currentTagId===f.OPTGROUP&&e.openElements.pop(),e._insertElement(t,W.HTML);break}case f.HR:{e.openElements.currentTagId===f.OPTION&&e.openElements.pop(),e.openElements.currentTagId===f.OPTGROUP&&e.openElements.pop(),e._appendElement(t,W.HTML),t.ackSelfClosing=!0;break}case f.INPUT:case f.KEYGEN:case f.TEXTAREA:case f.SELECT:{e.openElements.hasInSelectScope(f.SELECT)&&(e.openElements.popUntilTagNamePopped(f.SELECT),e._resetInsertionMode(),t.tagID!==f.SELECT&&e._processStartTag(t));break}case f.SCRIPT:case f.TEMPLATE:{Zn(e,t);break}}}function yk(e,t){switch(t.tagID){case f.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===f.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===f.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===f.OPTGROUP&&e.openElements.pop();break}case f.OPTION:{e.openElements.currentTagId===f.OPTION&&e.openElements.pop();break}case f.SELECT:{e.openElements.hasInSelectScope(f.SELECT)&&(e.openElements.popUntilTagNamePopped(f.SELECT),e._resetInsertionMode());break}case f.TEMPLATE:{Jr(e,t);break}}}function pM(e,t){const n=t.tagID;n===f.CAPTION||n===f.TABLE||n===f.TBODY||n===f.TFOOT||n===f.THEAD||n===f.TR||n===f.TD||n===f.TH?(e.openElements.popUntilTagNamePopped(f.SELECT),e._resetInsertionMode(),e._processStartTag(t)):kk(e,t)}function fM(e,t){const n=t.tagID;n===f.CAPTION||n===f.TABLE||n===f.TBODY||n===f.TFOOT||n===f.THEAD||n===f.TR||n===f.TD||n===f.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(f.SELECT),e._resetInsertionMode(),e.onEndTag(t)):yk(e,t)}function mM(e,t){switch(t.tagID){case f.BASE:case f.BASEFONT:case f.BGSOUND:case f.LINK:case f.META:case f.NOFRAMES:case f.SCRIPT:case f.STYLE:case f.TEMPLATE:case f.TITLE:{Zn(e,t);break}case f.CAPTION:case f.COLGROUP:case f.TBODY:case f.TFOOT:case f.THEAD:{e.tmplInsertionModeStack[0]=A.IN_TABLE,e.insertionMode=A.IN_TABLE,js(e,t);break}case f.COL:{e.tmplInsertionModeStack[0]=A.IN_COLUMN_GROUP,e.insertionMode=A.IN_COLUMN_GROUP,op(e,t);break}case f.TR:{e.tmplInsertionModeStack[0]=A.IN_TABLE_BODY,e.insertionMode=A.IN_TABLE_BODY,Ol(e,t);break}case f.TD:case f.TH:{e.tmplInsertionModeStack[0]=A.IN_ROW,e.insertionMode=A.IN_ROW,gl(e,t);break}default:e.tmplInsertionModeStack[0]=A.IN_BODY,e.insertionMode=A.IN_BODY,Gt(e,t)}}function OM(e,t){t.tagID===f.TEMPLATE&&Jr(e,t)}function Sk(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(f.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):sp(e,t)}function gM(e,t){t.tagID===f.HTML?Gt(e,t):vl(e,t)}function _k(e,t){var n;if(t.tagID===f.HTML){if(e.fragmentContext||(e.insertionMode=A.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===f.HTML){e._setEndLocation(e.openElements.items[0],t);const i=e.openElements.items[1];i&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(i))===null||n===void 0)&&n.endTag)&&e._setEndLocation(i,t)}}else vl(e,t)}function vl(e,t){e.insertionMode=A.IN_BODY,pl(e,t)}function vM(e,t){switch(t.tagID){case f.HTML:{Gt(e,t);break}case f.FRAMESET:{e._insertElement(t,W.HTML);break}case f.FRAME:{e._appendElement(t,W.HTML),t.ackSelfClosing=!0;break}case f.NOFRAMES:{Zn(e,t);break}}}function bM(e,t){t.tagID===f.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==f.FRAMESET&&(e.insertionMode=A.AFTER_FRAMESET))}function TM(e,t){switch(t.tagID){case f.HTML:{Gt(e,t);break}case f.NOFRAMES:{Zn(e,t);break}}}function kM(e,t){t.tagID===f.HTML&&(e.insertionMode=A.AFTER_AFTER_FRAMESET)}function yM(e,t){t.tagID===f.HTML?Gt(e,t):bl(e,t)}function bl(e,t){e.insertionMode=A.IN_BODY,pl(e,t)}function SM(e,t){switch(t.tagID){case f.HTML:{Gt(e,t);break}case f.NOFRAMES:{Zn(e,t);break}}}function _M(e,t){t.chars=pt,e._insertCharacters(t)}function EM(e,t){e._insertCharacters(t),e.framesetOk=!1}function Ek(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==W.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function wM(e,t){if(X2(t))Ek(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),i=e.treeAdapter.getNamespaceURI(n);i===W.MATHML?rk(t):i===W.SVG&&(F2(t),sk(t)),np(t),t.selfClosing?e._appendElement(t,i):e._insertElement(t,i),t.ackSelfClosing=!0}}function CM(e,t){if(t.tagID===f.P||t.tagID===f.BR){Ek(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const i=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(i)===W.HTML){e._endTagOutsideForeignContent(t);break}const r=e.treeAdapter.getTagName(i);if(r.toLowerCase()===t.tagName){t.tagName=r,e.openElements.shortenToLength(n);break}}}$.AREA,$.BASE,$.BASEFONT,$.BGSOUND,$.BR,$.COL,$.EMBED,$.FRAME,$.HR,$.IMG,$.INPUT,$.KEYGEN,$.LINK,$.META,$.PARAM,$.SOURCE,$.TRACK,$.WBR;const Tl=(function(e){if(e==null)return AM;if(typeof e=="function")return kl(e);if(typeof e=="object")return Array.isArray(e)?xM(e):PM(e);if(typeof e=="string")return RM(e);throw new Error("Expected function, string, or object as test")});function xM(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Tl(e[n]);return kl(i);function i(...r){let s=-1;for(;++s<t.length;)if(t[s].apply(this,r))return!0;return!1}}function PM(e){const t=e;return kl(n);function n(i){const r=i;let s;for(s in e)if(r[s]!==t[s])return!1;return!0}}function RM(e){return kl(t);function t(n){return n&&n.type===e}}function kl(e){return t;function t(n,i,r){return!!(IM(n)&&e.call(this,n,typeof i=="number"?i:void 0,r||void 0))}}function AM(){return!0}function IM(e){return e!==null&&typeof e=="object"&&"type"in e}const wk=[],fo=!0,lp=!1,up="skip";function Ck(e,t,n,i){let r;typeof t=="function"&&typeof n!="function"?(i=n,n=t):r=t;const s=Tl(r),a=i?-1:1;o(e,void 0,[])();function o(c,l,u){const d=c&&typeof c=="object"?c:{};if(typeof d.type=="string"){const p=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(c.type+(p?"<"+p+">":""))+")"})}return h;function h(){let p=wk,O,m,b;if((!t||s(c,l,u[u.length-1]||void 0))&&(p=QM(n(c,u)),p[0]===lp))return p;if("children"in c&&c.children){const v=c;if(v.children&&p[0]!==up)for(m=(i?v.children.length:-1)+a,b=u.concat(v);m>-1&&m<v.children.length;){const k=v.children[m];if(O=o(k,m,b)(),O[0]===lp)return O;m=typeof O[1]=="number"?O[1]:m+a}}return p}}}function QM(e){return Array.isArray(e)?e:typeof e=="number"?[fo,e]:e==null?wk:[e]}function Vs(e,t,n,i){let r,s,a;typeof t=="function"&&typeof n!="function"?(s=void 0,a=t,r=n):(s=t,a=n,r=i),Ck(e,s,o,r);function o(c,l){const u=l[l.length-1],d=u?u.children.indexOf(c):void 0;return a(c,d,u)}}const NM=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,DM=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),xk={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function Pk(e,t){const n=ZM(e),i=UT("type",{handlers:{root:MM,element:LM,text:$M,comment:Ak,doctype:UM,raw:XM},unknown:FM}),r={parser:n?new ck(xk):ck.getFragmentParser(void 0,xk),handle(o){i(o,r)},stitches:!1,options:t||{}};i(e,r),Ws(r,ai());const s=n?r.parser.document:r.parser.getFragment(),a=qN(s,{file:r.options.file});return r.stitches&&Vs(a,"comment",function(o,c,l){const u=o;if(u.value.stitch&&l&&c!==void 0){const d=l.children;return d[c]=u.value.stitch,c}}),a.type==="root"&&a.children.length===1&&a.children[0].type===e.type?a.children[0]:a}function Rk(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function MM(e,t){Rk(e.children,t)}function LM(e,t){zM(e,t),Rk(e.children,t),BM(e,t)}function $M(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:xe.CHARACTER,chars:e.value,location:mo(e)};Ws(t,ai(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function UM(e,t){const n={type:xe.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:mo(e)};Ws(t,ai(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function qM(e,t){t.stitches=!0;const n=jM(e);if("children"in e&&"children"in n){const i=Pk({type:"root",children:e.children},t.options);n.children=i.children}Ak({type:"comment",value:{stitch:n}},t)}function Ak(e,t){const n=e.value,i={type:xe.COMMENT,data:n,location:mo(e)};Ws(t,ai(e)),t.parser.currentToken=i,t.parser._processToken(t.parser.currentToken)}function XM(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,Ik(t,ai(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(NM,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function FM(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))qM(n,t);else{let i="";throw DM.has(n.type)&&(i=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+i)}}function Ws(e,t){Ik(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Tt.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function Ik(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function zM(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Tt.PLAINTEXT)return;Ws(t,ai(e));const i=t.parser.openElements.current;let r="namespaceURI"in i?i.namespaceURI:Hr.html;r===Hr.html&&n==="svg"&&(r=Hr.svg);const s=ZN({...e,children:[]},{space:r===Hr.svg?"svg":"html"}),a={type:xe.START_TAG,tagName:n,tagID:Zs(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:mo(e)};t.parser.currentToken=a,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function BM(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&JN.includes(n)||t.parser.tokenizer.state===Tt.PLAINTEXT)return;Ws(t,cl(e));const i={type:xe.END_TAG,tagName:n,tagID:Zs(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:mo(e)};t.parser.currentToken=i,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Tt.RCDATA||t.parser.tokenizer.state===Tt.RAWTEXT||t.parser.tokenizer.state===Tt.SCRIPT_DATA)&&(t.parser.tokenizer.state=Tt.DATA)}function ZM(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function mo(e){const t=ai(e)||{line:void 0,column:void 0,offset:void 0},n=cl(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function jM(e){return"children"in e?Wr({...e,children:[]}):Wr(e)}function VM(e){return function(t,n){return Pk(t,{...e,file:n})}}function WM({defaultOrigin:e="",allowedLinkPrefixes:t=[],allowedImagePrefixes:n=[],allowDataImages:i=!1,allowedProtocols:r=[],blockedImageClass:s="inline-block bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-3 py-1 rounded text-sm",blockedLinkClass:a="text-gray-500"}){const o=t.length&&!t.every(l=>l==="*"),c=n.length&&!n.every(l=>l==="*");if(!e&&(o||c))throw new Error("defaultOrigin is required when allowedLinkPrefixes or allowedImagePrefixes are provided");return l=>{const u=KM(e,t,n,i,r,s,a);Vs(l,u)}}function Qk(e,t){if(typeof e!="string")return null;try{return new URL(e)}catch{if(t)try{return new URL(e,t)}catch{return null}if(e.startsWith("/")||e.startsWith("./")||e.startsWith("../"))try{return new URL(e,"http://example.com")}catch{return null}return null}}function GM(e){return typeof e!="string"?!1:e.startsWith("/")||e.startsWith("./")||e.startsWith("../")}const YM=new Set(["https:","http:","irc:","ircs:","mailto:","xmpp:","blob:"]),HM=new Set(["javascript:","data:","file:","vbscript:"]);function Nk(e,t,n,i=!1,r=!1,s=[]){if(!e)return null;if(typeof e=="string"&&e.startsWith("#")&&!r)try{if(new URL(e,"http://example.com").hash===e)return e}catch{}if(typeof e=="string"&&e.startsWith("data:"))return r&&i&&e.startsWith("data:image/")?e:null;if(typeof e=="string"&&e.startsWith("blob:")){try{if(new URL(e).protocol==="blob:"&&e.length>5){const c=e.substring(5);if(c&&c.length>0&&c!=="invalid")return e}}catch{return null}return null}const a=Qk(e,n);if(!a||HM.has(a.protocol)||!(YM.has(a.protocol)||s.includes(a.protocol)||s.includes("*")))return null;if(a.protocol==="mailto:"||!a.protocol.match(/^https?:$/))return a.href;const o=GM(e);return a&&t.some(c=>{const l=Qk(c,n);return!l||l.origin!==a.origin?!1:a.href.startsWith(l.href)})?o?a.pathname+a.search+a.hash:a.href:t.includes("*")?a.protocol!=="https:"&&a.protocol!=="http:"?null:o?a.pathname+a.search+a.hash:a.href:null}const dp=Symbol("node-seen"),KM=(e,t,n,i,r,s,a)=>{const o=(c,l,u)=>{if(c.type!=="element"||c[dp])return fo;if(c.tagName==="a"){const d=Nk(c.properties.href,t,e,!1,!1,r);return d===null?(c[dp]=!0,Vs(c,o),u&&typeof l=="number"&&(u.children[l]={type:"element",tagName:"span",properties:{title:"Blocked URL: "+String(c.properties.href),class:a},children:[...c.children,{type:"text",value:" [blocked]"}]}),up):(c.properties.href=d,c.properties.target="_blank",c.properties.rel="noopener noreferrer",fo)}if(c.tagName==="img"){const d=Nk(c.properties.src,n,e,i,!0,r);return d===null?(c[dp]=!0,Vs(c,o),u&&typeof l=="number"&&(u.children[l]={type:"element",tagName:"span",properties:{class:s},children:[{type:"text",value:"[Image blocked: "+String(c.properties.alt||"No description")+"]"}]}),up):(c.properties.src=d,fo)}return fo};return o},Li={eof:null,asterisk:42,underscore:95,tilde:126},Gs={attentionSideAfter:2,characterGroupPunctuation:2,characterGroupWhitespace:1},ci={data:"data",characterEscape:"characterEscape",emphasis:"emphasis",emphasisSequence:"emphasisSequence",emphasisText:"emphasisText",strong:"strong",strongSequence:"strongSequence",strongText:"strongText"},nn=br(/[A-Za-z]/),Yt=br(/[\dA-Za-z]/),JM=br(/[#-'*+\--9=?A-Z^-~]/);function yl(e){return e!==null&&(e<32||e===127)}const hp=br(/\d/),eL=br(/[\dA-Fa-f]/),tL=br(/[!-/:-@[-`{-~]/);function he(e){return e!==null&&e<-2}function Je(e){return e!==null&&(e<0||e===32)}function Ie(e){return e===-2||e===-1||e===32}const Sl=br(new RegExp("\\p{P}|\\p{S}","u")),es=br(/\s/);function br(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function nL(e){return e===161||e===164||e===167||e===168||e===170||e===173||e===174||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||e===198||e===208||e===215||e===216||e>=222&&e<=225||e===230||e>=232&&e<=234||e===236||e===237||e===240||e===242||e===243||e>=247&&e<=250||e===252||e===254||e===257||e===273||e===275||e===283||e===294||e===295||e===299||e>=305&&e<=307||e===312||e>=319&&e<=322||e===324||e>=328&&e<=331||e===333||e===338||e===339||e===358||e===359||e===363||e===462||e===464||e===466||e===468||e===470||e===472||e===474||e===476||e===593||e===609||e===708||e===711||e>=713&&e<=715||e===717||e===720||e>=728&&e<=731||e===733||e===735||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||e===1025||e>=1040&&e<=1103||e===1105||e===8208||e>=8211&&e<=8214||e===8216||e===8217||e===8220||e===8221||e>=8224&&e<=8226||e>=8228&&e<=8231||e===8240||e===8242||e===8243||e===8245||e===8251||e===8254||e===8308||e===8319||e>=8321&&e<=8324||e===8364||e===8451||e===8453||e===8457||e===8467||e===8470||e===8481||e===8482||e===8486||e===8491||e===8531||e===8532||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||e===8585||e>=8592&&e<=8601||e===8632||e===8633||e===8658||e===8660||e===8679||e===8704||e===8706||e===8707||e===8711||e===8712||e===8715||e===8719||e===8721||e===8725||e===8730||e>=8733&&e<=8736||e===8739||e===8741||e>=8743&&e<=8748||e===8750||e>=8756&&e<=8759||e===8764||e===8765||e===8776||e===8780||e===8786||e===8800||e===8801||e>=8804&&e<=8807||e===8810||e===8811||e===8814||e===8815||e===8834||e===8835||e===8838||e===8839||e===8853||e===8857||e===8869||e===8895||e===8978||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||e===9632||e===9633||e>=9635&&e<=9641||e===9650||e===9651||e===9654||e===9655||e===9660||e===9661||e===9664||e===9665||e>=9670&&e<=9672||e===9675||e>=9678&&e<=9681||e>=9698&&e<=9701||e===9711||e===9733||e===9734||e===9737||e===9742||e===9743||e===9756||e===9758||e===9792||e===9794||e===9824||e===9825||e>=9827&&e<=9829||e>=9831&&e<=9834||e===9836||e===9837||e===9839||e===9886||e===9887||e===9919||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||e===9955||e===9960||e===9961||e>=9963&&e<=9969||e===9972||e>=9974&&e<=9977||e===9979||e===9980||e===9982||e===9983||e===10045||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||e===65533||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||e===127375||e===127376||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}function iL(e){return e===12288||e>=65281&&e<=65376||e>=65504&&e<=65510}function rL(e){return e>=4352&&e<=4447||e===8986||e===8987||e===9001||e===9002||e>=9193&&e<=9196||e===9200||e===9203||e===9725||e===9726||e===9748||e===9749||e>=9776&&e<=9783||e>=9800&&e<=9811||e===9855||e>=9866&&e<=9871||e===9875||e===9889||e===9898||e===9899||e===9917||e===9918||e===9924||e===9925||e===9934||e===9940||e===9962||e===9970||e===9971||e===9973||e===9978||e===9981||e===9989||e===9994||e===9995||e===10024||e===10060||e===10062||e>=10067&&e<=10069||e===10071||e>=10133&&e<=10135||e===10160||e===10175||e===11035||e===11036||e===11088||e===11093||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12773||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||e>=94192&&e<=94198||e>=94208&&e<=101589||e>=101631&&e<=101662||e>=101760&&e<=101874||e>=110576&&e<=110579||e>=110581&&e<=110587||e===110589||e===110590||e>=110592&&e<=110882||e===110898||e>=110928&&e<=110930||e===110933||e>=110948&&e<=110951||e>=110960&&e<=111355||e>=119552&&e<=119638||e>=119648&&e<=119670||e===126980||e===127183||e===127374||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||e===127568||e===127569||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||e===127988||e>=127992&&e<=128062||e===128064||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||e===128378||e===128405||e===128406||e===128420||e>=128507&&e<=128591||e>=128640&&e<=128709||e===128716||e>=128720&&e<=128722||e>=128725&&e<=128728||e>=128732&&e<=128735||e===128747||e===128748||e>=128756&&e<=128764||e>=128992&&e<=129003||e===129008||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129674||e>=129678&&e<=129734||e===129736||e>=129741&&e<=129756||e>=129759&&e<=129770||e>=129775&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}function sL(e){return nL(e)?"ambiguous":iL(e)?"fullwidth":e===8361||e>=65377&&e<=65470||e>=65474&&e<=65479||e>=65482&&e<=65487||e>=65490&&e<=65495||e>=65498&&e<=65500||e>=65512&&e<=65518?"halfwidth":e>=32&&e<=126||e===162||e===163||e===165||e===166||e===172||e===175||e>=10214&&e<=10221||e===10629||e===10630?"narrow":rL(e)?"wide":"neutral"}function aL(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}function oL(e){return aL(e),sL(e)}var cL=Object.defineProperty,lL=(e,t,n)=>t in e?cL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uL=(e,t,n)=>lL(e,t+"",n);function dL(e){return new RegExp("^\\p{Emoji_Presentation}","u").test(String.fromCodePoint(e))}function hL(e){if(!e||e<4352)return!1;switch(oL(e)){case"fullwidth":case"halfwidth":return!0;case"wide":return!dL(e);case"narrow":return!1;case"ambiguous":return 917760<=e&&e<=917999?null:!1;case"neutral":return new RegExp("^\\p{sc=Hangul}","u").test(String.fromCodePoint(e))}}function pL(e,t){return t!==65025||!e||e<8216?!1:e===8216||e===8217||e===8220||e===8221}function fL(e){return e!==null&&e>=65024&&e<=65038}var mL=Dk(new RegExp("\\p{P}|\\p{S}","u")),OL=Dk(/\s/);function Dk(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCodePoint(n))}}var Tn;(e=>{e.spaceOrPunctuation=3,e.cjk=4096,e.cjkPunctuation=4098,e.ivs=8192,e.cjkOrIvs=12288,e.nonEmojiGeneralUseVS=16384,e.variationSelector=24576,e.ivsToCjkRightShift=1})(Tn||(Tn={}));function Ys(e){if(e===Li.eof||Je(e)||OL(e))return Gs.characterGroupWhitespace;let t=0;if(e>=4352){if(fL(e))return Tn.nonEmojiGeneralUseVS;switch(hL(e)){case null:return Tn.ivs;case!0:t|=Tn.cjk;break}}return mL(e)&&(t|=Gs.characterGroupPunctuation),t}function Mk(e,t,n){if(!TL(e))return e;const i=t(),r=Ys(i);return!i||Oo(r)?e:pL(i,n)?Tn.cjkPunctuation:gL(r)}function gL(e){return e&~Tn.ivs}function Oo(e){return!!(e&Gs.characterGroupWhitespace)}function _l(e){return(e&Tn.cjkPunctuation)===Gs.characterGroupPunctuation}function pp(e){return!!(e&Tn.cjk)}function vL(e){return e===Tn.ivs}function bL(e){return!!(e&Tn.cjkOrIvs)}function TL(e){return e===Tn.nonEmojiGeneralUseVS}function Lk(e){return!!(e&Tn.spaceOrPunctuation)}function $k(e){return!!(e&&e>=55296&&e<=56319)}function Uk(e){return!!(e&&e>=56320&&e<=57343)}function qk(e,t,n){if(t._bufferIndex<2)return e;const i=n({start:{...t,_bufferIndex:t._bufferIndex-2},end:t}).codePointAt(0);return i&&i>=65536?i:e}function kL(e,t,n){const i=e>=65536?2:1;if(t._bufferIndex<1+i)return null;const r=t._bufferIndex-i-2,s=n({start:{...t,_bufferIndex:r>=0?r:0},end:{...t,_bufferIndex:t._bufferIndex-i}}),a=s.charCodeAt(s.length-1);if(Number.isNaN(a))return null;if(s.length<2||a<56320||57343<a)return a;const o=s.codePointAt(0);return o&&o>=65536?o:a}var Xk=class{constructor(e,t,n){this.previousCode=e,this.nowPoint=t,this.sliceSerialize=n,uL(this,"cachedValue")}value(){return this.cachedValue===void 0&&(this.cachedValue=kL(this.previousCode,this.nowPoint,this.sliceSerialize)),this.cachedValue}};function Fk(e,t,n){const i=n({start:t,end:{...t,_bufferIndex:t._bufferIndex+2}}).codePointAt(0);return i&&i>=65536?i:e}function zt(e,t,n,i){const r=e.length;let s=0,a;if(t<0?t=-t>r?0:r+t:t=t>r?r:t,n=n>0?n:0,i.length<1e4)a=Array.from(i),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);s<i.length;)a=i.slice(s,s+1e4),a.unshift(t,0),e.splice(...a),s+=1e4,t+=1e4}function Bt(e,t){return e.length>0?(zt(e,e.length,0,t),e):t}function Hs(e,t,n){const i=[];let r=-1;for(;++r<e.length;){const s=e[r].resolveAll;s&&!i.includes(s)&&(t=s(t,n),i.push(s))}return t}var fp={name:"attention",resolveAll:yL,tokenize:SL};function yL(e,t){let n=-1,i,r,s,a,o,c,l,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(i=n;i--;)if(e[i][0]==="exit"&&e[i][1].type==="attentionSequence"&&e[i][1]._open&&t.sliceSerialize(e[i][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[i][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[i][1].end.offset-e[i][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[i][1].end},h={...e[n][1].start};zk(d,-c),zk(h,c),a={type:c>1?ci.strongSequence:ci.emphasisSequence,start:d,end:{...e[i][1].end}},o={type:c>1?ci.strongSequence:ci.emphasisSequence,start:{...e[n][1].start},end:h},s={type:c>1?ci.strongText:ci.emphasisText,start:{...e[i][1].end},end:{...e[n][1].start}},r={type:c>1?ci.strong:ci.emphasis,start:{...a.start},end:{...o.end}},e[i][1].end={...a.start},e[n][1].start={...o.end},l=[],e[i][1].end.offset-e[i][1].start.offset&&(l=Bt(l,[["enter",e[i][1],t],["exit",e[i][1],t]])),l=Bt(l,[["enter",r,t],["enter",a,t],["exit",a,t],["enter",s,t]]),t.parser.constructs.insideSpan.null,l=Bt(l,Hs(t.parser.constructs.insideSpan.null,e.slice(i+1,n),t)),l=Bt(l,[["exit",s,t],["enter",o,t],["exit",o,t],["exit",r,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,l=Bt(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,zt(e,i-1,n-i+3,l),n=i+l.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function SL(e,t){const n=this.parser.constructs.attentionMarkers.null,{now:i,sliceSerialize:r,previous:s}=this,a=Uk(s)?qk(s,i(),r):s,o=Ys(a),c=new Xk(a,i(),r),l=Mk(o,c.value.bind(c),a);let u;return d;function d(p){return u=p,e.enter("attentionSequence"),h(p)}function h(p){if(p===u)return e.consume(p),h;const O=e.exit("attentionSequence"),m=$k(p)?Fk(p,i(),r):p,b=Ys(m),v=_l(l),k=v||Oo(l),y=_l(b),T=y||Oo(b),S=bL(l),_=!T||y&&(k||S)||n.includes(p),x=!k||v&&(T||pp(b))||n.includes(a);return O._open=!!(u===Li.asterisk?_:_&&(Lk(l)||!x)),O._close=!!(u===Li.asterisk?x:x&&(Lk(b)||!_)),t(p)}}function zk(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}function _L(){return{text:{[Li.asterisk]:fp,[Li.underscore]:fp},insideSpan:{null:[fp]}}}function EL(){const e=this.data();(e.micromarkExtensions||(e.micromarkExtensions=[])).push(_L())}function wL(e){let t=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:r,resolveAll:i};return t==null&&(t=!0),{text:{[Li.tilde]:n},insideSpan:{null:[n]},attentionMarkers:{null:[Li.tilde]}};function i(s,a){let o=-1;for(;++o<s.length;)if(s[o][0]==="enter"&&s[o][1].type==="strikethroughSequenceTemporary"&&s[o][1]._close){let c=o;for(;c--;)if(s[c][0]==="exit"&&s[c][1].type==="strikethroughSequenceTemporary"&&s[c][1]._open&&s[o][1].end.offset-s[o][1].start.offset===s[c][1].end.offset-s[c][1].start.offset){s[o][1].type="strikethroughSequence",s[c][1].type="strikethroughSequence";const l={type:"strikethrough",start:Object.assign({},s[c][1].start),end:Object.assign({},s[o][1].end)},u={type:"strikethroughText",start:Object.assign({},s[c][1].end),end:Object.assign({},s[o][1].start)},d=[["enter",l,a],["enter",s[c][1],a],["exit",s[c][1],a],["enter",u,a]],h=a.parser.constructs.insideSpan.null;h&&zt(d,d.length,0,Hs(h,s.slice(c+1,o),a)),zt(d,d.length,0,[["exit",u,a],["enter",s[o][1],a],["exit",s[o][1],a],["exit",l,a]]),zt(s,c-1,o-c+3,d),o=c+d.length-2;break}}for(o=-1;++o<s.length;)s[o][1].type==="strikethroughSequenceTemporary"&&(s[o][1].type=ci.data);return s}function r(s,a,o){const{now:c,sliceSerialize:l,previous:u}=this,d=Uk(u)?qk(u,c(),l):u,h=Ys(d),p=new Xk(d,c(),l),O=Mk(h,p.value.bind(p),d),m=this.events;let b=0;return v;function v(y){return d===Li.tilde&&m[m.length-1][1].type!==ci.characterEscape?o(y):(s.enter("strikethroughSequenceTemporary"),k(y))}function k(y){const T=Ys(d);if(y===Li.tilde)return b>1?o(y):(s.consume(y),b++,k);if(b<2&&!t)return o(y);const S=s.exit("strikethroughSequenceTemporary"),_=$k(y)?Fk(y,c(),l):y,x=Ys(_),N=_l(O)||Oo(O),L=_l(x)||Oo(x),w=pp(O)||vL(T);return S._open=!L||x===Gs.attentionSideAfter&&(N||w),S._close=!N||T===Gs.attentionSideAfter&&(L||pp(x)),a(y)}}}function CL(e){const t=this.data();(t.micromarkExtensions||(t.micromarkExtensions=[])).push(wL(e))}function Bk(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let i=0,r=n.indexOf(t);for(;r!==-1;)i++,r=n.indexOf(t,r+t.length);return i}function xL(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function PL(e,t,n){const i=Tl((n||{}).ignore||[]),r=RL(t);let s=-1;for(;++s<r.length;)Ck(e,"text",a);function a(c,l){let u=-1,d;for(;++u<l.length;){const h=l[u],p=d?d.children:void 0;if(i(h,p?p.indexOf(h):void 0,d))return;d=h}if(d)return o(c,l)}function o(c,l){const u=l[l.length-1],d=r[s][0],h=r[s][1];let p=0;const O=u.children.indexOf(c);let m=!1,b=[];d.lastIndex=0;let v=d.exec(c.value);for(;v;){const k=v.index,y={index:v.index,input:v.input,stack:[...l,c]};let T=h(...v,y);if(typeof T=="string"&&(T=T.length>0?{type:"text",value:T}:void 0),T===!1?d.lastIndex=k+1:(p!==k&&b.push({type:"text",value:c.value.slice(p,k)}),Array.isArray(T)?b.push(...T):T&&b.push(T),p=k+v[0].length,m=!0),!d.global)break;v=d.exec(c.value)}return m?(p<c.value.length&&b.push({type:"text",value:c.value.slice(p)}),u.children.splice(O,1,...b)):b=[c],O+b.length}}function RL(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let i=-1;for(;++i<n.length;){const r=n[i];t.push([AL(r[0]),IL(r[1])])}return t}function AL(e){return typeof e=="string"?new RegExp(xL(e),"g"):e}function IL(e){return typeof e=="function"?e:function(){return e}}const mp="phrasing",Op=["autolink","link","image","label"];function QL(){return{transforms:[qL],enter:{literalAutolink:DL,literalAutolinkEmail:gp,literalAutolinkHttp:gp,literalAutolinkWww:gp},exit:{literalAutolink:UL,literalAutolinkEmail:$L,literalAutolinkHttp:ML,literalAutolinkWww:LL}}}function NL(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:mp,notInConstruct:Op},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:mp,notInConstruct:Op},{character:":",before:"[ps]",after:"\\/",inConstruct:mp,notInConstruct:Op}]}}function DL(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function gp(e){this.config.enter.autolinkProtocol.call(this,e)}function ML(e){this.config.exit.autolinkProtocol.call(this,e)}function LL(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function $L(e){this.config.exit.autolinkEmail.call(this,e)}function UL(e){this.exit(e)}function qL(e){PL(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,XL],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),FL]],{ignore:["link","linkReference"]})}function XL(e,t,n,i,r){let s="";if(!Zk(r)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!zL(n)))return!1;const a=BL(n+i);if(!a[0])return!1;const o={type:"link",title:null,url:s+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[o,{type:"text",value:a[1]}]:o}function FL(e,t,n,i){return!Zk(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function zL(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function BL(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],i=n.indexOf(")");const r=Bk(e,"(");let s=Bk(e,")");for(;i!==-1&&r>s;)e+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),s++;return[e,n]}function Zk(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||es(n)||Sl(n))&&(!t||n!==47)}function jn(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}jk.peek=JL;function ZL(){this.buffer()}function jL(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function VL(){this.buffer()}function WL(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function GL(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=jn(this.sliceSerialize(e)).toLowerCase(),n.label=t}function YL(e){this.exit(e)}function HL(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=jn(this.sliceSerialize(e)).toLowerCase(),n.label=t}function KL(e){this.exit(e)}function JL(){return"["}function jk(e,t,n,i){const r=n.createTracker(i);let s=r.move("[^");const a=n.enter("footnoteReference"),o=n.enter("reference");return s+=r.move(n.safe(n.associationId(e),{after:"]",before:s})),o(),a(),s+=r.move("]"),s}function e$(){return{enter:{gfmFootnoteCallString:ZL,gfmFootnoteCall:jL,gfmFootnoteDefinitionLabelString:VL,gfmFootnoteDefinition:WL},exit:{gfmFootnoteCallString:GL,gfmFootnoteCall:YL,gfmFootnoteDefinitionLabelString:HL,gfmFootnoteDefinition:KL}}}function t$(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:jk},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,r,s,a){const o=s.createTracker(a);let c=o.move("[^");const l=s.enter("footnoteDefinition"),u=s.enter("label");return c+=o.move(s.safe(s.associationId(i),{before:c,after:"]"})),u(),c+=o.move("]:"),i.children&&i.children.length>0&&(o.shift(4),c+=o.move((t?`
`:" ")+s.indentLines(s.containerFlow(i,o.current()),t?Vk:n$))),l(),c}}function n$(e,t,n){return t===0?e:Vk(e,t,n)}function Vk(e,t,n){return(n?"":"    ")+e}const i$=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Wk.peek=c$;function r$(){return{canContainEols:["delete"],enter:{strikethrough:a$},exit:{strikethrough:o$}}}function s$(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:i$}],handlers:{delete:Wk}}}function a$(e){this.enter({type:"delete",children:[]},e)}function o$(e){this.exit(e)}function Wk(e,t,n,i){const r=n.createTracker(i),s=n.enter("strikethrough");let a=r.move("~~");return a+=n.containerPhrasing(e,{...r.current(),before:a,after:"~"}),a+=r.move("~~"),s(),a}function c$(){return"~"}function l$(e){return e.length}function u$(e,t){const n=t||{},i=(n.align||[]).concat(),r=n.stringLength||l$,s=[],a=[],o=[],c=[];let l=0,u=-1;for(;++u<e.length;){const m=[],b=[];let v=-1;for(e[u].length>l&&(l=e[u].length);++v<e[u].length;){const k=d$(e[u][v]);if(n.alignDelimiters!==!1){const y=r(k);b[v]=y,(c[v]===void 0||y>c[v])&&(c[v]=y)}m.push(k)}a[u]=m,o[u]=b}let d=-1;if(typeof i=="object"&&"length"in i)for(;++d<l;)s[d]=Gk(i[d]);else{const m=Gk(i);for(;++d<l;)s[d]=m}d=-1;const h=[],p=[];for(;++d<l;){const m=s[d];let b="",v="";m===99?(b=":",v=":"):m===108?b=":":m===114&&(v=":");let k=n.alignDelimiters===!1?1:Math.max(1,c[d]-b.length-v.length);const y=b+"-".repeat(k)+v;n.alignDelimiters!==!1&&(k=b.length+k+v.length,k>c[d]&&(c[d]=k),p[d]=k),h[d]=y}a.splice(1,0,h),o.splice(1,0,p),u=-1;const O=[];for(;++u<a.length;){const m=a[u],b=o[u];d=-1;const v=[];for(;++d<l;){const k=m[d]||"";let y="",T="";if(n.alignDelimiters!==!1){const S=c[d]-(b[d]||0),_=s[d];_===114?y=" ".repeat(S):_===99?S%2?(y=" ".repeat(S/2+.5),T=" ".repeat(S/2-.5)):(y=" ".repeat(S/2),T=y):T=" ".repeat(S)}n.delimiterStart!==!1&&!d&&v.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&k==="")&&(n.delimiterStart!==!1||d)&&v.push(" "),n.alignDelimiters!==!1&&v.push(y),v.push(k),n.alignDelimiters!==!1&&v.push(T),n.padding!==!1&&v.push(" "),(n.delimiterEnd!==!1||d!==l-1)&&v.push("|")}O.push(n.delimiterEnd===!1?v.join("").replace(/ +$/,""):v.join(""))}return O.join(`
`)}function d$(e){return e==null?"":String(e)}function Gk(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function h$(e,t,n,i){const r=n.enter("blockquote"),s=n.createTracker(i);s.move("> "),s.shift(2);const a=n.indentLines(n.containerFlow(e,s.current()),p$);return r(),a}function p$(e,t,n){return">"+(n?"":" ")+e}function f$(e,t){return Yk(e,t.inConstruct,!0)&&!Yk(e,t.notInConstruct,!1)}function Yk(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let i=-1;for(;++i<t.length;)if(e.includes(t[i]))return!0;return!1}function Hk(e,t,n,i){let r=-1;for(;++r<n.unsafe.length;)if(n.unsafe[r].character===`
`&&f$(n.stack,n.unsafe[r]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function m$(e,t){const n=String(e);let i=n.indexOf(t),r=i,s=0,a=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===r?++s>a&&(a=s):s=1,r=i+t.length,i=n.indexOf(t,r);return a}function O$(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function g$(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function v$(e,t,n,i){const r=g$(n),s=e.value||"",a=r==="`"?"GraveAccent":"Tilde";if(O$(e,n)){const d=n.enter("codeIndented"),h=n.indentLines(s,b$);return d(),h}const o=n.createTracker(i),c=r.repeat(Math.max(m$(s,r)+1,3)),l=n.enter("codeFenced");let u=o.move(c);if(e.lang){const d=n.enter(`codeFencedLang${a}`);u+=o.move(n.safe(e.lang,{before:u,after:" ",encode:["`"],...o.current()})),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${a}`);u+=o.move(" "),u+=o.move(n.safe(e.meta,{before:u,after:`
`,encode:["`"],...o.current()})),d()}return u+=o.move(`
`),s&&(u+=o.move(s+`
`)),u+=o.move(c),l(),u}function b$(e,t,n){return(n?"":"    ")+e}function vp(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function T$(e,t,n,i){const r=vp(n),s=r==='"'?"Quote":"Apostrophe",a=n.enter("definition");let o=n.enter("label");const c=n.createTracker(i);let l=c.move("[");return l+=c.move(n.safe(n.associationId(e),{before:l,after:"]",...c.current()})),l+=c.move("]: "),o(),!e.url||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),l+=c.move("<"),l+=c.move(n.safe(e.url,{before:l,after:">",...c.current()})),l+=c.move(">")):(o=n.enter("destinationRaw"),l+=c.move(n.safe(e.url,{before:l,after:e.title?" ":`
`,...c.current()}))),o(),e.title&&(o=n.enter(`title${s}`),l+=c.move(" "+r),l+=c.move(n.safe(e.title,{before:l,after:r,...c.current()})),l+=c.move(r),o()),a(),l}function k$(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function go(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Ks(e){if(e===null||Je(e)||es(e))return 1;if(Sl(e))return 2}function El(e,t,n){const i=Ks(e),r=Ks(t);return i===void 0?r===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Kk.peek=y$;function Kk(e,t,n,i){const r=k$(n),s=n.enter("emphasis"),a=n.createTracker(i),o=a.move(r);let c=a.move(n.containerPhrasing(e,{after:r,before:o,...a.current()}));const l=c.charCodeAt(0),u=El(i.before.charCodeAt(i.before.length-1),l,r);u.inside&&(c=go(l)+c.slice(1));const d=c.charCodeAt(c.length-1),h=El(i.after.charCodeAt(0),d,r);h.inside&&(c=c.slice(0,-1)+go(d));const p=a.move(r);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},o+c+p}function y$(e,t,n){return n.options.emphasis||"*"}const S$={};function bp(e,t){const n=S$,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Jk(e,i,r)}function Jk(e,t,n){if(_$(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return ey(e.children,t,n)}return Array.isArray(e)?ey(e,t,n):""}function ey(e,t,n){const i=[];let r=-1;for(;++r<e.length;)i[r]=Jk(e[r],t,n);return i.join("")}function _$(e){return!!(e&&typeof e=="object")}function E$(e,t){let n=!1;return Vs(e,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,lp}),!!((!e.depth||e.depth<3)&&bp(e)&&(t.options.setext||n))}function w$(e,t,n,i){const r=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(i);if(E$(e,n)){const u=n.enter("headingSetext"),d=n.enter("phrasing"),h=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return d(),u(),h+`
`+(r===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const a="#".repeat(r),o=n.enter("headingAtx"),c=n.enter("phrasing");s.move(a+" ");let l=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(l)&&(l=go(l.charCodeAt(0))+l.slice(1)),l=l?a+" "+l:a,n.options.closeAtx&&(l+=" "+a),c(),o(),l}ty.peek=C$;function ty(e){return e.value||""}function C$(){return"<"}ny.peek=x$;function ny(e,t,n,i){const r=vp(n),s=r==='"'?"Quote":"Apostrophe",a=n.enter("image");let o=n.enter("label");const c=n.createTracker(i);let l=c.move("![");return l+=c.move(n.safe(e.alt,{before:l,after:"]",...c.current()})),l+=c.move("]("),o(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),l+=c.move("<"),l+=c.move(n.safe(e.url,{before:l,after:">",...c.current()})),l+=c.move(">")):(o=n.enter("destinationRaw"),l+=c.move(n.safe(e.url,{before:l,after:e.title?" ":")",...c.current()}))),o(),e.title&&(o=n.enter(`title${s}`),l+=c.move(" "+r),l+=c.move(n.safe(e.title,{before:l,after:r,...c.current()})),l+=c.move(r),o()),l+=c.move(")"),a(),l}function x$(){return"!"}iy.peek=P$;function iy(e,t,n,i){const r=e.referenceType,s=n.enter("imageReference");let a=n.enter("label");const o=n.createTracker(i);let c=o.move("![");const l=n.safe(e.alt,{before:c,after:"]",...o.current()});c+=o.move(l+"]["),a();const u=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...o.current()});return a(),n.stack=u,s(),r==="full"||!l||l!==d?c+=o.move(d+"]"):r==="shortcut"?c=c.slice(0,-1):c+=o.move("]"),c}function P$(){return"!"}ry.peek=R$;function ry(e,t,n){let i=e.value||"",r="`",s=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(i);)r+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++s<n.unsafe.length;){const a=n.unsafe[s],o=n.compilePattern(a);let c;if(a.atBreak)for(;c=o.exec(i);){let l=c.index;i.charCodeAt(l)===10&&i.charCodeAt(l-1)===13&&l--,i=i.slice(0,l)+" "+i.slice(c.index+1)}}return r+i+r}function R$(){return"`"}function sy(e,t){const n=bp(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}ay.peek=A$;function ay(e,t,n,i){const r=vp(n),s=r==='"'?"Quote":"Apostrophe",a=n.createTracker(i);let o,c;if(sy(e,n)){const u=n.stack;n.stack=[],o=n.enter("autolink");let d=a.move("<");return d+=a.move(n.containerPhrasing(e,{before:d,after:">",...a.current()})),d+=a.move(">"),o(),n.stack=u,d}o=n.enter("link"),c=n.enter("label");let l=a.move("[");return l+=a.move(n.containerPhrasing(e,{before:l,after:"](",...a.current()})),l+=a.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),l+=a.move("<"),l+=a.move(n.safe(e.url,{before:l,after:">",...a.current()})),l+=a.move(">")):(c=n.enter("destinationRaw"),l+=a.move(n.safe(e.url,{before:l,after:e.title?" ":")",...a.current()}))),c(),e.title&&(c=n.enter(`title${s}`),l+=a.move(" "+r),l+=a.move(n.safe(e.title,{before:l,after:r,...a.current()})),l+=a.move(r),c()),l+=a.move(")"),o(),l}function A$(e,t,n){return sy(e,n)?"<":"["}oy.peek=I$;function oy(e,t,n,i){const r=e.referenceType,s=n.enter("linkReference");let a=n.enter("label");const o=n.createTracker(i);let c=o.move("[");const l=n.containerPhrasing(e,{before:c,after:"]",...o.current()});c+=o.move(l+"]["),a();const u=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...o.current()});return a(),n.stack=u,s(),r==="full"||!l||l!==d?c+=o.move(d+"]"):r==="shortcut"?c=c.slice(0,-1):c+=o.move("]"),c}function I$(){return"["}function Tp(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Q$(e){const t=Tp(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function N$(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function cy(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function D$(e,t,n,i){const r=n.enter("list"),s=n.bulletCurrent;let a=e.ordered?N$(n):Tp(n);const o=e.ordered?a==="."?")":".":Q$(n);let c=t&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!e.ordered){const u=e.children?e.children[0]:void 0;if((a==="*"||a==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),cy(n)===a&&u){let d=-1;for(;++d<e.children.length;){const h=e.children[d];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(a=o),n.bulletCurrent=a;const l=n.containerFlow(e,i);return n.bulletLastUsed=a,n.bulletCurrent=s,r(),l}function M$(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function L$(e,t,n,i){const r=M$(n);let s=n.bulletCurrent||Tp(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let a=s.length+1;(r==="tab"||r==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(a=Math.ceil(a/4)*4);const o=n.createTracker(i);o.move(s+" ".repeat(a-s.length)),o.shift(a);const c=n.enter("listItem"),l=n.indentLines(n.containerFlow(e,o.current()),u);return c(),l;function u(d,h,p){return h?(p?"":" ".repeat(a))+d:(p?s:s+" ".repeat(a-s.length))+d}}function $$(e,t,n,i){const r=n.enter("paragraph"),s=n.enter("phrasing"),a=n.containerPhrasing(e,i);return s(),r(),a}const U$=Tl(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function q$(e,t,n,i){return(e.children.some(function(r){return U$(r)})?n.containerPhrasing:n.containerFlow).call(n,e,i)}function X$(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}ly.peek=F$;function ly(e,t,n,i){const r=X$(n),s=n.enter("strong"),a=n.createTracker(i),o=a.move(r+r);let c=a.move(n.containerPhrasing(e,{after:r,before:o,...a.current()}));const l=c.charCodeAt(0),u=El(i.before.charCodeAt(i.before.length-1),l,r);u.inside&&(c=go(l)+c.slice(1));const d=c.charCodeAt(c.length-1),h=El(i.after.charCodeAt(0),d,r);h.inside&&(c=c.slice(0,-1)+go(d));const p=a.move(r+r);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},o+c+p}function F$(e,t,n){return n.options.strong||"*"}function z$(e,t,n,i){return n.safe(e.value,i)}function B$(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function Z$(e,t,n){const i=(cy(n)+(n.options.ruleSpaces?" ":"")).repeat(B$(n));return n.options.ruleSpaces?i.slice(0,-1):i}const uy={blockquote:h$,break:Hk,code:v$,definition:T$,emphasis:Kk,hardBreak:Hk,heading:w$,html:ty,image:ny,imageReference:iy,inlineCode:ry,link:ay,linkReference:oy,list:D$,listItem:L$,paragraph:$$,root:q$,strong:ly,text:z$,thematicBreak:Z$},dy=document.createElement("i");function kp(e){const t="&"+e+";";dy.innerHTML=t;const n=dy.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function hy(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}const j$=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function V$(e){return e.replace(j$,W$)}function W$(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),r=i===120||i===88;return hy(n.slice(r?2:1),r?16:10)}return kp(n)||e}function G$(){return{enter:{table:Y$,tableData:py,tableHeader:py,tableRow:K$},exit:{codeText:J$,table:H$,tableData:yp,tableHeader:yp,tableRow:yp}}}function Y$(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function H$(e){this.exit(e),this.data.inTable=void 0}function K$(e){this.enter({type:"tableRow",children:[]},e)}function yp(e){this.exit(e)}function py(e){this.enter({type:"tableCell",children:[]},e)}function J$(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,e5));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function e5(e,t){return t==="|"?t:e}function t5(e){const t=e||{},n=t.tableCellPadding,i=t.tablePipeAlign,r=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:a,tableCell:c,tableRow:o}};function a(p,O,m,b){return l(u(p,m,b),p.align)}function o(p,O,m,b){const v=d(p,m,b),k=l([v]);return k.slice(0,k.indexOf(`
`))}function c(p,O,m,b){const v=m.enter("tableCell"),k=m.enter("phrasing"),y=m.containerPhrasing(p,{...b,before:s,after:s});return k(),v(),y}function l(p,O){return u$(p,{align:O,alignDelimiters:i,padding:n,stringLength:r})}function u(p,O,m){const b=p.children;let v=-1;const k=[],y=O.enter("table");for(;++v<b.length;)k[v]=d(b[v],O,m);return y(),k}function d(p,O,m){const b=p.children;let v=-1;const k=[],y=O.enter("tableRow");for(;++v<b.length;)k[v]=c(b[v],p,O,m);return y(),k}function h(p,O,m){let b=uy.inlineCode(p,O,m);return m.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function n5(){return{exit:{taskListCheckValueChecked:fy,taskListCheckValueUnchecked:fy,paragraph:r5}}}function i5(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:s5}}}function fy(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function r5(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const r=t.children;let s=-1,a;for(;++s<r.length;){const o=r[s];if(o.type==="paragraph"){a=o;break}}a===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(e)}function s5(e,t,n,i){const r=e.children[0],s=typeof e.checked=="boolean"&&r&&r.type==="paragraph",a="["+(e.checked?"x":" ")+"] ",o=n.createTracker(i);s&&o.move(a);let c=uy.listItem(e,t,n,{...i,...o.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,l)),c;function l(u){return u+a}}function a5(){return[QL(),e$(),r$(),G$(),n5()]}function o5(e){return{extensions:[NL(),t$(e),s$(),t5(e),i5()]}}const my={}.hasOwnProperty;function Oy(e){const t={};let n=-1;for(;++n<e.length;)c5(t,e[n]);return t}function c5(e,t){let n;for(n in t){const i=(my.call(e,n)?e[n]:void 0)||(e[n]={}),r=t[n];let s;if(r)for(s in r){my.call(i,s)||(i[s]=[]);const a=r[s];l5(i[s],Array.isArray(a)?a:a?[a]:[])}}}function l5(e,t){let n=-1;const i=[];for(;++n<t.length;)(t[n].add==="after"?e:i).push(t[n]);zt(e,0,0,i)}const u5={tokenize:O5,partial:!0},gy={tokenize:g5,partial:!0},vy={tokenize:v5,partial:!0},by={tokenize:b5,partial:!0},d5={tokenize:T5,partial:!0},Ty={name:"wwwAutolink",tokenize:f5,previous:yy},ky={name:"protocolAutolink",tokenize:m5,previous:Sy},$i={name:"emailAutolink",tokenize:p5,previous:_y},li={};function h5(){return{text:li}}let ts=48;for(;ts<123;)li[ts]=$i,ts++,ts===58?ts=65:ts===91&&(ts=97);li[43]=$i,li[45]=$i,li[46]=$i,li[95]=$i,li[72]=[$i,ky],li[104]=[$i,ky],li[87]=[$i,Ty],li[119]=[$i,Ty];function p5(e,t,n){const i=this;let r,s;return a;function a(d){return!Sp(d)||!_y.call(i,i.previous)||_p(i.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),o(d))}function o(d){return Sp(d)?(e.consume(d),o):d===64?(e.consume(d),c):n(d)}function c(d){return d===46?e.check(d5,u,l)(d):d===45||d===95||Yt(d)?(s=!0,e.consume(d),c):u(d)}function l(d){return e.consume(d),r=!0,c}function u(d){return s&&r&&nn(i.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):n(d)}}function f5(e,t,n){const i=this;return r;function r(a){return a!==87&&a!==119||!yy.call(i,i.previous)||_p(i.events)?n(a):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(u5,e.attempt(gy,e.attempt(vy,s),n),n)(a))}function s(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}}function m5(e,t,n){const i=this;let r="",s=!1;return a;function a(d){return(d===72||d===104)&&Sy.call(i,i.previous)&&!_p(i.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),r+=String.fromCodePoint(d),e.consume(d),o):n(d)}function o(d){if(nn(d)&&r.length<5)return r+=String.fromCodePoint(d),e.consume(d),o;if(d===58){const h=r.toLowerCase();if(h==="http"||h==="https")return e.consume(d),c}return n(d)}function c(d){return d===47?(e.consume(d),s?l:(s=!0,c)):n(d)}function l(d){return d===null||yl(d)||Je(d)||es(d)||Sl(d)?n(d):e.attempt(gy,e.attempt(vy,u),n)(d)}function u(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function O5(e,t,n){let i=0;return r;function r(a){return(a===87||a===119)&&i<3?(i++,e.consume(a),r):a===46&&i===3?(e.consume(a),s):n(a)}function s(a){return a===null?n(a):t(a)}}function g5(e,t,n){let i,r,s;return a;function a(l){return l===46||l===95?e.check(by,c,o)(l):l===null||Je(l)||es(l)||l!==45&&Sl(l)?c(l):(s=!0,e.consume(l),a)}function o(l){return l===95?i=!0:(r=i,i=void 0),e.consume(l),a}function c(l){return r||i||!s?n(l):t(l)}}function v5(e,t){let n=0,i=0;return r;function r(a){return a===40?(n++,e.consume(a),r):a===41&&i<n?s(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?e.check(by,t,s)(a):a===null||Je(a)||es(a)?t(a):(e.consume(a),r)}function s(a){return a===41&&i++,e.consume(a),r}}function b5(e,t,n){return i;function i(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(e.consume(o),i):o===38?(e.consume(o),s):o===93?(e.consume(o),r):o===60||o===null||Je(o)||es(o)?t(o):n(o)}function r(o){return o===null||o===40||o===91||Je(o)||es(o)?t(o):i(o)}function s(o){return nn(o)?a(o):n(o)}function a(o){return o===59?(e.consume(o),i):nn(o)?(e.consume(o),a):n(o)}}function T5(e,t,n){return i;function i(s){return e.consume(s),r}function r(s){return Yt(s)?n(s):t(s)}}function yy(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Je(e)}function Sy(e){return!nn(e)}function _y(e){return!(e===47||Sp(e))}function Sp(e){return e===43||e===45||e===46||e===95||Yt(e)}function _p(e){let t=e.length,n=!1;for(;t--;){const i=e[t][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function Js(e){const t=[];let n=-1,i=0,r=0;for(;++n<e.length;){const s=e.charCodeAt(n);let a="";if(s===37&&Yt(e.charCodeAt(n+1))&&Yt(e.charCodeAt(n+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const o=e.charCodeAt(n+1);s<56320&&o>56319&&o<57344?(a=String.fromCharCode(s,o),r=1):a=""}else a=String.fromCharCode(s);a&&(t.push(e.slice(i,n),encodeURIComponent(a)),i=n+r+1,a=""),r&&(n+=r,r=0)}return t.join("")+e.slice(i)}const Ep={name:"attention",resolveAll:k5,tokenize:y5};function k5(e,t){let n=-1,i,r,s,a,o,c,l,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(i=n;i--;)if(e[i][0]==="exit"&&e[i][1].type==="attentionSequence"&&e[i][1]._open&&t.sliceSerialize(e[i][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[i][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[i][1].end.offset-e[i][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[i][1].end},h={...e[n][1].start};Ey(d,-c),Ey(h,c),a={type:c>1?"strongSequence":"emphasisSequence",start:d,end:{...e[i][1].end}},o={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:h},s={type:c>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[n][1].start}},r={type:c>1?"strong":"emphasis",start:{...a.start},end:{...o.end}},e[i][1].end={...a.start},e[n][1].start={...o.end},l=[],e[i][1].end.offset-e[i][1].start.offset&&(l=Bt(l,[["enter",e[i][1],t],["exit",e[i][1],t]])),l=Bt(l,[["enter",r,t],["enter",a,t],["exit",a,t],["enter",s,t]]),l=Bt(l,Hs(t.parser.constructs.insideSpan.null,e.slice(i+1,n),t)),l=Bt(l,[["exit",s,t],["enter",o,t],["exit",o,t],["exit",r,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,l=Bt(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,zt(e,i-1,n-i+3,l),n=i+l.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function y5(e,t){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,r=Ks(i);let s;return a;function a(c){return s=c,e.enter("attentionSequence"),o(c)}function o(c){if(c===s)return e.consume(c),o;const l=e.exit("attentionSequence"),u=Ks(c),d=!u||u===2&&r||n.includes(c),h=!r||r===2&&u||n.includes(i);return l._open=!!(s===42?d:d&&(r||!h)),l._close=!!(s===42?h:h&&(u||!d)),t(c)}}function Ey(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const S5={name:"autolink",tokenize:_5};function _5(e,t,n){let i=0;return r;function r(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(p){return nn(p)?(e.consume(p),a):p===64?n(p):l(p)}function a(p){return p===43||p===45||p===46||Yt(p)?(i=1,o(p)):l(p)}function o(p){return p===58?(e.consume(p),i=0,c):(p===43||p===45||p===46||Yt(p))&&i++<32?(e.consume(p),o):(i=0,l(p))}function c(p){return p===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):p===null||p===32||p===60||yl(p)?n(p):(e.consume(p),c)}function l(p){return p===64?(e.consume(p),u):JM(p)?(e.consume(p),l):n(p)}function u(p){return Yt(p)?d(p):n(p)}function d(p){return p===46?(e.consume(p),i=0,u):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):h(p)}function h(p){if((p===45||Yt(p))&&i++<63){const O=p===45?h:d;return e.consume(p),O}return n(p)}}function Ue(e,t,n,i){const r=i?i-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(c){return Ie(c)?(e.enter(n),o(c)):t(c)}function o(c){return Ie(c)&&s++<r?(e.consume(c),o):(e.exit(n),t(c))}}const vo={partial:!0,tokenize:E5};function E5(e,t,n){return i;function i(s){return Ie(s)?Ue(e,r,"linePrefix")(s):r(s)}function r(s){return s===null||he(s)?t(s):n(s)}}const wy={continuation:{tokenize:C5},exit:x5,name:"blockQuote",tokenize:w5};function w5(e,t,n){const i=this;return r;function r(a){if(a===62){const o=i.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),s}return n(a)}function s(a){return Ie(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function C5(e,t,n){const i=this;return r;function r(a){return Ie(a)?Ue(e,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return e.attempt(wy,t,n)(a)}}function x5(e){e.exit("blockQuote")}const Cy={name:"characterEscape",tokenize:P5};function P5(e,t,n){return i;function i(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),r}function r(s){return tL(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const xy={name:"characterReference",tokenize:R5};function R5(e,t,n){const i=this;let r=0,s,a;return o;function o(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),c}function c(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,a=Yt,u(d))}function l(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,a=eL,u):(e.enter("characterReferenceValue"),s=7,a=hp,u(d))}function u(d){if(d===59&&r){const h=e.exit("characterReferenceValue");return a===Yt&&!kp(i.sliceSerialize(h))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(d)&&r++<s?(e.consume(d),u):n(d)}}const Py={partial:!0,tokenize:I5},Ry={concrete:!0,name:"codeFenced",tokenize:A5};function A5(e,t,n){const i=this,r={partial:!0,tokenize:S};let s=0,a=0,o;return c;function c(_){return l(_)}function l(_){const x=i.events[i.events.length-1];return s=x&&x[1].type==="linePrefix"?x[2].sliceSerialize(x[1],!0).length:0,o=_,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(_)}function u(_){return _===o?(a++,e.consume(_),u):a<3?n(_):(e.exit("codeFencedFenceSequence"),Ie(_)?Ue(e,d,"whitespace")(_):d(_))}function d(_){return _===null||he(_)?(e.exit("codeFencedFence"),i.interrupt?t(_):e.check(Py,m,T)(_)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(_))}function h(_){return _===null||he(_)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(_)):Ie(_)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ue(e,p,"whitespace")(_)):_===96&&_===o?n(_):(e.consume(_),h)}function p(_){return _===null||he(_)?d(_):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),O(_))}function O(_){return _===null||he(_)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(_)):_===96&&_===o?n(_):(e.consume(_),O)}function m(_){return e.attempt(r,T,b)(_)}function b(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),v}function v(_){return s>0&&Ie(_)?Ue(e,k,"linePrefix",s+1)(_):k(_)}function k(_){return _===null||he(_)?e.check(Py,m,T)(_):(e.enter("codeFlowValue"),y(_))}function y(_){return _===null||he(_)?(e.exit("codeFlowValue"),k(_)):(e.consume(_),y)}function T(_){return e.exit("codeFenced"),t(_)}function S(_,x,N){let L=0;return w;function w(q){return _.enter("lineEnding"),_.consume(q),_.exit("lineEnding"),D}function D(q){return _.enter("codeFencedFence"),Ie(q)?Ue(_,M,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):M(q)}function M(q){return q===o?(_.enter("codeFencedFenceSequence"),B(q)):N(q)}function B(q){return q===o?(L++,_.consume(q),B):L>=a?(_.exit("codeFencedFenceSequence"),Ie(q)?Ue(_,F,"whitespace")(q):F(q)):N(q)}function F(q){return q===null||he(q)?(_.exit("codeFencedFence"),x(q)):N(q)}}}function I5(e,t,n){const i=this;return r;function r(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s)}function s(a){return i.parser.lazy[i.now().line]?n(a):t(a)}}const wp={name:"codeIndented",tokenize:N5},Q5={partial:!0,tokenize:D5};function N5(e,t,n){const i=this;return r;function r(l){return e.enter("codeIndented"),Ue(e,s,"linePrefix",5)(l)}function s(l){const u=i.events[i.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?a(l):n(l)}function a(l){return l===null?c(l):he(l)?e.attempt(Q5,a,c)(l):(e.enter("codeFlowValue"),o(l))}function o(l){return l===null||he(l)?(e.exit("codeFlowValue"),a(l)):(e.consume(l),o)}function c(l){return e.exit("codeIndented"),t(l)}}function D5(e,t,n){const i=this;return r;function r(a){return i.parser.lazy[i.now().line]?n(a):he(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),r):Ue(e,s,"linePrefix",5)(a)}function s(a){const o=i.events[i.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):he(a)?r(a):n(a)}}const M5={name:"codeText",previous:$5,resolve:L5,tokenize:U5};function L5(e){let t=e.length-4,n=3,i,r;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(i=n;++i<t;)if(e[i][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(i=n-1,t++;++i<=t;)r===void 0?i!==t&&e[i][1].type!=="lineEnding"&&(r=i):(i===t||e[i][1].type==="lineEnding")&&(e[r][1].type="codeTextData",i!==r+2&&(e[r][1].end=e[i-1][1].end,e.splice(r+2,i-r-2),t-=i-r-2,i=r+2),r=void 0);return e}function $5(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function U5(e,t,n){let i=0,r,s;return a;function a(d){return e.enter("codeText"),e.enter("codeTextSequence"),o(d)}function o(d){return d===96?(e.consume(d),i++,o):(e.exit("codeTextSequence"),c(d))}function c(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),c):d===96?(s=e.enter("codeTextSequence"),r=0,u(d)):he(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("codeTextData"),l(d))}function l(d){return d===null||d===32||d===96||he(d)?(e.exit("codeTextData"),c(d)):(e.consume(d),l)}function u(d){return d===96?(e.consume(d),r++,u):r===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",l(d))}}class q5{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(t,i):t>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(t,n,i){const r=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&bo(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),bo(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),bo(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);bo(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);bo(this.left,n.reverse())}}}function bo(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Ay(e){const t={};let n=-1,i,r,s,a,o,c,l;const u=new q5(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(i=u.get(n),n&&i[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(t,X5(u,n)),n=t[n],l=!0);else if(i[1]._container){for(s=n,r=void 0;s--;)if(a=u.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(r&&(u.get(r)[1].type="lineEndingBlank"),a[1].type="lineEnding",r=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;r&&(i[1].end={...u.get(r)[1].start},o=u.slice(r,n),o.unshift(i),u.splice(r,n-r+1,o))}}return zt(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function X5(e,t){const n=e.get(t)[1],i=e.get(t)[2];let r=t-1;const s=[];let a=n._tokenizer;a||(a=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,c=[],l={};let u,d,h=-1,p=n,O=0,m=0;const b=[m];for(;p;){for(;e.get(++r)[1]!==p;);s.push(r),p._tokenizer||(u=i.sliceStream(p),p.next||u.push(null),d&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(u),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=p,p=p.next}for(p=n;++h<o.length;)o[h][0]==="exit"&&o[h-1][0]==="enter"&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(m=h+1,b.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):b.pop(),h=b.length;h--;){const v=o.slice(b[h],b[h+1]),k=s.pop();c.push([k,k+v.length-1]),e.splice(k,2,v)}for(c.reverse(),h=-1;++h<c.length;)l[O+c[h][0]]=O+c[h][1],O+=c[h][1]-c[h][0]-1;return l}const F5={resolve:B5,tokenize:Z5},z5={partial:!0,tokenize:j5};function B5(e){return Ay(e),e}function Z5(e,t){let n;return i;function i(o){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(o)}function r(o){return o===null?s(o):he(o)?e.check(z5,a,s)(o):(e.consume(o),r)}function s(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function a(o){return e.consume(o),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function j5(e,t,n){const i=this;return r;function r(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Ue(e,s,"linePrefix")}function s(a){if(a===null||he(a))return n(a);const o=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):e.interrupt(i.parser.constructs.flow,n,t)(a)}}function Iy(e,t,n,i,r,s,a,o,c){const l=c||Number.POSITIVE_INFINITY;let u=0;return d;function d(v){return v===60?(e.enter(i),e.enter(r),e.enter(s),e.consume(v),e.exit(s),h):v===null||v===32||v===41||yl(v)?n(v):(e.enter(i),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),m(v))}function h(v){return v===62?(e.enter(s),e.consume(v),e.exit(s),e.exit(r),e.exit(i),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),p(v))}function p(v){return v===62?(e.exit("chunkString"),e.exit(o),h(v)):v===null||v===60||he(v)?n(v):(e.consume(v),v===92?O:p)}function O(v){return v===60||v===62||v===92?(e.consume(v),p):p(v)}function m(v){return!u&&(v===null||v===41||Je(v))?(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(i),t(v)):u<l&&v===40?(e.consume(v),u++,m):v===41?(e.consume(v),u--,m):v===null||v===32||v===40||yl(v)?n(v):(e.consume(v),v===92?b:m)}function b(v){return v===40||v===41||v===92?(e.consume(v),m):m(v)}}function Qy(e,t,n,i,r,s){const a=this;let o=0,c;return l;function l(p){return e.enter(i),e.enter(r),e.consume(p),e.exit(r),e.enter(s),u}function u(p){return o>999||p===null||p===91||p===93&&!c||p===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?n(p):p===93?(e.exit(s),e.enter(r),e.consume(p),e.exit(r),e.exit(i),t):he(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),d(p))}function d(p){return p===null||p===91||p===93||he(p)||o++>999?(e.exit("chunkString"),u(p)):(e.consume(p),c||(c=!Ie(p)),p===92?h:d)}function h(p){return p===91||p===92||p===93?(e.consume(p),o++,d):d(p)}}function Ny(e,t,n,i,r,s){let a;return o;function o(h){return h===34||h===39||h===40?(e.enter(i),e.enter(r),e.consume(h),e.exit(r),a=h===40?41:h,c):n(h)}function c(h){return h===a?(e.enter(r),e.consume(h),e.exit(r),e.exit(i),t):(e.enter(s),l(h))}function l(h){return h===a?(e.exit(s),c(a)):h===null?n(h):he(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),Ue(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===a||h===null||he(h)?(e.exit("chunkString"),l(h)):(e.consume(h),h===92?d:u)}function d(h){return h===a||h===92?(e.consume(h),u):u(h)}}function To(e,t){let n;return i;function i(r){return he(r)?(e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),n=!0,i):Ie(r)?Ue(e,i,n?"linePrefix":"lineSuffix")(r):t(r)}}const V5={name:"definition",tokenize:G5},W5={partial:!0,tokenize:Y5};function G5(e,t,n){const i=this;let r;return s;function s(p){return e.enter("definition"),a(p)}function a(p){return Qy.call(i,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function o(p){return r=jn(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),c):n(p)}function c(p){return Je(p)?To(e,l)(p):l(p)}function l(p){return Iy(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return e.attempt(W5,d,d)(p)}function d(p){return Ie(p)?Ue(e,h,"whitespace")(p):h(p)}function h(p){return p===null||he(p)?(e.exit("definition"),i.parser.defined.push(r),t(p)):n(p)}}function Y5(e,t,n){return i;function i(o){return Je(o)?To(e,r)(o):n(o)}function r(o){return Ny(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function s(o){return Ie(o)?Ue(e,a,"whitespace")(o):a(o)}function a(o){return o===null||he(o)?t(o):n(o)}}const H5={name:"hardBreakEscape",tokenize:K5};function K5(e,t,n){return i;function i(s){return e.enter("hardBreakEscape"),e.consume(s),r}function r(s){return he(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const J5={name:"headingAtx",resolve:e3,tokenize:t3};function e3(e,t){let n=e.length-2,i=3,r,s;return e[i][1].type==="whitespace"&&(i+=2),n-2>i&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&e[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(r={type:"atxHeadingText",start:e[i][1].start,end:e[n][1].end},s={type:"chunkText",start:e[i][1].start,end:e[n][1].end,contentType:"text"},zt(e,i,n-i+1,[["enter",r,t],["enter",s,t],["exit",s,t],["exit",r,t]])),e}function t3(e,t,n){let i=0;return r;function r(u){return e.enter("atxHeading"),s(u)}function s(u){return e.enter("atxHeadingSequence"),a(u)}function a(u){return u===35&&i++<6?(e.consume(u),a):u===null||Je(u)?(e.exit("atxHeadingSequence"),o(u)):n(u)}function o(u){return u===35?(e.enter("atxHeadingSequence"),c(u)):u===null||he(u)?(e.exit("atxHeading"),t(u)):Ie(u)?Ue(e,o,"whitespace")(u):(e.enter("atxHeadingText"),l(u))}function c(u){return u===35?(e.consume(u),c):(e.exit("atxHeadingSequence"),o(u))}function l(u){return u===null||u===35||Je(u)?(e.exit("atxHeadingText"),o(u)):(e.consume(u),l)}}const n3=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Dy=["pre","script","style","textarea"],i3={concrete:!0,name:"htmlFlow",resolveTo:a3,tokenize:o3},r3={partial:!0,tokenize:l3},s3={partial:!0,tokenize:c3};function a3(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function o3(e,t,n){const i=this;let r,s,a,o,c;return l;function l(R){return u(R)}function u(R){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(R),d}function d(R){return R===33?(e.consume(R),h):R===47?(e.consume(R),s=!0,m):R===63?(e.consume(R),r=3,i.interrupt?t:I):nn(R)?(e.consume(R),a=String.fromCharCode(R),b):n(R)}function h(R){return R===45?(e.consume(R),r=2,p):R===91?(e.consume(R),r=5,o=0,O):nn(R)?(e.consume(R),r=4,i.interrupt?t:I):n(R)}function p(R){return R===45?(e.consume(R),i.interrupt?t:I):n(R)}function O(R){const fe="CDATA[";return R===fe.charCodeAt(o++)?(e.consume(R),o===fe.length?i.interrupt?t:M:O):n(R)}function m(R){return nn(R)?(e.consume(R),a=String.fromCharCode(R),b):n(R)}function b(R){if(R===null||R===47||R===62||Je(R)){const fe=R===47,Ye=a.toLowerCase();return!fe&&!s&&Dy.includes(Ye)?(r=1,i.interrupt?t(R):M(R)):n3.includes(a.toLowerCase())?(r=6,fe?(e.consume(R),v):i.interrupt?t(R):M(R)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(R):s?k(R):y(R))}return R===45||Yt(R)?(e.consume(R),a+=String.fromCharCode(R),b):n(R)}function v(R){return R===62?(e.consume(R),i.interrupt?t:M):n(R)}function k(R){return Ie(R)?(e.consume(R),k):w(R)}function y(R){return R===47?(e.consume(R),w):R===58||R===95||nn(R)?(e.consume(R),T):Ie(R)?(e.consume(R),y):w(R)}function T(R){return R===45||R===46||R===58||R===95||Yt(R)?(e.consume(R),T):S(R)}function S(R){return R===61?(e.consume(R),_):Ie(R)?(e.consume(R),S):y(R)}function _(R){return R===null||R===60||R===61||R===62||R===96?n(R):R===34||R===39?(e.consume(R),c=R,x):Ie(R)?(e.consume(R),_):N(R)}function x(R){return R===c?(e.consume(R),c=null,L):R===null||he(R)?n(R):(e.consume(R),x)}function N(R){return R===null||R===34||R===39||R===47||R===60||R===61||R===62||R===96||Je(R)?S(R):(e.consume(R),N)}function L(R){return R===47||R===62||Ie(R)?y(R):n(R)}function w(R){return R===62?(e.consume(R),D):n(R)}function D(R){return R===null||he(R)?M(R):Ie(R)?(e.consume(R),D):n(R)}function M(R){return R===45&&r===2?(e.consume(R),H):R===60&&r===1?(e.consume(R),se):R===62&&r===4?(e.consume(R),De):R===63&&r===3?(e.consume(R),I):R===93&&r===5?(e.consume(R),de):he(R)&&(r===6||r===7)?(e.exit("htmlFlowData"),e.check(r3,Me,B)(R)):R===null||he(R)?(e.exit("htmlFlowData"),B(R)):(e.consume(R),M)}function B(R){return e.check(s3,F,Me)(R)}function F(R){return e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),q}function q(R){return R===null||he(R)?B(R):(e.enter("htmlFlowData"),M(R))}function H(R){return R===45?(e.consume(R),I):M(R)}function se(R){return R===47?(e.consume(R),a="",Z):M(R)}function Z(R){if(R===62){const fe=a.toLowerCase();return Dy.includes(fe)?(e.consume(R),De):M(R)}return nn(R)&&a.length<8?(e.consume(R),a+=String.fromCharCode(R),Z):M(R)}function de(R){return R===93?(e.consume(R),I):M(R)}function I(R){return R===62?(e.consume(R),De):R===45&&r===2?(e.consume(R),I):M(R)}function De(R){return R===null||he(R)?(e.exit("htmlFlowData"),Me(R)):(e.consume(R),De)}function Me(R){return e.exit("htmlFlow"),t(R)}}function c3(e,t,n){const i=this;return r;function r(a){return he(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):n(a)}function s(a){return i.parser.lazy[i.now().line]?n(a):t(a)}}function l3(e,t,n){return i;function i(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(vo,t,n)}}const u3={name:"htmlText",tokenize:d3};function d3(e,t,n){const i=this;let r,s,a;return o;function o(I){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(I),c}function c(I){return I===33?(e.consume(I),l):I===47?(e.consume(I),S):I===63?(e.consume(I),y):nn(I)?(e.consume(I),N):n(I)}function l(I){return I===45?(e.consume(I),u):I===91?(e.consume(I),s=0,O):nn(I)?(e.consume(I),k):n(I)}function u(I){return I===45?(e.consume(I),p):n(I)}function d(I){return I===null?n(I):I===45?(e.consume(I),h):he(I)?(a=d,se(I)):(e.consume(I),d)}function h(I){return I===45?(e.consume(I),p):d(I)}function p(I){return I===62?H(I):I===45?h(I):d(I)}function O(I){const De="CDATA[";return I===De.charCodeAt(s++)?(e.consume(I),s===De.length?m:O):n(I)}function m(I){return I===null?n(I):I===93?(e.consume(I),b):he(I)?(a=m,se(I)):(e.consume(I),m)}function b(I){return I===93?(e.consume(I),v):m(I)}function v(I){return I===62?H(I):I===93?(e.consume(I),v):m(I)}function k(I){return I===null||I===62?H(I):he(I)?(a=k,se(I)):(e.consume(I),k)}function y(I){return I===null?n(I):I===63?(e.consume(I),T):he(I)?(a=y,se(I)):(e.consume(I),y)}function T(I){return I===62?H(I):y(I)}function S(I){return nn(I)?(e.consume(I),_):n(I)}function _(I){return I===45||Yt(I)?(e.consume(I),_):x(I)}function x(I){return he(I)?(a=x,se(I)):Ie(I)?(e.consume(I),x):H(I)}function N(I){return I===45||Yt(I)?(e.consume(I),N):I===47||I===62||Je(I)?L(I):n(I)}function L(I){return I===47?(e.consume(I),H):I===58||I===95||nn(I)?(e.consume(I),w):he(I)?(a=L,se(I)):Ie(I)?(e.consume(I),L):H(I)}function w(I){return I===45||I===46||I===58||I===95||Yt(I)?(e.consume(I),w):D(I)}function D(I){return I===61?(e.consume(I),M):he(I)?(a=D,se(I)):Ie(I)?(e.consume(I),D):L(I)}function M(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(e.consume(I),r=I,B):he(I)?(a=M,se(I)):Ie(I)?(e.consume(I),M):(e.consume(I),F)}function B(I){return I===r?(e.consume(I),r=void 0,q):I===null?n(I):he(I)?(a=B,se(I)):(e.consume(I),B)}function F(I){return I===null||I===34||I===39||I===60||I===61||I===96?n(I):I===47||I===62||Je(I)?L(I):(e.consume(I),F)}function q(I){return I===47||I===62||Je(I)?L(I):n(I)}function H(I){return I===62?(e.consume(I),e.exit("htmlTextData"),e.exit("htmlText"),t):n(I)}function se(I){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),Z}function Z(I){return Ie(I)?Ue(e,de,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):de(I)}function de(I){return e.enter("htmlTextData"),a(I)}}const Cp={name:"labelEnd",resolveAll:m3,resolveTo:O3,tokenize:g3},h3={tokenize:v3},p3={tokenize:b3},f3={tokenize:T3};function m3(e){let t=-1;const n=[];for(;++t<e.length;){const i=e[t][1];if(n.push(e[t]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",t+=r}}return e.length!==n.length&&zt(e,0,e.length,n),e}function O3(e,t){let n=e.length,i=0,r,s,a,o;for(;n--;)if(r=e[n][1],s){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;e[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(s=n,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(a=n);const c={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},l={type:"label",start:{...e[s][1].start},end:{...e[a][1].end}},u={type:"labelText",start:{...e[s+i+2][1].end},end:{...e[a-2][1].start}};return o=[["enter",c,t],["enter",l,t]],o=Bt(o,e.slice(s+1,s+i+3)),o=Bt(o,[["enter",u,t]]),o=Bt(o,Hs(t.parser.constructs.insideSpan.null,e.slice(s+i+4,a-3),t)),o=Bt(o,[["exit",u,t],e[a-2],e[a-1],["exit",l,t]]),o=Bt(o,e.slice(a+1)),o=Bt(o,[["exit",c,t]]),zt(e,s,e.length,o),e}function g3(e,t,n){const i=this;let r=i.events.length,s,a;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){s=i.events[r][1];break}return o;function o(h){return s?s._inactive?d(h):(a=i.parser.defined.includes(jn(i.sliceSerialize({start:s.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),c):n(h)}function c(h){return h===40?e.attempt(h3,u,a?u:d)(h):h===91?e.attempt(p3,u,a?l:d)(h):a?u(h):d(h)}function l(h){return e.attempt(f3,u,d)(h)}function u(h){return t(h)}function d(h){return s._balanced=!0,n(h)}}function v3(e,t,n){return i;function i(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),r}function r(d){return Je(d)?To(e,s)(d):s(d)}function s(d){return d===41?u(d):Iy(e,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function a(d){return Je(d)?To(e,c)(d):u(d)}function o(d){return n(d)}function c(d){return d===34||d===39||d===40?Ny(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function l(d){return Je(d)?To(e,u)(d):u(d)}function u(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function b3(e,t,n){const i=this;return r;function r(o){return Qy.call(i,e,s,a,"reference","referenceMarker","referenceString")(o)}function s(o){return i.parser.defined.includes(jn(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?t(o):n(o)}function a(o){return n(o)}}function T3(e,t,n){return i;function i(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),r}function r(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const k3={name:"labelStartImage",resolveAll:Cp.resolveAll,tokenize:y3};function y3(e,t,n){const i=this;return r;function r(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),s}function s(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),a):n(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(o):t(o)}}const S3={name:"labelStartLink",resolveAll:Cp.resolveAll,tokenize:_3};function _3(e,t,n){const i=this;return r;function r(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(a):t(a)}}const xp={name:"lineEnding",tokenize:E3};function E3(e,t){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),Ue(e,t,"linePrefix")}}const wl={name:"thematicBreak",tokenize:w3};function w3(e,t,n){let i=0,r;return s;function s(l){return e.enter("thematicBreak"),a(l)}function a(l){return r=l,o(l)}function o(l){return l===r?(e.enter("thematicBreakSequence"),c(l)):i>=3&&(l===null||he(l))?(e.exit("thematicBreak"),t(l)):n(l)}function c(l){return l===r?(e.consume(l),i++,c):(e.exit("thematicBreakSequence"),Ie(l)?Ue(e,o,"whitespace")(l):o(l))}}const hn={continuation:{tokenize:R3},exit:I3,name:"list",tokenize:P3},C3={partial:!0,tokenize:Q3},x3={partial:!0,tokenize:A3};function P3(e,t,n){const i=this,r=i.events[i.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,a=0;return o;function o(p){const O=i.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(O==="listUnordered"?!i.containerState.marker||p===i.containerState.marker:hp(p)){if(i.containerState.type||(i.containerState.type=O,e.enter(O,{_container:!0})),O==="listUnordered")return e.enter("listItemPrefix"),p===42||p===45?e.check(wl,n,l)(p):l(p);if(!i.interrupt||p===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(p)}return n(p)}function c(p){return hp(p)&&++a<10?(e.consume(p),c):(!i.interrupt||a<2)&&(i.containerState.marker?p===i.containerState.marker:p===41||p===46)?(e.exit("listItemValue"),l(p)):n(p)}function l(p){return e.enter("listItemMarker"),e.consume(p),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||p,e.check(vo,i.interrupt?n:u,e.attempt(C3,h,d))}function u(p){return i.containerState.initialBlankLine=!0,s++,h(p)}function d(p){return Ie(p)?(e.enter("listItemPrefixWhitespace"),e.consume(p),e.exit("listItemPrefixWhitespace"),h):n(p)}function h(p){return i.containerState.size=s+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(p)}}function R3(e,t,n){const i=this;return i.containerState._closeFlow=void 0,e.check(vo,r,s);function r(o){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Ue(e,t,"listItemIndent",i.containerState.size+1)(o)}function s(o){return i.containerState.furtherBlankLines||!Ie(o)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,a(o)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(x3,t,a)(o))}function a(o){return i.containerState._closeFlow=!0,i.interrupt=void 0,Ue(e,e.attempt(hn,t,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function A3(e,t,n){const i=this;return Ue(e,r,"listItemIndent",i.containerState.size+1);function r(s){const a=i.events[i.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===i.containerState.size?t(s):n(s)}}function I3(e){e.exit(this.containerState.type)}function Q3(e,t,n){const i=this;return Ue(e,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(s){const a=i.events[i.events.length-1];return!Ie(s)&&a&&a[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const My={name:"setextUnderline",resolveTo:N3,tokenize:D3};function N3(e,t){let n=e.length,i,r,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){i=n;break}e[n][1].type==="paragraph"&&(r=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const a={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[r][1].type="setextHeadingText",s?(e.splice(r,0,["enter",a,t]),e.splice(s+1,0,["exit",e[i][1],t]),e[i][1].end={...e[s][1].end}):e[i][1]=a,e.push(["exit",a,t]),e}function D3(e,t,n){const i=this;let r;return s;function s(l){let u=i.events.length,d;for(;u--;)if(i.events[u][1].type!=="lineEnding"&&i.events[u][1].type!=="linePrefix"&&i.events[u][1].type!=="content"){d=i.events[u][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||d)?(e.enter("setextHeadingLine"),r=l,a(l)):n(l)}function a(l){return e.enter("setextHeadingLineSequence"),o(l)}function o(l){return l===r?(e.consume(l),o):(e.exit("setextHeadingLineSequence"),Ie(l)?Ue(e,c,"lineSuffix")(l):c(l))}function c(l){return l===null||he(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const M3={tokenize:B3,partial:!0};function L3(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:X3,continuation:{tokenize:F3},exit:z3}},text:{91:{name:"gfmFootnoteCall",tokenize:q3},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:$3,resolveTo:U3}}}}function $3(e,t,n){const i=this;let r=i.events.length;const s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a;for(;r--;){const c=i.events[r][1];if(c.type==="labelImage"){a=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return o;function o(c){if(!a||!a._balanced)return n(c);const l=jn(i.sliceSerialize({start:a.end,end:i.now()}));return l.codePointAt(0)!==94||!s.includes(l.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function U3(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},o=[e[n+1],e[n+2],["enter",i,t],e[n+3],e[n+4],["enter",r,t],["exit",r,t],["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",i,t]];return e.splice(n,e.length-n+1,...o),e}function q3(e,t,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s=0,a;return o;function o(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),c}function c(d){return d!==94?n(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",l)}function l(d){if(s>999||d===93&&!a||d===null||d===91||Je(d))return n(d);if(d===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return r.includes(jn(i.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(d)}return Je(d)||(a=!0),s++,e.consume(d),d===92?u:l}function u(d){return d===91||d===92||d===93?(e.consume(d),s++,l):l(d)}}function X3(e,t,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s,a=0,o;return c;function c(O){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(O),e.exit("gfmFootnoteDefinitionLabelMarker"),l}function l(O){return O===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(O),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",u):n(O)}function u(O){if(a>999||O===93&&!o||O===null||O===91||Je(O))return n(O);if(O===93){e.exit("chunkString");const m=e.exit("gfmFootnoteDefinitionLabelString");return s=jn(i.sliceSerialize(m)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(O),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return Je(O)||(o=!0),a++,e.consume(O),O===92?d:u}function d(O){return O===91||O===92||O===93?(e.consume(O),a++,u):u(O)}function h(O){return O===58?(e.enter("definitionMarker"),e.consume(O),e.exit("definitionMarker"),r.includes(s)||r.push(s),Ue(e,p,"gfmFootnoteDefinitionWhitespace")):n(O)}function p(O){return t(O)}}function F3(e,t,n){return e.check(vo,t,e.attempt(M3,t,n))}function z3(e){e.exit("gfmFootnoteDefinition")}function B3(e,t,n){const i=this;return Ue(e,r,"gfmFootnoteDefinitionIndent",5);function r(s){const a=i.events[i.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?t(s):n(s)}}function Z3(e){let t=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:r,resolveAll:i};return t==null&&(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function i(s,a){let o=-1;for(;++o<s.length;)if(s[o][0]==="enter"&&s[o][1].type==="strikethroughSequenceTemporary"&&s[o][1]._close){let c=o;for(;c--;)if(s[c][0]==="exit"&&s[c][1].type==="strikethroughSequenceTemporary"&&s[c][1]._open&&s[o][1].end.offset-s[o][1].start.offset===s[c][1].end.offset-s[c][1].start.offset){s[o][1].type="strikethroughSequence",s[c][1].type="strikethroughSequence";const l={type:"strikethrough",start:Object.assign({},s[c][1].start),end:Object.assign({},s[o][1].end)},u={type:"strikethroughText",start:Object.assign({},s[c][1].end),end:Object.assign({},s[o][1].start)},d=[["enter",l,a],["enter",s[c][1],a],["exit",s[c][1],a],["enter",u,a]],h=a.parser.constructs.insideSpan.null;h&&zt(d,d.length,0,Hs(h,s.slice(c+1,o),a)),zt(d,d.length,0,[["exit",u,a],["enter",s[o][1],a],["exit",s[o][1],a],["exit",l,a]]),zt(s,c-1,o-c+3,d),o=c+d.length-2;break}}for(o=-1;++o<s.length;)s[o][1].type==="strikethroughSequenceTemporary"&&(s[o][1].type="data");return s}function r(s,a,o){const c=this.previous,l=this.events;let u=0;return d;function d(p){return c===126&&l[l.length-1][1].type!=="characterEscape"?o(p):(s.enter("strikethroughSequenceTemporary"),h(p))}function h(p){const O=Ks(c);if(p===126)return u>1?o(p):(s.consume(p),u++,h);if(u<2&&!t)return o(p);const m=s.exit("strikethroughSequenceTemporary"),b=Ks(p);return m._open=!b||b===2&&!!O,m._close=!O||O===2&&!!b,a(p)}}}class j3{constructor(){this.map=[]}add(t,n,i){V3(this,t,n,i)}consume(t){if(this.map.sort(function(s,a){return s[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];i.push(t.slice()),t.length=0;let r=i.pop();for(;r;){for(const s of r)t.push(s);r=i.pop()}this.map.length=0}}function V3(e,t,n,i){let r=0;if(!(n===0&&i.length===0)){for(;r<e.map.length;){if(e.map[r][0]===t){e.map[r][1]+=n,e.map[r][2].push(...i);return}r+=1}e.map.push([t,n,i])}}function W3(e,t){let n=!1;const i=[];for(;t<e.length;){const r=e[t];if(n){if(r[0]==="enter")r[1].type==="tableContent"&&i.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=i.length-1;i[s]=i[s]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return i}function G3(){return{flow:{null:{name:"table",tokenize:Y3,resolveAll:H3}}}}function Y3(e,t,n){const i=this;let r=0,s=0,a;return o;function o(w){let D=i.events.length-1;for(;D>-1;){const F=i.events[D][1].type;if(F==="lineEnding"||F==="linePrefix")D--;else break}const M=D>-1?i.events[D][1].type:null,B=M==="tableHead"||M==="tableRow"?_:c;return B===_&&i.parser.lazy[i.now().line]?n(w):B(w)}function c(w){return e.enter("tableHead"),e.enter("tableRow"),l(w)}function l(w){return w===124||(a=!0,s+=1),u(w)}function u(w){return w===null?n(w):he(w)?s>1?(s=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),p):n(w):Ie(w)?Ue(e,u,"whitespace")(w):(s+=1,a&&(a=!1,r+=1),w===124?(e.enter("tableCellDivider"),e.consume(w),e.exit("tableCellDivider"),a=!0,u):(e.enter("data"),d(w)))}function d(w){return w===null||w===124||Je(w)?(e.exit("data"),u(w)):(e.consume(w),w===92?h:d)}function h(w){return w===92||w===124?(e.consume(w),d):d(w)}function p(w){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(w):(e.enter("tableDelimiterRow"),a=!1,Ie(w)?Ue(e,O,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(w):O(w))}function O(w){return w===45||w===58?b(w):w===124?(a=!0,e.enter("tableCellDivider"),e.consume(w),e.exit("tableCellDivider"),m):S(w)}function m(w){return Ie(w)?Ue(e,b,"whitespace")(w):b(w)}function b(w){return w===58?(s+=1,a=!0,e.enter("tableDelimiterMarker"),e.consume(w),e.exit("tableDelimiterMarker"),v):w===45?(s+=1,v(w)):w===null||he(w)?T(w):S(w)}function v(w){return w===45?(e.enter("tableDelimiterFiller"),k(w)):S(w)}function k(w){return w===45?(e.consume(w),k):w===58?(a=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(w),e.exit("tableDelimiterMarker"),y):(e.exit("tableDelimiterFiller"),y(w))}function y(w){return Ie(w)?Ue(e,T,"whitespace")(w):T(w)}function T(w){return w===124?O(w):w===null||he(w)?!a||r!==s?S(w):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(w)):S(w)}function S(w){return n(w)}function _(w){return e.enter("tableRow"),x(w)}function x(w){return w===124?(e.enter("tableCellDivider"),e.consume(w),e.exit("tableCellDivider"),x):w===null||he(w)?(e.exit("tableRow"),t(w)):Ie(w)?Ue(e,x,"whitespace")(w):(e.enter("data"),N(w))}function N(w){return w===null||w===124||Je(w)?(e.exit("data"),x(w)):(e.consume(w),w===92?L:N)}function L(w){return w===92||w===124?(e.consume(w),N):N(w)}}function H3(e,t){let n=-1,i=!0,r=0,s=[0,0,0,0],a=[0,0,0,0],o=!1,c=0,l,u,d;const h=new j3;for(;++n<e.length;){const p=e[n],O=p[1];p[0]==="enter"?O.type==="tableHead"?(o=!1,c!==0&&(Ly(h,t,c,l,u),u=void 0,c=0),l={type:"table",start:Object.assign({},O.start),end:Object.assign({},O.end)},h.add(n,0,[["enter",l,t]])):O.type==="tableRow"||O.type==="tableDelimiterRow"?(i=!0,d=void 0,s=[0,0,0,0],a=[0,n+1,0,0],o&&(o=!1,u={type:"tableBody",start:Object.assign({},O.start),end:Object.assign({},O.end)},h.add(n,0,[["enter",u,t]])),r=O.type==="tableDelimiterRow"?2:u?3:1):r&&(O.type==="data"||O.type==="tableDelimiterMarker"||O.type==="tableDelimiterFiller")?(i=!1,a[2]===0&&(s[1]!==0&&(a[0]=a[1],d=Cl(h,t,s,r,void 0,d),s=[0,0,0,0]),a[2]=n)):O.type==="tableCellDivider"&&(i?i=!1:(s[1]!==0&&(a[0]=a[1],d=Cl(h,t,s,r,void 0,d)),s=a,a=[s[1],n,0,0])):O.type==="tableHead"?(o=!0,c=n):O.type==="tableRow"||O.type==="tableDelimiterRow"?(c=n,s[1]!==0?(a[0]=a[1],d=Cl(h,t,s,r,n,d)):a[1]!==0&&(d=Cl(h,t,a,r,n,d)),r=0):r&&(O.type==="data"||O.type==="tableDelimiterMarker"||O.type==="tableDelimiterFiller")&&(a[3]=n)}for(c!==0&&Ly(h,t,c,l,u),h.consume(t.events),n=-1;++n<t.events.length;){const p=t.events[n];p[0]==="enter"&&p[1].type==="table"&&(p[1]._align=W3(t.events,n))}return e}function Cl(e,t,n,i,r,s){const a=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",o="tableContent";n[0]!==0&&(s.end=Object.assign({},ea(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const c=ea(t.events,n[1]);if(s={type:a,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const l=ea(t.events,n[2]),u=ea(t.events,n[3]),d={type:o,start:Object.assign({},l),end:Object.assign({},u)};if(e.add(n[2],0,[["enter",d,t]]),i!==2){const h=t.events[n[2]],p=t.events[n[3]];if(h[1].end=Object.assign({},p[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const O=n[2]+1,m=n[3]-n[2]-1;e.add(O,m,[])}}e.add(n[3]+1,0,[["exit",d,t]])}return r!==void 0&&(s.end=Object.assign({},ea(t.events,r)),e.add(r,0,[["exit",s,t]]),s=void 0),s}function Ly(e,t,n,i,r){const s=[],a=ea(t.events,n);r&&(r.end=Object.assign({},a),s.push(["exit",r,t])),i.end=Object.assign({},a),s.push(["exit",i,t]),e.add(n+1,0,s)}function ea(e,t){const n=e[t],i=n[0]==="enter"?"start":"end";return n[1][i]}const K3={name:"tasklistCheck",tokenize:eU};function J3(){return{text:{91:K3}}}function eU(e,t,n){const i=this;return r;function r(c){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),s)}function s(c){return Je(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),a):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),a):n(c)}function a(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),o):n(c)}function o(c){return he(c)?t(c):Ie(c)?e.check({tokenize:tU},t,n)(c):n(c)}}function tU(e,t,n){return Ue(e,i,"whitespace");function i(r){return r===null?n(r):t(r)}}function nU(e){return Oy([h5(),L3(),Z3(e),G3(),J3()])}const iU={};function rU(e){const t=this,n=e||iU,i=t.data(),r=i.micromarkExtensions||(i.micromarkExtensions=[]),s=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),a=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);r.push(nU(n)),s.push(a5()),a.push(o5(n))}const $y=1024;let sU=0;class Pp{constructor(t,n){this.from=t,this.to=n}}class We{constructor(t={}){this.id=sU++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=t.combine||null}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=rn.match(t)),n=>{let i=t(n);return i===void 0?null:[this,i]}}}We.closedBy=new We({deserialize:e=>e.split(" ")}),We.openedBy=new We({deserialize:e=>e.split(" ")}),We.group=new We({deserialize:e=>e.split(" ")}),We.isolate=new We({deserialize:e=>{if(e&&e!="rtl"&&e!="ltr"&&e!="auto")throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),We.contextHash=new We({perNode:!0}),We.lookAhead=new We({perNode:!0}),We.mounted=new We({perNode:!0});class xl{constructor(t,n,i){this.tree=t,this.overlay=n,this.parser=i}static get(t){return t&&t.props&&t.props[We.mounted.id]}}const aU=Object.create(null);class rn{constructor(t,n,i,r=0){this.name=t,this.props=n,this.id=i,this.flags=r}static define(t){let n=t.props&&t.props.length?Object.create(null):aU,i=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),r=new rn(t.name||"",n,t.id,i);if(t.props){for(let s of t.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let n=this.prop(We.group);return n?n.indexOf(t)>-1:!1}return this.id==t}static match(t){let n=Object.create(null);for(let i in t)for(let r of i.split(" "))n[r]=t[i];return i=>{for(let r=i.prop(We.group),s=-1;s<(r?r.length:0);s++){let a=n[s<0?i.name:r[s]];if(a)return a}}}}rn.none=new rn("",Object.create(null),0,8);class ko{constructor(t){this.types=t;for(let n=0;n<t.length;n++)if(t[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let n=[];for(let i of this.types){let r=null;for(let s of t){let a=s(i);if(a){r||(r=Object.assign({},i.props));let o=a[1],c=a[0];c.combine&&c.id in r&&(o=c.combine(r[c.id],o)),r[c.id]=o}}n.push(r?new rn(i.name,r,i.id,i.flags):i)}return new ko(n)}}const Pl=new WeakMap,Uy=new WeakMap;var Zt;(function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"})(Zt||(Zt={}));class kt{constructor(t,n,i,r,s){if(this.type=t,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[a,o]of s)this.props[typeof a=="number"?a:a.id]=o}}toString(){let t=xl.get(this);if(t&&!t.overlay)return t.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(t=0){return new Ip(this.topNode,t)}cursorAt(t,n=0,i=0){let r=Pl.get(this)||this.topNode,s=new Ip(r);return s.moveTo(t,n),Pl.set(this,s._tree),s}get topNode(){return new In(this,0,0,null)}resolve(t,n=0){let i=yo(Pl.get(this)||this.topNode,t,n,!1);return Pl.set(this,i),i}resolveInner(t,n=0){let i=yo(Uy.get(this)||this.topNode,t,n,!0);return Uy.set(this,i),i}resolveStack(t,n=0){return lU(this,t,n)}iterate(t){let{enter:n,leave:i,from:r=0,to:s=this.length}=t,a=t.mode||0,o=(a&Zt.IncludeAnonymous)>0;for(let c=this.cursor(a|Zt.IncludeAnonymous);;){let l=!1;if(c.from<=s&&c.to>=r&&(!o&&c.type.isAnonymous||n(c)!==!1)){if(c.firstChild())continue;l=!0}for(;l&&i&&(o||!c.type.isAnonymous)&&i(c),!c.nextSibling();){if(!c.parent())return;l=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let n in this.props)t.push([+n,this.props[n]]);return t}balance(t={}){return this.children.length<=8?this:Np(rn.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new kt(this.type,n,i,r,this.propValues),t.makeTree||((n,i,r)=>new kt(rn.none,n,i,r)))}static build(t){return uU(t)}}kt.empty=new kt(rn.none,[],[],0);class Rp{constructor(t,n){this.buffer=t,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Rp(this.buffer,this.index)}}class Tr{constructor(t,n,i){this.buffer=t,this.length=n,this.set=i}get type(){return rn.none}toString(){let t=[];for(let n=0;n<this.buffer.length;)t.push(this.childString(n)),n=this.buffer[n+3];return t.join(",")}childString(t){let n=this.buffer[t],i=this.buffer[t+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),t+=4,i==t)return s;let a=[];for(;t<i;)a.push(this.childString(t)),t=this.buffer[t+3];return s+"("+a.join(",")+")"}findChild(t,n,i,r,s){let{buffer:a}=this,o=-1;for(let c=t;c!=n&&!(qy(s,r,a[c+1],a[c+2])&&(o=c,i>0));c=a[c+3]);return o}slice(t,n,i){let r=this.buffer,s=new Uint16Array(n-t),a=0;for(let o=t,c=0;o<n;){s[c++]=r[o++],s[c++]=r[o++]-i;let l=s[c++]=r[o++]-i;s[c++]=r[o++]-t,a=Math.max(a,l)}return new Tr(s,a,this.set)}}function qy(e,t,n,i){switch(e){case-2:return n<t;case-1:return i>=t&&n<t;case 0:return n<t&&i>t;case 1:return n<=t&&i>t;case 2:return i>t;case 4:return!0}}function yo(e,t,n,i){for(var r;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let a=!i&&e instanceof In&&e.index<0?null:e.parent;if(!a)return e;e=a}let s=i?0:Zt.IgnoreOverlays;if(i)for(let a=e,o=a.parent;o;a=o,o=a.parent)a instanceof In&&a.index<0&&((r=o.enter(t,n,s))===null||r===void 0?void 0:r.from)!=a.from&&(e=o);for(;;){let a=e.enter(t,n,s);if(!a)return e;e=a}}class Xy{cursor(t=0){return new Ip(this,t)}getChild(t,n=null,i=null){let r=Fy(this,t,n,i);return r.length?r[0]:null}getChildren(t,n=null,i=null){return Fy(this,t,n,i)}resolve(t,n=0){return yo(this,t,n,!1)}resolveInner(t,n=0){return yo(this,t,n,!0)}matchContext(t){return Ap(this.parent,t)}enterUnfinishedNodesBefore(t){let n=this.childBefore(t),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class In extends Xy{constructor(t,n,i,r){super(),this._tree=t,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,n,i,r,s=0){for(let a=this;;){for(let{children:o,positions:c}=a._tree,l=n>0?o.length:-1;t!=l;t+=n){let u=o[t],d=c[t]+a.from;if(qy(r,i,d,d+u.length)){if(u instanceof Tr){if(s&Zt.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,n,i-d,r);if(h>-1)return new kr(new oU(a,u,t,d),null,h)}else if(s&Zt.IncludeAnonymous||!u.type.isAnonymous||Qp(u)){let h;if(!(s&Zt.IgnoreMounts)&&(h=xl.get(u))&&!h.overlay)return new In(h.tree,d,t,a);let p=new In(u,d,t,a);return s&Zt.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(n<0?u.children.length-1:0,n,i,r)}}}if(s&Zt.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?t=a.index+n:t=n<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}prop(t){return this._tree.prop(t)}enter(t,n,i=0){let r;if(!(i&Zt.IgnoreOverlays)&&(r=xl.get(this._tree))&&r.overlay){let s=t-this.from;for(let{from:a,to:o}of r.overlay)if((n>0?a<=s:a<s)&&(n<0?o>=s:o>s))return new In(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,n,i)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Fy(e,t,n,i){let r=e.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let a=!1;!a;)if(a=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(t)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function Ap(e,t,n=t.length-1){for(let i=e;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[n]&&t[n]!=i.name)return!1;n--}}return!0}class oU{constructor(t,n,i,r){this.parent=t,this.buffer=n,this.index=i,this.start=r}}class kr extends Xy{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,n,i){super(),this.context=t,this._parent=n,this.index=i,this.type=t.buffer.set.types[t.buffer.buffer[i]]}child(t,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],t,n-this.context.start,i);return s<0?null:new kr(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}prop(t){return this.type.prop(t)}enter(t,n,i=0){if(i&Zt.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,t-this.context.start,n);return s<0?null:new kr(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,n=t.buffer[this.index+3];return n<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new kr(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new kr(this.context,this._parent,t.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let a=i.buffer[this.index+1];t.push(i.slice(r,s,a)),n.push(0)}return new kt(this.type,t,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function zy(e){if(!e.length)return null;let t=0,n=e[0];for(let s=1;s<e.length;s++){let a=e[s];(a.from>n.from||a.to<n.to)&&(n=a,t=s)}let i=n instanceof In&&n.index<0?null:n.parent,r=e.slice();return i?r[t]=i:r.splice(t,1),new cU(r,n)}class cU{constructor(t,n){this.heads=t,this.node=n}get next(){return zy(this.heads)}}function lU(e,t,n){let i=e.resolveInner(t,n),r=null;for(let s=i instanceof In?i:i.context.parent;s;s=s.parent)if(s.index<0){let a=s.parent;(r||(r=[i])).push(a.resolve(t,n)),s=a}else{let a=xl.get(s.tree);if(a&&a.overlay&&a.overlay[0].from<=t&&a.overlay[a.overlay.length-1].to>=t){let o=new In(a.tree,a.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(yo(o,t,n,!1))}}return r?zy(r):i}class Ip{get name(){return this.type.name}constructor(t,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof In)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let i=t._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,n){this.index=t;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[t]],this.from=i+r.buffer[t+1],this.to=i+r.buffer[t+2],!0}yield(t){return t?t instanceof In?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],t,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,n,i=this.mode){return this.buffer?i&Zt.ExcludeBuffers?!1:this.enterChild(1,t,n):this.yield(this._tree.enter(t,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Zt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&Zt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(t<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let n,i,{buffer:r}=this;if(r){if(t>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+t,a=t<0?-1:i._tree.children.length;s!=a;s+=t){let o=i._tree.children[s];if(this.mode&Zt.IncludeAnonymous||o instanceof Tr||!o.type.isAnonymous||Qp(o))return!1}return!0}move(t,n){if(n&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,n=0){for(;(this.from==this.to||(n<1?this.from>=t:this.from>t)||(n>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,n););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,n=null,i=0;if(t&&t.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let a=t;a;a=a._parent)if(a.index==r){if(r==this.index)return a;n=a,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new kr(this.buffer,n,this.stack[r]);return this.bufferNode=new kr(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(t){if(!this.buffer)return Ap(this.node.parent,t);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=t.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return Ap(this._tree,t,r);let a=i[n.buffer[this.stack[s]]];if(!a.isAnonymous){if(t[r]&&t[r]!=a.name)return!1;r--}}return!0}}function Qp(e){return e.children.some(t=>t instanceof Tr||!t.type.isAnonymous||Qp(t))}function uU(e){var t;let{buffer:n,nodeSet:i,maxBufferLength:r=$y,reused:s=[],minRepeatType:a=i.types.length}=e,o=Array.isArray(n)?new Rp(n,n.length):n,c=i.types,l=0,u=0;function d(S,_,x,N,L,w){let{id:D,start:M,end:B,size:F}=o,q=u,H=l;if(F<0)if(o.next(),F==-1){let De=s[D];x.push(De),N.push(M-S);return}else if(F==-3){l=D;return}else if(F==-4){u=D;return}else throw new RangeError(`Unrecognized record size: ${F}`);let se=c[D],Z,de,I=M-S;if(B-M<=r&&(de=b(o.pos-_,L))){let De=new Uint16Array(de.size-de.skip),Me=o.pos-de.size,R=De.length;for(;o.pos>Me;)R=v(de.start,De,R);Z=new Tr(De,B-de.start,i),I=de.start-S}else{let De=o.pos-F;o.next();let Me=[],R=[],fe=D>=a?D:-1,Ye=0,Qe=B;for(;o.pos>De;)fe>=0&&o.id==fe&&o.size>=0?(o.end<=Qe-r&&(O(Me,R,M,Ye,o.end,Qe,fe,q,H),Ye=Me.length,Qe=o.end),o.next()):w>2500?h(M,De,Me,R):d(M,De,Me,R,fe,w+1);if(fe>=0&&Ye>0&&Ye<Me.length&&O(Me,R,M,Ye,M,Qe,fe,q,H),Me.reverse(),R.reverse(),fe>-1&&Ye>0){let ae=p(se,H);Z=Np(se,Me,R,0,Me.length,0,B-M,ae,ae)}else Z=m(se,Me,R,B-M,q-B,H)}x.push(Z),N.push(I)}function h(S,_,x,N){let L=[],w=0,D=-1;for(;o.pos>_;){let{id:M,start:B,end:F,size:q}=o;if(q>4)o.next();else{if(D>-1&&B<D)break;D<0&&(D=F-r),L.push(M,B,F),w++,o.next()}}if(w){let M=new Uint16Array(w*4),B=L[L.length-2];for(let F=L.length-3,q=0;F>=0;F-=3)M[q++]=L[F],M[q++]=L[F+1]-B,M[q++]=L[F+2]-B,M[q++]=q;x.push(new Tr(M,L[2]-B,i)),N.push(B-S)}}function p(S,_){return(x,N,L)=>{let w=0,D=x.length-1,M,B;if(D>=0&&(M=x[D])instanceof kt){if(!D&&M.type==S&&M.length==L)return M;(B=M.prop(We.lookAhead))&&(w=N[D]+M.length+B)}return m(S,x,N,L,w,_)}}function O(S,_,x,N,L,w,D,M,B){let F=[],q=[];for(;S.length>N;)F.push(S.pop()),q.push(_.pop()+x-L);S.push(m(i.types[D],F,q,w-L,M-w,B)),_.push(L-x)}function m(S,_,x,N,L,w,D){if(w){let M=[We.contextHash,w];D=D?[M].concat(D):[M]}if(L>25){let M=[We.lookAhead,L];D=D?[M].concat(D):[M]}return new kt(S,_,x,N,D)}function b(S,_){let x=o.fork(),N=0,L=0,w=0,D=x.end-r,M={size:0,start:0,skip:0};e:for(let B=x.pos-S;x.pos>B;){let F=x.size;if(x.id==_&&F>=0){M.size=N,M.start=L,M.skip=w,w+=4,N+=4,x.next();continue}let q=x.pos-F;if(F<0||q<B||x.start<D)break;let H=x.id>=a?4:0,se=x.start;for(x.next();x.pos>q;){if(x.size<0)if(x.size==-3||x.size==-4)H+=4;else break e;else x.id>=a&&(H+=4);x.next()}L=se,N+=F,w+=H}return(_<0||N==S)&&(M.size=N,M.start=L,M.skip=w),M.size>4?M:void 0}function v(S,_,x){let{id:N,start:L,end:w,size:D}=o;if(o.next(),D>=0&&N<a){let M=x;if(D>4){let B=o.pos-(D-4);for(;o.pos>B;)x=v(S,_,x)}_[--x]=M,_[--x]=w-S,_[--x]=L-S,_[--x]=N}else D==-3?l=N:D==-4&&(u=N);return x}let k=[],y=[];for(;o.pos>0;)d(e.start||0,e.bufferStart||0,k,y,-1,0);let T=(t=e.length)!==null&&t!==void 0?t:k.length?y[0]+k[0].length:0;return new kt(c[e.topID],k.reverse(),y.reverse(),T)}const By=new WeakMap;function Rl(e,t){if(!e.isAnonymous||t instanceof Tr||t.type!=e)return 1;let n=By.get(t);if(n==null){n=1;for(let i of t.children){if(i.type!=e||!(i instanceof kt)){n=1;break}n+=Rl(e,i)}By.set(t,n)}return n}function Np(e,t,n,i,r,s,a,o,c){let l=0;for(let O=i;O<r;O++)l+=Rl(e,t[O]);let u=Math.ceil(l*1.5/8),d=[],h=[];function p(O,m,b,v,k){for(let y=b;y<v;){let T=y,S=m[y],_=Rl(e,O[y]);for(y++;y<v;y++){let x=Rl(e,O[y]);if(_+x>=u)break;_+=x}if(y==T+1){if(_>u){let x=O[T];p(x.children,x.positions,0,x.children.length,m[T]+k);continue}d.push(O[T])}else{let x=m[y-1]+O[y-1].length-S;d.push(Np(e,O,m,T,y,S,x,null,c))}h.push(S+k-s)}}return p(t,n,i,r,0),(o||c)(d,h,a)}class Zy{startParse(t,n,i){return typeof t=="string"&&(t=new dU(t)),i=i?i.length?i.map(r=>new Pp(r.from,r.to)):[new Pp(0,0)]:[new Pp(0,t.length)],this.createParse(t,n||[],i)}parse(t,n,i){let r=this.startParse(t,n,i);for(;;){let s=r.advance();if(s)return s}}}class dU{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,n){return this.string.slice(t,n)}}new We({perNode:!0});let hU=0,ui=class Dm{constructor(t,n,i,r){this.name=t,this.set=n,this.base=i,this.modified=r,this.id=hU++}toString(){let{name:t}=this;for(let n of this.modified)n.name&&(t=`${n.name}(${t})`);return t}static define(t,n){let i=typeof t=="string"?t:"?";if(t instanceof Dm&&(n=t),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new Dm(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(t){let n=new Al(t);return i=>i.modified.indexOf(n)>-1?i:Al.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}},pU=0;class Al{constructor(t){this.name=t,this.instances=[],this.id=pU++}static get(t,n){if(!n.length)return t;let i=n[0].instances.find(o=>o.base==t&&fU(n,o.modified));if(i)return i;let r=[],s=new ui(t.name,r,t,n);for(let o of n)o.instances.push(s);let a=mU(n);for(let o of t.set)if(!o.modified.length)for(let c of a)r.push(Al.get(o,c));return s}}function fU(e,t){return e.length==t.length&&e.every((n,i)=>n==t[i])}function mU(e){let t=[[]];for(let n=0;n<e.length;n++)for(let i=0,r=t.length;i<r;i++)t.push(t[i].concat(e[n]));return t.sort((n,i)=>i.length-n.length)}function yr(e){let t=Object.create(null);for(let n in e){let i=e[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],a=2,o=r;for(let d=0;;){if(o=="..."&&d>0&&d+3==r.length){a=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!h)throw new RangeError("Invalid path: "+r);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==r.length)break;let p=r[d++];if(d==r.length&&p=="!"){a=0;break}if(p!="/")throw new RangeError("Invalid path: "+r);o=r.slice(d)}let c=s.length-1,l=s[c];if(!l)throw new RangeError("Invalid path: "+r);let u=new So(i,a,c>0?s.slice(0,c):null);t[l]=u.sort(t[l])}}return jy.add(t)}const jy=new We({combine(e,t){let n,i,r;for(;e||t;){if(!e||t&&e.depth>=t.depth?(r=t,t=t.next):(r=e,e=e.next),n&&n.mode==r.mode&&!r.context&&!n.context)continue;let s=new So(r.tags,r.mode,r.context);n?n.next=s:i=s,n=s}return i}});class So{constructor(t,n,i,r){this.tags=t,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}So.empty=new So([],2,null);function OU(e,t){let n=Object.create(null);for(let s of e)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let a of s.tag)n[a.id]=s.class;let{scope:i,all:r=null}={};return{style:s=>{let a=r;for(let o of s)for(let c of o.set){let l=n[c.id];if(l){a=a?a+" "+l:l;break}}return a},scope:i}}function gU(e,t){let n=null;for(let i of e){let r=i.style(t);r&&(n=n?n+" "+r:r)}return n}function vU(e,t,n,i=0,r=e.length){let s=new bU(i,Array.isArray(t)?t:[t],n);s.highlightRange(e.cursor(),i,r,"",s.highlighters),s.flush(r)}class bU{constructor(t,n,i){this.at=t,this.highlighters=n,this.span=i,this.class=""}startSpan(t,n){n!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=n)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,n,i,r,s){let{type:a,from:o,to:c}=t;if(o>=i||c<=n)return;a.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(a)));let l=r,u=TU(t)||So.empty,d=gU(s,u.tags);if(d&&(l&&(l+=" "),l+=d,u.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,o),l),u.opaque)return;let h=t.tree&&t.tree.prop(We.mounted);if(h&&h.overlay){let p=t.node.enter(h.overlay[0].from+o,1),O=this.highlighters.filter(b=>!b.scope||b.scope(h.tree.type)),m=t.firstChild();for(let b=0,v=o;;b++){let k=b<h.overlay.length?h.overlay[b]:null,y=k?k.from+o:c,T=Math.max(n,v),S=Math.min(i,y);if(T<S&&m)for(;t.from<S&&(this.highlightRange(t,T,S,r,s),this.startSpan(Math.min(S,t.to),l),!(t.to>=y||!t.nextSibling())););if(!k||y>i)break;v=k.to+o,v>n&&(this.highlightRange(p.cursor(),Math.max(n,k.from+o),Math.min(i,v),"",O),this.startSpan(Math.min(i,v),l))}m&&t.parent()}else if(t.firstChild()){h&&(r="");do if(!(t.to<=n)){if(t.from>=i)break;this.highlightRange(t,n,i,r,s),this.startSpan(Math.min(i,t.to),l)}while(t.nextSibling());t.parent()}}}function TU(e){let t=e.type.prop(jy);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}const re=ui.define,Il=re(),Sr=re(),Vy=re(Sr),Wy=re(Sr),_r=re(),Ql=re(_r),Dp=re(_r),di=re(),ns=re(di),hi=re(),pi=re(),Mp=re(),_o=re(Mp),Nl=re(),Q={comment:Il,lineComment:re(Il),blockComment:re(Il),docComment:re(Il),name:Sr,variableName:re(Sr),typeName:Vy,tagName:re(Vy),propertyName:Wy,attributeName:re(Wy),className:re(Sr),labelName:re(Sr),namespace:re(Sr),macroName:re(Sr),literal:_r,string:Ql,docString:re(Ql),character:re(Ql),attributeValue:re(Ql),number:Dp,integer:re(Dp),float:re(Dp),bool:re(_r),regexp:re(_r),escape:re(_r),color:re(_r),url:re(_r),keyword:hi,self:re(hi),null:re(hi),atom:re(hi),unit:re(hi),modifier:re(hi),operatorKeyword:re(hi),controlKeyword:re(hi),definitionKeyword:re(hi),moduleKeyword:re(hi),operator:pi,derefOperator:re(pi),arithmeticOperator:re(pi),logicOperator:re(pi),bitwiseOperator:re(pi),compareOperator:re(pi),updateOperator:re(pi),definitionOperator:re(pi),typeOperator:re(pi),controlOperator:re(pi),punctuation:Mp,separator:re(Mp),bracket:_o,angleBracket:re(_o),squareBracket:re(_o),paren:re(_o),brace:re(_o),content:di,heading:ns,heading1:re(ns),heading2:re(ns),heading3:re(ns),heading4:re(ns),heading5:re(ns),heading6:re(ns),contentSeparator:re(di),list:re(di),quote:re(di),emphasis:re(di),strong:re(di),link:re(di),monospace:re(di),strikethrough:re(di),inserted:re(),deleted:re(),changed:re(),invalid:re(),meta:Nl,documentMeta:re(Nl),annotation:re(Nl),processingInstruction:re(Nl),definition:ui.defineModifier("definition"),constant:ui.defineModifier("constant"),function:ui.defineModifier("function"),standard:ui.defineModifier("standard"),local:ui.defineModifier("local"),special:ui.defineModifier("special")};for(let e in Q){let t=Q[e];t instanceof ui&&(t.name=e)}const kU=OU([{tag:Q.link,class:"tok-link"},{tag:Q.heading,class:"tok-heading"},{tag:Q.emphasis,class:"tok-emphasis"},{tag:Q.strong,class:"tok-strong"},{tag:Q.keyword,class:"tok-keyword"},{tag:Q.atom,class:"tok-atom"},{tag:Q.bool,class:"tok-bool"},{tag:Q.url,class:"tok-url"},{tag:Q.labelName,class:"tok-labelName"},{tag:Q.inserted,class:"tok-inserted"},{tag:Q.deleted,class:"tok-deleted"},{tag:Q.literal,class:"tok-literal"},{tag:Q.string,class:"tok-string"},{tag:Q.number,class:"tok-number"},{tag:[Q.regexp,Q.escape,Q.special(Q.string)],class:"tok-string2"},{tag:Q.variableName,class:"tok-variableName"},{tag:Q.local(Q.variableName),class:"tok-variableName tok-local"},{tag:Q.definition(Q.variableName),class:"tok-variableName tok-definition"},{tag:Q.special(Q.variableName),class:"tok-variableName2"},{tag:Q.definition(Q.propertyName),class:"tok-propertyName tok-definition"},{tag:Q.typeName,class:"tok-typeName"},{tag:Q.namespace,class:"tok-namespace"},{tag:Q.className,class:"tok-className"},{tag:Q.macroName,class:"tok-macroName"},{tag:Q.propertyName,class:"tok-propertyName"},{tag:Q.operator,class:"tok-operator"},{tag:Q.comment,class:"tok-comment"},{tag:Q.meta,class:"tok-meta"},{tag:Q.invalid,class:"tok-invalid"},{tag:Q.punctuation,class:"tok-punctuation"}]);function yU(e,t){const n=[];let i=0;return vU(t,kU,(r,s,a)=>{r>i&&n.push({type:"text",value:e.slice(i,r)}),n.push({type:"element",tagName:"span",properties:{className:a},children:[{type:"text",value:e.slice(r,s)}]}),i=s}),i<e.length&&n.push({type:"text",value:e.slice(i)}),{type:"root",children:n}}const SU=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,_U=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,EU={};function Gy(e,t){return(EU.jsx?_U:SU).test(e)}const wU=/[ \t\n\f\r]/g;function CU(e){return typeof e=="object"?e.type==="text"?Yy(e.value):!1:Yy(e)}function Yy(e){return e.replace(wU,"")===""}function Hy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ta={},Lp,Ky;function xU(){if(Ky)return Lp;Ky=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,o=/^\s+|\s+$/g,c=`
`,l="/",u="*",d="",h="comment",p="declaration";function O(b,v){if(typeof b!="string")throw new TypeError("First argument must be a string");if(!b)return[];v=v||{};var k=1,y=1;function T(F){var q=F.match(t);q&&(k+=q.length);var H=F.lastIndexOf(c);y=~H?F.length-H:y+F.length}function S(){var F={line:k,column:y};return function(q){return q.position=new _(F),L(),q}}function _(F){this.start=F,this.end={line:k,column:y},this.source=v.source}_.prototype.content=b;function x(F){var q=new Error(v.source+":"+k+":"+y+": "+F);if(q.reason=F,q.filename=v.source,q.line=k,q.column=y,q.source=b,!v.silent)throw q}function N(F){var q=F.exec(b);if(q){var H=q[0];return T(H),b=b.slice(H.length),q}}function L(){N(n)}function w(F){var q;for(F=F||[];q=D();)q!==!1&&F.push(q);return F}function D(){var F=S();if(!(l!=b.charAt(0)||u!=b.charAt(1))){for(var q=2;d!=b.charAt(q)&&(u!=b.charAt(q)||l!=b.charAt(q+1));)++q;if(q+=2,d===b.charAt(q-1))return x("End of comment missing");var H=b.slice(2,q-2);return y+=2,T(H),b=b.slice(q),y+=2,F({type:h,comment:H})}}function M(){var F=S(),q=N(i);if(q){if(D(),!N(r))return x("property missing ':'");var H=N(s),se=F({type:p,property:m(q[0].replace(e,d)),value:H?m(H[0].replace(e,d)):d});return N(a),se}}function B(){var F=[];w(F);for(var q;q=M();)q!==!1&&(F.push(q),w(F));return F}return L(),B()}function m(b){return b?b.replace(o,d):d}return Lp=O,Lp}var Jy;function PU(){if(Jy)return ta;Jy=1;var e=ta&&ta.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ta,"__esModule",{value:!0}),ta.default=n;const t=e(xU());function n(i,r){let s=null;if(!i||typeof i!="string")return s;const a=(0,t.default)(i),o=typeof r=="function";return a.forEach(c=>{if(c.type!=="declaration")return;const{property:l,value:u}=c;o?r(l,u,c):u&&(s=s||{},s[l]=u)}),s}return ta}var Eo={},eS;function RU(){if(eS)return Eo;eS=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,s=function(l){return!l||n.test(l)||e.test(l)},a=function(l,u){return u.toUpperCase()},o=function(l,u){return"".concat(u,"-")},c=function(l,u){return u===void 0&&(u={}),s(l)?l:(l=l.toLowerCase(),u.reactCompat?l=l.replace(r,o):l=l.replace(i,o),l.replace(t,a))};return Eo.camelCase=c,Eo}var wo,tS;function AU(){if(tS)return wo;tS=1;var e=wo&&wo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},t=e(PU()),n=RU();function i(r,s){var a={};return!r||typeof r!="string"||(0,t.default)(r,function(o,c){o&&c&&(a[(0,n.camelCase)(o,s)]=c)}),a}return i.default=i,wo=i,wo}var IU=AU();const QU=Hy(IU);function Co(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?nS(e.position):"start"in e||"end"in e?nS(e):"line"in e||"column"in e?$p(e):""}function $p(e){return iS(e&&e.line)+":"+iS(e&&e.column)}function nS(e){return $p(e&&e.start)+"-"+$p(e&&e.end)}function iS(e){return e&&typeof e=="number"?e:1}class Ht extends Error{constructor(t,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let r="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?r=t:!s.cause&&t&&(a=!0,r=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?s.ruleId=i:(s.source=i.slice(0,c),s.ruleId=i.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const o=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=o?o.line:void 0,this.name=Co(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ht.prototype.file="",Ht.prototype.name="",Ht.prototype.reason="",Ht.prototype.message="",Ht.prototype.stack="",Ht.prototype.column=void 0,Ht.prototype.line=void 0,Ht.prototype.ancestors=void 0,Ht.prototype.cause=void 0,Ht.prototype.fatal=void 0,Ht.prototype.place=void 0,Ht.prototype.ruleId=void 0,Ht.prototype.source=void 0;const Up={}.hasOwnProperty,NU=new Map,DU=/[A-Z]/g,MU=new Set(["table","tbody","thead","tfoot","tr"]),LU=new Set(["td","th"]),rS="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function sS(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let i;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=ZU(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=BU(n,t.jsx,t.jsxs)}const r={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:i,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?mr:no,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=aS(r,e,void 0);return s&&typeof s!="string"?s:r.create(e,r.Fragment,{children:s||void 0},void 0)}function aS(e,t,n){if(t.type==="element")return $U(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return UU(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return XU(e,t,n);if(t.type==="mdxjsEsm")return qU(e,t);if(t.type==="root")return FU(e,t,n);if(t.type==="text")return zU(e,t)}function $U(e,t,n){const i=e.schema;let r=i;t.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=mr,e.schema=r),e.ancestors.push(t);const s=cS(e,t.tagName,!1),a=jU(e,t);let o=Xp(e,t);return MU.has(t.tagName)&&(o=o.filter(function(c){return typeof c=="string"?!CU(c):!0})),oS(e,a,s,t),qp(a,o),e.ancestors.pop(),e.schema=i,e.create(t,s,a,n)}function UU(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}xo(e,t.position)}function qU(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);xo(e,t.position)}function XU(e,t,n){const i=e.schema;let r=i;t.name==="svg"&&i.space==="html"&&(r=mr,e.schema=r),e.ancestors.push(t);const s=t.name===null?e.Fragment:cS(e,t.name,!0),a=VU(e,t),o=Xp(e,t);return oS(e,a,s,t),qp(a,o),e.ancestors.pop(),e.schema=i,e.create(t,s,a,n)}function FU(e,t,n){const i={};return qp(i,Xp(e,t)),e.create(t,e.Fragment,i,n)}function zU(e,t){return t.value}function oS(e,t,n,i){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=i)}function qp(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function BU(e,t,n){return i;function i(r,s,a,o){const c=Array.isArray(a.children)?n:t;return o?c(s,a,o):c(s,a)}}function ZU(e,t){return n;function n(i,r,s,a){const o=Array.isArray(s.children),c=ai(i);return t(r,s,a,o,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function jU(e,t){const n={};let i,r;for(r in t.properties)if(r!=="children"&&Up.call(t.properties,r)){const s=WU(e,r,t.properties[r]);if(s){const[a,o]=s;e.tableCellAlignToStyle&&a==="align"&&typeof o=="string"&&LU.has(t.tagName)?i=o:n[a]=o}}if(i){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function VU(e,t){const n={};for(const i of t.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&e.evaluater){const r=i.data.estree.body[0];r.type;const s=r.expression;s.type;const a=s.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else xo(e,t.position);else{const r=i.name;let s;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&e.evaluater){const a=i.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else xo(e,t.position);else s=i.value===null?!0:i.value;n[r]=s}return n}function Xp(e,t){const n=[];let i=-1;const r=e.passKeys?new Map:NU;for(;++i<t.children.length;){const s=t.children[i];let a;if(e.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const l=r.get(c)||0;a=c+"-"+l,r.set(c,l+1)}}const o=aS(e,s,a);o!==void 0&&n.push(o)}return n}function WU(e,t,n){const i=ll(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?xT(n):AT(n)),i.property==="style"){let r=typeof n=="object"?n:GU(e,String(n));return e.stylePropertyNameCase==="css"&&(r=YU(r)),["style",r]}return[e.elementAttributeNameCase==="react"&&i.space?EN[i.property]||i.property:i.attribute,n]}}function GU(e,t){try{return QU(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const i=n,r=new Ht("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=rS+"#cannot-parse-style-attribute",r}}function cS(e,t,n){let i;if(!n)i={type:"Literal",value:t};else if(t.includes(".")){const r=t.split(".");let s=-1,a;for(;++s<r.length;){const o=Gy(r[s])?{type:"Identifier",name:r[s]}:{type:"Literal",value:r[s]};a=a?{type:"MemberExpression",object:a,property:o,computed:!!(s&&o.type==="Literal"),optional:!1}:o}i=a}else i=Gy(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(i.type==="Literal"){const r=i.value;return Up.call(e.components,r)?e.components[r]:r}if(e.evaluater)return e.evaluater.evaluateExpression(i);xo(e)}function xo(e,t){const n=new Ht("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=rS+"#cannot-handle-mdx-estrees-without-createevaluater",n}function YU(e){const t={};let n;for(n in e)Up.call(e,n)&&(t[HU(n)]=e[n]);return t}function HU(e){let t=e.replace(DU,KU);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function KU(e){return"-"+e.toLowerCase()}class Dl{constructor(t,n,i,r,s,a,o,c,l,u=0,d){this.p=t,this.stack=n,this.state=i,this.reducePos=r,this.pos=s,this.score=a,this.buffer=o,this.bufferBase=c,this.curContext=l,this.lookAhead=u,this.parent=d}toString(){return`[${this.stack.filter((t,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,n,i=0){let r=t.parser.context;return new Dl(t,[],n,i,i,0,[],0,r?new lS(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=t}reduce(t){var n;let i=t>>19,r=t&65535,{parser:s}=this.p,a=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),o=s.dynamicPrecedence(r);if(o&&(this.score+=o),i==0){this.pushState(s.getGoto(this.state,r,!0),this.reducePos),r<s.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(r,this.reducePos);return}let c=this.stack.length-(i-1)*3-(t&262144?6:0),l=c?this.stack[c-2]:this.p.ranges[0].from,u=this.reducePos-l;u>=2e3&&!(!((n=this.p.parser.nodeSet.types[r])===null||n===void 0)&&n.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=u):this.p.lastBigReductionSize<u&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=u));let d=c?this.stack[c-1]:0,h=this.bufferBase+this.buffer.length-d;if(r<s.minRepeatTerm||t&131072){let p=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,l,p,h+4,!0)}if(t&262144)this.state=this.stack[c];else{let p=this.stack[c-3];this.state=s.getGoto(p,r,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(r,l)}storeNode(t,n,i,r=4,s=!1){if(t==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,o=this.buffer.length;if(o==0&&a.parent&&(o=a.bufferBase-a.parent.bufferBase,a=a.parent),o>0&&a.buffer[o-4]==0&&a.buffer[o-1]>-1){if(n==i)return;if(a.buffer[o-2]>=n){a.buffer[o-2]=i;return}}}if(!s||this.pos==i)this.buffer.push(t,n,i,r);else{let a=this.buffer.length;if(a>0&&(this.buffer[a-4]!=0||this.buffer[a-1]<0)){let o=!1;for(let c=a;c>0&&this.buffer[c-2]>i;c-=4)if(this.buffer[c-1]>=0){o=!0;break}if(o)for(;a>0&&this.buffer[a-2]>i;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,r>4&&(r-=4)}this.buffer[a]=t,this.buffer[a+1]=n,this.buffer[a+2]=i,this.buffer[a+3]=r}}shift(t,n,i,r){if(t&131072)this.pushState(t&65535,this.pos);else if((t&262144)==0){let s=t,{parser:a}=this.p;(r>this.pos||n<=a.maxNode)&&(this.pos=r,a.stateFlag(s,1)||(this.reducePos=r)),this.pushState(s,i),this.shiftContext(n,i),n<=a.maxNode&&this.buffer.push(n,i,r,4)}else this.pos=r,this.shiftContext(n,i),n<=this.p.parser.maxNode&&this.buffer.push(n,i,r,4)}apply(t,n,i,r){t&65536?this.reduce(t):this.shift(t,n,i,r)}useNode(t,n){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=t)&&(this.p.reused.push(t),i++);let r=this.pos;this.reducePos=this.pos=r+t.length,this.pushState(n,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,n=t.buffer.length;for(;n>0&&t.buffer[n-2]>t.reducePos;)n-=4;let i=t.buffer.slice(n),r=t.bufferBase+n;for(;t&&r==t.bufferBase;)t=t.parent;return new Dl(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,t)}recoverByDelete(t,n){let i=t<=this.p.parser.maxNode;i&&this.storeNode(t,this.pos,n,4),this.storeNode(0,this.pos,n,i?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(t){for(let n=new JU(this);;){let i=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,t);if(i==0)return!1;if((i&65536)==0)return!0;n.reduce(i)}}recoverByInsert(t){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let r=[];for(let s=0,a;s<n.length;s+=2)(a=n[s+1])!=this.state&&this.p.parser.hasAction(a,t)&&r.push(n[s],a);if(this.stack.length<120)for(let s=0;r.length<8&&s<n.length;s+=2){let a=n[s+1];r.some((o,c)=>c&1&&o==a)||r.push(n[s],a)}n=r}let i=[];for(let r=0;r<n.length&&i.length<4;r+=2){let s=n[r+1];if(s==this.state)continue;let a=this.split();a.pushState(s,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(n[r],this.pos),a.reducePos=this.pos,a.score-=200,i.push(a)}return i}forceReduce(){let{parser:t}=this.p,n=t.stateSlot(this.state,5);if((n&65536)==0)return!1;if(!t.validAction(this.state,n)){let i=n>>19,r=n&65535,s=this.stack.length-i*3;if(s<0||t.getGoto(this.stack[s],r,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;n=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:t}=this.p,n=[],i=(r,s)=>{if(!n.includes(r))return n.push(r),t.allActions(r,a=>{if(!(a&393216))if(a&65536){let o=(a>>19)-s;if(o>1){let c=a&65535,l=this.stack.length-o*3;if(l>=0&&t.getGoto(this.stack[l],c,!1)>=0)return o<<19|65536|c}}else{let o=i(a,s+1);if(o!=null)return o}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:t}=this.p;return t.data[t.stateSlot(this.state,1)]==65535&&!t.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=t.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(n)))}reduceContext(t,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(n)))}emitContext(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(t){if(t!=this.curContext.context){let n=new lS(this.curContext.tracker,t);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(t){return t<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=t,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class lS{constructor(t,n){this.tracker=t,this.context=n,this.hash=t.strict?t.hash(n):0}}class JU{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let n=t&65535,i=t>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=r}}class Ml{constructor(t,n,i){this.stack=t,this.pos=n,this.index=i,this.buffer=t.buffer,this.index==0&&this.maybeNext()}static create(t,n=t.bufferBase+t.buffer.length){return new Ml(t,n,n-t.bufferBase)}maybeNext(){let t=this.stack.parent;t!=null&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Ml(this.stack,this.pos,this.index)}}function Po(e,t=Uint16Array){if(typeof e!="string")return e;let n=null;for(let i=0,r=0;i<e.length;){let s=0;for(;;){let a=e.charCodeAt(i++),o=!1;if(a==126){s=65535;break}a>=92&&a--,a>=34&&a--;let c=a-32;if(c>=46&&(c-=46,o=!0),s+=c,o)break;s*=46}n?n[r++]=s:n=new t(s)}return n}class Ll{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const uS=new Ll;class e4{constructor(t,n){this.input=t,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=uS,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(t,n){let i=this.range,r=this.rangeIndex,s=this.pos+t;for(;s<i.from;){if(!r)return null;let a=this.ranges[--r];s-=i.from-a.to,i=a}for(;n<0?s>i.to:s>=i.to;){if(r==this.ranges.length-1)return null;let a=this.ranges[++r];s+=a.from-i.to,i=a}return s}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let n of this.ranges)if(n.to>t)return Math.max(t,n.from);return this.end}peek(t){let n=this.chunkOff+t,i,r;if(n>=0&&n<this.chunk.length)i=this.pos+t,r=this.chunk.charCodeAt(n);else{let s=this.resolveOffset(t,1);if(s==null)return-1;if(i=s,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let a=this.rangeIndex,o=this.range;for(;o.to<=i;)o=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(t,n=0){let i=n?this.resolveOffset(n,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=i}acceptTokenTo(t,n){this.token.value=t,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),n=this.pos+t.length;this.chunk=n>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,n){if(n?(this.token=n,n.start=t,n.lookAhead=t+1,n.value=n.extended=-1):this.token=uS,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,n){if(t>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,n-this.chunkPos);if(t>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,n-this.chunk2Pos);if(t>=this.range.from&&n<=this.range.to)return this.input.read(t,n);let i="";for(let r of this.ranges){if(r.from>=n)break;r.to>t&&(i+=this.input.read(Math.max(r.from,t),Math.min(r.to,n)))}return i}}class na{constructor(t,n){this.data=t,this.id=n}token(t,n){let{parser:i}=n.p;dS(this.data,t,n,this.id,i.data,i.tokenPrecTable)}}na.prototype.contextual=na.prototype.fallback=na.prototype.extend=!1;class Fp{constructor(t,n,i){this.precTable=n,this.elseToken=i,this.data=typeof t=="string"?Po(t):t}token(t,n){let i=t.pos,r=0;for(;;){let s=t.next<0,a=t.resolveOffset(1,1);if(dS(this.data,t,n,0,this.data,this.precTable),t.token.value>-1)break;if(this.elseToken==null)return;if(s||r++,a==null)break;t.reset(a,t.token)}r&&(t.reset(i,t.token),t.acceptToken(this.elseToken,r))}}Fp.prototype.contextual=na.prototype.fallback=na.prototype.extend=!1;class It{constructor(t,n={}){this.token=t,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function dS(e,t,n,i,r,s){let a=0,o=1<<i,{dialect:c}=n.p.parser;e:for(;(o&e[a])!=0;){let l=e[a+1];for(let p=a+3;p<l;p+=2)if((e[p+1]&o)>0){let O=e[p];if(c.allows(O)&&(t.token.value==-1||t.token.value==O||t4(O,t.token.value,r,s))){t.acceptToken(O);break}}let u=t.next,d=0,h=e[a+2];if(t.next<0&&h>d&&e[l+h*3-3]==65535){a=e[l+h*3-1];continue e}for(;d<h;){let p=d+h>>1,O=l+p+(p<<1),m=e[O],b=e[O+1]||65536;if(u<m)h=p;else if(u>=b)d=p+1;else{a=e[O+2],t.advance();continue e}}break}}function hS(e,t,n){for(let i=t,r;(r=e[i])!=65535;i++)if(r==n)return i-t;return-1}function t4(e,t,n,i){let r=hS(n,i,t);return r<0||hS(n,i,e)<r}const kn=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let zp=null;function pS(e,t,n){let i=e.cursor(Zt.IncludeAnonymous);for(i.moveTo(t);;)if(!(n<0?i.childBefore(t):i.childAfter(t)))for(;;){if((n<0?i.to<t:i.from>t)&&!i.type.isError)return n<0?Math.max(0,Math.min(i.to-1,t-25)):Math.min(e.length,Math.max(i.from+1,t+25));if(n<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return n<0?0:e.length}}let n4=class{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?pS(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?pS(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],i=this.index[t];if(i==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=n.children[i],s=this.start[t]+n.positions[i];if(s>e)return this.nextStart=s,null;if(r instanceof kt){if(s==e){if(s<this.safeFrom)return null;let a=s+r.length;if(a<=this.safeTo){let o=r.prop(We.lookAhead);if(!o||a+o<this.fragment.to)return r}}this.index[t]++,s+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+r.length}}};class i4{constructor(t,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map(i=>new Ll)}getActions(t){let n=0,i=null,{parser:r}=t.p,{tokenizers:s}=r,a=r.stateSlot(t.state,3),o=t.curContext?t.curContext.hash:0,c=0;for(let l=0;l<s.length;l++){if((1<<l&a)==0)continue;let u=s[l],d=this.tokens[l];if(!(i&&!u.fallback)&&((u.contextual||d.start!=t.pos||d.mask!=a||d.context!=o)&&(this.updateCachedToken(d,u,t),d.mask=a,d.context=o),d.lookAhead>d.end+25&&(c=Math.max(d.lookAhead,c)),d.value!=0)){let h=n;if(d.extended>-1&&(n=this.addActions(t,d.extended,d.end,n)),n=this.addActions(t,d.value,d.end,n),!u.extend&&(i=d,n>h))break}}for(;this.actions.length>n;)this.actions.pop();return c&&t.setLookAhead(c),!i&&t.pos==this.stream.end&&(i=new Ll,i.value=t.p.parser.eofTerm,i.start=i.end=t.pos,n=this.addActions(t,i.value,i.end,n)),this.mainToken=i,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let n=new Ll,{pos:i,p:r}=t;return n.start=i,n.end=Math.min(i+1,r.stream.end),n.value=i==r.stream.end?r.parser.eofTerm:0,n}updateCachedToken(t,n,i){let r=this.stream.clipPos(i.pos);if(n.token(this.stream.reset(r,t),i),t.value>-1){let{parser:s}=i.p;for(let a=0;a<s.specialized.length;a++)if(s.specialized[a]==t.value){let o=s.specializers[a](this.stream.read(t.start,t.end),i);if(o>=0&&i.p.parser.dialect.allows(o>>1)){(o&1)==0?t.value=o>>1:t.extended=o>>1;break}}}else t.value=0,t.end=this.stream.clipPos(r+1)}putAction(t,n,i,r){for(let s=0;s<r;s+=3)if(this.actions[s]==t)return r;return this.actions[r++]=t,this.actions[r++]=n,this.actions[r++]=i,r}addActions(t,n,i,r){let{state:s}=t,{parser:a}=t.p,{data:o}=a;for(let c=0;c<2;c++)for(let l=a.stateSlot(s,c?2:1);;l+=3){if(o[l]==65535)if(o[l+1]==1)l=qi(o,l+2);else{r==0&&o[l+1]==2&&(r=this.putAction(qi(o,l+2),n,i,r));break}o[l]==n&&(r=this.putAction(qi(o,l+1),n,i,r))}return r}}class r4{constructor(t,n,i,r){this.parser=t,this.input=n,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new e4(n,r),this.tokens=new i4(t,this.stream),this.topTerm=t.top[1];let{from:s}=r[0];this.stacks=[Dl.start(this,t.top[0],s)],this.fragments=i.length&&this.stream.end-s>t.bufferLength*4?new n4(i,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t=this.stacks,n=this.minStackPos,i=this.stacks=[],r,s;if(this.bigReductionCount>300&&t.length==1){let[a]=t;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<t.length;a++){let o=t[a];for(;;){if(this.tokens.mainToken=null,o.pos>n)i.push(o);else{if(this.advanceStack(o,i,t))continue;{r||(r=[],s=[]),r.push(o);let c=this.tokens.getMainToken(o);s.push(c.value,c.end)}}break}}if(!i.length){let a=r&&a4(r);if(a)return kn&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw kn&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&r){let a=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,s,i);if(a)return kn&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(i.length>a)for(i.sort((o,c)=>c.score-o.score);i.length>a;)i.pop();i.some(o=>o.reducePos>n)&&this.recovering--}else if(i.length>1){e:for(let a=0;a<i.length-1;a++){let o=i[a];for(let c=a+1;c<i.length;c++){let l=i[c];if(o.sameState(l)||o.buffer.length>500&&l.buffer.length>500)if((o.score-l.score||o.buffer.length-l.buffer.length)>0)i.splice(c--,1);else{i.splice(a--,1);continue e}}}i.length>12&&(i.sort((a,o)=>o.score-a.score),i.splice(12,i.length-12))}this.minStackPos=i[0].pos;for(let a=1;a<i.length;a++)i[a].pos<this.minStackPos&&(this.minStackPos=i[a].pos);return null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,n,i){let r=t.pos,{parser:s}=this,a=kn?this.stackID(t)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let l=t.curContext&&t.curContext.tracker.strict,u=l?t.curContext.hash:0;for(let d=this.fragments.nodeAt(r);d;){let h=this.parser.nodeSet.types[d.type.id]==d.type?s.getGoto(t.state,d.type.id):-1;if(h>-1&&d.length&&(!l||(d.prop(We.contextHash)||0)==u))return t.useNode(d,h),kn&&console.log(a+this.stackID(t)+` (via reuse of ${s.getName(d.type.id)})`),!0;if(!(d instanceof kt)||d.children.length==0||d.positions[0]>0)break;let p=d.children[0];if(p instanceof kt&&d.positions[0]==0)d=p;else break}}let o=s.stateSlot(t.state,4);if(o>0)return t.reduce(o),kn&&console.log(a+this.stackID(t)+` (via always-reduce ${s.getName(o&65535)})`),!0;if(t.stack.length>=8400)for(;t.stack.length>6e3&&t.forceReduce(););let c=this.tokens.getActions(t);for(let l=0;l<c.length;){let u=c[l++],d=c[l++],h=c[l++],p=l==c.length||!i,O=p?t:t.split(),m=this.tokens.mainToken;if(O.apply(u,d,m?m.start:O.pos,h),kn&&console.log(a+this.stackID(O)+` (via ${(u&65536)==0?"shift":`reduce of ${s.getName(u&65535)}`} for ${s.getName(d)} @ ${r}${O==t?"":", split"})`),p)return!0;O.pos>r?n.push(O):i.push(O)}return!1}advanceFully(t,n){let i=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>i)return fS(t,n),!0}}runRecovery(t,n,i){let r=null,s=!1;for(let a=0;a<t.length;a++){let o=t[a],c=n[a<<1],l=n[(a<<1)+1],u=kn?this.stackID(o)+" -> ":"";if(o.deadEnd&&(s||(s=!0,o.restart(),kn&&console.log(u+this.stackID(o)+" (restarted)"),this.advanceFully(o,i))))continue;let d=o.split(),h=u;for(let p=0;p<10&&d.forceReduce()&&(kn&&console.log(h+this.stackID(d)+" (via force-reduce)"),!this.advanceFully(d,i));p++)kn&&(h=this.stackID(d)+" -> ");for(let p of o.recoverByInsert(c))kn&&console.log(u+this.stackID(p)+" (via recover-insert)"),this.advanceFully(p,i);this.stream.end>o.pos?(l==o.pos&&(l++,c=0),o.recoverByDelete(c,l),kn&&console.log(u+this.stackID(o)+` (via recover-delete ${this.parser.getName(c)})`),fS(o,i)):(!r||r.score<o.score)&&(r=o)}return r}stackToTree(t){return t.close(),kt.build({buffer:Ml.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let n=(zp||(zp=new WeakMap)).get(t);return n||zp.set(t,n=String.fromCodePoint(this.nextStackID++)),n+t}}function fS(e,t){for(let n=0;n<t.length;n++){let i=t[n];if(i.pos==e.pos&&i.sameState(e)){t[n].score<e.score&&(t[n]=e);return}}t.push(e)}class s4{constructor(t,n,i){this.source=t,this.flags=n,this.disabled=i}allows(t){return!this.disabled||this.disabled[t]==0}}const Bp=e=>e;class Ro{constructor(t){this.start=t.start,this.shift=t.shift||Bp,this.reduce=t.reduce||Bp,this.reuse=t.reuse||Bp,this.hash=t.hash||(()=>0),this.strict=t.strict!==!1}}class Ui extends Zy{constructor(t){if(super(),this.wrappers=[],t.version!=14)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (14)`);let n=t.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let o=0;o<t.repeatNodeCount;o++)n.push("");let i=Object.keys(t.topRules).map(o=>t.topRules[o][1]),r=[];for(let o=0;o<n.length;o++)r.push([]);function s(o,c,l){r[o].push([c,c.deserialize(String(l))])}if(t.nodeProps)for(let o of t.nodeProps){let c=o[0];typeof c=="string"&&(c=We[c]);for(let l=1;l<o.length;){let u=o[l++];if(u>=0)s(u,c,o[l++]);else{let d=o[l+-u];for(let h=-u;h>0;h--)s(o[l++],c,d);l++}}}this.nodeSet=new ko(n.map((o,c)=>rn.define({name:c>=this.minRepeatTerm?void 0:o,id:c,props:r[c],top:i.indexOf(c)>-1,error:c==0,skipped:t.skippedNodes&&t.skippedNodes.indexOf(c)>-1}))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=$y;let a=Po(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let o=0;o<this.specializerSpecs.length;o++)this.specialized[o]=this.specializerSpecs[o].term;this.specializers=this.specializerSpecs.map(mS),this.states=Po(t.states,Uint32Array),this.data=Po(t.stateData),this.goto=Po(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map(o=>typeof o=="number"?new na(a,o):o),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,n,i){let r=new r4(this,t,n,i);for(let s of this.wrappers)r=s(r,t,n,i);return r}getGoto(t,n,i=!1){let r=this.goto;if(n>=r[0])return-1;for(let s=r[n+1];;){let a=r[s++],o=a&1,c=r[s++];if(o&&i)return c;for(let l=s+(a>>1);s<l;s++)if(r[s]==t)return c;if(o)return-1}}hasAction(t,n){let i=this.data;for(let r=0;r<2;r++)for(let s=this.stateSlot(t,r?2:1),a;;s+=3){if((a=i[s])==65535)if(i[s+1]==1)a=i[s=qi(i,s+2)];else{if(i[s+1]==2)return qi(i,s+2);break}if(a==n||a==0)return qi(i,s+1)}return 0}stateSlot(t,n){return this.states[t*6+n]}stateFlag(t,n){return(this.stateSlot(t,0)&n)>0}validAction(t,n){return!!this.allActions(t,i=>i==n?!0:null)}allActions(t,n){let i=this.stateSlot(t,4),r=i?n(i):void 0;for(let s=this.stateSlot(t,1);r==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=qi(this.data,s+2);else break;r=n(qi(this.data,s+1))}return r}nextStates(t){let n=[];for(let i=this.stateSlot(t,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=qi(this.data,i+2);else break;if((this.data[i+2]&1)==0){let r=this.data[i+1];n.some((s,a)=>a&1&&s==r)||n.push(this.data[i],r)}}return n}configure(t){let n=Object.assign(Object.create(Ui.prototype),this);if(t.props&&(n.nodeSet=this.nodeSet.extend(...t.props)),t.top){let i=this.topRules[t.top];if(!i)throw new RangeError(`Invalid top rule name ${t.top}`);n.top=i}return t.tokenizers&&(n.tokenizers=this.tokenizers.map(i=>{let r=t.tokenizers.find(s=>s.from==i);return r?r.to:i})),t.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((i,r)=>{let s=t.specializers.find(o=>o.from==i.external);if(!s)return i;let a=Object.assign(Object.assign({},i),{external:s.to});return n.specializers[r]=mS(a),a})),t.contextTracker&&(n.context=t.contextTracker),t.dialect&&(n.dialect=this.parseDialect(t.dialect)),t.strict!=null&&(n.strict=t.strict),t.wrap&&(n.wrappers=n.wrappers.concat(t.wrap)),t.bufferLength!=null&&(n.bufferLength=t.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let n=this.dynamicPrecedences;return n==null?0:n[t]||0}parseDialect(t){let n=Object.keys(this.dialects),i=n.map(()=>!1);if(t)for(let s of t.split(" ")){let a=n.indexOf(s);a>=0&&(i[a]=!0)}let r=null;for(let s=0;s<n.length;s++)if(!i[s])for(let a=this.dialects[n[s]],o;(o=this.data[a++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[o]=1;return new s4(t,i,r)}static deserialize(t){return new Ui(t)}}function qi(e,t){return e[t]|e[t+1]<<16}function a4(e){let t=null;for(let n of e){let i=n.p.stoppedAt;(n.pos==n.p.stream.end||i!=null&&n.pos>i)&&n.p.parser.stateFlag(n.state,2)&&(!t||t.score<n.score)&&(t=n)}return t}function mS(e){if(e.external){let t=e.extend?1:0;return(n,i)=>e.external(n,i)<<1|t}return e.get}const o4=55,c4=1,l4=56,u4=2,d4=57,h4=3,OS=4,p4=5,Zp=6,gS=7,vS=8,bS=9,TS=10,f4=11,m4=12,O4=13,jp=58,g4=14,v4=15,kS=59,b4=21,T4=37,k4=0,y4=1,S4={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},_4={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},yS={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function E4(e){return e==45||e==46||e==58||e>=65&&e<=90||e==95||e>=97&&e<=122||e>=161}let SS=null,_S=null,ES=0;function Vp(e,t){let n=e.pos+t;if(ES==n&&_S==e)return SS;let i=e.peek(t),r="";for(;E4(i);)r+=String.fromCharCode(i),i=e.peek(++t);return _S=e,ES=n,SS=r?r.toLowerCase():i==w4||i==C4?void 0:null}const wS=60,$l=62,Wp=47,w4=63,C4=33,x4=45;function CS(e,t){this.name=e,this.parent=t}const P4=[Zp,TS,gS,vS,bS],R4=new Ro({start:null,shift(e,t,n,i){return P4.indexOf(t)>-1?new CS(Vp(i,1)||"",e):e},reduce(e,t){return t==b4&&e?e.parent:e},reuse(e,t,n,i){let r=t.type.id;return r==Zp||r==T4?new CS(Vp(i,1)||"",e):e},strict:!1}),A4=new It((e,t)=>{if(e.next!=wS){e.next<0&&t.context&&e.acceptToken(jp);return}e.advance();let n=e.next==Wp;n&&e.advance();let i=Vp(e,0);if(i===void 0)return;if(!i)return e.acceptToken(n?v4:g4);let r=t.context?t.context.name:null;if(n){if(i==r)return e.acceptToken(f4);if(r&&_4[r])return e.acceptToken(jp,-2);if(t.dialectEnabled(k4))return e.acceptToken(m4);for(let s=t.context;s;s=s.parent)if(s.name==i)return;e.acceptToken(O4)}else{if(i=="script")return e.acceptToken(gS);if(i=="style")return e.acceptToken(vS);if(i=="textarea")return e.acceptToken(bS);if(S4.hasOwnProperty(i))return e.acceptToken(TS);r&&yS[r]&&yS[r][i]?e.acceptToken(jp,-1):e.acceptToken(Zp)}},{contextual:!0}),I4=new It(e=>{for(let t=0,n=0;;n++){if(e.next<0){n&&e.acceptToken(kS);break}if(e.next==x4)t++;else if(e.next==$l&&t>=2){n>=3&&e.acceptToken(kS,-2);break}else t=0;e.advance()}});function Q4(e){for(;e;e=e.parent)if(e.name=="svg"||e.name=="math")return!0;return!1}const N4=new It((e,t)=>{if(e.next==Wp&&e.peek(1)==$l){let n=t.dialectEnabled(y4)||Q4(t.context);e.acceptToken(n?p4:OS,2)}else e.next==$l&&e.acceptToken(OS,1)});function Gp(e,t,n){let i=2+e.length;return new It(r=>{for(let s=0,a=0,o=0;;o++){if(r.next<0){o&&r.acceptToken(t);break}if(s==0&&r.next==wS||s==1&&r.next==Wp||s>=2&&s<i&&r.next==e.charCodeAt(s-2))s++,a++;else if(s==i&&r.next==$l){o>a?r.acceptToken(t,-a):r.acceptToken(n,-(a-2));break}else if((r.next==10||r.next==13)&&o){r.acceptToken(t,1);break}else s=a=0;r.advance()}})}const D4=Gp("script",o4,c4),M4=Gp("style",l4,u4),L4=Gp("textarea",d4,h4),$4=yr({"Text RawText IncompleteTag IncompleteCloseTag":Q.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":Q.angleBracket,TagName:Q.tagName,"MismatchedCloseTag/TagName":[Q.tagName,Q.invalid],AttributeName:Q.attributeName,"AttributeValue UnquotedAttributeValue":Q.attributeValue,Is:Q.definitionOperator,"EntityReference CharacterReference":Q.character,Comment:Q.blockComment,ProcessingInst:Q.processingInstruction,DoctypeDecl:Q.documentMeta}),U4=Ui.deserialize({version:14,states:",xOVO!rOOO!ZQ#tO'#CrO!`Q#tO'#C{O!eQ#tO'#DOO!jQ#tO'#DRO!oQ#tO'#DTO!tOaO'#CqO#PObO'#CqO#[OdO'#CqO$kO!rO'#CqOOO`'#Cq'#CqO$rO$fO'#DUO$zQ#tO'#DWO%PQ#tO'#DXOOO`'#Dl'#DlOOO`'#DZ'#DZQVO!rOOO%UQ&rO,59^O%aQ&rO,59gO%lQ&rO,59jO%wQ&rO,59mO&SQ&rO,59oOOOa'#D_'#D_O&_OaO'#CyO&jOaO,59]OOOb'#D`'#D`O&rObO'#C|O&}ObO,59]OOOd'#Da'#DaO'VOdO'#DPO'bOdO,59]OOO`'#Db'#DbO'jO!rO,59]O'qQ#tO'#DSOOO`,59],59]OOOp'#Dc'#DcO'vO$fO,59pOOO`,59p,59pO(OQ#|O,59rO(TQ#|O,59sOOO`-E7X-E7XO(YQ&rO'#CtOOQW'#D['#D[O(hQ&rO1G.xOOOa1G.x1G.xOOO`1G/Z1G/ZO(sQ&rO1G/ROOOb1G/R1G/RO)OQ&rO1G/UOOOd1G/U1G/UO)ZQ&rO1G/XOOO`1G/X1G/XO)fQ&rO1G/ZOOOa-E7]-E7]O)qQ#tO'#CzOOO`1G.w1G.wOOOb-E7^-E7^O)vQ#tO'#C}OOOd-E7_-E7_O){Q#tO'#DQOOO`-E7`-E7`O*QQ#|O,59nOOOp-E7a-E7aOOO`1G/[1G/[OOO`1G/^1G/^OOO`1G/_1G/_O*VQ,UO,59`OOQW-E7Y-E7YOOOa7+$d7+$dOOO`7+$u7+$uOOOb7+$m7+$mOOOd7+$p7+$pOOO`7+$s7+$sO*bQ#|O,59fO*gQ#|O,59iO*lQ#|O,59lOOO`1G/Y1G/YO*qO7[O'#CwO+SOMhO'#CwOOQW1G.z1G.zOOO`1G/Q1G/QOOO`1G/T1G/TOOO`1G/W1G/WOOOO'#D]'#D]O+eO7[O,59cOOQW,59c,59cOOOO'#D^'#D^O+vOMhO,59cOOOO-E7Z-E7ZOOQW1G.}1G.}OOOO-E7[-E7[",stateData:",c~O!_OS~OUSOVPOWQOXROYTO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O|_O!eZO~OgaO~OgbO~OgcO~OgdO~OgeO~O!XfOPmP![mP~O!YiOQpP![pP~O!ZlORsP![sP~OUSOVPOWQOXROYTOZqO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O!eZO~O![rO~P#gO!]sO!fuO~OgvO~OgwO~OS|OT}OiyO~OS!POT}OiyO~OS!ROT}OiyO~OS!TOT}OiyO~OS}OT}OiyO~O!XfOPmX![mX~OP!WO![!XO~O!YiOQpX![pX~OQ!ZO![!XO~O!ZlORsX![sX~OR!]O![!XO~O![!XO~P#gOg!_O~O!]sO!f!aO~OS!bO~OS!cO~Oj!dOShXThXihX~OS!fOT!gOiyO~OS!hOT!gOiyO~OS!iOT!gOiyO~OS!jOT!gOiyO~OS!gOT!gOiyO~Og!kO~Og!lO~Og!mO~OS!nO~Ol!qO!a!oO!c!pO~OS!rO~OS!sO~OS!tO~Ob!uOc!uOd!uO!a!wO!b!uO~Ob!xOc!xOd!xO!c!wO!d!xO~Ob!uOc!uOd!uO!a!{O!b!uO~Ob!xOc!xOd!xO!c!{O!d!xO~OT~cbd!ey|!e~",goto:"%q!aPPPPPPPPPPPPPPPPPPPPP!b!hP!nPP!zP!}#Q#T#Z#^#a#g#j#m#s#y!bP!b!bP$P$V$m$s$y%P%V%]%cPPPPPPPP%iX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:" StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:68,context:R4,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,22,31,34,37,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,30,33,36,38,"OpenTag"],["group",-10,14,15,18,19,20,21,40,41,42,43,"Entity",17,"Entity TextContent",-3,29,32,35,"TextContent Entity"],["isolate",-11,22,30,31,33,34,36,37,38,39,42,43,"ltr",-3,27,28,40,""]],propSources:[$4],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|caPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bXaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UVaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pTaPOv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!dpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({WaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!b`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!b`!dpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYlWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]`aP!b`!dp!_^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebiSlWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXiSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vciSaP!b`!dpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!ahaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WiiSlWd!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zblWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOb!R!R7tP;=`<%l7S!Z8OYlWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{iiSlWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbiSlWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QciSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXiSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TalWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOc!R!RAwP;=`<%lAY!ZBRYlWc!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbiSlWc!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbiSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXiSc!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!cxaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYliSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_kiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_XaP!b`!dp!fQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZiSgQaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!b`!dpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!b`!dp!ePOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!b`!dpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!b`!dpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!b`!dpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!b`!dpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!b`!dpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!b`!dpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!b`!dpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!dpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO|PP!-nP;=`<%l!-Sq!-xS!dp|POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!b`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!b`|POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!b`!dp|POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!b`!dpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!b`!dpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!b`!dpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!b`!dpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!b`!dpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!b`!dpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!dpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOyPP!7TP;=`<%l!6Vq!7]V!dpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!dpyPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!b`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!b`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!b`yPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!b`!dpyPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXjSaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[D4,M4,L4,N4,A4,I4,0,1,2,3,4,5],topRules:{Document:[0,16]},dialects:{noMatch:0,selfClosing:515},tokenPrec:517}),q4=316,X4=317,xS=1,F4=2,z4=3,B4=4,Z4=318,j4=320,V4=321,W4=5,G4=6,Y4=0,Yp=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],PS=125,H4=59,Hp=47,K4=42,J4=43,eq=45,tq=60,nq=44,iq=63,rq=46,sq=91,aq=new Ro({start:!1,shift(e,t){return t==W4||t==G4||t==j4?e:t==V4},strict:!1}),oq=new It((e,t)=>{let{next:n}=e;(n==PS||n==-1||t.context)&&e.acceptToken(Z4)},{contextual:!0,fallback:!0}),cq=new It((e,t)=>{let{next:n}=e,i;Yp.indexOf(n)>-1||n==Hp&&((i=e.peek(1))==Hp||i==K4)||n!=PS&&n!=H4&&n!=-1&&!t.context&&e.acceptToken(q4)},{contextual:!0}),lq=new It((e,t)=>{e.next==sq&&!t.context&&e.acceptToken(X4)},{contextual:!0}),uq=new It((e,t)=>{let{next:n}=e;if(n==J4||n==eq){if(e.advance(),n==e.next){e.advance();let i=!t.context&&t.canShift(xS);e.acceptToken(i?xS:F4)}}else n==iq&&e.peek(1)==rq&&(e.advance(),e.advance(),(e.next<48||e.next>57)&&e.acceptToken(z4))},{contextual:!0});function Kp(e,t){return e>=65&&e<=90||e>=97&&e<=122||e==95||e>=192||!t&&e>=48&&e<=57}const dq=new It((e,t)=>{if(e.next!=tq||!t.dialectEnabled(Y4)||(e.advance(),e.next==Hp))return;let n=0;for(;Yp.indexOf(e.next)>-1;)e.advance(),n++;if(Kp(e.next,!0)){for(e.advance(),n++;Kp(e.next,!1);)e.advance(),n++;for(;Yp.indexOf(e.next)>-1;)e.advance(),n++;if(e.next==nq)return;for(let i=0;;i++){if(i==7){if(!Kp(e.next,!0))return;break}if(e.next!="extends".charCodeAt(i))break;e.advance(),n++}}e.acceptToken(B4,-n)}),hq=yr({"get set async static":Q.modifier,"for while do if else switch try catch finally return throw break continue default case defer":Q.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":Q.operatorKeyword,"let var const using function class extends":Q.definitionKeyword,"import export from":Q.moduleKeyword,"with debugger new":Q.keyword,TemplateString:Q.special(Q.string),super:Q.atom,BooleanLiteral:Q.bool,this:Q.self,null:Q.null,Star:Q.modifier,VariableName:Q.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":Q.function(Q.variableName),VariableDefinition:Q.definition(Q.variableName),Label:Q.labelName,PropertyName:Q.propertyName,PrivatePropertyName:Q.special(Q.propertyName),"CallExpression/MemberExpression/PropertyName":Q.function(Q.propertyName),"FunctionDeclaration/VariableDefinition":Q.function(Q.definition(Q.variableName)),"ClassDeclaration/VariableDefinition":Q.definition(Q.className),"NewExpression/VariableName":Q.className,PropertyDefinition:Q.definition(Q.propertyName),PrivatePropertyDefinition:Q.definition(Q.special(Q.propertyName)),UpdateOp:Q.updateOperator,"LineComment Hashbang":Q.lineComment,BlockComment:Q.blockComment,Number:Q.number,String:Q.string,Escape:Q.escape,ArithOp:Q.arithmeticOperator,LogicOp:Q.logicOperator,BitOp:Q.bitwiseOperator,CompareOp:Q.compareOperator,RegExp:Q.regexp,Equals:Q.definitionOperator,Arrow:Q.function(Q.punctuation),": Spread":Q.punctuation,"( )":Q.paren,"[ ]":Q.squareBracket,"{ }":Q.brace,"InterpolationStart InterpolationEnd":Q.special(Q.brace),".":Q.derefOperator,", ;":Q.separator,"@":Q.meta,TypeName:Q.typeName,TypeDefinition:Q.definition(Q.typeName),"type enum interface implements namespace module declare":Q.definitionKeyword,"abstract global Privacy readonly override":Q.modifier,"is keyof unique infer asserts":Q.operatorKeyword,JSXAttributeValue:Q.attributeValue,JSXText:Q.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":Q.angleBracket,"JSXIdentifier JSXNameSpacedName":Q.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":Q.attributeName,"JSXBuiltin/JSXIdentifier":Q.standard(Q.tagName)}),pq={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,defer:471,for:476,of:485,while:488,with:492,do:496,if:500,else:502,switch:506,case:512,try:518,catch:522,finally:526,return:530,throw:534,break:538,continue:542,debugger:546},fq={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},mq={__proto__:null,"<":193},Ul=Ui.deserialize({version:14,states:"$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]",stateData:"()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~",goto:"$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_",nodeNames:" ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:380,context:aq,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,237,243,245,247,249,252,258,264,266,268,270,272,274,275,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[hq],skippedNodes:[0,5,6,278],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[cq,lq,uq,dq,2,3,4,5,6,7,8,9,10,11,12,13,14,oq,new Fp("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~",141,340),new Fp("j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~",25,323)],topRules:{Script:[0,7],SingleExpression:[1,276],SingleClassItem:[2,277]},dialects:{jsx:0,ts:15175},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:327,get:e=>pq[e]||-1},{term:343,get:e=>fq[e]||-1},{term:95,get:e=>mq[e]||-1}],tokenPrec:15201}),Oq=yr({String:Q.string,Number:Q.number,"True False":Q.bool,PropertyName:Q.propertyName,Null:Q.null,", :":Q.separator,"[ ]":Q.squareBracket,"{ }":Q.brace}),gq=Ui.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[Oq],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0});class ql{static create(t,n,i,r,s){let a=r+(r<<8)+t+(n<<4)|0;return new ql(t,n,i,a,s,[],[])}constructor(t,n,i,r,s,a,o){this.type=t,this.value=n,this.from=i,this.hash=r,this.end=s,this.children=a,this.positions=o,this.hashProp=[[We.contextHash,r]]}addChild(t,n){t.prop(We.contextHash)!=this.hash&&(t=new kt(t.type,t.children,t.positions,t.length,this.hashProp)),this.children.push(t),this.positions.push(n)}toTree(t,n=this.end){let i=this.children.length-1;return i>=0&&(n=Math.max(n,this.positions[i]+this.children[i].length+this.from)),new kt(t.types[this.type],this.children,this.positions,n-this.from).balance({makeTree:(r,s,a)=>new kt(rn.none,r,s,a,this.hashProp)})}}var ne;(function(e){e[e.Document=1]="Document",e[e.CodeBlock=2]="CodeBlock",e[e.FencedCode=3]="FencedCode",e[e.Blockquote=4]="Blockquote",e[e.HorizontalRule=5]="HorizontalRule",e[e.BulletList=6]="BulletList",e[e.OrderedList=7]="OrderedList",e[e.ListItem=8]="ListItem",e[e.ATXHeading1=9]="ATXHeading1",e[e.ATXHeading2=10]="ATXHeading2",e[e.ATXHeading3=11]="ATXHeading3",e[e.ATXHeading4=12]="ATXHeading4",e[e.ATXHeading5=13]="ATXHeading5",e[e.ATXHeading6=14]="ATXHeading6",e[e.SetextHeading1=15]="SetextHeading1",e[e.SetextHeading2=16]="SetextHeading2",e[e.HTMLBlock=17]="HTMLBlock",e[e.LinkReference=18]="LinkReference",e[e.Paragraph=19]="Paragraph",e[e.CommentBlock=20]="CommentBlock",e[e.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",e[e.Escape=22]="Escape",e[e.Entity=23]="Entity",e[e.HardBreak=24]="HardBreak",e[e.Emphasis=25]="Emphasis",e[e.StrongEmphasis=26]="StrongEmphasis",e[e.Link=27]="Link",e[e.Image=28]="Image",e[e.InlineCode=29]="InlineCode",e[e.HTMLTag=30]="HTMLTag",e[e.Comment=31]="Comment",e[e.ProcessingInstruction=32]="ProcessingInstruction",e[e.Autolink=33]="Autolink",e[e.HeaderMark=34]="HeaderMark",e[e.QuoteMark=35]="QuoteMark",e[e.ListMark=36]="ListMark",e[e.LinkMark=37]="LinkMark",e[e.EmphasisMark=38]="EmphasisMark",e[e.CodeMark=39]="CodeMark",e[e.CodeText=40]="CodeText",e[e.CodeInfo=41]="CodeInfo",e[e.LinkTitle=42]="LinkTitle",e[e.LinkLabel=43]="LinkLabel",e[e.URL=44]="URL"})(ne||(ne={}));class vq{constructor(t,n){this.start=t,this.content=n,this.marks=[],this.parsers=[]}}class bq{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let t=this.skipSpace(this.basePos);this.indent=this.countIndent(t,this.pos,this.indent),this.pos=t,this.next=t==this.text.length?-1:this.text.charCodeAt(t)}skipSpace(t){return Ao(this.text,t)}reset(t){for(this.text=t,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(t){this.basePos=t,this.baseIndent=this.countIndent(t,this.pos,this.indent)}moveBaseColumn(t){this.baseIndent=t,this.basePos=this.findColumn(t)}addMarker(t){this.markers.push(t)}countIndent(t,n=0,i=0){for(let r=n;r<t;r++)i+=this.text.charCodeAt(r)==9?4-i%4:1;return i}findColumn(t){let n=0;for(let i=0;n<this.text.length&&i<t;n++)i+=this.text.charCodeAt(n)==9?4-i%4:1;return n}scrub(){if(!this.baseIndent)return this.text;let t="";for(let n=0;n<this.basePos;n++)t+=" ";return t+this.text.slice(this.basePos)}}function RS(e,t,n){if(n.pos==n.text.length||e!=t.block&&n.indent>=t.stack[n.depth+1].value+n.baseIndent)return!0;if(n.indent>=n.baseIndent+4)return!1;let i=(e.type==ne.OrderedList?tf:ef)(n,t,!1);return i>0&&(e.type!=ne.BulletList||Jp(n,t,!1)<0)&&n.text.charCodeAt(n.pos+i-1)==e.value}const AS={[ne.Blockquote](e,t,n){return n.next!=62?!1:(n.markers.push(qe(ne.QuoteMark,t.lineStart+n.pos,t.lineStart+n.pos+1)),n.moveBase(n.pos+(Vn(n.text.charCodeAt(n.pos+1))?2:1)),e.end=t.lineStart+n.text.length,!0)},[ne.ListItem](e,t,n){return n.indent<n.baseIndent+e.value&&n.next>-1?!1:(n.moveBaseColumn(n.baseIndent+e.value),!0)},[ne.OrderedList]:RS,[ne.BulletList]:RS,[ne.Document](){return!0}};function Vn(e){return e==32||e==9||e==10||e==13}function Ao(e,t=0){for(;t<e.length&&Vn(e.charCodeAt(t));)t++;return t}function IS(e,t,n){for(;t>n&&Vn(e.charCodeAt(t-1));)t--;return t}function QS(e){if(e.next!=96&&e.next!=126)return-1;let t=e.pos+1;for(;t<e.text.length&&e.text.charCodeAt(t)==e.next;)t++;if(t<e.pos+3)return-1;if(e.next==96){for(let n=t;n<e.text.length;n++)if(e.text.charCodeAt(n)==96)return-1}return t}function NS(e){return e.next!=62?-1:e.text.charCodeAt(e.pos+1)==32?2:1}function Jp(e,t,n){if(e.next!=42&&e.next!=45&&e.next!=95)return-1;let i=1;for(let r=e.pos+1;r<e.text.length;r++){let s=e.text.charCodeAt(r);if(s==e.next)i++;else if(!Vn(s))return-1}return n&&e.next==45&&LS(e)>-1&&e.depth==t.stack.length&&t.parser.leafBlockParsers.indexOf(FS.SetextHeading)>-1||i<3?-1:1}function DS(e,t){for(let n=e.stack.length-1;n>=0;n--)if(e.stack[n].type==t)return!0;return!1}function ef(e,t,n){return(e.next==45||e.next==43||e.next==42)&&(e.pos==e.text.length-1||Vn(e.text.charCodeAt(e.pos+1)))&&(!n||DS(t,ne.BulletList)||e.skipSpace(e.pos+2)<e.text.length)?1:-1}function tf(e,t,n){let i=e.pos,r=e.next;for(;r>=48&&r<=57;){if(i++,i==e.text.length)return-1;r=e.text.charCodeAt(i)}return i==e.pos||i>e.pos+9||r!=46&&r!=41||i<e.text.length-1&&!Vn(e.text.charCodeAt(i+1))||n&&!DS(t,ne.OrderedList)&&(e.skipSpace(i+1)==e.text.length||i>e.pos+1||e.next!=49)?-1:i+1-e.pos}function MS(e){if(e.next!=35)return-1;let t=e.pos+1;for(;t<e.text.length&&e.text.charCodeAt(t)==35;)t++;if(t<e.text.length&&e.text.charCodeAt(t)!=32)return-1;let n=t-e.pos;return n>6?-1:n}function LS(e){if(e.next!=45&&e.next!=61||e.indent>=e.baseIndent+4)return-1;let t=e.pos+1;for(;t<e.text.length&&e.text.charCodeAt(t)==e.next;)t++;let n=t;for(;t<e.text.length&&Vn(e.text.charCodeAt(t));)t++;return t==e.text.length?n:-1}const nf=/^[ \t]*$/,$S=/-->/,US=/\?>/,rf=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,$S],[/^\s*<\?/,US],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,nf],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,nf]];function qS(e,t,n){if(e.next!=60)return-1;let i=e.text.slice(e.pos);for(let r=0,s=rf.length-(n?1:0);r<s;r++)if(rf[r][0].test(i))return r;return-1}function XS(e,t){let n=e.countIndent(t,e.pos,e.indent),i=e.countIndent(e.skipSpace(t),t,n);return i>=n+5?n+1:i}function is(e,t,n){let i=e.length-1;i>=0&&e[i].to==t&&e[i].type==ne.CodeText?e[i].to=n:e.push(qe(ne.CodeText,t,n))}const Xl={LinkReference:void 0,IndentedCode(e,t){let n=t.baseIndent+4;if(t.indent<n)return!1;let i=t.findColumn(n),r=e.lineStart+i,s=e.lineStart+t.text.length,a=[],o=[];for(is(a,r,s);e.nextLine()&&t.depth>=e.stack.length;)if(t.pos==t.text.length){is(o,e.lineStart-1,e.lineStart);for(let c of t.markers)o.push(c)}else{if(t.indent<n)break;{if(o.length){for(let l of o)l.type==ne.CodeText?is(a,l.from,l.to):a.push(l);o=[]}is(a,e.lineStart-1,e.lineStart);for(let l of t.markers)a.push(l);s=e.lineStart+t.text.length;let c=e.lineStart+t.findColumn(t.baseIndent+4);c<s&&is(a,c,s)}}return o.length&&(o=o.filter(c=>c.type!=ne.CodeText),o.length&&(t.markers=o.concat(t.markers))),e.addNode(e.buffer.writeElements(a,-r).finish(ne.CodeBlock,s-r),r),!0},FencedCode(e,t){let n=QS(t);if(n<0)return!1;let i=e.lineStart+t.pos,r=t.next,s=n-t.pos,a=t.skipSpace(n),o=IS(t.text,t.text.length,a),c=[qe(ne.CodeMark,i,i+s)];a<o&&c.push(qe(ne.CodeInfo,e.lineStart+a,e.lineStart+o));for(let l=!0;e.nextLine()&&t.depth>=e.stack.length;l=!1){let u=t.pos;if(t.indent-t.baseIndent<4)for(;u<t.text.length&&t.text.charCodeAt(u)==r;)u++;if(u-t.pos>=s&&t.skipSpace(u)==t.text.length){for(let d of t.markers)c.push(d);c.push(qe(ne.CodeMark,e.lineStart+t.pos,e.lineStart+u)),e.nextLine();break}else{l||is(c,e.lineStart-1,e.lineStart);for(let p of t.markers)c.push(p);let d=e.lineStart+t.basePos,h=e.lineStart+t.text.length;d<h&&is(c,d,h)}}return e.addNode(e.buffer.writeElements(c,-i).finish(ne.FencedCode,e.prevLineEnd()-i),i),!0},Blockquote(e,t){let n=NS(t);return n<0?!1:(e.startContext(ne.Blockquote,t.pos),e.addNode(ne.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1),t.moveBase(t.pos+n),null)},HorizontalRule(e,t){if(Jp(t,e,!1)<0)return!1;let n=e.lineStart+t.pos;return e.nextLine(),e.addNode(ne.HorizontalRule,n),!0},BulletList(e,t){let n=ef(t,e,!1);if(n<0)return!1;e.block.type!=ne.BulletList&&e.startContext(ne.BulletList,t.basePos,t.next);let i=XS(t,t.pos+1);return e.startContext(ne.ListItem,t.basePos,i-t.baseIndent),e.addNode(ne.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+n),t.moveBaseColumn(i),null},OrderedList(e,t){let n=tf(t,e,!1);if(n<0)return!1;e.block.type!=ne.OrderedList&&e.startContext(ne.OrderedList,t.basePos,t.text.charCodeAt(t.pos+n-1));let i=XS(t,t.pos+n);return e.startContext(ne.ListItem,t.basePos,i-t.baseIndent),e.addNode(ne.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+n),t.moveBaseColumn(i),null},ATXHeading(e,t){let n=MS(t);if(n<0)return!1;let i=t.pos,r=e.lineStart+i,s=IS(t.text,t.text.length,i),a=s;for(;a>i&&t.text.charCodeAt(a-1)==t.next;)a--;(a==s||a==i||!Vn(t.text.charCodeAt(a-1)))&&(a=t.text.length);let o=e.buffer.write(ne.HeaderMark,0,n).writeElements(e.parser.parseInline(t.text.slice(i+n+1,a),r+n+1),-r);a<t.text.length&&o.write(ne.HeaderMark,a-i,s-i);let c=o.finish(ne.ATXHeading1-1+n,t.text.length-i);return e.nextLine(),e.addNode(c,r),!0},HTMLBlock(e,t){let n=qS(t,e,!1);if(n<0)return!1;let i=e.lineStart+t.pos,r=rf[n][1],s=[],a=r!=nf;for(;!r.test(t.text)&&e.nextLine();){if(t.depth<e.stack.length){a=!1;break}for(let l of t.markers)s.push(l)}a&&e.nextLine();let o=r==$S?ne.CommentBlock:r==US?ne.ProcessingInstructionBlock:ne.HTMLBlock,c=e.prevLineEnd();return e.addNode(e.buffer.writeElements(s,-i).finish(o,c-i),i),!0},SetextHeading:void 0};class Tq{constructor(t){this.stage=0,this.elts=[],this.pos=0,this.start=t.start,this.advance(t.content)}nextLine(t,n,i){if(this.stage==-1)return!1;let r=i.content+`
`+n.scrub(),s=this.advance(r);return s>-1&&s<r.length?this.complete(t,i,s):!1}finish(t,n){return(this.stage==2||this.stage==3)&&Ao(n.content,this.pos)==n.content.length?this.complete(t,n,n.content.length):!1}complete(t,n,i){return t.addLeafElement(n,qe(ne.LinkReference,this.start,this.start+i,this.elts)),!0}nextStage(t){return t?(this.pos=t.to-this.start,this.elts.push(t),this.stage++,!0):(t===!1&&(this.stage=-1),!1)}advance(t){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(KS(t,this.pos,this.start,!0)))return-1;if(t.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(qe(ne.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(YS(t,Ao(t,this.pos),this.start)))return-1}else if(this.stage==2){let n=Ao(t,this.pos),i=0;if(n>this.pos){let r=HS(t,n,this.start);if(r){let s=sf(t,r.to-this.start);s>0&&(this.nextStage(r),i=s)}}return i||(i=sf(t,this.pos)),i>0&&i<t.length?i:-1}else return sf(t,this.pos)}}}function sf(e,t){for(;t<e.length;t++){let n=e.charCodeAt(t);if(n==10)break;if(!Vn(n))return-1}return t}class kq{nextLine(t,n,i){let r=n.depth<t.stack.length?-1:LS(n),s=n.next;if(r<0)return!1;let a=qe(ne.HeaderMark,t.lineStart+n.pos,t.lineStart+r);return t.nextLine(),t.addLeafElement(i,qe(s==61?ne.SetextHeading1:ne.SetextHeading2,i.start,t.prevLineEnd(),[...t.parser.parseInline(i.content,i.start),a])),!0}finish(){return!1}}const FS={LinkReference(e,t){return t.content.charCodeAt(0)==91?new Tq(t):null},SetextHeading(){return new kq}},yq=[(e,t)=>MS(t)>=0,(e,t)=>QS(t)>=0,(e,t)=>NS(t)>=0,(e,t)=>ef(t,e,!0)>=0,(e,t)=>tf(t,e,!0)>=0,(e,t)=>Jp(t,e,!0)>=0,(e,t)=>qS(t,e,!0)>=0],Sq={text:"",end:0};class _q{constructor(t,n,i,r){this.parser=t,this.input=n,this.ranges=r,this.line=new bq,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=r[r.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=r[0].from,this.block=ql.create(ne.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=i.length?new Cq(i,n):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:t}=this;for(;;){for(let i=0;;){let r=t.depth<this.stack.length?this.stack[this.stack.length-1]:null;for(;i<t.markers.length&&(!r||t.markers[i].from<r.end);){let s=t.markers[i++];this.addNode(s.type,s.from,s.to)}if(!r)break;this.finishContext()}if(t.pos<t.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(t.basePos))return null;e:for(;;){for(let i of this.parser.blockParsers)if(i){let r=i(this,t);if(r!=!1){if(r==!0)return null;t.forward();continue e}}break}let n=new vq(this.lineStart+t.pos,t.text.slice(t.pos));for(let i of this.parser.leafBlockParsers)if(i){let r=i(this,n);r&&n.parsers.push(r)}e:for(;this.nextLine()&&t.pos!=t.text.length;){if(t.indent<t.baseIndent+4){for(let i of this.parser.endLeafBlock)if(i(this,t,n))break e}for(let i of n.parsers)if(i.nextLine(this,t,n))return null;n.content+=`
`+t.scrub();for(let i of t.markers)n.marks.push(i)}return this.finishLeaf(n),null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}reuseFragment(t){if(!this.fragments.moveTo(this.absoluteLineStart+t,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let n=this.fragments.takeNodes(this);return n?(this.absoluteLineStart+=n,this.lineStart=JS(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0):!1}get depth(){return this.stack.length}parentType(t=this.depth-1){return this.parser.nodeSet.types[this.stack[t].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}peekLine(){return this.scanLine(this.absoluteLineEnd+1).text}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(t){let n=Sq;if(n.end=t,t>=this.to)n.text="";else if(n.text=this.lineChunkAt(t),n.end+=n.text.length,this.ranges.length>1){let i=this.absoluteLineStart,r=this.rangeI;for(;this.ranges[r].to<n.end;){r++;let s=this.ranges[r].from,a=this.lineChunkAt(s);n.end=s+a.length,n.text=n.text.slice(0,this.ranges[r-1].to-i)+a,i=n.end-n.text.length}}return n}readLine(){let{line:t}=this,{text:n,end:i}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=i,t.reset(n);t.depth<this.stack.length;t.depth++){let r=this.stack[t.depth],s=this.parser.skipContextMarkup[r.type];if(!s)throw new Error("Unhandled block context "+ne[r.type]);let a=this.line.markers.length;if(!s(r,this,t)){this.line.markers.length>a&&(r.end=this.line.markers[this.line.markers.length-1].to),t.forward();break}t.forward()}}lineChunkAt(t){let n=this.input.chunk(t),i;if(this.input.lineChunks)i=n==`
`?"":n;else{let r=n.indexOf(`
`);i=r<0?n:n.slice(0,r)}return t+i.length>this.to?i.slice(0,this.to-t):i}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(t,n,i=0){this.block=ql.create(t,i,this.lineStart+n,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(t,n,i=0){this.startContext(this.parser.getNodeType(t),n,i)}addNode(t,n,i){typeof t=="number"&&(t=new kt(this.parser.nodeSet.types[t],ia,ia,(i??this.prevLineEnd())-n)),this.block.addChild(t,n-this.block.from)}addElement(t){this.block.addChild(t.toTree(this.parser.nodeSet),t.from-this.block.from)}addLeafElement(t,n){this.addNode(this.buffer.writeElements(df(n.children,t.marks),-n.from).finish(n.type,n.to-n.from),n.from)}finishContext(){let t=this.stack.pop(),n=this.stack[this.stack.length-1];n.addChild(t.toTree(this.parser.nodeSet),t.from-n.from),this.block=n}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(t){return this.ranges.length>1?zS(this.ranges,0,t.topNode,this.ranges[0].from,this.reusePlaceholders):t}finishLeaf(t){for(let i of t.parsers)if(i.finish(this,t))return;let n=df(this.parser.parseInline(t.content,t.start),t.marks);this.addNode(this.buffer.writeElements(n,-t.start).finish(ne.Paragraph,t.content.length),t.start)}elt(t,n,i,r){return typeof t=="string"?qe(this.parser.getNodeType(t),n,i,r):new jS(t,n)}get buffer(){return new ZS(this.parser.nodeSet)}}function zS(e,t,n,i,r){let s=e[t].to,a=[],o=[],c=n.from+i;function l(u,d){for(;d?u>=s:u>s;){let h=e[t+1].from-s;i+=h,u+=h,t++,s=e[t].to}}for(let u=n.firstChild;u;u=u.nextSibling){l(u.from+i,!0);let d=u.from+i,h,p=r.get(u.tree);p?h=p:u.to+i>s?(h=zS(e,t,u,i,r),l(u.to+i,!1)):h=u.toTree(),a.push(h),o.push(d-c)}return l(n.to+i,!1),new kt(n.type,a,o,n.to+i-c,n.tree?n.tree.propValues:void 0)}class af extends Zy{constructor(t,n,i,r,s,a,o,c,l){super(),this.nodeSet=t,this.blockParsers=n,this.leafBlockParsers=i,this.blockNames=r,this.endLeafBlock=s,this.skipContextMarkup=a,this.inlineParsers=o,this.inlineNames=c,this.wrappers=l,this.nodeTypes=Object.create(null);for(let u of t.types)this.nodeTypes[u.name]=u.id}createParse(t,n,i){let r=new _q(this,t,n,i);for(let s of this.wrappers)r=s(r,t,n,i);return r}configure(t){let n=of(t);if(!n)return this;let{nodeSet:i,skipContextMarkup:r}=this,s=this.blockParsers.slice(),a=this.leafBlockParsers.slice(),o=this.blockNames.slice(),c=this.inlineParsers.slice(),l=this.inlineNames.slice(),u=this.endLeafBlock.slice(),d=this.wrappers;if(Io(n.defineNodes)){r=Object.assign({},r);let h=i.types.slice(),p;for(let O of n.defineNodes){let{name:m,block:b,composite:v,style:k}=typeof O=="string"?{name:O}:O;if(h.some(S=>S.name==m))continue;v&&(r[h.length]=(S,_,x)=>v(_,x,S.value));let y=h.length,T=v?["Block","BlockContext"]:b?y>=ne.ATXHeading1&&y<=ne.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;h.push(rn.define({id:y,name:m,props:T&&[[We.group,T]]})),k&&(p||(p={}),Array.isArray(k)||k instanceof ui?p[m]=k:Object.assign(p,k))}i=new ko(h),p&&(i=i.extend(yr(p)))}if(Io(n.props)&&(i=i.extend(...n.props)),Io(n.remove))for(let h of n.remove){let p=this.blockNames.indexOf(h),O=this.inlineNames.indexOf(h);p>-1&&(s[p]=a[p]=void 0),O>-1&&(c[O]=void 0)}if(Io(n.parseBlock))for(let h of n.parseBlock){let p=o.indexOf(h.name);if(p>-1)s[p]=h.parse,a[p]=h.leaf;else{let O=h.before?Fl(o,h.before):h.after?Fl(o,h.after)+1:o.length-1;s.splice(O,0,h.parse),a.splice(O,0,h.leaf),o.splice(O,0,h.name)}h.endLeaf&&u.push(h.endLeaf)}if(Io(n.parseInline))for(let h of n.parseInline){let p=l.indexOf(h.name);if(p>-1)c[p]=h.parse;else{let O=h.before?Fl(l,h.before):h.after?Fl(l,h.after)+1:l.length-1;c.splice(O,0,h.parse),l.splice(O,0,h.name)}}return n.wrap&&(d=d.concat(n.wrap)),new af(i,s,a,o,u,r,c,l,d)}getNodeType(t){let n=this.nodeTypes[t];if(n==null)throw new RangeError(`Unknown node type '${t}'`);return n}parseInline(t,n){let i=new uf(this,t,n);e:for(let r=n;r<i.end;){let s=i.char(r);for(let a of this.inlineParsers)if(a){let o=a(i,s,r);if(o>=0){r=o;continue e}}r++}return i.resolveMarkers(0)}}function Io(e){return e!=null&&e.length>0}function of(e){if(!Array.isArray(e))return e;if(e.length==0)return null;let t=of(e[0]);if(e.length==1)return t;let n=of(e.slice(1));if(!n||!t)return t||n;let i=(a,o)=>(a||ia).concat(o||ia),r=t.wrap,s=n.wrap;return{props:i(t.props,n.props),defineNodes:i(t.defineNodes,n.defineNodes),parseBlock:i(t.parseBlock,n.parseBlock),parseInline:i(t.parseInline,n.parseInline),remove:i(t.remove,n.remove),wrap:r?s?(a,o,c,l)=>r(s(a,o,c,l),o,c,l):r:s}}function Fl(e,t){let n=e.indexOf(t);if(n<0)throw new RangeError(`Position specified relative to unknown parser ${t}`);return n}let BS=[rn.none];for(let e=1,t;t=ne[e];e++)BS[e]=rn.define({id:e,name:t,props:e>=ne.Escape?[]:[[We.group,e in AS?["Block","BlockContext"]:["Block","LeafBlock"]]],top:t=="Document"});const ia=[];class ZS{constructor(t){this.nodeSet=t,this.content=[],this.nodes=[]}write(t,n,i,r=0){return this.content.push(t,n,i,4+r*4),this}writeElements(t,n=0){for(let i of t)i.writeTo(this,n);return this}finish(t,n){return kt.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:t,length:n})}}let Qo=class{constructor(e,t,n,i=ia){this.type=e,this.from=t,this.to=n,this.children=i}writeTo(e,t){let n=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-n)}toTree(e){return new ZS(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}};class jS{constructor(t,n){this.tree=t,this.from=n}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return ia}writeTo(t,n){t.nodes.push(this.tree),t.content.push(t.nodes.length-1,this.from+n,this.to+n,-1)}toTree(){return this.tree}}function qe(e,t,n,i){return new Qo(e,t,n,i)}const VS={resolve:"Emphasis",mark:"EmphasisMark"},WS={resolve:"Emphasis",mark:"EmphasisMark"},rs={},zl={};class yn{constructor(t,n,i,r){this.type=t,this.from=n,this.to=i,this.side=r}}const GS="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let cf=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{cf=new RegExp("[\\p{S}|\\p{P}]","u")}catch{}const lf={Escape(e,t,n){if(t!=92||n==e.end-1)return-1;let i=e.char(n+1);for(let r=0;r<GS.length;r++)if(GS.charCodeAt(r)==i)return e.append(qe(ne.Escape,n,n+2));return-1},Entity(e,t,n){if(t!=38)return-1;let i=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(e.slice(n+1,n+31));return i?e.append(qe(ne.Entity,n,n+1+i[0].length)):-1},InlineCode(e,t,n){if(t!=96||n&&e.char(n-1)==96)return-1;let i=n+1;for(;i<e.end&&e.char(i)==96;)i++;let r=i-n,s=0;for(;i<e.end;i++)if(e.char(i)==96){if(s++,s==r&&e.char(i+1)!=96)return e.append(qe(ne.InlineCode,n,i+1,[qe(ne.CodeMark,n,n+r),qe(ne.CodeMark,i+1-r,i+1)]))}else s=0;return-1},HTMLTag(e,t,n){if(t!=60||n==e.end-1)return-1;let i=e.slice(n+1,e.end),r=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(i);if(r)return e.append(qe(ne.Autolink,n,n+1+r[0].length,[qe(ne.LinkMark,n,n+1),qe(ne.URL,n+1,n+r[0].length),qe(ne.LinkMark,n+r[0].length,n+1+r[0].length)]));let s=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(i);if(s)return e.append(qe(ne.Comment,n,n+1+s[0].length));let a=/^\?[^]*?\?>/.exec(i);if(a)return e.append(qe(ne.ProcessingInstruction,n,n+1+a[0].length));let o=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(i);return o?e.append(qe(ne.HTMLTag,n,n+1+o[0].length)):-1},Emphasis(e,t,n){if(t!=95&&t!=42)return-1;let i=n+1;for(;e.char(i)==t;)i++;let r=e.slice(n-1,n),s=e.slice(i,i+1),a=cf.test(r),o=cf.test(s),c=/\s|^$/.test(r),l=/\s|^$/.test(s),u=!l&&(!o||c||a),d=!c&&(!a||l||o),h=u&&(t==42||!d||a),p=d&&(t==42||!u||o);return e.append(new yn(t==95?VS:WS,n,i,(h?1:0)|(p?2:0)))},HardBreak(e,t,n){if(t==92&&e.char(n+1)==10)return e.append(qe(ne.HardBreak,n,n+2));if(t==32){let i=n+1;for(;e.char(i)==32;)i++;if(e.char(i)==10&&i>=n+2)return e.append(qe(ne.HardBreak,n,i+1))}return-1},Link(e,t,n){return t==91?e.append(new yn(rs,n,n+1,1)):-1},Image(e,t,n){return t==33&&e.char(n+1)==91?e.append(new yn(zl,n,n+2,1)):-1},LinkEnd(e,t,n){if(t!=93)return-1;for(let i=e.parts.length-1;i>=0;i--){let r=e.parts[i];if(r instanceof yn&&(r.type==rs||r.type==zl)){if(!r.side||e.skipSpace(r.to)==n&&!/[(\[]/.test(e.slice(n+1,n+2)))return e.parts[i]=null,-1;let s=e.takeContent(i),a=e.parts[i]=Eq(e,s,r.type==rs?ne.Link:ne.Image,r.from,n+1);if(r.type==rs)for(let o=0;o<i;o++){let c=e.parts[o];c instanceof yn&&c.type==rs&&(c.side=0)}return a.to}}return-1}};function Eq(e,t,n,i,r){let{text:s}=e,a=e.char(r),o=r;if(t.unshift(qe(ne.LinkMark,i,i+(n==ne.Image?2:1))),t.push(qe(ne.LinkMark,r-1,r)),a==40){let c=e.skipSpace(r+1),l=YS(s,c-e.offset,e.offset),u;l&&(c=e.skipSpace(l.to),c!=l.to&&(u=HS(s,c-e.offset,e.offset),u&&(c=e.skipSpace(u.to)))),e.char(c)==41&&(t.push(qe(ne.LinkMark,r,r+1)),o=c+1,l&&t.push(l),u&&t.push(u),t.push(qe(ne.LinkMark,c,o)))}else if(a==91){let c=KS(s,r-e.offset,e.offset,!1);c&&(t.push(c),o=c.to)}return qe(n,i,o,t)}function YS(e,t,n){if(e.charCodeAt(t)==60){for(let i=t+1;i<e.length;i++){let r=e.charCodeAt(i);if(r==62)return qe(ne.URL,t+n,i+1+n);if(r==60||r==10)return!1}return null}else{let i=0,r=t;for(let s=!1;r<e.length;r++){let a=e.charCodeAt(r);if(Vn(a))break;if(s)s=!1;else if(a==40)i++;else if(a==41){if(!i)break;i--}else a==92&&(s=!0)}return r>t?qe(ne.URL,t+n,r+n):r==e.length?null:!1}}function HS(e,t,n){let i=e.charCodeAt(t);if(i!=39&&i!=34&&i!=40)return!1;let r=i==40?41:i;for(let s=t+1,a=!1;s<e.length;s++){let o=e.charCodeAt(s);if(a)a=!1;else{if(o==r)return qe(ne.LinkTitle,t+n,s+1+n);o==92&&(a=!0)}}return null}function KS(e,t,n,i){for(let r=!1,s=t+1,a=Math.min(e.length,s+999);s<a;s++){let o=e.charCodeAt(s);if(r)r=!1;else{if(o==93)return i?!1:qe(ne.LinkLabel,t+n,s+1+n);if(i&&!Vn(o)&&(i=!1),o==91)return!1;o==92&&(r=!0)}}return null}class uf{constructor(t,n,i){this.parser=t,this.text=n,this.offset=i,this.parts=[]}char(t){return t>=this.end?-1:this.text.charCodeAt(t-this.offset)}get end(){return this.offset+this.text.length}slice(t,n){return this.text.slice(t-this.offset,n-this.offset)}append(t){return this.parts.push(t),t.to}addDelimiter(t,n,i,r,s){return this.append(new yn(t,n,i,(r?1:0)|(s?2:0)))}get hasOpenLink(){for(let t=this.parts.length-1;t>=0;t--){let n=this.parts[t];if(n instanceof yn&&(n.type==rs||n.type==zl))return!0}return!1}addElement(t){return this.append(t)}resolveMarkers(t){for(let i=t;i<this.parts.length;i++){let r=this.parts[i];if(!(r instanceof yn&&r.type.resolve&&r.side&2))continue;let s=r.type==VS||r.type==WS,a=r.to-r.from,o,c=i-1;for(;c>=t;c--){let O=this.parts[c];if(O instanceof yn&&O.side&1&&O.type==r.type&&!(s&&(r.side&1||O.side&2)&&(O.to-O.from+a)%3==0&&((O.to-O.from)%3||a%3))){o=O;break}}if(!o)continue;let l=r.type.resolve,u=[],d=o.from,h=r.to;if(s){let O=Math.min(2,o.to-o.from,a);d=o.to-O,h=r.from+O,l=O==1?"Emphasis":"StrongEmphasis"}o.type.mark&&u.push(this.elt(o.type.mark,d,o.to));for(let O=c+1;O<i;O++)this.parts[O]instanceof Qo&&u.push(this.parts[O]),this.parts[O]=null;r.type.mark&&u.push(this.elt(r.type.mark,r.from,h));let p=this.elt(l,d,h,u);this.parts[c]=s&&o.from!=d?new yn(o.type,o.from,d,o.side):null,(this.parts[i]=s&&r.to!=h?new yn(r.type,h,r.to,r.side):null)?this.parts.splice(i,0,p):this.parts[i]=p}let n=[];for(let i=t;i<this.parts.length;i++){let r=this.parts[i];r instanceof Qo&&n.push(r)}return n}findOpeningDelimiter(t){for(let n=this.parts.length-1;n>=0;n--){let i=this.parts[n];if(i instanceof yn&&i.type==t&&i.side&1)return n}return null}takeContent(t){let n=this.resolveMarkers(t);return this.parts.length=t,n}getDelimiterAt(t){let n=this.parts[t];return n instanceof yn?n:null}skipSpace(t){return Ao(this.text,t-this.offset)+this.offset}elt(t,n,i,r){return typeof t=="string"?qe(this.parser.getNodeType(t),n,i,r):new jS(t,n)}}uf.linkStart=rs,uf.imageStart=zl;function df(e,t){if(!t.length)return e;if(!e.length)return t;let n=e.slice(),i=0;for(let r of t){for(;i<n.length&&n[i].to<r.to;)i++;if(i<n.length&&n[i].from<r.from){let s=n[i];s instanceof Qo&&(n[i]=new Qo(s.type,s.from,s.to,df(s.children,[r])))}else n.splice(i++,0,r)}return n}const wq=[ne.CodeBlock,ne.ListItem,ne.OrderedList,ne.BulletList];class Cq{constructor(t,n){this.fragments=t,this.input=n,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,t.length&&(this.fragment=t[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(t,n){for(;this.fragment&&this.fragment.to<=t;)this.nextFragment();if(!this.fragment||this.fragment.from>(t?t-1:0))return!1;if(this.fragmentEnd<0){let s=this.fragment.to;for(;s>0&&this.input.read(s-1,s)!=`
`;)s--;this.fragmentEnd=s?s-1:0}let i=this.cursor;i||(i=this.cursor=this.fragment.tree.cursor(),i.firstChild());let r=t+this.fragment.offset;for(;i.to<=r;)if(!i.parent())return!1;for(;;){if(i.from>=r)return this.fragment.from<=n;if(!i.childAfter(r))return!1}}matches(t){let n=this.cursor.tree;return n&&n.prop(We.contextHash)==t}takeNodes(t){let n=this.cursor,i=this.fragment.offset,r=this.fragmentEnd-(this.fragment.openEnd?1:0),s=t.absoluteLineStart,a=s,o=t.block.children.length,c=a,l=o;for(;;){if(n.to-i>r){if(n.type.isAnonymous&&n.firstChild())continue;break}let u=JS(n.from-i,t.ranges);if(n.to-i<=t.ranges[t.rangeI].to)t.addNode(n.tree,u);else{let d=new kt(t.parser.nodeSet.types[ne.Paragraph],[],[],0,t.block.hashProp);t.reusePlaceholders.set(d,n.tree),t.addNode(d,u)}if(n.type.is("Block")&&(wq.indexOf(n.type.id)<0?(a=n.to-i,o=t.block.children.length):(a=c,o=l,c=n.to-i,l=t.block.children.length)),!n.nextSibling())break}for(;t.block.children.length>o;)t.block.children.pop(),t.block.positions.pop();return a-s}}function JS(e,t){let n=e;for(let i=1;i<t.length;i++){let r=t[i-1].to,s=t[i].from;r<e&&(n-=s-r)}return n}const xq=yr({"Blockquote/...":Q.quote,HorizontalRule:Q.contentSeparator,"ATXHeading1/... SetextHeading1/...":Q.heading1,"ATXHeading2/... SetextHeading2/...":Q.heading2,"ATXHeading3/...":Q.heading3,"ATXHeading4/...":Q.heading4,"ATXHeading5/...":Q.heading5,"ATXHeading6/...":Q.heading6,"Comment CommentBlock":Q.comment,Escape:Q.escape,Entity:Q.character,"Emphasis/...":Q.emphasis,"StrongEmphasis/...":Q.strong,"Link/... Image/...":Q.link,"OrderedList/... BulletList/...":Q.list,"BlockQuote/...":Q.quote,"InlineCode CodeText":Q.monospace,"URL Autolink":Q.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":Q.processingInstruction,"CodeInfo LinkLabel":Q.labelName,LinkTitle:Q.string,Paragraph:Q.content}),Pq=new af(new ko(BS).extend(xq),Object.keys(Xl).map(e=>Xl[e]),Object.keys(Xl).map(e=>FS[e]),Object.keys(Xl),yq,AS,Object.keys(lf).map(e=>lf[e]),Object.keys(lf),[]);Q.special(Q.content),Q.special(Q.content);const Rq=1,e_=194,t_=195,Aq=196,n_=197,Iq=198,Qq=199,Nq=200,Dq=2,i_=3,r_=201,Mq=24,Lq=25,$q=49,Uq=50,qq=55,Xq=56,Fq=57,zq=59,Bq=60,Zq=61,jq=62,Vq=63,Wq=65,Gq=238,Yq=71,Hq=241,Kq=242,Jq=243,e6=244,t6=245,n6=246,i6=247,r6=248,s_=72,s6=249,a6=250,o6=251,c6=252,l6=253,u6=254,d6=255,h6=256,p6=73,f6=77,m6=263,O6=112,g6=130,v6=151,b6=152,T6=155,ss=10,No=13,hf=32,Bl=9,pf=35,k6=40,y6=46,ff=123,a_=125,o_=39,c_=34,l_=92,S6=111,_6=120,E6=78,w6=117,C6=85,x6=new Set([Lq,$q,Uq,m6,Wq,g6,Xq,Fq,Gq,jq,Vq,s_,p6,f6,Bq,Zq,v6,b6,T6,O6]);function mf(e){return e==ss||e==No}function Of(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}const P6=new It((e,t)=>{let n;if(e.next<0)e.acceptToken(Qq);else if(t.context.flags&Zl)mf(e.next)&&e.acceptToken(Iq,1);else if(((n=e.peek(-1))<0||mf(n))&&t.canShift(n_)){let i=0;for(;e.next==hf||e.next==Bl;)e.advance(),i++;(e.next==ss||e.next==No||e.next==pf)&&e.acceptToken(n_,-i)}else mf(e.next)&&e.acceptToken(Aq,1)},{contextual:!0}),R6=new It((e,t)=>{let n=t.context;if(n.flags)return;let i=e.peek(-1);if(i==ss||i==No){let r=0,s=0;for(;;){if(e.next==hf)r++;else if(e.next==Bl)r+=8-r%8;else break;e.advance(),s++}r!=n.indent&&e.next!=ss&&e.next!=No&&e.next!=pf&&(r<n.indent?e.acceptToken(t_,-s):e.acceptToken(e_))}}),Zl=1,u_=2,Xi=4,Fi=8,zi=16,Bi=32;function jl(e,t,n){this.parent=e,this.indent=t,this.flags=n,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)+n+(n<<6)}const A6=new jl(null,0,0);function I6(e){let t=0;for(let n=0;n<e.length;n++)t+=e.charCodeAt(n)==Bl?8-t%8:1;return t}const d_=new Map([[Hq,0],[Kq,Xi],[Jq,Fi],[e6,Fi|Xi],[t6,zi],[n6,zi|Xi],[i6,zi|Fi],[r6,zi|Fi|Xi],[s6,Bi],[a6,Bi|Xi],[o6,Bi|Fi],[c6,Bi|Fi|Xi],[l6,Bi|zi],[u6,Bi|zi|Xi],[d6,Bi|zi|Fi],[h6,Bi|zi|Fi|Xi]].map(([e,t])=>[e,t|u_])),Q6=new Ro({start:A6,reduce(e,t,n,i){return e.flags&Zl&&x6.has(t)||(t==Yq||t==s_)&&e.flags&u_?e.parent:e},shift(e,t,n,i){return t==e_?new jl(e,I6(i.read(i.pos,n.pos)),0):t==t_?e.parent:t==Mq||t==qq||t==zq||t==i_?new jl(e,0,Zl):d_.has(t)?new jl(e,0,d_.get(t)|e.flags&Zl):e},hash(e){return e.hash}}),N6=new It(e=>{for(let t=0;t<5;t++){if(e.next!="print".charCodeAt(t))return;e.advance()}if(!/\w/.test(String.fromCharCode(e.next)))for(let t=0;;t++){let n=e.peek(t);if(!(n==hf||n==Bl)){n!=k6&&n!=y6&&n!=ss&&n!=No&&n!=pf&&e.acceptToken(Rq);return}}}),D6=new It((e,t)=>{let{flags:n}=t.context,i=n&Xi?c_:o_,r=(n&Fi)>0,s=!(n&zi),a=(n&Bi)>0,o=e.pos;for(;!(e.next<0);)if(a&&e.next==ff)if(e.peek(1)==ff)e.advance(2);else{if(e.pos==o){e.acceptToken(i_,1);return}break}else if(s&&e.next==l_){if(e.pos==o){e.advance();let c=e.next;c>=0&&(e.advance(),M6(e,c)),e.acceptToken(Dq);return}break}else if(e.next==l_&&!s&&e.peek(1)>-1)e.advance(2);else if(e.next==i&&(!r||e.peek(1)==i&&e.peek(2)==i)){if(e.pos==o){e.acceptToken(r_,r?3:1);return}break}else if(e.next==ss){if(r)e.advance();else if(e.pos==o){e.acceptToken(r_);return}break}else e.advance();e.pos>o&&e.acceptToken(Nq)});function M6(e,t){if(t==S6)for(let n=0;n<2&&e.next>=48&&e.next<=55;n++)e.advance();else if(t==_6)for(let n=0;n<2&&Of(e.next);n++)e.advance();else if(t==w6)for(let n=0;n<4&&Of(e.next);n++)e.advance();else if(t==C6)for(let n=0;n<8&&Of(e.next);n++)e.advance();else if(t==E6&&e.next==ff){for(e.advance();e.next>=0&&e.next!=a_&&e.next!=o_&&e.next!=c_&&e.next!=ss;)e.advance();e.next==a_&&e.advance()}}const L6=yr({'async "*" "**" FormatConversion FormatSpec':Q.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":Q.controlKeyword,"in not and or is del":Q.operatorKeyword,"from def class global nonlocal lambda":Q.definitionKeyword,import:Q.moduleKeyword,"with as print":Q.keyword,Boolean:Q.bool,None:Q.null,VariableName:Q.variableName,"CallExpression/VariableName":Q.function(Q.variableName),"FunctionDefinition/VariableName":Q.function(Q.definition(Q.variableName)),"ClassDefinition/VariableName":Q.definition(Q.className),PropertyName:Q.propertyName,"CallExpression/MemberExpression/PropertyName":Q.function(Q.propertyName),Comment:Q.lineComment,Number:Q.number,String:Q.string,FormatString:Q.special(Q.string),Escape:Q.escape,UpdateOp:Q.updateOperator,"ArithOp!":Q.arithmeticOperator,BitOp:Q.bitwiseOperator,CompareOp:Q.compareOperator,AssignOp:Q.definitionOperator,Ellipsis:Q.punctuation,At:Q.meta,"( )":Q.paren,"[ ]":Q.squareBracket,"{ }":Q.brace,".":Q.derefOperator,", ;":Q.separator}),$6={__proto__:null,await:44,or:54,and:56,in:60,not:62,is:64,if:70,else:72,lambda:76,yield:94,from:96,async:102,for:104,None:162,True:164,False:164,del:178,pass:182,break:186,continue:190,return:194,raise:202,import:206,as:208,global:212,nonlocal:214,assert:218,type:223,elif:236,while:240,try:246,except:248,finally:250,with:254,def:258,class:268,match:279,case:285},U6=Ui.deserialize({version:14,states:"##jO`QeOOP$}OSOOO&WQtO'#HUOOQS'#Co'#CoOOQS'#Cp'#CpO'vQdO'#CnO*UQtO'#HTOOQS'#HU'#HUOOQS'#DU'#DUOOQS'#HT'#HTO*rQdO'#D_O+VQdO'#DfO+gQdO'#DjO+zOWO'#DuO,VOWO'#DvO.[QtO'#GuOOQS'#Gu'#GuO'vQdO'#GtO0ZQtO'#GtOOQS'#Eb'#EbO0rQdO'#EcOOQS'#Gs'#GsO0|QdO'#GrOOQV'#Gr'#GrO1XQdO'#FYOOQS'#G^'#G^O1^QdO'#FXOOQV'#IS'#ISOOQV'#Gq'#GqOOQV'#Fq'#FqQ`QeOOO'vQdO'#CqO1lQdO'#C}O1sQdO'#DRO2RQdO'#HYO2cQtO'#EVO'vQdO'#EWOOQS'#EY'#EYOOQS'#E['#E[OOQS'#E^'#E^O2wQdO'#E`O3_QdO'#EdO3rQdO'#EfO3zQtO'#EfO1XQdO'#EiO0rQdO'#ElO1XQdO'#EnO0rQdO'#EtO0rQdO'#EwO4VQdO'#EyO4^QdO'#FOO4iQdO'#EzO0rQdO'#FOO1XQdO'#FQO1XQdO'#FVO4nQdO'#F[P4uOdO'#GpPOOO)CBd)CBdOOQS'#Ce'#CeOOQS'#Cf'#CfOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Cl'#ClO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO5TQdO'#DoOOQS,5:Y,5:YO5hQdO'#HdOOQS,5:],5:]O5uQ!fO,5:]O5zQtO,59YO1lQdO,59bO1lQdO,59bO1lQdO,59bO8jQdO,59bO8oQdO,59bO8vQdO,59jO8}QdO'#HTO:TQdO'#HSOOQS'#HS'#HSOOQS'#D['#D[O:lQdO,59aO'vQdO,59aO:zQdO,59aOOQS,59y,59yO;PQdO,5:RO'vQdO,5:ROOQS,5:Q,5:QO;_QdO,5:QO;dQdO,5:XO'vQdO,5:XO'vQdO,5:VOOQS,5:U,5:UO;uQdO,5:UO;zQdO,5:WOOOW'#Fy'#FyO<POWO,5:aOOQS,5:a,5:aO<[QdO'#HwOOOW'#Dw'#DwOOOW'#Fz'#FzO<lOWO,5:bOOQS,5:b,5:bOOQS'#F}'#F}O<zQtO,5:iO?lQtO,5=`O@VQ#xO,5=`O@vQtO,5=`OOQS,5:},5:}OA_QeO'#GWOBqQdO,5;^OOQV,5=^,5=^OB|QtO'#IPOCkQdO,5;tOOQS-E:[-E:[OOQV,5;s,5;sO4dQdO'#FQOOQV-E9o-E9oOCsQtO,59]OEzQtO,59iOFeQdO'#HVOFpQdO'#HVO1XQdO'#HVOF{QdO'#DTOGTQdO,59mOGYQdO'#HZO'vQdO'#HZO0rQdO,5=tOOQS,5=t,5=tO0rQdO'#EROOQS'#ES'#ESOGwQdO'#GPOHXQdO,58|OHXQdO,58|O*xQdO,5:oOHgQtO'#H]OOQS,5:r,5:rOOQS,5:z,5:zOHzQdO,5;OOI]QdO'#IOO1XQdO'#H}OOQS,5;Q,5;QOOQS'#GT'#GTOIqQtO,5;QOJPQdO,5;QOJUQdO'#IQOOQS,5;T,5;TOJdQdO'#H|OOQS,5;W,5;WOJuQdO,5;YO4iQdO,5;`O4iQdO,5;cOJ}QtO'#ITO'vQdO'#ITOKXQdO,5;eO4VQdO,5;eO0rQdO,5;jO1XQdO,5;lOK^QeO'#EuOLjQgO,5;fO!!kQdO'#IUO4iQdO,5;jO!!vQdO,5;lO!#OQdO,5;qO!#ZQtO,5;vO'vQdO,5;vPOOO,5=[,5=[P!#bOSO,5=[P!#jOdO,5=[O!&bQtO1G.jO!&iQtO1G.jO!)YQtO1G.jO!)dQtO1G.jO!+}QtO1G.jO!,bQtO1G.jO!,uQdO'#HcO!-TQtO'#GuO0rQdO'#HcO!-_QdO'#HbOOQS,5:Z,5:ZO!-gQdO,5:ZO!-lQdO'#HeO!-wQdO'#HeO!.[QdO,5>OOOQS'#Ds'#DsOOQS1G/w1G/wOOQS1G.|1G.|O!/[QtO1G.|O!/cQtO1G.|O1lQdO1G.|O!0OQdO1G/UOOQS'#DZ'#DZO0rQdO,59tOOQS1G.{1G.{O!0VQdO1G/eO!0gQdO1G/eO!0oQdO1G/fO'vQdO'#H[O!0tQdO'#H[O!0yQtO1G.{O!1ZQdO,59iO!2aQdO,5=zO!2qQdO,5=zO!2yQdO1G/mO!3OQtO1G/mOOQS1G/l1G/lO!3`QdO,5=uO!4VQdO,5=uO0rQdO1G/qO!4tQdO1G/sO!4yQtO1G/sO!5ZQtO1G/qOOQS1G/p1G/pOOQS1G/r1G/rOOOW-E9w-E9wOOQS1G/{1G/{O!5kQdO'#HxO0rQdO'#HxO!5|QdO,5>cOOOW-E9x-E9xOOQS1G/|1G/|OOQS-E9{-E9{O!6[Q#xO1G2zO!6{QtO1G2zO'vQdO,5<jOOQS,5<j,5<jOOQS-E9|-E9|OOQS,5<r,5<rOOQS-E:U-E:UOOQV1G0x1G0xO1XQdO'#GRO!7dQtO,5>kOOQS1G1`1G1`O!8RQdO1G1`OOQS'#DV'#DVO0rQdO,5=qOOQS,5=q,5=qO!8WQdO'#FrO!8cQdO,59oO!8kQdO1G/XO!8uQtO,5=uOOQS1G3`1G3`OOQS,5:m,5:mO!9fQdO'#GtOOQS,5<k,5<kOOQS-E9}-E9}O!9wQdO1G.hOOQS1G0Z1G0ZO!:VQdO,5=wO!:gQdO,5=wO0rQdO1G0jO0rQdO1G0jO!:xQdO,5>jO!;ZQdO,5>jO1XQdO,5>jO!;lQdO,5>iOOQS-E:R-E:RO!;qQdO1G0lO!;|QdO1G0lO!<RQdO,5>lO!<aQdO,5>lO!<oQdO,5>hO!=VQdO,5>hO!=hQdO'#EpO0rQdO1G0tO!=sQdO1G0tO!=xQgO1G0zO!AvQgO1G0}O!EqQdO,5>oO!E{QdO,5>oO!FTQtO,5>oO0rQdO1G1PO!F_QdO1G1PO4iQdO1G1UO!!vQdO1G1WOOQV,5;a,5;aO!FdQfO,5;aO!FiQgO1G1QO!JjQdO'#GZO4iQdO1G1QO4iQdO1G1QO!JzQdO,5>pO!KXQdO,5>pO1XQdO,5>pOOQV1G1U1G1UO!KaQdO'#FSO!KrQ!fO1G1WO!KzQdO1G1WOOQV1G1]1G1]O4iQdO1G1]O!LPQdO1G1]O!LXQdO'#F^OOQV1G1b1G1bO!#ZQtO1G1bPOOO1G2v1G2vP!L^OSO1G2vOOQS,5=},5=}OOQS'#Dp'#DpO0rQdO,5=}O!LfQdO,5=|O!LyQdO,5=|OOQS1G/u1G/uO!MRQdO,5>PO!McQdO,5>PO!MkQdO,5>PO!NOQdO,5>PO!N`QdO,5>POOQS1G3j1G3jOOQS7+$h7+$hO!8kQdO7+$pO#!RQdO1G.|O#!YQdO1G.|OOQS1G/`1G/`OOQS,5<`,5<`O'vQdO,5<`OOQS7+%P7+%PO#!aQdO7+%POOQS-E9r-E9rOOQS7+%Q7+%QO#!qQdO,5=vO'vQdO,5=vOOQS7+$g7+$gO#!vQdO7+%PO##OQdO7+%QO##TQdO1G3fOOQS7+%X7+%XO##eQdO1G3fO##mQdO7+%XOOQS,5<_,5<_O'vQdO,5<_O##rQdO1G3aOOQS-E9q-E9qO#$iQdO7+%]OOQS7+%_7+%_O#$wQdO1G3aO#%fQdO7+%_O#%kQdO1G3gO#%{QdO1G3gO#&TQdO7+%]O#&YQdO,5>dO#&sQdO,5>dO#&sQdO,5>dOOQS'#Dx'#DxO#'UO&jO'#DzO#'aO`O'#HyOOOW1G3}1G3}O#'fQdO1G3}O#'nQdO1G3}O#'yQ#xO7+(fO#(jQtO1G2UP#)TQdO'#GOOOQS,5<m,5<mOOQS-E:P-E:POOQS7+&z7+&zOOQS1G3]1G3]OOQS,5<^,5<^OOQS-E9p-E9pOOQS7+$s7+$sO#)bQdO,5=`O#){QdO,5=`O#*^QtO,5<aO#*qQdO1G3cOOQS-E9s-E9sOOQS7+&U7+&UO#+RQdO7+&UO#+aQdO,5<nO#+uQdO1G4UOOQS-E:Q-E:QO#,WQdO1G4UOOQS1G4T1G4TOOQS7+&W7+&WO#,iQdO7+&WOOQS,5<p,5<pO#,tQdO1G4WOOQS-E:S-E:SOOQS,5<l,5<lO#-SQdO1G4SOOQS-E:O-E:OO1XQdO'#EqO#-jQdO'#EqO#-uQdO'#IRO#-}QdO,5;[OOQS7+&`7+&`O0rQdO7+&`O#.SQgO7+&fO!JmQdO'#GXO4iQdO7+&fO4iQdO7+&iO#2QQtO,5<tO'vQdO,5<tO#2[QdO1G4ZOOQS-E:W-E:WO#2fQdO1G4ZO4iQdO7+&kO0rQdO7+&kOOQV7+&p7+&pO!KrQ!fO7+&rO!KzQdO7+&rO`QeO1G0{OOQV-E:X-E:XO4iQdO7+&lO4iQdO7+&lOOQV,5<u,5<uO#2nQdO,5<uO!JmQdO,5<uOOQV7+&l7+&lO#2yQgO7+&lO#6tQdO,5<vO#7PQdO1G4[OOQS-E:Y-E:YO#7^QdO1G4[O#7fQdO'#IWO#7tQdO'#IWO1XQdO'#IWOOQS'#IW'#IWO#8PQdO'#IVOOQS,5;n,5;nO#8XQdO,5;nO0rQdO'#FUOOQV7+&r7+&rO4iQdO7+&rOOQV7+&w7+&wO4iQdO7+&wO#8^QfO,5;xOOQV7+&|7+&|POOO7+(b7+(bO#8cQdO1G3iOOQS,5<c,5<cO#8qQdO1G3hOOQS-E9u-E9uO#9UQdO,5<dO#9aQdO,5<dO#9tQdO1G3kOOQS-E9v-E9vO#:UQdO1G3kO#:^QdO1G3kO#:nQdO1G3kO#:UQdO1G3kOOQS<<H[<<H[O#:yQtO1G1zOOQS<<Hk<<HkP#;WQdO'#FtO8vQdO1G3bO#;eQdO1G3bO#;jQdO<<HkOOQS<<Hl<<HlO#;zQdO7+)QOOQS<<Hs<<HsO#<[QtO1G1yP#<{QdO'#FsO#=YQdO7+)RO#=jQdO7+)RO#=rQdO<<HwO#=wQdO7+({OOQS<<Hy<<HyO#>nQdO,5<bO'vQdO,5<bOOQS-E9t-E9tOOQS<<Hw<<HwOOQS,5<g,5<gO0rQdO,5<gO#>sQdO1G4OOOQS-E9y-E9yO#?^QdO1G4OO<[QdO'#H{OOOO'#D{'#D{OOOO'#F|'#F|O#?oO&jO,5:fOOOW,5>e,5>eOOOW7+)i7+)iO#?zQdO7+)iO#@SQdO1G2zO#@mQdO1G2zP'vQdO'#FuO0rQdO<<IpO1XQdO1G2YP1XQdO'#GSO#AOQdO7+)pO#AaQdO7+)pOOQS<<Ir<<IrP1XQdO'#GUP0rQdO'#GQOOQS,5;],5;]O#ArQdO,5>mO#BQQdO,5>mOOQS1G0v1G0vOOQS<<Iz<<IzOOQV-E:V-E:VO4iQdO<<JQOOQV,5<s,5<sO4iQdO,5<sOOQV<<JQ<<JQOOQV<<JT<<JTO#BYQtO1G2`P#BdQdO'#GYO#BkQdO7+)uO#BuQgO<<JVO4iQdO<<JVOOQV<<J^<<J^O4iQdO<<J^O!KrQ!fO<<J^O#FpQgO7+&gOOQV<<JW<<JWO#FzQgO<<JWOOQV1G2a1G2aO1XQdO1G2aO#JuQdO1G2aO4iQdO<<JWO1XQdO1G2bP0rQdO'#G[O#KQQdO7+)vO#K_QdO7+)vOOQS'#FT'#FTO0rQdO,5>rO#KgQdO,5>rO#KrQdO,5>rO#K}QdO,5>qO#L`QdO,5>qOOQS1G1Y1G1YOOQS,5;p,5;pOOQV<<Jc<<JcO#LhQdO1G1dOOQS7+)T7+)TP#LmQdO'#FwO#L}QdO1G2OO#MbQdO1G2OO#MrQdO1G2OP#M}QdO'#FxO#N[QdO7+)VO#NlQdO7+)VO#NlQdO7+)VO#NtQdO7+)VO$ UQdO7+(|O8vQdO7+(|OOQSAN>VAN>VO$ oQdO<<LmOOQSAN>cAN>cO0rQdO1G1|O$!PQtO1G1|P$!ZQdO'#FvOOQS1G2R1G2RP$!hQdO'#F{O$!uQdO7+)jO$#`QdO,5>gOOOO-E9z-E9zOOOW<<MT<<MTO$#nQdO7+(fOOQSAN?[AN?[OOQS7+'t7+'tO$$XQdO<<M[OOQS,5<q,5<qO$$jQdO1G4XOOQS-E:T-E:TOOQVAN?lAN?lOOQV1G2_1G2_O4iQdOAN?qO$$xQgOAN?qOOQVAN?xAN?xO4iQdOAN?xOOQV<<JR<<JRO4iQdOAN?rO4iQdO7+'{OOQV7+'{7+'{O1XQdO7+'{OOQVAN?rAN?rOOQS7+'|7+'|O$(sQdO<<MbOOQS1G4^1G4^O0rQdO1G4^OOQS,5<w,5<wO$)QQdO1G4]OOQS-E:Z-E:ZOOQU'#G_'#G_O$)cQfO7+'OO$)nQdO'#F_O$*uQdO7+'jO$+VQdO7+'jOOQS7+'j7+'jO$+bQdO<<LqO$+rQdO<<LqO$+rQdO<<LqO$+zQdO'#H^OOQS<<Lh<<LhO$,UQdO<<LhOOQS7+'h7+'hOOQS'#D|'#D|OOOO1G4R1G4RO$,oQdO1G4RO$,wQdO1G4RP!=hQdO'#GVOOQVG25]G25]O4iQdOG25]OOQVG25dG25dOOQVG25^G25^OOQV<<Kg<<KgO4iQdO<<KgOOQS7+)x7+)xP$-SQdO'#G]OOQU-E:]-E:]OOQV<<Jj<<JjO$-vQtO'#FaOOQS'#Fc'#FcO$.WQdO'#FbO$.xQdO'#FbOOQS'#Fb'#FbO$.}QdO'#IYO$)nQdO'#FiO$)nQdO'#FiO$/fQdO'#FjO$)nQdO'#FkO$/mQdO'#IZOOQS'#IZ'#IZO$0[QdO,5;yOOQS<<KU<<KUO$0dQdO<<KUO$0tQdOANB]O$1UQdOANB]O$1^QdO'#H_OOQS'#H_'#H_O1sQdO'#DcO$1wQdO,5=xOOQSANBSANBSOOOO7+)m7+)mO$2`QdO7+)mOOQVLD*wLD*wOOQVANARANARO5uQ!fO'#GaO$2hQtO,5<SO$)nQdO'#FmOOQS,5<W,5<WOOQS'#Fd'#FdO$3YQdO,5;|O$3_QdO,5;|OOQS'#Fg'#FgO$)nQdO'#G`O$4PQdO,5<QO$4kQdO,5>tO$4{QdO,5>tO1XQdO,5<PO$5^QdO,5<TO$5cQdO,5<TO$)nQdO'#I[O$5hQdO'#I[O$5mQdO,5<UOOQS,5<V,5<VO0rQdO'#FpOOQU1G1e1G1eO4iQdO1G1eOOQSAN@pAN@pO$5rQdOG27wO$6SQdO,59}OOQS1G3d1G3dOOOO<<MX<<MXOOQS,5<{,5<{OOQS-E:_-E:_O$6XQtO'#FaO$6`QdO'#I]O$6nQdO'#I]O$6vQdO,5<XOOQS1G1h1G1hO$6{QdO1G1hO$7QQdO,5<zOOQS-E:^-E:^O$7lQdO,5=OO$8TQdO1G4`OOQS-E:b-E:bOOQS1G1k1G1kOOQS1G1o1G1oO$8eQdO,5>vO$)nQdO,5>vOOQS1G1p1G1pOOQS,5<[,5<[OOQU7+'P7+'PO$+zQdO1G/iO$)nQdO,5<YO$8sQdO,5>wO$8zQdO,5>wOOQS1G1s1G1sOOQS7+'S7+'SP$)nQdO'#GdO$9SQdO1G4bO$9^QdO1G4bO$9fQdO1G4bOOQS7+%T7+%TO$9tQdO1G1tO$:SQtO'#FaO$:ZQdO,5<}OOQS,5<},5<}O$:iQdO1G4cOOQS-E:a-E:aO$)nQdO,5<|O$:pQdO,5<|O$:uQdO7+)|OOQS-E:`-E:`O$;PQdO7+)|O$)nQdO,5<ZP$)nQdO'#GcO$;XQdO1G2hO$)nQdO1G2hP$;gQdO'#GbO$;nQdO<<MhO$;xQdO1G1uO$<WQdO7+(SO8vQdO'#C}O8vQdO,59bO8vQdO,59bO8vQdO,59bO$<fQtO,5=`O8vQdO1G.|O0rQdO1G/XO0rQdO7+$pP$<yQdO'#GOO'vQdO'#GtO$=WQdO,59bO$=]QdO,59bO$=dQdO,59mO$=iQdO1G/UO1sQdO'#DRO8vQdO,59j",stateData:"$>S~O%cOS%^OSSOS%]PQ~OPdOVaOfoOhYOopOs!POvqO!PrO!Q{O!T!SO!U!RO!XZO!][O!h`O!r`O!s`O!t`O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#l!QO#o!TO#s!UO#u!VO#z!WO#}hO$P!XO%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~O%]!YO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%j![O%k!]O%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aO~Ok%xXl%xXm%xXn%xXo%xXp%xXs%xXz%xX{%xX!x%xX#g%xX%[%xX%_%xX%z%xXg%xX!T%xX!U%xX%{%xX!W%xX![%xX!Q%xX#[%xXt%xX!m%xX~P%SOfoOhYO!XZO!][O!h`O!r`O!s`O!t`O%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~Oz%wX{%wX#g%wX%[%wX%_%wX%z%wX~Ok!pOl!qOm!oOn!oOo!rOp!sOs!tO!x%wX~P)pOV!zOg!|Oo0cOv0qO!PrO~P'vOV#OOo0cOv0qO!W#PO~P'vOV#SOa#TOo0cOv0qO![#UO~P'vOQ#XO%`#XO%a#ZO~OQ#^OR#[O%`#^O%a#`O~OV%iX_%iXa%iXh%iXk%iXl%iXm%iXn%iXo%iXp%iXs%iXz%iX!X%iX!f%iX%j%iX%k%iX%l%iX%m%iX%n%iX%o%iX%p%iX%q%iX%r%iX%s%iXg%iX!T%iX!U%iX~O&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O{%iX!x%iX#g%iX%[%iX%_%iX%z%iX%{%iX!W%iX![%iX!Q%iX#[%iXt%iX!m%iX~P,eOz#dO{%hX!x%hX#g%hX%[%hX%_%hX%z%hX~Oo0cOv0qO~P'vO#g#gO%[#iO%_#iO~O%uWO~O!T#nO#u!VO#z!WO#}hO~OopO~P'vOV#sOa#tO%uWO{wP~OV#xOo0cOv0qO!Q#yO~P'vO{#{O!x$QO%z#|O#g!yX%[!yX%_!yX~OV#xOo0cOv0qO#g#SX%[#SX%_#SX~P'vOo0cOv0qO#g#WX%[#WX%_#WX~P'vOh$WO%uWO~O!f$YO!r$YO%uWO~OV$eO~P'vO!U$gO#s$hO#u$iO~O{$jO~OV$qO~P'vOS$sO%[$rO%_$rO%c$tO~OV$}Oa$}Og%POo0cOv0qO~P'vOo0cOv0qO{%SO~P'vO&Y%UO~Oa!bOh!iO!X!kO!f!mOVba_bakbalbambanbaobapbasbazba{ba!xba#gba%[ba%_ba%jba%kba%lba%mba%nba%oba%pba%qba%rba%sba%zbagba!Tba!Uba%{ba!Wba![ba!Qba#[batba!mba~On%ZO~Oo%ZO~P'vOo0cO~P'vOk0eOl0fOm0dOn0dOo0mOp0nOs0rOg%wX!T%wX!U%wX%{%wX!W%wX![%wX!Q%wX#[%wX!m%wX~P)pO%{%]Og%vXz%vX!T%vX!U%vX!W%vX{%vX~Og%_Oz%`O!T%dO!U%cO~Og%_O~Oz%gO!T%dO!U%cO!W&SX~O!W%kO~Oz%lO{%nO!T%dO!U%cO![%}X~O![%rO~O![%sO~OQ#XO%`#XO%a%uO~OV%wOo0cOv0qO!PrO~P'vOQ#^OR#[O%`#^O%a%zO~OV!qa_!qaa!qah!qak!qal!qam!qan!qao!qap!qas!qaz!qa{!qa!X!qa!f!qa!x!qa#g!qa%[!qa%_!qa%j!qa%k!qa%l!qa%m!qa%n!qa%o!qa%p!qa%q!qa%r!qa%s!qa%z!qag!qa!T!qa!U!qa%{!qa!W!qa![!qa!Q!qa#[!qat!qa!m!qa~P#yOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P%SOV&OOopOvqO{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P'vOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#g$zX%[$zX%_$zX~P'vO#g#gO%[&TO%_&TO~O!f&UOh&sX%[&sXz&sX#[&sX#g&sX%_&sX#Z&sXg&sX~Oh!iO%[&WO~Okealeameaneaoeapeaseazea{ea!xea#gea%[ea%_ea%zeagea!Tea!Uea%{ea!Wea![ea!Qea#[eatea!mea~P%SOsqazqa{qa#gqa%[qa%_qa%zqa~Ok!pOl!qOm!oOn!oOo!rOp!sO!xqa~PEcO%z&YOz%yX{%yX~O%uWOz%yX{%yX~Oz&]O{wX~O{&_O~Oz%lO#g%}X%[%}X%_%}Xg%}X{%}X![%}X!m%}X%z%}X~OV0lOo0cOv0qO!PrO~P'vO%z#|O#gUa%[Ua%_Ua~Oz&hO#g&PX%[&PX%_&PXn&PX~P%SOz&kO!Q&jO#g#Wa%[#Wa%_#Wa~Oz&lO#[&nO#g&rX%[&rX%_&rXg&rX~O!f$YO!r$YO#Z&qO%uWO~O#Z&qO~Oz&sO#g&tX%[&tX%_&tX~Oz&uO#g&pX%[&pX%_&pX{&pX~O!X&wO%z&xO~Oz&|On&wX~P%SOn'PO~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO%['UO~P'vOt'YO#p'WO#q'XOP#naV#naf#nah#nao#nas#nav#na!P#na!Q#na!T#na!U#na!X#na!]#na!h#na!r#na!s#na!t#na!{#na!}#na#P#na#R#na#T#na#X#na#Z#na#^#na#_#na#a#na#c#na#l#na#o#na#s#na#u#na#z#na#}#na$P#na%X#na%o#na%p#na%t#na%u#na&Z#na&[#na&]#na&^#na&_#na&`#na&a#na&b#na&c#na&d#na&e#na&f#na&g#na&h#na&i#na&j#na%Z#na%_#na~Oz'ZO#[']O{&xX~Oh'_O!X&wO~Oh!iO{$jO!X&wO~O{'eO~P%SO%['hO%_'hO~OS'iO%['hO%_'hO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%k!]O~P!#uO%kWi~P!#uOV!aO_!aOa!bOh!iO!X!kO!f!mO%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%m!_O%n!_O~P!&pO%mWi%nWi~P!&pOa!bOh!iO!X!kO!f!mOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%mWi%nWi%oWi%pWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~OV!aO_!aO%q!aO%r!aO%s!aO~P!)nOVWi_Wi%qWi%rWi%sWi~P!)nO!T%dO!U%cOg&VXz&VX~O%z'kO%{'kO~P,eOz'mOg&UX~Og'oO~Oz'pO{'rO!W&XX~Oo0cOv0qOz'pO{'sO!W&XX~P'vO!W'uO~Om!oOn!oOo!rOp!sOkjisjizji{ji!xji#gji%[ji%_ji%zji~Ol!qO~P!.aOlji~P!.aOk0eOl0fOm0dOn0dOo0mOp0nO~Ot'wO~P!/jOV'|Og'}Oo0cOv0qO~P'vOg'}Oz(OO~Og(QO~O!U(SO~Og(TOz(OO!T%dO!U%cO~P%SOk0eOl0fOm0dOn0dOo0mOp0nOgqa!Tqa!Uqa%{qa!Wqa![qa!Qqa#[qatqa!mqa~PEcOV'|Oo0cOv0qO!W&Sa~P'vOz(WO!W&Sa~O!W(XO~Oz(WO!T%dO!U%cO!W&Sa~P%SOV(]Oo0cOv0qO![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~P'vOz(^O![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~O![(aO~Oz(^O!T%dO!U%cO![%}a~P%SOz(dO!T%dO!U%cO![&Ta~P%SOz(gO{&lX![&lX!m&lX%z&lX~O{(kO![(mO!m(nO%z(jO~OV&OOopOvqO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~P'vOz(pO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~O!f&UOh&sa%[&saz&sa#[&sa#g&sa%_&sa#Z&sag&sa~O%[(uO~OV#sOa#tO%uWO~Oz&]O{wa~OopOvqO~P'vOz(^O#g%}a%[%}a%_%}ag%}a{%}a![%}a!m%}a%z%}a~P%SOz(zO#g%hX%[%hX%_%hX%z%hX~O%z#|O#gUi%[Ui%_Ui~O#g&Pa%[&Pa%_&Pan&Pa~P'vOz(}O#g&Pa%[&Pa%_&Pan&Pa~O%uWO#g&ra%[&ra%_&rag&ra~Oz)SO#g&ra%[&ra%_&rag&ra~Og)VO~OV)WOh$WO%uWO~O#Z)XO~O%uWO#g&ta%[&ta%_&ta~Oz)ZO#g&ta%[&ta%_&ta~Oo0cOv0qO#g&pa%[&pa%_&pa{&pa~P'vOz)^O#g&pa%[&pa%_&pa{&pa~OV)`Oa)`O%uWO~O%z)eO~Ot)hO#j)gOP#hiV#hif#hih#hio#his#hiv#hi!P#hi!Q#hi!T#hi!U#hi!X#hi!]#hi!h#hi!r#hi!s#hi!t#hi!{#hi!}#hi#P#hi#R#hi#T#hi#X#hi#Z#hi#^#hi#_#hi#a#hi#c#hi#l#hi#o#hi#s#hi#u#hi#z#hi#}#hi$P#hi%X#hi%o#hi%p#hi%t#hi%u#hi&Z#hi&[#hi&]#hi&^#hi&_#hi&`#hi&a#hi&b#hi&c#hi&d#hi&e#hi&f#hi&g#hi&h#hi&i#hi&j#hi%Z#hi%_#hi~Ot)iOP#kiV#kif#kih#kio#kis#kiv#ki!P#ki!Q#ki!T#ki!U#ki!X#ki!]#ki!h#ki!r#ki!s#ki!t#ki!{#ki!}#ki#P#ki#R#ki#T#ki#X#ki#Z#ki#^#ki#_#ki#a#ki#c#ki#l#ki#o#ki#s#ki#u#ki#z#ki#}#ki$P#ki%X#ki%o#ki%p#ki%t#ki%u#ki&Z#ki&[#ki&]#ki&^#ki&_#ki&`#ki&a#ki&b#ki&c#ki&d#ki&e#ki&f#ki&g#ki&h#ki&i#ki&j#ki%Z#ki%_#ki~OV)kOn&wa~P'vOz)lOn&wa~Oz)lOn&wa~P%SOn)pO~O%Y)tO~Ot)wO#p'WO#q)vOP#niV#nif#nih#nio#nis#niv#ni!P#ni!Q#ni!T#ni!U#ni!X#ni!]#ni!h#ni!r#ni!s#ni!t#ni!{#ni!}#ni#P#ni#R#ni#T#ni#X#ni#Z#ni#^#ni#_#ni#a#ni#c#ni#l#ni#o#ni#s#ni#u#ni#z#ni#}#ni$P#ni%X#ni%o#ni%p#ni%t#ni%u#ni&Z#ni&[#ni&]#ni&^#ni&_#ni&`#ni&a#ni&b#ni&c#ni&d#ni&e#ni&f#ni&g#ni&h#ni&i#ni&j#ni%Z#ni%_#ni~OV)zOo0cOv0qO{$jO~P'vOo0cOv0qO{&xa~P'vOz*OO{&xa~OV*SOa*TOg*WO%q*UO%uWO~O{$jO&{*YO~Oh'_O~Oh!iO{$jO~O%[*_O~O%[*aO%_*aO~OV$}Oa$}Oo0cOv0qOg&Ua~P'vOz*dOg&Ua~Oo0cOv0qO{*gO!W&Xa~P'vOz*hO!W&Xa~Oo0cOv0qOz*hO{*kO!W&Xa~P'vOo0cOv0qOz*hO!W&Xa~P'vOz*hO{*kO!W&Xa~Om0dOn0dOo0mOp0nOgjikjisjizji!Tji!Uji%{ji!Wji{ji![ji#gji%[ji%_ji!Qji#[jitji!mji%zji~Ol0fO~P!NkOlji~P!NkOV'|Og*pOo0cOv0qO~P'vOn*rO~Og*pOz*tO~Og*uO~OV'|Oo0cOv0qO!W&Si~P'vOz*vO!W&Si~O!W*wO~OV(]Oo0cOv0qO![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~P'vOz*zO!T%dO!U%cO![&Ti~Oz*}O![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~O![+OO~Oa+QOo0cOv0qO![&Ti~P'vOz*zO![&Ti~O![+SO~OV+UOo0cOv0qO{&la![&la!m&la%z&la~P'vOz+VO{&la![&la!m&la%z&la~O!]+YO&n+[O![!nX~O![+^O~O{(kO![+_O~O{(kO![+_O!m+`O~OV&OOopOvqO{%hq!x%hq#g%hq%[%hq%_%hq%z%hq~P'vOz$ri{$ri!x$ri#g$ri%[$ri%_$ri%z$ri~P%SOV&OOopOvqO~P'vOV&OOo0cOv0qO#g%ha%[%ha%_%ha%z%ha~P'vOz+aO#g%ha%[%ha%_%ha%z%ha~Oz$ia#g$ia%[$ia%_$ian$ia~P%SO#g&Pi%[&Pi%_&Pin&Pi~P'vOz+dO#g#Wq%[#Wq%_#Wq~O#[+eOz$va#g$va%[$va%_$vag$va~O%uWO#g&ri%[&ri%_&rig&ri~Oz+gO#g&ri%[&ri%_&rig&ri~OV+iOh$WO%uWO~O%uWO#g&ti%[&ti%_&ti~Oo0cOv0qO#g&pi%[&pi%_&pi{&pi~P'vO{#{Oz#eX!W#eX~Oz+mO!W&uX~O!W+oO~Ot+rO#j)gOP#hqV#hqf#hqh#hqo#hqs#hqv#hq!P#hq!Q#hq!T#hq!U#hq!X#hq!]#hq!h#hq!r#hq!s#hq!t#hq!{#hq!}#hq#P#hq#R#hq#T#hq#X#hq#Z#hq#^#hq#_#hq#a#hq#c#hq#l#hq#o#hq#s#hq#u#hq#z#hq#}#hq$P#hq%X#hq%o#hq%p#hq%t#hq%u#hq&Z#hq&[#hq&]#hq&^#hq&_#hq&`#hq&a#hq&b#hq&c#hq&d#hq&e#hq&f#hq&g#hq&h#hq&i#hq&j#hq%Z#hq%_#hq~On$|az$|a~P%SOV)kOn&wi~P'vOz+yOn&wi~Oz,TO{$jO#[,TO~O#q,VOP#nqV#nqf#nqh#nqo#nqs#nqv#nq!P#nq!Q#nq!T#nq!U#nq!X#nq!]#nq!h#nq!r#nq!s#nq!t#nq!{#nq!}#nq#P#nq#R#nq#T#nq#X#nq#Z#nq#^#nq#_#nq#a#nq#c#nq#l#nq#o#nq#s#nq#u#nq#z#nq#}#nq$P#nq%X#nq%o#nq%p#nq%t#nq%u#nq&Z#nq&[#nq&]#nq&^#nq&_#nq&`#nq&a#nq&b#nq&c#nq&d#nq&e#nq&f#nq&g#nq&h#nq&i#nq&j#nq%Z#nq%_#nq~O#[,WOz%Oa{%Oa~Oo0cOv0qO{&xi~P'vOz,YO{&xi~O{#{O%z,[Og&zXz&zX~O%uWOg&zXz&zX~Oz,`Og&yX~Og,bO~O%Y,eO~O!T%dO!U%cOg&Viz&Vi~OV$}Oa$}Oo0cOv0qOg&Ui~P'vO{,hOz$la!W$la~Oo0cOv0qO{,iOz$la!W$la~P'vOo0cOv0qO{*gO!W&Xi~P'vOz,lO!W&Xi~Oo0cOv0qOz,lO!W&Xi~P'vOz,lO{,oO!W&Xi~Og$hiz$hi!W$hi~P%SOV'|Oo0cOv0qO~P'vOn,qO~OV'|Og,rOo0cOv0qO~P'vOV'|Oo0cOv0qO!W&Sq~P'vOz$gi![$gi#g$gi%[$gi%_$gig$gi{$gi!m$gi%z$gi~P%SOV(]Oo0cOv0qO~P'vOa+QOo0cOv0qO![&Tq~P'vOz,sO![&Tq~O![,tO~OV(]Oo0cOv0qO![%}q#g%}q%[%}q%_%}qg%}q{%}q!m%}q%z%}q~P'vO{,uO~OV+UOo0cOv0qO{&li![&li!m&li%z&li~P'vOz,zO{&li![&li!m&li%z&li~O!]+YO&n+[O![!na~O{(kO![,}O~OV&OOo0cOv0qO#g%hi%[%hi%_%hi%z%hi~P'vOz-OO#g%hi%[%hi%_%hi%z%hi~O%uWO#g&rq%[&rq%_&rqg&rq~Oz-RO#g&rq%[&rq%_&rqg&rq~OV)`Oa)`O%uWO!W&ua~Oz-TO!W&ua~On$|iz$|i~P%SOV)kO~P'vOV)kOn&wq~P'vOt-XOP#myV#myf#myh#myo#mys#myv#my!P#my!Q#my!T#my!U#my!X#my!]#my!h#my!r#my!s#my!t#my!{#my!}#my#P#my#R#my#T#my#X#my#Z#my#^#my#_#my#a#my#c#my#l#my#o#my#s#my#u#my#z#my#}#my$P#my%X#my%o#my%p#my%t#my%u#my&Z#my&[#my&]#my&^#my&_#my&`#my&a#my&b#my&c#my&d#my&e#my&f#my&g#my&h#my&i#my&j#my%Z#my%_#my~O%Z-]O%_-]O~P`O#q-^OP#nyV#nyf#nyh#nyo#nys#nyv#ny!P#ny!Q#ny!T#ny!U#ny!X#ny!]#ny!h#ny!r#ny!s#ny!t#ny!{#ny!}#ny#P#ny#R#ny#T#ny#X#ny#Z#ny#^#ny#_#ny#a#ny#c#ny#l#ny#o#ny#s#ny#u#ny#z#ny#}#ny$P#ny%X#ny%o#ny%p#ny%t#ny%u#ny&Z#ny&[#ny&]#ny&^#ny&_#ny&`#ny&a#ny&b#ny&c#ny&d#ny&e#ny&f#ny&g#ny&h#ny&i#ny&j#ny%Z#ny%_#ny~Oz-aO{$jO#[-aO~Oo0cOv0qO{&xq~P'vOz-dO{&xq~O%z,[Og&zaz&za~O{#{Og&zaz&za~OV*SOa*TO%q*UO%uWOg&ya~Oz-hOg&ya~O$S-lO~OV$}Oa$}Oo0cOv0qO~P'vOo0cOv0qO{-mOz$li!W$li~P'vOo0cOv0qOz$li!W$li~P'vO{-mOz$li!W$li~Oo0cOv0qO{*gO~P'vOo0cOv0qO{*gO!W&Xq~P'vOz-pO!W&Xq~Oo0cOv0qOz-pO!W&Xq~P'vOs-sO!T%dO!U%cOg&Oq!W&Oq![&Oqz&Oq~P!/jOa+QOo0cOv0qO![&Ty~P'vOz$ji![$ji~P%SOa+QOo0cOv0qO~P'vOV+UOo0cOv0qO~P'vOV+UOo0cOv0qO{&lq![&lq!m&lq%z&lq~P'vO{(kO![-xO!m-yO%z-wO~OV&OOo0cOv0qO#g%hq%[%hq%_%hq%z%hq~P'vO%uWO#g&ry%[&ry%_&ryg&ry~OV)`Oa)`O%uWO!W&ui~Ot-}OP#m!RV#m!Rf#m!Rh#m!Ro#m!Rs#m!Rv#m!R!P#m!R!Q#m!R!T#m!R!U#m!R!X#m!R!]#m!R!h#m!R!r#m!R!s#m!R!t#m!R!{#m!R!}#m!R#P#m!R#R#m!R#T#m!R#X#m!R#Z#m!R#^#m!R#_#m!R#a#m!R#c#m!R#l#m!R#o#m!R#s#m!R#u#m!R#z#m!R#}#m!R$P#m!R%X#m!R%o#m!R%p#m!R%t#m!R%u#m!R&Z#m!R&[#m!R&]#m!R&^#m!R&_#m!R&`#m!R&a#m!R&b#m!R&c#m!R&d#m!R&e#m!R&f#m!R&g#m!R&h#m!R&i#m!R&j#m!R%Z#m!R%_#m!R~Oo0cOv0qO{&xy~P'vOV*SOa*TO%q*UO%uWOg&yi~O$S-lO%Z.VO%_.VO~OV.aOh._O!X.^O!].`O!h.YO!s.[O!t.[O%p.XO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O~Oo0cOv0qOz$lq!W$lq~P'vO{.fOz$lq!W$lq~Oo0cOv0qO{*gO!W&Xy~P'vOz.gO!W&Xy~Oo0cOv.kO~P'vOs-sO!T%dO!U%cOg&Oy!W&Oy![&Oyz&Oy~P!/jO{(kO![.nO~O{(kO![.nO!m.oO~OV*SOa*TO%q*UO%uWO~Oh.tO!f.rOz$TX#[$TX%j$TXg$TX~Os$TX{$TX!W$TX![$TX~P$-bO%o.vO%p.vOs$UXz$UX{$UX#[$UX%j$UX!W$UXg$UX![$UX~O!h.xO~Oz.|O#[/OO%j.yOs&|X{&|X!W&|Xg&|X~Oa/RO~P$)zOh.tOs&}Xz&}X{&}X#[&}X%j&}X!W&}Xg&}X![&}X~Os/VO{$jO~Oo0cOv0qOz$ly!W$ly~P'vOo0cOv0qO{*gO!W&X!R~P'vOz/ZO!W&X!R~Og&RXs&RX!T&RX!U&RX!W&RX![&RXz&RX~P!/jOs-sO!T%dO!U%cOg&Qa!W&Qa![&Qaz&Qa~O{(kO![/^O~O!f.rOh$[as$[az$[a{$[a#[$[a%j$[a!W$[ag$[a![$[a~O!h/eO~O%o.vO%p.vOs$Uaz$Ua{$Ua#[$Ua%j$Ua!W$Uag$Ua![$Ua~O%j.yOs$Yaz$Ya{$Ya#[$Ya!W$Yag$Ya![$Ya~Os&|a{&|a!W&|ag&|a~P$)nOz/jOs&|a{&|a!W&|ag&|a~O!W/mO~Og/mO~O{/oO~O![/pO~Oo0cOv0qO{*gO!W&X!Z~P'vO{/sO~O%z/tO~P$-bOz/uO#[/OO%j.yOg'PX~Oz/uOg'PX~Og/wO~O!h/xO~O#[/OOs%Saz%Sa{%Sa%j%Sa!W%Sag%Sa![%Sa~O#[/OO%j.yOs%Waz%Wa{%Wa!W%Wag%Wa~Os&|i{&|i!W&|ig&|i~P$)nOz/zO#[/OO%j.yO!['Oa~Og'Pa~P$)nOz0SOg'Pa~Oa0UO!['Oi~P$)zOz0WO!['Oi~Oz0WO#[/OO%j.yO!['Oi~O#[/OO%j.yOg$biz$bi~O%z0ZO~P$-bO#[/OO%j.yOg%Vaz%Va~Og'Pi~P$)nO{0^O~Oa0UO!['Oq~P$)zOz0`O!['Oq~O#[/OO%j.yOz%Ui![%Ui~Oa0UO~P$)zOa0UO!['Oy~P$)zO#[/OO%j.yOg$ciz$ci~O#[/OO%j.yOz%Uq![%Uq~Oz+aO#g%ha%[%ha%_%ha%z%ha~P%SOV&OOo0cOv0qO~P'vOn0hO~Oo0hO~P'vO{0iO~Ot0jO~P!/jO&]&Z&j&h&i&g&f&d&e&c&b&`&a&_&^&[%u~",goto:"!=j'QPPPPPP'RP'Z*s+[+t,_,y-fP.SP'Z.r.r'ZPPP'Z2[PPPPPP2[5PPP5PP7b7k=sPP=v>h>kPP'Z'ZPP>zPP'Z'ZPP'Z'Z'Z'Z'Z?O?w'ZP?zP@QDXGuGyPG|HWH['ZPPPH_Hk'RP'R'RP'RP'RP'RP'RP'R'R'RP'RPP'RPP'RP'RPHqH}IVPI^IdPI^PI^I^PPPI^PKrPK{LVL]KrPI^LfPI^PLmLsPLwM]MzNeLwLwNkNxLwLwLwLw! ^! d! g! l! o! y!!P!!]!!o!!u!#P!#V!#s!#y!$P!$Z!$a!$g!$y!%T!%Z!%a!%k!%q!%w!%}!&T!&Z!&e!&k!&u!&{!'U!'[!'k!'s!'}!(UPPPPPPPPPPP!([!(_!(e!(n!(x!)TPPPPPPPPPPPP!-u!/Z!3^!6oPP!6w!7W!7a!8Y!8P!8c!8i!8l!8o!8r!8z!9jPPPPPPPPPPPPPPPPP!9m!9q!9wP!:]!:a!:m!:v!;S!;j!;m!;p!;v!;|!<S!<VP!<_!<h!=d!=g]eOn#g$j)t,P'}`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r{!cQ#c#p$R$d$p%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g}!dQ#c#p$R$d$p$u%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!P!eQ#c#p$R$d$p$u$v%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!R!fQ#c#p$R$d$p$u$v$w%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!T!gQ#c#p$R$d$p$u$v$w$x%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!V!hQ#c#p$R$d$p$u$v$w$x$y%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!Z!hQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g'}TOTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r&eVOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0n0r%oXOYZ[dnrxy}!P!Q!U!i!k#[#d#g#y#{#}$Q$h$j$}%S%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/V/Z0i0j0kQ#vqQ/[.kR0o0q't`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rh#jhz{$W$Z&l&q)S)X+f+g-RW#rq&].k0qQ$]|Q$a!OQ$n!VQ$o!WW$|!i'm*d,gS&[#s#tQ'S$iQ(s&UQ)U&nU)Y&s)Z+jW)a&w+m-T-{Q*Q']W*R'_,`-h.TQ+l)`S,_*S*TQ-Q+eQ-_,TQ-c,WQ.R-al.W-l.^._.a.z.|/R/j/o/t/y0U0Z0^Q/S.`Q/a.tQ/l/OU0P/u0S0[X0V/z0W0_0`R&Z#r!_!wYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZR%^!vQ!{YQ%x#[Q&d#}Q&g$QR,{+YT.j-s/s!Y!jQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0gQ&X#kQ'c$oR*^'dR'l$|Q%V!mR/_.r'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rS#a_#b!P.[-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rT#a_#bT#^^#_R(o%xa(l%x(n(o+`,{-y-z.oT+[(k+]R-z,{Q$PsQ+l)aQ,^*RR-e,_X#}s$O$P&fQ&y$aQ'a$nQ'd$oR)s'SQ)b&wV-S+m-T-{ZgOn$j)t,PXkOn)t,PQ$k!TQ&z$bQ&{$cQ'^$mQ'b$oQ)q'RQ)x'WQ){'XQ)|'YQ*Z'`S*]'c'dQ+s)gQ+u)hQ+v)iQ+z)oS+|)r*[Q,Q)vQ,R)wS,S)y)zQ,d*^Q-V+rQ-W+tQ-Y+{S-Z+},OQ-`,UQ-b,VQ-|-XQ.O-[Q.P-^Q.Q-_Q.p-}Q.q.RQ/W.dR/r/XWkOn)t,PR#mjQ'`$nS)r'S'aR,O)sQ,]*RR-f,^Q*['`Q+})rR-[,OZiOjn)t,PQ'f$pR*`'gT-j,e-ku.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^t.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^Q/S.`X0V/z0W0_0`!P.Z-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`Q.w.YR/f.xg.z.].{/b/i/n/|0O0Q0]0a0bu.b-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^X.u.W.b/a0PR/c.tV0R/u0S0[R/X.dQnOS#on,PR,P)tQ&^#uR(x&^S%m#R#wS(_%m(bT(b%p&`Q%a!yQ%h!}W(P%a%h(U(YQ(U%eR(Y%jQ&i$RR)O&iQ(e%qQ*{(`T+R(e*{Q'n%OR*e'nS'q%R%SY*i'q*j,m-q.hU*j'r's'tU,m*k*l*mS-q,n,oR.h-rQ#Y]R%t#YQ#_^R%y#_Q(h%vS+W(h+XR+X(iQ+](kR,|+]Q#b_R%{#bQ#ebQ%}#cW&Q#e%}({+bQ({&cR+b0gQ$OsS&e$O&fR&f$PQ&v$_R)_&vQ&V#jR(t&VQ&m$VS)T&m+hR+h)UQ$Z{R&p$ZQ&t$]R)[&tQ+n)bR-U+nQ#hfR&S#hQ)f&zR+q)fQ&}$dS)m&})nR)n'OQ'V$kR)u'VQ'[$lS*P'[,ZR,Z*QQ,a*VR-i,aWjOn)t,PR#ljQ-k,eR.U-kd.{.]/b/i/n/|0O0Q0]0a0bR/h.{U.s.W/a0PR/`.sQ/{/nS0X/{0YR0Y/|S/v/b/cR0T/vQ.}.]R/k.}R!ZPXmOn)t,PWlOn)t,PR'T$jYfOn$j)t,PR&R#g[sOn#g$j)t,PR&d#}&dQOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0n0rQ!nTQ#caQ#poU$Rt%c(SS$d!R$gQ$p!XQ$u!cQ$v!dQ$w!eQ$x!fQ$y!gQ$z!hQ%e!zQ%j#OQ%p#SQ%q#TQ&`#xQ'O$eQ'g$qQ(q&OU(|&h(}+cW)j&|)l+x+yQ*o'|Q*x(]Q+w)kQ,v+QR0g0lQ!yYQ!}ZQ$b!PQ$c!QQ%R!kQ't%S^'{%`%g(O(W*q*t*v^*f'p*h,k,l-p.g/ZQ*l'rQ*m'sQ+t)gQ,j*gQ,n*kQ-n,hQ-o,iQ-r,oQ.e-mR/Y.f[bOn#g$j)t,P!^!vYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZQ#R[Q#fdS#wrxQ$UyW$_}$Q'P)pS$l!U$hW${!i'm*d,gS%v#[+Y`&P#d%|(p(r(z+a-O0kQ&a#yQ&b#{Q&c#}Q'j$}Q'z%^W([%l(^*y*}Q(`%nQ(i%wQ(v&ZS(y&_0iQ)P&jQ)Q&kU)]&u)^+kQ)d&xQ)y'WY)}'Z*O,X,Y-dQ*b'lS*n'w0jW+P(d*z,s,wW+T(g+V,y,zQ+p)eQ,U)zQ,c*YQ,x+UQ-P+dQ-e,]Q-v,uQ.S-fR/q/VhUOn#d#g$j%|&_'w(p(r)t,P%U!uYZ[drxy}!P!Q!U!i!k#[#y#{#}$Q$h$}%S%^%`%g%l%n%w&Z&j&k&u&x'P'W'Z'l'm'p'r's(O(W(^(d(g(z)^)e)g)p)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/V/Z0i0j0kQ#qpW%W!o!s0d0nQ%X!pQ%Y!qQ%[!tQ%f0cS'v%Z0hQ'x0eQ'y0fQ,p*rQ-u,qS.i-s/sR0p0rU#uq.k0qR(w&][cOn#g$j)t,PZ!xY#[#}$Q+YQ#W[Q#zrR$TxQ%b!yQ%i!}Q%o#RQ'j${Q(V%eQ(Z%jQ(c%pQ(f%qQ*|(`Q,f*bQ-t,pQ.m-uR/].lQ$StQ(R%cR*s(SQ.l-sR/}/sR#QZR#V[R%Q!iQ%O!iV*c'm*d,g!Z!lQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0gR%T!kT#]^#_Q%x#[R,{+YQ(m%xS+_(n(oQ,}+`Q-x,{S.n-y-zR/^.oT+Z(k+]Q$`}Q&g$QQ)o'PR+{)pQ$XzQ)W&qR+i)XQ$XzQ&o$WQ)W&qR+i)XQ#khW$Vz$W&q)XQ$[{Q&r$ZZ)R&l)S+f+g-RR$^|R)c&wXlOn)t,PQ$f!RR'Q$gQ$m!UR'R$hR*X'_Q*V'_V-g,`-h.TQ.d-lQ/P.^R/Q._U.]-l.^._Q/U.aQ/b.tQ/g.zU/i.|/j/yQ/n/RQ/|/oQ0O/tU0Q/u0S0[Q0]0UQ0a0ZR0b0^R/T.`R/d.t",nodeNames:" print Escape { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatSelfDoc FormatConversion FormatSpec FormatReplacement FormatSelfDoc ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:277,context:Q6,nodeProps:[["isolate",-5,4,71,72,73,77,""],["group",-15,6,85,87,88,90,92,94,96,98,99,100,102,105,108,110,"Statement Statement",-22,8,18,21,25,40,49,50,56,57,60,61,62,63,64,67,70,71,72,79,80,81,82,"Expression",-10,114,116,119,121,122,126,128,133,135,138,"Statement",-9,143,144,147,148,150,151,152,153,154,"Pattern"],["openedBy",23,"(",54,"[",58,"{"],["closedBy",24,")",55,"]",59,"}"]],propSources:[L6],skippedNodes:[0,4],repeatNodeCount:34,tokenData:"!2|~R!`OX%TXY%oY[%T[]%o]p%Tpq%oqr'ars)Yst*xtu%Tuv,dvw-hwx.Uxy/tyz0[z{0r{|2S|}2p}!O3W!O!P4_!P!Q:Z!Q!R;k!R![>_![!]Do!]!^Es!^!_FZ!_!`Gk!`!aHX!a!b%T!b!cIf!c!dJU!d!eK^!e!hJU!h!i!#f!i!tJU!t!u!,|!u!wJU!w!x!.t!x!}JU!}#O!0S#O#P&o#P#Q!0j#Q#R!1Q#R#SJU#S#T%T#T#UJU#U#VK^#V#YJU#Y#Z!#f#Z#fJU#f#g!,|#g#iJU#i#j!.t#j#oJU#o#p!1n#p#q!1s#q#r!2a#r#s!2f#s$g%T$g;'SJU;'S;=`KW<%lOJU`%YT&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T`%lP;=`<%l%To%v]&n`%c_OX%TXY%oY[%T[]%o]p%Tpq%oq#O%T#O#P&o#P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To&tX&n`OY%TYZ%oZ]%T]^%o^#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc'f[&n`O!_%T!_!`([!`#T%T#T#U(r#U#f%T#f#g(r#g#h(r#h#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(cTmR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(yT!mR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk)aV&n`&[ZOr%Trs)vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk){V&n`Or%Trs*bs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk*iT&n`&^ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To+PZS_&n`OY*xYZ%TZ]*x]^%T^#o*x#o#p+r#p#q*x#q#r+r#r;'S*x;'S;=`,^<%lO*x_+wTS_OY+rZ]+r^;'S+r;'S;=`,W<%lO+r_,ZP;=`<%l+ro,aP;=`<%l*xj,kV%rQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-XT!xY&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-oV%lQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.]V&n`&ZZOw%Twx.rx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.wV&n`Ow%Twx/^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/eT&n`&]ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/{ThZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc0cTgR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk0yXVZ&n`Oz%Tz{1f{!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk1mVaR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk2ZV%oZ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc2wTzR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To3_W%pZ&n`O!_%T!_!`-Q!`!a3w!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Td4OT&{S&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk4fX!fQ&n`O!O%T!O!P5R!P!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5WV&n`O!O%T!O!P5m!P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5tT!rZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti6[a!hX&n`O!Q%T!Q![6T![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S6T#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti7fZ&n`O{%T{|8X|}%T}!O8X!O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8^V&n`O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8z]!hX&n`O!Q%T!Q![8s![!l%T!l!m9s!m#R%T#R#S8s#S#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti9zT!hX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk:bX%qR&n`O!P%T!P!Q:}!Q!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj;UV%sQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti;ro!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!d%T!d!e?q!e!g%T!g!h7a!h!l%T!l!m9s!m!q%T!q!rA]!r!z%T!z!{Bq!{#R%T#R#S>_#S#U%T#U#V?q#V#X%T#X#Y7a#Y#^%T#^#_9s#_#c%T#c#dA]#d#l%T#l#mBq#m#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti=xV&n`O!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti>fc!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S>_#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti?vY&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti@mY!hX&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiAbX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBUX!hX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBv]&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiCv]!hX&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToDvV{_&n`O!_%T!_!`E]!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TcEdT%{R&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkEzT#gZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkFbXmR&n`O!^%T!^!_F}!_!`([!`!a([!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjGUV%mQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkGrV%zZ&n`O!_%T!_!`([!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkH`WmR&n`O!_%T!_!`([!`!aHx!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjIPV%nQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkIoV_Q#}P&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToJ_]&n`&YS%uZO!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoKZP;=`<%lJUoKge&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!tJU!t!uLx!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#gLx#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoMRa&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUkN_V&n`&`ZOr%TrsNts#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkNyV&n`Or%Trs! `s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! gT&n`&bZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! }V&n`&_ZOw%Twx!!dx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!!iV&n`Ow%Twx!#Ox#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!#VT&n`&aZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!#oe&n`&YS%uZOr%Trs!%Qsw%Twx!&px!Q%T!Q![JU![!c%T!c!tJU!t!u!(`!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#g!(`#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!%XV&n`&dZOr%Trs!%ns#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!%sV&n`Or%Trs!&Ys#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&aT&n`&fZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&wV&n`&cZOw%Twx!'^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!'cV&n`Ow%Twx!'xx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!(PT&n`&eZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!(ia&n`&YS%uZOr%Trs!)nsw%Twx!+^x!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!)uV&n`&hZOr%Trs!*[s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*aV&n`Or%Trs!*vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*}T&n`&jZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!+eV&n`&gZOw%Twx!+zx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,PV&n`Ow%Twx!,fx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,mT&n`&iZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!-Vi&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!dJU!d!eLx!e!hJU!h!i!(`!i!}JU!}#R%T#R#SJU#S#T%T#T#UJU#U#VLx#V#YJU#Y#Z!(`#Z#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUo!.}a&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!0ZT!XZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc!0qT!WR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj!1XV%kQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!1sO!]~k!1zV%jR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!2fO![~i!2mT%tX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T",tokenizers:[N6,R6,P6,D6,0,1,2,3,4],topRules:{Script:[0,5]},specialized:[{term:221,get:e=>$6[e]||-1}],tokenPrec:7668}),gf=1,q6=2,X6=3,F6=4,z6=5,B6=36,Z6=37,j6=38,V6=11,W6=13;function G6(e){return e==45||e==46||e==58||e>=65&&e<=90||e==95||e>=97&&e<=122||e>=161}function Y6(e){return e==9||e==10||e==13||e==32}let h_=null,p_=null,f_=0;function vf(e,t){let n=e.pos+t;if(p_==e&&f_==n)return h_;for(;Y6(e.peek(t));)t++;let i="";for(;;){let r=e.peek(t);if(!G6(r))break;i+=String.fromCharCode(r),t++}return p_=e,f_=n,h_=i||null}function m_(e,t){this.name=e,this.parent=t}const H6=new Ro({start:null,shift(e,t,n,i){return t==gf?new m_(vf(i,1)||"",e):e},reduce(e,t){return t==V6&&e?e.parent:e},reuse(e,t,n,i){let r=t.type.id;return r==gf||r==W6?new m_(vf(i,1)||"",e):e},strict:!1}),K6=new It((e,t)=>{if(e.next==60){if(e.advance(),e.next==47){e.advance();let n=vf(e,0);if(!n)return e.acceptToken(z6);if(t.context&&n==t.context.name)return e.acceptToken(q6);for(let i=t.context;i;i=i.parent)if(i.name==n)return e.acceptToken(X6,-2);e.acceptToken(F6)}else if(e.next!=33&&e.next!=63)return e.acceptToken(gf)}},{contextual:!0});function bf(e,t){return new It(n=>{let i=0,r=t.charCodeAt(0);e:for(;!(n.next<0);n.advance(),i++)if(n.next==r){for(let s=1;s<t.length;s++)if(n.peek(s)!=t.charCodeAt(s))continue e;break}i&&n.acceptToken(e)})}const J6=bf(B6,"-->"),e9=bf(Z6,"?>"),t9=bf(j6,"]]>"),n9=yr({Text:Q.content,"StartTag StartCloseTag EndTag SelfCloseEndTag":Q.angleBracket,TagName:Q.tagName,"MismatchedCloseTag/TagName":[Q.tagName,Q.invalid],AttributeName:Q.attributeName,AttributeValue:Q.attributeValue,Is:Q.definitionOperator,"EntityReference CharacterReference":Q.character,Comment:Q.blockComment,ProcessingInst:Q.processingInstruction,DoctypeDecl:Q.documentMeta,Cdata:Q.special(Q.string)}),i9=Ui.deserialize({version:14,states:",lOQOaOOOrOxO'#CfOzOpO'#CiO!tOaO'#CgOOOP'#Cg'#CgO!{OrO'#CrO#TOtO'#CsO#]OpO'#CtOOOP'#DT'#DTOOOP'#Cv'#CvQQOaOOOOOW'#Cw'#CwO#eOxO,59QOOOP,59Q,59QOOOO'#Cx'#CxO#mOpO,59TO#uO!bO,59TOOOP'#C|'#C|O$TOaO,59RO$[OpO'#CoOOOP,59R,59ROOOQ'#C}'#C}O$dOrO,59^OOOP,59^,59^OOOS'#DO'#DOO$lOtO,59_OOOP,59_,59_O$tOpO,59`O$|OpO,59`OOOP-E6t-E6tOOOW-E6u-E6uOOOP1G.l1G.lOOOO-E6v-E6vO%UO!bO1G.oO%UO!bO1G.oO%dOpO'#CkO%lO!bO'#CyO%zO!bO1G.oOOOP1G.o1G.oOOOP1G.w1G.wOOOP-E6z-E6zOOOP1G.m1G.mO&VOpO,59ZO&_OpO,59ZOOOQ-E6{-E6{OOOP1G.x1G.xOOOS-E6|-E6|OOOP1G.y1G.yO&gOpO1G.zO&gOpO1G.zOOOP1G.z1G.zO&oO!bO7+$ZO&}O!bO7+$ZOOOP7+$Z7+$ZOOOP7+$c7+$cO'YOpO,59VO'bOpO,59VO'mO!bO,59eOOOO-E6w-E6wO'{OpO1G.uO'{OpO1G.uOOOP1G.u1G.uO(TOpO7+$fOOOP7+$f7+$fO(]O!bO<<GuOOOP<<Gu<<GuOOOP<<G}<<G}O'bOpO1G.qO'bOpO1G.qO(hO#tO'#CnO(vO&jO'#CnOOOO1G.q1G.qO)UOpO7+$aOOOP7+$a7+$aOOOP<<HQ<<HQOOOPAN=aAN=aOOOPAN=iAN=iO'bOpO7+$]OOOO7+$]7+$]OOOO'#Cz'#CzO)^O#tO,59YOOOO,59Y,59YOOOO'#C{'#C{O)lO&jO,59YOOOP<<G{<<G{OOOO<<Gw<<GwOOOO-E6x-E6xOOOO1G.t1G.tOOOO-E6y-E6y",stateData:")z~OPQOSVOTWOVWOWWOXWOiXOyPO!QTO!SUO~OvZOx]O~O^`Oz^O~OPQOQcOSVOTWOVWOWWOXWOyPO!QTO!SUO~ORdO~P!SOteO!PgO~OuhO!RjO~O^lOz^O~OvZOxoO~O^qOz^O~O[vO`sOdwOz^O~ORyO~P!SO^{Oz^O~OteO!P}O~OuhO!R!PO~O^!QOz^O~O[!SOz^O~O[!VO`sOd!WOz^O~Oa!YOz^O~Oz^O[mX`mXdmX~O[!VO`sOd!WO~O^!]Oz^O~O[!_Oz^O~O[!aOz^O~O[!cO`sOd!dOz^O~O[!cO`sOd!dO~Oa!eOz^O~Oz^O{!gO}!hO~Oz^O[ma`madma~O[!kOz^O~O[!lOz^O~O[!mO`sOd!nO~OW!qOX!qO{!sO|!qO~OW!tOX!tO}!sO!O!tO~O[!vOz^O~OW!qOX!qO{!yO|!qO~OW!tOX!tO}!yO!O!tO~O",goto:"%cxPPPPPPPPPPyyP!PP!VPP!`!jP!pyyyP!v!|#S$[$k$q$w$}%TPPPP%ZXWORYbXRORYb_t`qru!T!U!bQ!i!YS!p!e!fR!w!oQdRRybXSORYbQYORmYQ[PRn[Q_QQkVjp_krz!R!T!X!Z!^!`!f!j!oQr`QzcQ!RlQ!TqQ!XsQ!ZtQ!^{Q!`!QQ!f!YQ!j!]R!o!eQu`S!UqrU![u!U!bR!b!TQ!r!gR!x!rQ!u!hR!z!uQbRRxbQfTR|fQiUR!OiSXOYTaRb",nodeNames:" StartTag StartCloseTag MissingCloseTag StartCloseTag StartCloseTag Document Text EntityReference CharacterReference Cdata Element EndTag OpenTag TagName Attribute AttributeName Is AttributeValue CloseTag SelfCloseEndTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag DoctypeDecl",maxTerm:50,context:H6,nodeProps:[["closedBy",1,"SelfCloseEndTag EndTag",13,"CloseTag MissingCloseTag"],["openedBy",12,"StartTag StartCloseTag",19,"OpenTag",20,"StartTag"],["isolate",-6,13,18,19,21,22,24,""]],propSources:[n9],skippedNodes:[0],repeatNodeCount:9,tokenData:"!)v~R!YOX$qXY)iYZ)iZ]$q]^)i^p$qpq)iqr$qrs*vsv$qvw+fwx/ix}$q}!O0[!O!P$q!P!Q2z!Q![$q![!]4n!]!^$q!^!_8U!_!`!#t!`!a!$l!a!b!%d!b!c$q!c!}4n!}#P$q#P#Q!'W#Q#R$q#R#S4n#S#T$q#T#o4n#o%W$q%W%o4n%o%p$q%p&a4n&a&b$q&b1p4n1p4U$q4U4d4n4d4e$q4e$IS4n$IS$I`$q$I`$Ib4n$Ib$Kh$q$Kh%#t4n%#t&/x$q&/x&Et4n&Et&FV$q&FV;'S4n;'S;:j8O;:j;=`)c<%l?&r$q?&r?Ah4n?Ah?BY$q?BY?Mn4n?MnO$qi$zXVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qa%nVVP!O`Ov%gwx&Tx!^%g!^!_&o!_;'S%g;'S;=`'W<%lO%gP&YTVPOv&Tw!^&T!_;'S&T;'S;=`&i<%lO&TP&lP;=`<%l&T`&tS!O`Ov&ox;'S&o;'S;=`'Q<%lO&o`'TP;=`<%l&oa'ZP;=`<%l%gX'eWVP|WOr'^rs&Tsv'^w!^'^!^!_'}!_;'S'^;'S;=`(i<%lO'^W(ST|WOr'}sv'}w;'S'};'S;=`(c<%lO'}W(fP;=`<%l'}X(lP;=`<%l'^h(vV|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oh)`P;=`<%l(oi)fP;=`<%l$qo)t`VP|W!O`zUOX$qXY)iYZ)iZ]$q]^)i^p$qpq)iqr$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk+PV{YVP!O`Ov%gwx&Tx!^%g!^!_&o!_;'S%g;'S;=`'W<%lO%g~+iast,n![!]-r!c!}-r#R#S-r#T#o-r%W%o-r%p&a-r&b1p-r4U4d-r4e$IS-r$I`$Ib-r$Kh%#t-r&/x&Et-r&FV;'S-r;'S;:j/c?&r?Ah-r?BY?Mn-r~,qQ!Q![,w#l#m-V~,zQ!Q![,w!]!^-Q~-VOX~~-YR!Q![-c!c!i-c#T#Z-c~-fS!Q![-c!]!^-Q!c!i-c#T#Z-c~-ug}!O-r!O!P-r!Q![-r![!]-r!]!^/^!c!}-r#R#S-r#T#o-r$}%O-r%W%o-r%p&a-r&b1p-r1p4U-r4U4d-r4e$IS-r$I`$Ib-r$Je$Jg-r$Kh%#t-r&/x&Et-r&FV;'S-r;'S;:j/c?&r?Ah-r?BY?Mn-r~/cOW~~/fP;=`<%l-rk/rW}bVP|WOr'^rs&Tsv'^w!^'^!^!_'}!_;'S'^;'S;=`(i<%lO'^k0eZVP|W!O`Or$qrs%gsv$qwx'^x}$q}!O1W!O!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk1aZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a2S!a;'S$q;'S;=`)c<%lO$qk2_X!PQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qm3TZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a3v!a;'S$q;'S;=`)c<%lO$qm4RXdSVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qo4{!P`S^QVP|W!O`Or$qrs%gsv$qwx'^x}$q}!O4n!O!P4n!P!Q$q!Q![4n![!]4n!]!^$q!^!_(o!_!c$q!c!}4n!}#R$q#R#S4n#S#T$q#T#o4n#o$}$q$}%O4n%O%W$q%W%o4n%o%p$q%p&a4n&a&b$q&b1p4n1p4U4n4U4d4n4d4e$q4e$IS4n$IS$I`$q$I`$Ib4n$Ib$Je$q$Je$Jg4n$Jg$Kh$q$Kh%#t4n%#t&/x$q&/x&Et4n&Et&FV$q&FV;'S4n;'S;:j8O;:j;=`)c<%l?&r$q?&r?Ah4n?Ah?BY$q?BY?Mn4n?MnO$qo8RP;=`<%l4ni8]Y|W!O`Oq(oqr8{rs&osv(owx'}x!a(o!a!b!#U!b;'S(o;'S;=`)]<%lO(oi9S_|W!O`Or(ors&osv(owx'}x}(o}!O:R!O!f(o!f!g;e!g!}(o!}#ODh#O#W(o#W#XLp#X;'S(o;'S;=`)]<%lO(oi:YX|W!O`Or(ors&osv(owx'}x}(o}!O:u!O;'S(o;'S;=`)]<%lO(oi;OV!QP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oi;lX|W!O`Or(ors&osv(owx'}x!q(o!q!r<X!r;'S(o;'S;=`)]<%lO(oi<`X|W!O`Or(ors&osv(owx'}x!e(o!e!f<{!f;'S(o;'S;=`)]<%lO(oi=SX|W!O`Or(ors&osv(owx'}x!v(o!v!w=o!w;'S(o;'S;=`)]<%lO(oi=vX|W!O`Or(ors&osv(owx'}x!{(o!{!|>c!|;'S(o;'S;=`)]<%lO(oi>jX|W!O`Or(ors&osv(owx'}x!r(o!r!s?V!s;'S(o;'S;=`)]<%lO(oi?^X|W!O`Or(ors&osv(owx'}x!g(o!g!h?y!h;'S(o;'S;=`)]<%lO(oi@QY|W!O`Or?yrs@psv?yvwA[wxBdx!`?y!`!aCr!a;'S?y;'S;=`Db<%lO?ya@uV!O`Ov@pvxA[x!`@p!`!aAy!a;'S@p;'S;=`B^<%lO@pPA_TO!`A[!`!aAn!a;'SA[;'S;=`As<%lOA[PAsOiPPAvP;=`<%lA[aBQSiP!O`Ov&ox;'S&o;'S;=`'Q<%lO&oaBaP;=`<%l@pXBiX|WOrBdrsA[svBdvwA[w!`Bd!`!aCU!a;'SBd;'S;=`Cl<%lOBdXC]TiP|WOr'}sv'}w;'S'};'S;=`(c<%lO'}XCoP;=`<%lBdiC{ViP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oiDeP;=`<%l?yiDoZ|W!O`Or(ors&osv(owx'}x!e(o!e!fEb!f#V(o#V#WIr#W;'S(o;'S;=`)]<%lO(oiEiX|W!O`Or(ors&osv(owx'}x!f(o!f!gFU!g;'S(o;'S;=`)]<%lO(oiF]X|W!O`Or(ors&osv(owx'}x!c(o!c!dFx!d;'S(o;'S;=`)]<%lO(oiGPX|W!O`Or(ors&osv(owx'}x!v(o!v!wGl!w;'S(o;'S;=`)]<%lO(oiGsX|W!O`Or(ors&osv(owx'}x!c(o!c!dH`!d;'S(o;'S;=`)]<%lO(oiHgX|W!O`Or(ors&osv(owx'}x!}(o!}#OIS#O;'S(o;'S;=`)]<%lO(oiI]V|W!O`yPOr(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oiIyX|W!O`Or(ors&osv(owx'}x#W(o#W#XJf#X;'S(o;'S;=`)]<%lO(oiJmX|W!O`Or(ors&osv(owx'}x#T(o#T#UKY#U;'S(o;'S;=`)]<%lO(oiKaX|W!O`Or(ors&osv(owx'}x#h(o#h#iK|#i;'S(o;'S;=`)]<%lO(oiLTX|W!O`Or(ors&osv(owx'}x#T(o#T#UH`#U;'S(o;'S;=`)]<%lO(oiLwX|W!O`Or(ors&osv(owx'}x#c(o#c#dMd#d;'S(o;'S;=`)]<%lO(oiMkX|W!O`Or(ors&osv(owx'}x#V(o#V#WNW#W;'S(o;'S;=`)]<%lO(oiN_X|W!O`Or(ors&osv(owx'}x#h(o#h#iNz#i;'S(o;'S;=`)]<%lO(oi! RX|W!O`Or(ors&osv(owx'}x#m(o#m#n! n#n;'S(o;'S;=`)]<%lO(oi! uX|W!O`Or(ors&osv(owx'}x#d(o#d#e!!b#e;'S(o;'S;=`)]<%lO(oi!!iX|W!O`Or(ors&osv(owx'}x#X(o#X#Y?y#Y;'S(o;'S;=`)]<%lO(oi!#_V!SP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(ok!$PXaQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qo!$wX[UVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk!%mZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a!&`!a;'S$q;'S;=`)c<%lO$qk!&kX!RQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk!'aZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_#P$q#P#Q!(S#Q;'S$q;'S;=`)c<%lO$qk!(]ZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a!)O!a;'S$q;'S;=`)c<%lO$qk!)ZXxQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$q",tokenizers:[K6,J6,e9,t9,0,1,2,3,4],topRules:{Document:[0,6]},tokenPrec:0}),ra=63,O_=64,r9=1,s9=2,g_=3,a9=4,v_=5,o9=6,c9=7,b_=65,l9=66,u9=8,d9=9,h9=10,p9=11,f9=12,T_=13,m9=19,O9=20,g9=29,v9=33,b9=34,T9=47,k9=0,Tf=1,kf=2,Do=3,yf=4;class as{constructor(t,n,i){this.parent=t,this.depth=n,this.type=i,this.hash=(t?t.hash+t.hash<<8:0)+n+(n<<4)+i}}as.top=new as(null,-1,k9);function Mo(e,t){for(let n=0,i=t-e.pos-1;;i--,n++){let r=e.peek(i);if(Zi(r)||r==-1)return n}}function Sf(e){return e==32||e==9}function Zi(e){return e==10||e==13}function k_(e){return Sf(e)||Zi(e)}function os(e){return e<0||k_(e)}const y9=new Ro({start:as.top,reduce(e,t){return e.type==Do&&(t==O9||t==b9)?e.parent:e},shift(e,t,n,i){if(t==g_)return new as(e,Mo(i,i.pos),Tf);if(t==b_||t==v_)return new as(e,Mo(i,i.pos),kf);if(t==ra)return e.parent;if(t==m9||t==v9)return new as(e,0,Do);if(t==T_&&e.type==yf)return e.parent;if(t==T9){let r=/[1-9]/.exec(i.read(i.pos,n.pos));if(r)return new as(e,e.depth+ +r[0],yf)}return e},hash(e){return e.hash}});function sa(e,t,n=0){return e.peek(n)==t&&e.peek(n+1)==t&&e.peek(n+2)==t&&os(e.peek(n+3))}const S9=new It((e,t)=>{if(e.next==-1&&t.canShift(O_))return e.acceptToken(O_);let n=e.peek(-1);if((Zi(n)||n<0)&&t.context.type!=Do){if(sa(e,45))if(t.canShift(ra))e.acceptToken(ra);else return e.acceptToken(r9,3);if(sa(e,46))if(t.canShift(ra))e.acceptToken(ra);else return e.acceptToken(s9,3);let i=0;for(;e.next==32;)i++,e.advance();(i<t.context.depth||i==t.context.depth&&t.context.type==Tf&&(e.next!=45||!os(e.peek(1))))&&e.next!=-1&&!Zi(e.next)&&e.next!=35&&e.acceptToken(ra,-i)}},{contextual:!0}),_9=new It((e,t)=>{if(t.context.type==Do){e.next==63&&(e.advance(),os(e.next)&&e.acceptToken(c9));return}if(e.next==45)e.advance(),os(e.next)&&e.acceptToken(t.context.type==Tf&&t.context.depth==Mo(e,e.pos-1)?a9:g_);else if(e.next==63)e.advance(),os(e.next)&&e.acceptToken(t.context.type==kf&&t.context.depth==Mo(e,e.pos-1)?o9:v_);else{let n=e.pos;for(;;)if(Sf(e.next)){if(e.pos==n)return;e.advance()}else if(e.next==33)__(e);else if(e.next==38)_f(e);else if(e.next==42){_f(e);break}else if(e.next==39||e.next==34){if(Ef(e,!0))break;return}else if(e.next==91||e.next==123){if(!w9(e))return;break}else{E_(e,!0,!1,0);break}for(;Sf(e.next);)e.advance();if(e.next==58){if(e.pos==n&&t.canShift(g9))return;let i=e.peek(1);os(i)&&e.acceptTokenTo(t.context.type==kf&&t.context.depth==Mo(e,n)?l9:b_,n)}}},{contextual:!0});function E9(e){return e>32&&e<127&&e!=34&&e!=37&&e!=44&&e!=60&&e!=62&&e!=92&&e!=94&&e!=96&&e!=123&&e!=124&&e!=125}function y_(e){return e>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70}function S_(e,t){return e.next==37?(e.advance(),y_(e.next)&&e.advance(),y_(e.next)&&e.advance(),!0):E9(e.next)||t&&e.next==44?(e.advance(),!0):!1}function __(e){if(e.advance(),e.next==60){for(e.advance();;)if(!S_(e,!0)){e.next==62&&e.advance();break}}else for(;S_(e,!1););}function _f(e){for(e.advance();!os(e.next)&&Vl(e.tag)!="f";)e.advance()}function Ef(e,t){let n=e.next,i=!1,r=e.pos;for(e.advance();;){let s=e.next;if(s<0)break;if(e.advance(),s==n)if(s==39)if(e.next==39)e.advance();else break;else break;else if(s==92&&n==34)e.next>=0&&e.advance();else if(Zi(s)){if(t)return!1;i=!0}else if(t&&e.pos>=r+1024)return!1}return!i}function w9(e){for(let t=[],n=e.pos+1024;;)if(e.next==91||e.next==123)t.push(e.next),e.advance();else if(e.next==39||e.next==34){if(!Ef(e,!0))return!1}else if(e.next==93||e.next==125){if(t[t.length-1]!=e.next-2)return!1;if(t.pop(),e.advance(),!t.length)return!0}else{if(e.next<0||e.pos>n||Zi(e.next))return!1;e.advance()}}const C9="iiisiiissisfissssssssssssisssiiissssssssssssssssssssssssssfsfssissssssssssssssssssssssssssfif";function Vl(e){return e<33?"u":e>125?"s":C9[e-33]}function wf(e,t){let n=Vl(e);return n!="u"&&!(t&&n=="f")}function E_(e,t,n,i){if(Vl(e.next)=="s"||(e.next==63||e.next==58||e.next==45)&&wf(e.peek(1),n))e.advance();else return!1;let r=e.pos;for(;;){let s=e.next,a=0,o=i+1;for(;k_(s);){if(Zi(s)){if(t)return!1;o=0}else o++;s=e.peek(++a)}if(!(s>=0&&(s==58?wf(e.peek(a+1),n):s==35?e.peek(a-1)!=32:wf(s,n)))||!n&&o<=i||o==0&&!n&&(sa(e,45,a)||sa(e,46,a)))break;if(t&&Vl(s)=="f")return!1;for(let c=a;c>=0;c--)e.advance();if(t&&e.pos>r+1024)return!1}return!0}const x9=new It((e,t)=>{if(e.next==33)__(e),e.acceptToken(f9);else if(e.next==38||e.next==42){let n=e.next==38?h9:p9;_f(e),e.acceptToken(n)}else e.next==39||e.next==34?(Ef(e,!1),e.acceptToken(d9)):E_(e,!1,t.context.type==Do,t.context.depth)&&e.acceptToken(u9)}),P9=new It((e,t)=>{let n=t.context.type==yf?t.context.depth:-1,i=e.pos;e:for(;;){let r=0,s=e.next;for(;s==32;)s=e.peek(++r);if(!r&&(sa(e,45,r)||sa(e,46,r))||!Zi(s)&&(n<0&&(n=Math.max(t.context.depth+1,r)),r<n))break;for(;;){if(e.next<0)break e;let a=Zi(e.next);if(e.advance(),a)continue e;i=e.pos}}e.acceptTokenTo(T_,i)}),R9=yr({DirectiveName:Q.keyword,DirectiveContent:Q.attributeValue,"DirectiveEnd DocEnd":Q.meta,QuotedLiteral:Q.string,BlockLiteralHeader:Q.special(Q.string),BlockLiteralContent:Q.content,Literal:Q.content,"Key/Literal Key/QuotedLiteral":Q.definition(Q.propertyName),"Anchor Alias":Q.labelName,Tag:Q.typeName,Comment:Q.lineComment,": , -":Q.separator,"?":Q.punctuation,"[ ]":Q.squareBracket,"{ }":Q.brace}),A9=Ui.deserialize({version:14,states:"5lQ!ZQgOOO#PQfO'#CpO#uQfO'#DOOOQR'#Dv'#DvO$qQgO'#DRO%gQdO'#DUO%nQgO'#DUO&ROaO'#D[OOQR'#Du'#DuO&{QgO'#D^O'rQgO'#D`OOQR'#Dt'#DtO(iOqO'#DbOOQP'#Dj'#DjO(zQaO'#CmO)YQgO'#CmOOQP'#Cm'#CmQ)jQaOOQ)uQgOOQ]QgOOO*PQdO'#CrO*nQdO'#CtOOQO'#Dw'#DwO+]Q`O'#CxO+hQdO'#CwO+rQ`O'#CwOOQO'#Cv'#CvO+wQdO'#CvOOQO'#Cq'#CqO,UQ`O,59[O,^QfO,59[OOQR,59[,59[OOQO'#Cx'#CxO,eQ`O'#DPO,pQdO'#DPOOQO'#Dx'#DxO,zQdO'#DxO-XQ`O,59jO-aQfO,59jOOQR,59j,59jOOQR'#DS'#DSO-hQcO,59mO-sQgO'#DVO.TQ`O'#DVO.YQcO,59pOOQR'#DX'#DXO#|QfO'#DWO.hQcO'#DWOOQR,59v,59vO.yOWO,59vO/OOaO,59vO/WOaO,59vO/cQgO'#D_OOQR,59x,59xO0VQgO'#DaOOQR,59z,59zOOQP,59|,59|O0yOaO,59|O1ROaO,59|O1aOqO,59|OOQP-E7h-E7hO1oQgO,59XOOQP,59X,59XO2PQaO'#DeO2_QgO'#DeO2oQgO'#DkOOQP'#Dk'#DkQ)jQaOOO3PQdO'#CsOOQO,59^,59^O3kQdO'#CuOOQO,59`,59`OOQO,59c,59cO4VQdO,59cO4aQdO'#CzO4kQ`O'#CzOOQO,59b,59bOOQU,5:Q,5:QOOQR1G.v1G.vO4pQ`O1G.vOOQU-E7d-E7dO4xQdO,59kOOQO,59k,59kO5SQdO'#DQO5^Q`O'#DQOOQO,5:d,5:dOOQU,5:R,5:ROOQR1G/U1G/UO5cQ`O1G/UOOQU-E7e-E7eO5kQgO'#DhO5xQcO1G/XOOQR1G/X1G/XOOQR,59q,59qO6TQgO,59qO6eQdO'#DiO6lQgO'#DiO7PQcO1G/[OOQR1G/[1G/[OOQR,59r,59rO#|QfO,59rOOQR1G/b1G/bO7_OWO1G/bO7dOaO1G/bOOQR,59y,59yOOQR,59{,59{OOQP1G/h1G/hO7lOaO1G/hO7tOaO1G/hO8POaO1G/hOOQP1G.s1G.sO8_QgO,5:POOQP,5:P,5:POOQP,5:V,5:VOOQP-E7i-E7iOOQO,59_,59_OOQO,59a,59aOOQO1G.}1G.}OOQO,59f,59fO8oQdO,59fOOQR7+$b7+$bP,XQ`O'#DfOOQO1G/V1G/VOOQO,59l,59lO8yQdO,59lOOQR7+$p7+$pP9TQ`O'#DgOOQR'#DT'#DTOOQR,5:S,5:SOOQR-E7f-E7fOOQR7+$s7+$sOOQR1G/]1G/]O9YQgO'#DYO9jQ`O'#DYOOQR,5:T,5:TO#|QfO'#DZO9oQcO'#DZOOQR-E7g-E7gOOQR7+$v7+$vOOQR1G/^1G/^OOQR7+$|7+$|O:QOWO7+$|OOQP7+%S7+%SO:VOaO7+%SO:_OaO7+%SOOQP1G/k1G/kOOQO1G/Q1G/QOOQO1G/W1G/WOOQR,59t,59tO:jQgO,59tOOQR,59u,59uO#|QfO,59uOOQR<<Hh<<HhOOQP<<Hn<<HnO:zOaO<<HnOOQR1G/`1G/`OOQR1G/a1G/aOOQPAN>YAN>Y",stateData:";S~O!fOS!gOS^OS~OP_OQbORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!V[O!cTO~O`cO~P]OVkOWROXROYeOZfO[dOcPOmhOqQO~OboO~P!bOVtOWROXROYeOZfO[dOcPOmrOqQO~OpwO~P#WORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!cTO~OSvP!avP!bvP~P#|OWROXROYeOZfO[dOcPOqQO~OmzO~P%OOm!OOUzP!azP!bzP!dzP~P#|O^!SO!b!QO!f!TO!g!RO~ORSOTUOWROXROcPOqQO!PVO!cTO~OY!UOP!QXQ!QX!V!QX!`!QXS!QX!a!QX!b!QXU!QXm!QX!d!QX~P&aO[!WOP!SXQ!SX!V!SX!`!SXS!SX!a!SX!b!SXU!SXm!SX!d!SX~P&aO^!ZO!W![O!b!YO!f!]O!g!YO~OP!_O!V[OQaX!`aX~OPaXQaX!VaX!`aX~P#|OP!bOQ!cO!V[O~OP_O!V[O~P#|OWROXROY!fOcPOqQObfXmfXofXpfX~OWROXRO[!hOcPOqQObhXmhXohXphX~ObeXmlXoeX~ObkXokX~P%OOm!kO~Om!lObnPonP~P%OOb!pOo!oO~Ob!pO~P!bOm!sOosXpsX~OosXpsX~P%OOm!uOotPptP~P%OOo!xOp!yO~Op!yO~P#WOS!|O!a#OO!b#OO~OUyX!ayX!byX!dyX~P#|Om#QO~OU#SO!a#UO!b#UO!d#RO~Om#WOUzX!azX!bzX!dzX~O]#XO~O!b#XO!g#YO~O^#ZO!b#XO!g#YO~OP!RXQ!RX!V!RX!`!RXS!RX!a!RX!b!RXU!RXm!RX!d!RX~P&aOP!TXQ!TX!V!TX!`!TXS!TX!a!TX!b!TXU!TXm!TX!d!TX~P&aO!b#^O!g#^O~O^#_O!b#^O!f#`O!g#^O~O^#_O!W#aO!b#^O!g#^O~OPaaQaa!Vaa!`aa~P#|OP#cO!V[OQ!XX!`!XX~OP!XXQ!XX!V!XX!`!XX~P#|OP_O!V[OQ!_X!`!_X~P#|OWROXROcPOqQObgXmgXogXpgX~OWROXROcPOqQObiXmiXoiXpiX~Obkaoka~P%OObnXonX~P%OOm#kO~Ob#lOo!oO~Oosapsa~P%OOotXptX~P%OOm#pO~Oo!xOp#qO~OSwP!awP!bwP~P#|OS!|O!a#vO!b#vO~OUya!aya!bya!dya~P#|Om#xO~P%OOm#{OU}P!a}P!b}P!d}P~P#|OU#SO!a$OO!b$OO!d#RO~O]$QO~O!b$QO!g$RO~O!b$SO!g$SO~O^$TO!b$SO!g$SO~O^$TO!b$SO!f$UO!g$SO~OP!XaQ!Xa!V!Xa!`!Xa~P#|Obnaona~P%OOotapta~P%OOo!xO~OU|X!a|X!b|X!d|X~P#|Om$ZO~Om$]OU}X!a}X!b}X!d}X~O]$^O~O!b$_O!g$_O~O^$`O!b$_O!g$_O~OU|a!a|a!b|a!d|a~P#|O!b$cO!g$cO~O",goto:",]!mPPPPPPPPPPPPPPPPP!nPP!v#v#|$`#|$c$f$j$nP%VPPP!v%Y%^%a%{&O%a&R&U&X&_&b%aP&e&{&e'O'RPP']'a'g'm's'y(XPPPPPPPP(_)e*X+c,VUaObcR#e!c!{ROPQSTUXY_bcdehknrtvz!O!U!W!_!b!c!f!h!k!l!s!u!|#Q#R#S#W#c#k#p#x#{$Z$]QmPR!qnqfPQThknrtv!k!l!s!u#R#k#pR!gdR!ieTlPnTjPnSiPnSqQvQ{TQ!mkQ!trQ!vtR#y#RR!nkTsQvR!wt!RWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]RySR#t!|R|TR|UQ!PUR#|#SR#z#RR#z#SyZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]R!VXR!XYa]O^abc!a!c!eT!da!eQnPR!rnQvQR!{vQ!}yR#u!}Q#T|R#}#TW^Obc!cS!^^!aT!aa!eQ!eaR#f!eW`Obc!cQxSS}U#SQ!`_Q#PzQ#V!OQ#b!_Q#d!bQ#s!|Q#w#QQ$P#WQ$V#cQ$Y#xQ$[#{Q$a$ZR$b$]xZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]Q!VXQ!XYQ#[!UR#]!W!QWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]pfPQThknrtv!k!l!s!u#R#k#pQ!gdQ!ieQ#g!fR#h!hSgPn^pQTkrtv#RQ!jhQ#i!kQ#j!lQ#n!sQ#o!uQ$W#kR$X#pQuQR!zv",nodeNames:" DirectiveEnd DocEnd - - ? ? ? Literal QuotedLiteral Anchor Alias Tag BlockLiteralContent Comment Stream BOM Document ] [ FlowSequence Item Tagged Anchored Anchored Tagged FlowMapping Pair Key : Pair , } { FlowMapping Pair Pair BlockSequence Item Item BlockMapping Pair Pair Key Pair Pair BlockLiteral BlockLiteralHeader Tagged Anchored Anchored Tagged Directive DirectiveName DirectiveContent Document",maxTerm:74,context:y9,nodeProps:[["isolate",-3,8,9,14,""],["openedBy",18,"[",32,"{"],["closedBy",19,"]",33,"}"]],propSources:[R9],skippedNodes:[0],repeatNodeCount:6,tokenData:"-Y~RnOX#PXY$QYZ$]Z]#P]^$]^p#Ppq$Qqs#Pst$btu#Puv$yv|#P|}&e}![#P![!]'O!]!`#P!`!a'i!a!}#P!}#O*g#O#P#P#P#Q+Q#Q#o#P#o#p+k#p#q'i#q#r,U#r;'S#P;'S;=`#z<%l?HT#P?HT?HU,o?HUO#PQ#UU!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PQ#kTOY#PZs#Pt;'S#P;'S;=`#z<%lO#PQ#}P;=`<%l#P~$VQ!f~XY$Qpq$Q~$bO!g~~$gS^~OY$bZ;'S$b;'S;=`$s<%lO$b~$vP;=`<%l$bR%OX!WQOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR%rX!WQ!VPOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR&bP;=`<%l%kR&lUoP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'VUmP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'p[!PP!WQOY#PZp#Ppq#hq{#P{|(f|}#P}!O(f!O!R#P!R![)p![;'S#P;'S;=`#z<%lO#PR(mW!PP!WQOY#PZp#Ppq#hq!R#P!R![)V![;'S#P;'S;=`#z<%lO#PR)^U!PP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR)wY!PP!WQOY#PZp#Ppq#hq{#P{|)V|}#P}!O)V!O;'S#P;'S;=`#z<%lO#PR*nUcP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+XUbP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+rUqP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,]UpP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,vU`P!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#P",tokenizers:[S9,_9,x9,P9,0,1],topRules:{Stream:[0,15]},tokenPrec:0}),w_=ot({}),I9={html:U4,js:Ul.configure({dialect:"js"}),jsx:Ul.configure({dialect:"jsx"}),ts:Ul.configure({dialect:"ts"}),tsx:Ul.configure({dialect:"tsx"}),json:gq,md:Pq,py:U6,xml:i9,yaml:A9},Q9={html:"html",htm:"html",javascript:"js",js:"js",jsx:"jsx",typescript:"ts",ts:"ts",tsx:"tsx",json:"json",markdown:"md",md:"md",python:"py",py:"py",xml:"xml",yaml:"yaml",yml:"yaml"},N9=ze(e=>{const t=fn(w_);if(e.language===void 0||t[e.language]===void 0)return g(Fe,{children:e.code});const n=t[e.language].parse(e.code),i=yU(e.code,n),r=sS(i,{Fragment:Fe,jsx:g,jsxs:g});return g(Fe,{children:r})});function D9({children:e,className:t,...n}){return g("div",{className:_e("group relative my-4 self-stretch rounded-bubble bg-base-active shadow-header overflow-hidden",t),...n,children:e})}function M9({children:e,className:t,...n}){return g("div",{className:_e("absolute top-1 right-1 z-10 flex items-center gap-1 transition-opacity duration-200 ease-out opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto group-focus-within:opacity-100 group-focus-within:pointer-events-auto",t),...n,children:e})}function L9({children:e,className:t,...n}){return g("div",{className:t,...n,children:e})}const ji=Object.assign(D9,{Actions:M9,Content:L9}),C_=ot(""),$9=({code:e,language:t,className:n,...i})=>{const r=Q9[t],{isCopied:s,copyToClipboard:a,disabled:o}=U9({code:e}),c=st(),l=He(!1),u=kI();return g(C_.Provider,{value:e,children:g(ji,{"data-code-block-container":!0,"data-language":t,children:[g(ji.Actions,{children:[g(Dt,{"aria-label":c.wrap.value,disabled:o,icon:"wrap",onClick:()=>l.value=!l.value,variant:"md-button",children:c.wrap.value}),g(Dt,{"aria-label":s.value?c.copied.value:c.copy.value,disabled:o,icon:s.value?"check":"copy",onClick:a,variant:"md-button",children:s.value?c.copied.value:c.copy.value})]}),g(ji.Content,{className:_e(l.value?"overflow-x-hidden":"overflow-x-auto"),children:g("div",{className:_e("pt-1.5 pb-2",n),"data-code-block":!0,"data-language":t,"data-syntax-theme":u.value,...i,children:g("pre",{className:_e("m-0 font-mono text-[13px] px-4 py-1.5",l.value?"whitespace-pre-wrap overflow-x-hidden":"whitespace-pre overflow-x-auto"),children:g("code",{className:_e("block",l.value?"whitespace-pre-wrap break-all":"whitespace-pre"),children:g(N9,{code:e,language:r})})})})})]})})};function U9({code:e,onCopy:t,onError:n,timeout:i=2e3}={}){const r=He(!1),s=ue(0),a=fn(C_),{isAnimating:o}=fn(su),c=e??a,l=oe(async()=>{var u;if(typeof window>"u"||!((u=navigator==null?void 0:navigator.clipboard)!=null&&u.writeText)){n==null||n(new Error("Clipboard API not available"));return}try{r.value||(await navigator.clipboard.writeText(c),r.value=!0,t==null||t(),s.current=window.setTimeout(()=>{r.value=!1},i))}catch(d){n==null||n(d)}},[c,r,t,n,i]);return ke(()=>()=>{window.clearTimeout(s.current)},[]),{isCopied:r,copyToClipboard:l,disabled:o}}const q9=(e,t,n)=>{const i=typeof t=="string"?new Blob([t],{type:n}):t,r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)};function X9({src:e,alt:t,onError:n}){const{isAnimating:i}=fn(su);return{downloadImage:oe(async()=>{var r;if(e)try{const s=await(await fetch(e.toString())).blob(),a=new URL(e.toString(),window.location.origin).pathname.split("/").pop()||"",o=a.includes(".")&&((r=a.split(".").pop())==null?void 0:r.length)<=4;let c="";if(o)c=a;else{const l=s.type;let u="png";l.includes("jpeg")||l.includes("jpg")?u="jpg":l.includes("png")?u="png":l.includes("svg")?u="svg":l.includes("gif")?u="gif":l.includes("webp")&&(u="webp"),c=`${(t||a||"image").toString().replace(/\.[^/.]+$/,"")}.${u}`}q9(c,s,s.type)}catch(s){console.error("Failed to download image:",s),n==null||n(s)}},[e,t,n]),disabled:i}}const F9=({node:e,className:t,src:n,alt:i,...r})=>{const{downloadImage:s,disabled:a}=X9({src:(n==null?void 0:n.toString())||"",alt:i==null?void 0:i.toString()}),o=st();return n?g(ji,{className:"inline-block self-auto","data-streamdown":"image-wrapper",children:[g(ji.Actions,{children:g(Dt,{"aria-label":o.download.value,disabled:a,icon:"download",onClick:s,variant:"md-button",children:o.download.value})}),g(ji.Content,{children:g("img",{alt:i,className:_e("max-w-full",t),"data-streamdown":"image",src:n,...r})})]}):null};function z9(e){var t,n;const i=[],r=[],s=e.querySelectorAll("thead th");for(const o of Array.from(s))i.push(((t=o.textContent)==null?void 0:t.trim())||"");const a=e.querySelectorAll("tbody tr");for(const o of Array.from(a)){const c=[],l=o.querySelectorAll("td");for(const u of Array.from(l))c.push(((n=u.textContent)==null?void 0:n.trim())||"");r.push(c)}return{headers:i,rows:r}}function B9(e){const{headers:t,rows:n}=e;if(t.length===0)return"";const i=[],r=t.map(s=>s.replace(/\|/g,"\\|"));i.push(`| ${r.join(" | ")} |`),i.push(`| ${t.map(()=>"---").join(" | ")} |`);for(const s of n){const a=[...s];for(;a.length<t.length;)a.push("");const o=a.map(c=>c.replace(/\|/g,"\\|"));i.push(`| ${o.join(" | ")} |`)}return i.join(`
`)}function Z9({onCopy:e,onError:t,timeout:n=2e3}={}){const i=He(!1),r=ue(0),{isAnimating:s}=fn(su),a=async o=>{var c;if(typeof window>"u"||!((c=navigator==null?void 0:navigator.clipboard)!=null&&c.write)){t==null||t(new Error("Clipboard API not available"));return}try{if(!i.value){const l=o.currentTarget.closest('[data-streamdown="table-wrapper"]'),u=l==null?void 0:l.querySelector("table");if(!u){t==null||t(new Error("Table not found"));return}const d=z9(u),h=new ClipboardItem({"text/plain":B9(d),"text/html":new Blob([u.outerHTML],{type:"text/html"})});await navigator.clipboard.write([h]),i.value=!0,e==null||e(),r.current=window.setTimeout(()=>i.value=!1,n)}}catch(l){t==null||t(l)}};return ke(()=>()=>{window.clearTimeout(r.current)},[]),{isCopied:i,copyTableData:a,disabled:s}}const j9=({children:e,className:t,...n})=>{const{isCopied:i,copyTableData:r,disabled:s}=Z9(),a=st();return g(ji,{"data-streamdown":"table-wrapper",children:[g(ji.Actions,{children:g(Dt,{"aria-label":i.value?a.copied.value:a.copy.value,disabled:s,icon:i.value?"check":"copy",onClick:r,variant:"md-button",children:i.value?a.copied.value:a.copy.value})}),g(ji.Content,{className:"overflow-x-auto",children:g("table",{className:_e("w-full border-collapse border border-base-border",t),"data-streamdown":"table",...n,children:e})})]})},V9=/language-([^\s]+)/;function W9(e,t){if(!(e!=null&&e.position||t!=null&&t.position))return!0;if(!(e!=null&&e.position&&t!=null&&t.position))return!1;const n=e.position.start,i=t.position.start,r=e.position.end,s=t.position.end;return(n==null?void 0:n.line)===(i==null?void 0:i.line)&&(n==null?void 0:n.column)===(i==null?void 0:i.column)&&(r==null?void 0:r.line)===(s==null?void 0:s.line)&&(r==null?void 0:r.column)===(s==null?void 0:s.column)}function ct(e,t){return e.className===t.className&&W9(e.node,t.node)}const Cf=ze(({children:e,className:t,node:n,...i})=>g("ol",{className:_e("ml-4 mb-2 list-outside list-decimal whitespace-normal text-sm",t),"data-streamdown":"ordered-list",...i,children:e}),(e,t)=>ct(e,t));Cf.displayName="MarkdownOl";const x_=ze(({children:e,className:t,node:n,...i})=>g("li",{className:_e("py-1",t),"data-streamdown":"list-item",...i,children:e}),(e,t)=>ct(e,t));x_.displayName="MarkdownLi";const P_=ze(({children:e,className:t,node:n,...i})=>g("ul",{className:_e("ml-4 list-outside list-disc whitespace-normal text-sm",t),"data-streamdown":"unordered-list",...i,children:e}),(e,t)=>ct(e,t));P_.displayName="MarkdownUl";const R_=ze(({className:e,node:t,...n})=>g("hr",{className:_e("my-6 border-base-border",e),"data-streamdown":"horizontal-rule",...n}),(e,t)=>ct(e,t));R_.displayName="MarkdownHr";const A_=ze(({children:e,className:t,node:n,...i})=>g("span",{className:_e("font-medium",t),"data-streamdown":"strong",...i,children:e}),(e,t)=>ct(e,t));A_.displayName="MarkdownStrong";const I_=ze(({children:e,className:t,href:n,node:i,...r})=>{const s=n==="streamdown:incomplete-link";return g("a",{className:_e("wrap-anywhere font-medium underline",t),"data-incomplete":s,"data-streamdown":"link",href:n,rel:"noreferrer",target:"_blank",...r,children:e})},(e,t)=>ct(e,t)&&e.href===t.href);I_.displayName="MarkdownA";const Q_=ze(({children:e,className:t,node:n,...i})=>g("h1",{className:_e("mt-6 mb-2 text-base-primary font-semibold text-xl",t),"data-streamdown":"heading-1",...i,children:e}),(e,t)=>ct(e,t));Q_.displayName="MarkdownH1";const N_=ze(({children:e,className:t,node:n,...i})=>g("h2",{className:_e("mt-3 mb-2 text-base-primary font-semibold text-lg",t),"data-streamdown":"heading-2",...i,children:e}),(e,t)=>ct(e,t));N_.displayName="MarkdownH2";const D_=ze(({children:e,className:t,node:n,...i})=>g("h3",{className:_e("mt-3 mb-1 text-base-primary font-semibold text-md",t),"data-streamdown":"heading-3",...i,children:e}),(e,t)=>ct(e,t));D_.displayName="MarkdownH3";const M_=ze(({children:e,className:t,node:n,...i})=>g("h4",{className:_e("mt-3 mb-1 text-base-primary font-semibold text-sm",t),"data-streamdown":"heading-4",...i,children:e}),(e,t)=>ct(e,t));M_.displayName="MarkdownH4";const L_=ze(({children:e,className:t,node:n,...i})=>g("h5",{className:_e("mt-3 mb-0.5 text-base-primary font-semibold text-sm",t),"data-streamdown":"heading-5",...i,children:e}),(e,t)=>ct(e,t));L_.displayName="MarkdownH5";const $_=ze(({children:e,className:t,node:n,...i})=>g("h6",{className:_e("mt-3 text-base-primary font-semibold text-sm",t),"data-streamdown":"heading-6",...i,children:e}),(e,t)=>ct(e,t));$_.displayName="MarkdownH6";const G9=({node:e,...t})=>g(j9,{...t}),U_=ze(G9,(e,t)=>ct(e,t));U_.displayName="MarkdownTable";const q_=ze(({children:e,className:t,node:n,...i})=>g("thead",{className:_e("bg-base-active/80",t),"data-streamdown":"table-header",...i,children:e}),(e,t)=>ct(e,t));q_.displayName="MarkdownThead";const X_=ze(({children:e,className:t,node:n,...i})=>g("tbody",{className:_e("divide-y divide-base-border bg-base-active/40",t),"data-streamdown":"table-body",...i,children:e}),(e,t)=>ct(e,t));X_.displayName="MarkdownTbody";const F_=ze(({children:e,className:t,node:n,...i})=>g("tr",{className:_e("border-base-border border-b",t),"data-streamdown":"table-row",...i,children:e}),(e,t)=>ct(e,t));F_.displayName="MarkdownTr";const z_=ze(({children:e,className:t,node:n,...i})=>g("th",{className:_e("whitespace-nowrap px-4 py-2 text-left font-medium text-sm",t),"data-streamdown":"table-header-cell",...i,children:e}),(e,t)=>ct(e,t));z_.displayName="MarkdownTh";const B_=ze(({children:e,className:t,node:n,...i})=>g("td",{className:_e("px-4 py-2 text-sm",t),"data-streamdown":"table-cell",...i,children:e}),(e,t)=>ct(e,t));B_.displayName="MarkdownTd";const Z_=ze(({children:e,className:t,node:n,...i})=>g("blockquote",{className:_e("my-4 border-base-subtle/30 border-l-4 pl-4 text-base-subtle italic",t),"data-streamdown":"blockquote",...i,children:e}),(e,t)=>ct(e,t));Z_.displayName="MarkdownBlockquote";const j_=ze(({children:e,className:t,node:n,...i})=>g("sup",{className:_e("text-sm",t),"data-streamdown":"superscript",...i,children:e}),(e,t)=>ct(e,t));j_.displayName="MarkdownSup";const V_=ze(({children:e,className:t,node:n,...i})=>g("sub",{className:_e("text-sm",t),"data-streamdown":"subscript",...i,children:e}),(e,t)=>ct(e,t));V_.displayName="MarkdownSub";const W_=ze(({children:e,className:t,node:n,...i})=>{if("data-footnotes"in i){const r=a=>{var o,c;if(!xt(a))return!1;const l=a,u=Array.isArray(l.props.children)?l.props.children:[l.props.children];let d=!1,h=!1;for(const p of u)if(p){if(typeof p=="string")p.trim()!==""&&(d=!0);else if(xt(p))if(((o=p.props)==null?void 0:o["data-footnote-backref"])!==void 0)h=!0;else{const O=Array.isArray(p.props.children)?p.props.children:[p.props.children];for(const m of O){if(typeof m=="string"&&m.trim()!==""){d=!0;break}if(xt(m)&&((c=m.props)==null?void 0:c["data-footnote-backref"])===void 0){d=!0;break}}}}return h&&!d},s=Array.isArray(e)?e.map(a=>{if(!xt(a))return a;if(a.type===Cf){const o=(Array.isArray(a.props.children)?a.props.children:[a.props.children]).filter(c=>!r(c));return o.length===0?null:{...a,props:{...a.props,children:o}}}return a}):e;return(Array.isArray(s)?s.some(a=>a!==null):s!==null)?g("section",{className:t,...i,children:s}):null}return g("section",{className:t,...i,children:e})},(e,t)=>ct(e,t));W_.displayName="MarkdownSection";const Y9=({node:e,className:t,children:n,...i})=>{var r,s;if(((r=e==null?void 0:e.position)==null?void 0:r.start.line)===((s=e==null?void 0:e.position)==null?void 0:s.end.line))return g("code",{className:_e("rounded bg-base-active px-1.5 py-0.5 font-mono text-sm",t),"data-streamdown":"inline-code",...i,children:n});const a=typeof t=="string"?t.match(V9):null,o=(a==null?void 0:a.at(1))??"";let c="";if(xt(n)){const l=n;l.props&&typeof l.props=="object"&&"children"in l.props&&typeof l.props.children=="string"&&(c=l.props.children)}else typeof n=="string"&&(c=n);return g($9,{code:c,"data-language":o,"data-streamdown":"code-block",language:o})},G_=ze(Y9,(e,t)=>ct(e,t));G_.displayName="MarkdownCode";const Y_=ze(F9,(e,t)=>ct(e,t));Y_.displayName="MarkdownImg";const H_=ze(({children:e,className:t,node:n,...i})=>{const r=(Array.isArray(e)?e:[e]).filter(s=>s!=null&&s!=="");return r.some(s=>{var a,o;return xt(s)&&((o=(a=s==null?void 0:s.props)==null?void 0:a.node)==null?void 0:o.tagName)==="img"})?r.length===1?g(Fe,{children:e}):g("div",{className:_e("text-sm",t),...i,children:e}):g("p",{className:_e("text-sm",t),...i,children:e})},(e,t)=>ct(e,t));H_.displayName="MarkdownParagraph";const H9={ol:Cf,li:x_,ul:P_,hr:R_,strong:A_,a:I_,h1:Q_,h2:N_,h3:D_,h4:M_,h5:L_,h6:$_,table:U_,thead:q_,tbody:X_,tr:F_,th:z_,td:B_,blockquote:Z_,code:G_,img:Y_,pre:Fe,sup:j_,sub:V_,p:H_,section:W_},K9={tokenize:J9};function J9(e){const t=e.attempt(this.parser.constructs.contentInitial,i,r);let n;return t;function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Ue(e,t,"linePrefix")}function r(o){return e.enter("paragraph"),s(o)}function s(o){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,a(o)}function a(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return he(o)?(e.consume(o),e.exit("chunkText"),s):(e.consume(o),a)}}const e7={tokenize:t7},K_={tokenize:n7};function t7(e){const t=this,n=[];let i=0,r,s,a;return o;function o(y){if(i<n.length){const T=n[i];return t.containerState=T[1],e.attempt(T[0].continuation,c,l)(y)}return l(y)}function c(y){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&k();const T=t.events.length;let S=T,_;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){_=t.events[S][1].end;break}v(i);let x=T;for(;x<t.events.length;)t.events[x][1].end={..._},x++;return zt(t.events,S+1,0,t.events.slice(T)),t.events.length=x,l(y)}return o(y)}function l(y){if(i===n.length){if(!r)return h(y);if(r.currentConstruct&&r.currentConstruct.concrete)return O(y);t.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(K_,u,d)(y)}function u(y){return r&&k(),v(i),h(y)}function d(y){return t.parser.lazy[t.now().line]=i!==n.length,a=t.now().offset,O(y)}function h(y){return t.containerState={},e.attempt(K_,p,O)(y)}function p(y){return i++,n.push([t.currentConstruct,t.containerState]),h(y)}function O(y){if(y===null){r&&k(),v(0),e.consume(y);return}return r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),m(y)}function m(y){if(y===null){b(e.exit("chunkFlow"),!0),v(0),e.consume(y);return}return he(y)?(e.consume(y),b(e.exit("chunkFlow")),i=0,t.interrupt=void 0,o):(e.consume(y),m)}function b(y,T){const S=t.sliceStream(y);if(T&&S.push(null),y.previous=s,s&&(s.next=y),s=y,r.defineSkip(y.start),r.write(S),t.parser.lazy[y.start.line]){let _=r.events.length;for(;_--;)if(r.events[_][1].start.offset<a&&(!r.events[_][1].end||r.events[_][1].end.offset>a))return;const x=t.events.length;let N=x,L,w;for(;N--;)if(t.events[N][0]==="exit"&&t.events[N][1].type==="chunkFlow"){if(L){w=t.events[N][1].end;break}L=!0}for(v(i),_=x;_<t.events.length;)t.events[_][1].end={...w},_++;zt(t.events,N+1,0,t.events.slice(x)),t.events.length=_}}function v(y){let T=n.length;for(;T-- >y;){const S=n[T];t.containerState=S[1],S[0].exit.call(t,e)}n.length=y}function k(){r.write([null]),s=void 0,r=void 0,t.containerState._closeFlow=void 0}}function n7(e,t,n){return Ue(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const i7={tokenize:r7};function r7(e){const t=this,n=e.attempt(vo,i,e.attempt(this.parser.constructs.flowInitial,r,Ue(e,e.attempt(this.parser.constructs.flow,r,e.attempt(F5,r)),"linePrefix")));return n;function i(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function r(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const s7={resolveAll:e1()},a7=J_("string"),o7=J_("text");function J_(e){return{resolveAll:e1(e==="text"?c7:void 0),tokenize:t};function t(n){const i=this,r=this.parser.constructs[e],s=n.attempt(r,a,o);return a;function a(u){return l(u)?s(u):o(u)}function o(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),c}function c(u){return l(u)?(n.exit("data"),s(u)):(n.consume(u),c)}function l(u){if(u===null)return!0;const d=r[u];let h=-1;if(d)for(;++h<d.length;){const p=d[h];if(!p.previous||p.previous.call(i,i.previous))return!0}return!1}}}function e1(e){return t;function t(n,i){let r=-1,s;for(;++r<=n.length;)s===void 0?n[r]&&n[r][1].type==="data"&&(s=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==s+2&&(n[s][1].end=n[r-1][1].end,n.splice(s+2,r-s-2),r=s+2),s=void 0);return e?e(n,i):n}}function c7(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const i=e[n-1][1],r=t.sliceStream(i);let s=r.length,a=-1,o=0,c;for(;s--;){const l=r[s];if(typeof l=="string"){for(a=l.length;l.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(l===-2)c=!0,o++;else if(l!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(o=0),o){const l={type:n===e.length||c||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:i.start._bufferIndex+a,_index:i.start._index+s,line:i.end.line,column:i.end.column-o,offset:i.end.offset-o},end:{...i.end}};i.end={...l.start},i.start.offset===i.end.offset?Object.assign(i,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}const l7={42:hn,43:hn,45:hn,48:hn,49:hn,50:hn,51:hn,52:hn,53:hn,54:hn,55:hn,56:hn,57:hn,62:wy},u7={91:V5},d7={[-2]:wp,[-1]:wp,32:wp},h7={35:J5,42:wl,45:[My,wl],60:i3,61:My,95:wl,96:Ry,126:Ry},p7={38:xy,92:Cy},f7={[-5]:xp,[-4]:xp,[-3]:xp,33:k3,38:xy,42:Ep,60:[S5,u3],91:S3,92:[H5,Cy],93:Cp,95:Ep,96:M5},m7={null:[Ep,s7]},O7={null:[42,95]},g7={null:[]},v7=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:O7,contentInitial:u7,disable:g7,document:l7,flow:h7,flowInitial:d7,insideSpan:m7,string:p7,text:f7},Symbol.toStringTag,{value:"Module"}));function b7(e,t,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},s=[];let a=[],o=[];const c={attempt:x(S),check:x(_),consume:k,enter:y,exit:T,interrupt:x(_,{interrupt:!0})},l={code:null,containerState:{},defineSkip:m,events:[],now:O,parser:e,previous:null,sliceSerialize:h,sliceStream:p,write:d};let u=t.tokenize.call(l,c);return t.resolveAll&&s.push(t),l;function d(D){return a=Bt(a,D),b(),a[a.length-1]!==null?[]:(N(t,0),l.events=Hs(s,l.events,l),l.events)}function h(D,M){return k7(p(D),M)}function p(D){return T7(a,D)}function O(){const{_bufferIndex:D,_index:M,line:B,column:F,offset:q}=i;return{_bufferIndex:D,_index:M,line:B,column:F,offset:q}}function m(D){r[D.line]=D.column,w()}function b(){let D;for(;i._index<a.length;){const M=a[i._index];if(typeof M=="string")for(D=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===D&&i._bufferIndex<M.length;)v(M.charCodeAt(i._bufferIndex));else v(M)}}function v(D){u=u(D)}function k(D){he(D)?(i.line++,i.column=1,i.offset+=D===-3?2:1,w()):D!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===a[i._index].length&&(i._bufferIndex=-1,i._index++)),l.previous=D}function y(D,M){const B=M||{};return B.type=D,B.start=O(),l.events.push(["enter",B,l]),o.push(B),B}function T(D){const M=o.pop();return M.end=O(),l.events.push(["exit",M,l]),M}function S(D,M){N(D,M.from)}function _(D,M){M.restore()}function x(D,M){return B;function B(F,q,H){let se,Z,de,I;return Array.isArray(F)?Me(F):"tokenize"in F?Me([F]):De(F);function De(Qe){return ae;function ae(Le){const Xe=Le!==null&&Qe[Le],Te=Le!==null&&Qe.null,je=[...Array.isArray(Xe)?Xe:Xe?[Xe]:[],...Array.isArray(Te)?Te:Te?[Te]:[]];return Me(je)(Le)}}function Me(Qe){return se=Qe,Z=0,Qe.length===0?H:R(Qe[Z])}function R(Qe){return ae;function ae(Le){return I=L(),de=Qe,Qe.partial||(l.currentConstruct=Qe),Qe.name&&l.parser.constructs.disable.null.includes(Qe.name)?Ye():Qe.tokenize.call(M?Object.assign(Object.create(l),M):l,c,fe,Ye)(Le)}}function fe(Qe){return D(de,I),q}function Ye(Qe){return I.restore(),++Z<se.length?R(se[Z]):H}}}function N(D,M){D.resolveAll&&!s.includes(D)&&s.push(D),D.resolve&&zt(l.events,M,l.events.length-M,D.resolve(l.events.slice(M),l)),D.resolveTo&&(l.events=D.resolveTo(l.events,l))}function L(){const D=O(),M=l.previous,B=l.currentConstruct,F=l.events.length,q=Array.from(o);return{from:F,restore:H};function H(){i=D,l.previous=M,l.currentConstruct=B,l.events.length=F,o=q,w()}}function w(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function T7(e,t){const n=t.start._index,i=t.start._bufferIndex,r=t.end._index,s=t.end._bufferIndex;let a;if(n===r)a=[e[n].slice(i,s)];else{if(a=e.slice(n,r),i>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(i):a.shift()}s>0&&a.push(e[r].slice(0,s))}return a}function k7(e,t){let n=-1;const i=[];let r;for(;++n<e.length;){const s=e[n];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&r)continue;a=" ";break}default:a=String.fromCharCode(s)}r=s===-2,i.push(a)}return i.join("")}function y7(e){const t={constructs:Oy([v7,...(e||{}).extensions||[]]),content:n(K9),defined:[],document:n(e7),flow:n(i7),lazy:{},string:n(a7),text:n(o7)};return t;function n(i){return r;function r(s){return b7(t,i,s)}}}function S7(e){for(;!Ay(e););return e}const t1=/[\0\t\n\r]/g;function _7(){let e=1,t="",n=!0,i;return r;function r(s,a,o){const c=[];let l,u,d,h,p;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(t1.lastIndex=d,l=t1.exec(s),h=l&&l.index!==void 0?l.index:s.length,p=s.charCodeAt(h),!l){t=s.slice(d);break}if(p===10&&d===h&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),d<h&&(c.push(s.slice(d,h)),e+=h-d),p){case 0:{c.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,c.push(-2);e++<u;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:i=!0,e=1}d=h+1}return o&&(i&&c.push(-5),t&&c.push(t),c.push(null)),c}}const n1={}.hasOwnProperty;function E7(e,t,n){return typeof t!="string"&&(n=t,t=void 0),w7(n)(S7(y7(n).document().write(_7()(e,t,!0))))}function w7(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Os),autolinkProtocol:L,autolinkEmail:L,atxHeading:s(Ir),blockQuote:s(Te),characterEscape:L,characterReference:L,codeFenced:s(je),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(je,a),codeText:s(it,a),codeTextData:L,data:L,codeFlowValue:L,definition:s(an),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(ms),hardBreakEscape:s(Qr),hardBreakTrailing:s(Qr),htmlFlow:s(Pu,a),htmlFlowData:L,htmlText:s(Pu,a),htmlTextData:L,image:s(Nm),label:a,link:s(Os),listItem:s(vj),listItemValue:h,listOrdered:s(Aw,d),listUnordered:s(Aw),paragraph:s(bj),reference:R,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(Ir),strong:s(Tj),thematicBreak:s(yj)},exit:{atxHeading:c(),atxHeadingSequence:S,autolink:c(),autolinkEmail:Xe,autolinkProtocol:Le,blockQuote:c(),characterEscapeValue:w,characterReferenceMarkerHexadecimal:Ye,characterReferenceMarkerNumeric:Ye,characterReferenceValue:Qe,characterReference:ae,codeFenced:c(b),codeFencedFence:m,codeFencedFenceInfo:p,codeFencedFenceMeta:O,codeFlowValue:w,codeIndented:c(v),codeText:c(q),codeTextData:w,data:w,definition:c(),definitionDestinationString:T,definitionLabelString:k,definitionTitleString:y,emphasis:c(),hardBreakEscape:c(M),hardBreakTrailing:c(M),htmlFlow:c(B),htmlFlowData:w,htmlText:c(F),htmlTextData:w,image:c(se),label:de,labelText:Z,lineEnding:D,link:c(H),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:fe,resourceDestinationString:I,resourceTitleString:De,resource:Me,setextHeading:c(N),setextHeadingLineSequence:x,setextHeadingText:_,strong:c(),thematicBreak:c()}};i1(t,(e||{}).mdastExtensions||[]);const n={};return i;function i(z){let ee={type:"root",children:[]};const me={stack:[ee],tokenStack:[],config:t,enter:o,exit:l,buffer:a,resume:u,data:n},rt=[];let lt=-1;for(;++lt<z.length;)if(z[lt][1].type==="listOrdered"||z[lt][1].type==="listUnordered")if(z[lt][0]==="enter")rt.push(lt);else{const Ti=rt.pop();lt=r(z,Ti,lt)}for(lt=-1;++lt<z.length;){const Ti=t[z[lt][0]];n1.call(Ti,z[lt][1].type)&&Ti[z[lt][1].type].call(Object.assign({sliceSerialize:z[lt][2].sliceSerialize},me),z[lt][1])}if(me.tokenStack.length>0){const Ti=me.tokenStack[me.tokenStack.length-1];(Ti[1]||r1).call(me,void 0,Ti[0])}for(ee.position={start:Er(z.length>0?z[0][1].start:{line:1,column:1,offset:0}),end:Er(z.length>0?z[z.length-2][1].end:{line:1,column:1,offset:0})},lt=-1;++lt<t.transforms.length;)ee=t.transforms[lt](ee)||ee;return ee}function r(z,ee,me){let rt=ee-1,lt=-1,Ti=!1,va,Yi,Vo,Wo;for(;++rt<=me;){const En=z[rt];switch(En[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{En[0]==="enter"?lt++:lt--,Wo=void 0;break}case"lineEndingBlank":{En[0]==="enter"&&(va&&!Wo&&!lt&&!Vo&&(Vo=rt),Wo=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Wo=void 0}if(!lt&&En[0]==="enter"&&En[1].type==="listItemPrefix"||lt===-1&&En[0]==="exit"&&(En[1].type==="listUnordered"||En[1].type==="listOrdered")){if(va){let ba=rt;for(Yi=void 0;ba--;){const Hi=z[ba];if(Hi[1].type==="lineEnding"||Hi[1].type==="lineEndingBlank"){if(Hi[0]==="exit")continue;Yi&&(z[Yi][1].type="lineEndingBlank",Ti=!0),Hi[1].type="lineEnding",Yi=ba}else if(!(Hi[1].type==="linePrefix"||Hi[1].type==="blockQuotePrefix"||Hi[1].type==="blockQuotePrefixWhitespace"||Hi[1].type==="blockQuoteMarker"||Hi[1].type==="listItemIndent"))break}Vo&&(!Yi||Vo<Yi)&&(va._spread=!0),va.end=Object.assign({},Yi?z[Yi][1].start:En[1].end),z.splice(Yi||rt,0,["exit",va,En[2]]),rt++,me++}if(En[1].type==="listItemPrefix"){const ba={type:"listItem",_spread:!1,start:Object.assign({},En[1].start),end:void 0};va=ba,z.splice(rt,0,["enter",ba,En[2]]),rt++,me++,Vo=void 0,Wo=!0}}}return z[ee][1]._spread=Ti,me}function s(z,ee){return me;function me(rt){o.call(this,z(rt),rt),ee&&ee.call(this,rt)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(z,ee,me){this.stack[this.stack.length-1].children.push(z),this.stack.push(z),this.tokenStack.push([ee,me||void 0]),z.position={start:Er(ee.start),end:void 0}}function c(z){return ee;function ee(me){z&&z.call(this,me),l.call(this,me)}}function l(z,ee){const me=this.stack.pop(),rt=this.tokenStack.pop();if(rt)rt[0].type!==z.type&&(ee?ee.call(this,z,rt[0]):(rt[1]||r1).call(this,z,rt[0]));else throw new Error("Cannot close `"+z.type+"` ("+Co({start:z.start,end:z.end})+"): its not open");me.position.end=Er(z.end)}function u(){return bp(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(z){if(this.data.expectingFirstListItemValue){const ee=this.stack[this.stack.length-2];ee.start=Number.parseInt(this.sliceSerialize(z),10),this.data.expectingFirstListItemValue=void 0}}function p(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.lang=z}function O(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.meta=z}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.value=z.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.value=z.replace(/(\r?\n|\r)$/g,"")}function k(z){const ee=this.resume(),me=this.stack[this.stack.length-1];me.label=ee,me.identifier=jn(this.sliceSerialize(z)).toLowerCase()}function y(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.title=z}function T(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.url=z}function S(z){const ee=this.stack[this.stack.length-1];if(!ee.depth){const me=this.sliceSerialize(z).length;ee.depth=me}}function _(){this.data.setextHeadingSlurpLineEnding=!0}function x(z){const ee=this.stack[this.stack.length-1];ee.depth=this.sliceSerialize(z).codePointAt(0)===61?1:2}function N(){this.data.setextHeadingSlurpLineEnding=void 0}function L(z){const ee=this.stack[this.stack.length-1].children;let me=ee[ee.length-1];(!me||me.type!=="text")&&(me=kj(),me.position={start:Er(z.start),end:void 0},ee.push(me)),this.stack.push(me)}function w(z){const ee=this.stack.pop();ee.value+=this.sliceSerialize(z),ee.position.end=Er(z.end)}function D(z){const ee=this.stack[this.stack.length-1];if(this.data.atHardBreak){const me=ee.children[ee.children.length-1];me.position.end=Er(z.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ee.type)&&(L.call(this,z),w.call(this,z))}function M(){this.data.atHardBreak=!0}function B(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.value=z}function F(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.value=z}function q(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.value=z}function H(){const z=this.stack[this.stack.length-1];if(this.data.inReference){const ee=this.data.referenceType||"shortcut";z.type+="Reference",z.referenceType=ee,delete z.url,delete z.title}else delete z.identifier,delete z.label;this.data.referenceType=void 0}function se(){const z=this.stack[this.stack.length-1];if(this.data.inReference){const ee=this.data.referenceType||"shortcut";z.type+="Reference",z.referenceType=ee,delete z.url,delete z.title}else delete z.identifier,delete z.label;this.data.referenceType=void 0}function Z(z){const ee=this.sliceSerialize(z),me=this.stack[this.stack.length-2];me.label=V$(ee),me.identifier=jn(ee).toLowerCase()}function de(){const z=this.stack[this.stack.length-1],ee=this.resume(),me=this.stack[this.stack.length-1];if(this.data.inReference=!0,me.type==="link"){const rt=z.children;me.children=rt}else me.alt=ee}function I(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.url=z}function De(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.title=z}function Me(){this.data.inReference=void 0}function R(){this.data.referenceType="collapsed"}function fe(z){const ee=this.resume(),me=this.stack[this.stack.length-1];me.label=ee,me.identifier=jn(this.sliceSerialize(z)).toLowerCase(),this.data.referenceType="full"}function Ye(z){this.data.characterReferenceType=z.type}function Qe(z){const ee=this.sliceSerialize(z),me=this.data.characterReferenceType;let rt;me?(rt=hy(ee,me==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):rt=kp(ee);const lt=this.stack[this.stack.length-1];lt.value+=rt}function ae(z){const ee=this.stack.pop();ee.position.end=Er(z.end)}function Le(z){w.call(this,z);const ee=this.stack[this.stack.length-1];ee.url=this.sliceSerialize(z)}function Xe(z){w.call(this,z);const ee=this.stack[this.stack.length-1];ee.url="mailto:"+this.sliceSerialize(z)}function Te(){return{type:"blockquote",children:[]}}function je(){return{type:"code",lang:null,meta:null,value:""}}function it(){return{type:"inlineCode",value:""}}function an(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ms(){return{type:"emphasis",children:[]}}function Ir(){return{type:"heading",depth:0,children:[]}}function Qr(){return{type:"break"}}function Pu(){return{type:"html",value:""}}function Nm(){return{type:"image",title:null,url:"",alt:null}}function Os(){return{type:"link",title:null,url:"",children:[]}}function Aw(z){return{type:"list",ordered:z.type==="listOrdered",start:null,spread:z._spread,children:[]}}function vj(z){return{type:"listItem",spread:z._spread,checked:null,children:[]}}function bj(){return{type:"paragraph",children:[]}}function Tj(){return{type:"strong",children:[]}}function kj(){return{type:"text",value:""}}function yj(){return{type:"thematicBreak"}}}function Er(e){return{line:e.line,column:e.column,offset:e.offset}}function i1(e,t){let n=-1;for(;++n<t.length;){const i=t[n];Array.isArray(i)?i1(e,i):C7(e,i)}}function C7(e,t){let n;for(n in t)if(n1.call(t,n))switch(n){case"canContainEols":{const i=t[n];i&&e[n].push(...i);break}case"transforms":{const i=t[n];i&&e[n].push(...i);break}case"enter":case"exit":{const i=t[n];i&&Object.assign(e[n],i);break}}}function r1(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Co({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Co({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Co({start:t.start,end:t.end})+") is still open")}function x7(e){const t=this;t.parser=n;function n(i){return E7(i,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function P7(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function R7(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function A7(e,t){const n=t.value?t.value+`
`:"",i={},r=t.lang?t.lang.split(/\s+/):[];r.length>0&&(i.className=["language-"+r[0]]);let s={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function I7(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Q7(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function N7(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=String(t.identifier).toUpperCase(),r=Js(i.toLowerCase()),s=e.footnoteOrder.indexOf(i);let a,o=e.footnoteCounts.get(i);o===void 0?(o=0,e.footnoteOrder.push(i),a=e.footnoteOrder.length):a=s+1,o+=1,e.footnoteCounts.set(i,o);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,c);const l={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,l),e.applyData(t,l)}function D7(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function M7(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function s1(e,t){const n=t.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+i}];const r=e.all(t),s=r[0];s&&s.type==="text"?s.value="["+s.value:r.unshift({type:"text",value:"["});const a=r[r.length-1];return a&&a.type==="text"?a.value+=i:r.push({type:"text",value:i}),r}function L7(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return s1(e,t);const r={src:Js(i.url||""),alt:t.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,s),e.applyData(t,s)}function $7(e,t){const n={src:Js(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,i),e.applyData(t,i)}function U7(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,i),e.applyData(t,i)}function q7(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return s1(e,t);const r={href:Js(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function X7(e,t){const n={href:Js(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function F7(e,t,n){const i=e.all(t),r=n?z7(n):a1(t),s={},a=[];if(typeof t.checked=="boolean"){const u=i[0];let d;u&&u.type==="element"&&u.tagName==="p"?d=u:(d={type:"element",tagName:"p",properties:{},children:[]},i.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let o=-1;for(;++o<i.length;){const u=i[o];(r||o!==0||u.type!=="element"||u.tagName!=="p")&&a.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!r?a.push(...u.children):a.push(u)}const c=i[i.length-1];c&&(r||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:a};return e.patch(t,l),e.applyData(t,l)}function z7(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let i=-1;for(;!t&&++i<n.length;)t=a1(n[i])}return t}function a1(e){return e.spread??e.children.length>1}function B7(e,t){const n={},i=e.all(t);let r=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++r<i.length;){const a=i[r];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function Z7(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function j7(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function V7(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function W7(e,t){const n=e.all(t),i=n.shift(),r=[];if(i){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([i],!0)};e.patch(t.children[0],a),r.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=ai(t.children[1]),c=cl(t.children[t.children.length-1]);o&&c&&(a.position={start:o,end:c}),r.push(a)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function G7(e,t,n){const i=n?n.children:void 0,r=(i?i.indexOf(t):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,a=s?s.length:t.children.length;let o=-1;const c=[];for(;++o<a;){const u=t.children[o],d={},h=s?s[o]:void 0;h&&(d.align=h);let p={type:"element",tagName:r,properties:d,children:[]};u&&(p.children=e.all(u),e.patch(u,p),p=e.applyData(u,p)),c.push(p)}const l={type:"element",tagName:"tr",properties:{},children:e.wrap(c,!0)};return e.patch(t,l),e.applyData(t,l)}function Y7(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const o1=9,c1=32;function H7(e){const t=String(e),n=/\r?\n|\r/g;let i=n.exec(t),r=0;const s=[];for(;i;)s.push(l1(t.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=n.exec(t);return s.push(l1(t.slice(r),r>0,!1)),s.join("")}function l1(e,t,n){let i=0,r=e.length;if(t){let s=e.codePointAt(i);for(;s===o1||s===c1;)i++,s=e.codePointAt(i)}if(n){let s=e.codePointAt(r-1);for(;s===o1||s===c1;)r--,s=e.codePointAt(r-1)}return r>i?e.slice(i,r):""}function K7(e,t){const n={type:"text",value:H7(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function J7(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const eX={blockquote:P7,break:R7,code:A7,delete:I7,emphasis:Q7,footnoteReference:N7,heading:D7,html:M7,imageReference:L7,image:$7,inlineCode:U7,linkReference:q7,link:X7,listItem:F7,list:B7,paragraph:Z7,root:j7,strong:V7,table:W7,tableCell:Y7,tableRow:G7,text:K7,thematicBreak:J7,toml:Wl,yaml:Wl,definition:Wl,footnoteDefinition:Wl};function Wl(){}function tX(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function nX(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function iX(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||tX,i=e.options.footnoteBackLabel||nX,r=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let c=-1;for(;++c<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[c]);if(!l)continue;const u=e.all(l),d=String(l.identifier).toUpperCase(),h=Js(d.toLowerCase());let p=0;const O=[],m=e.footnoteCounts.get(d);for(;m!==void 0&&++p<=m;){O.length>0&&O.push({type:"text",value:" "});let k=typeof n=="string"?n:n(c,p);typeof k=="string"&&(k={type:"text",value:k}),O.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(c,p),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const b=u[u.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const k=b.children[b.children.length-1];k&&k.type==="text"?k.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...O)}else u.push(...O);const v={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(u,!0)};e.patch(l,v),o.push(v)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Wr(a),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:`
`}]}}const xf={}.hasOwnProperty,rX={};function sX(e,t){const n=t||rX,i=new Map,r=new Map,s=new Map,a={...eX,...n.handlers},o={all:l,applyData:oX,definitionById:i,footnoteById:r,footnoteCounts:s,footnoteOrder:[],handlers:a,one:c,options:n,patch:aX,wrap:lX};return Vs(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const d=u.type==="definition"?i:r,h=String(u.identifier).toUpperCase();d.has(h)||d.set(h,u)}}),o;function c(u,d){const h=u.type,p=o.handlers[h];if(xf.call(o.handlers,h)&&p)return p(o,u,d);if(o.options.passThrough&&o.options.passThrough.includes(h)){if("children"in u){const{children:O,...m}=u,b=Wr(m);return b.children=o.all(u),b}return Wr(u)}return(o.options.unknownHandler||cX)(o,u,d)}function l(u){const d=[];if("children"in u){const h=u.children;let p=-1;for(;++p<h.length;){const O=o.one(h[p],u);if(O){if(p&&h[p-1].type==="break"&&(!Array.isArray(O)&&O.type==="text"&&(O.value=u1(O.value)),!Array.isArray(O)&&O.type==="element")){const m=O.children[0];m&&m.type==="text"&&(m.value=u1(m.value))}Array.isArray(O)?d.push(...O):d.push(O)}}}return d}}function aX(e,t){e.position&&(t.position=hT(e))}function oX(e,t){let n=t;if(e&&e.data){const i=e.data.hName,r=e.data.hChildren,s=e.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const a="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:a}}n.type==="element"&&s&&Object.assign(n.properties,Wr(s)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function cX(e,t){const n=t.data||{},i="value"in t&&!(xf.call(n,"hProperties")||xf.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function lX(e,t){const n=[];let i=-1;for(t&&n.push({type:"text",value:`
`});++i<e.length;)i&&n.push({type:"text",value:`
`}),n.push(e[i]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function u1(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function d1(e,t){const n=sX(e,t),i=n.one(e,void 0),r=iX(n),s=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&s.children.push({type:"text",value:`
`},r),s}function uX(e,t){return e&&"run"in e?async function(n,i){const r=d1(n,{file:i,...t});await e.run(r,i)}:function(n,i){return d1(n,{file:i,...e||t})}}function h1(e){if(e)throw e}var Pf,p1;function dX(){if(p1)return Pf;p1=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(c){return typeof Array.isArray=="function"?Array.isArray(c):t.call(c)==="[object Array]"},s=function(c){if(!c||t.call(c)!=="[object Object]")return!1;var l=e.call(c,"constructor"),u=c.constructor&&c.constructor.prototype&&e.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!l&&!u)return!1;var d;for(d in c);return typeof d>"u"||e.call(c,d)},a=function(c,l){n&&l.name==="__proto__"?n(c,l.name,{enumerable:!0,configurable:!0,value:l.newValue,writable:!0}):c[l.name]=l.newValue},o=function(c,l){if(l==="__proto__")if(e.call(c,l)){if(i)return i(c,l).value}else return;return c[l]};return Pf=function c(){var l,u,d,h,p,O,m=arguments[0],b=1,v=arguments.length,k=!1;for(typeof m=="boolean"&&(k=m,m=arguments[1]||{},b=2),(m==null||typeof m!="object"&&typeof m!="function")&&(m={});b<v;++b)if(l=arguments[b],l!=null)for(u in l)d=o(m,u),h=o(l,u),m!==h&&(k&&h&&(s(h)||(p=r(h)))?(p?(p=!1,O=d&&r(d)?d:[]):O=d&&s(d)?d:{},a(m,{name:u,newValue:c(k,O,h)})):typeof h<"u"&&a(m,{name:u,newValue:h}));return m},Pf}var hX=dX();const Rf=Hy(hX);function Af(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function pX(){const e=[],t={run:n,use:i};return t;function n(...r){let s=-1;const a=r.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...r);function o(c,...l){const u=e[++s];let d=-1;if(c){a(c);return}for(;++d<r.length;)(l[d]===null||l[d]===void 0)&&(l[d]=r[d]);r=l,u?fX(u,o)(...l):a(null,...l)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return e.push(r),t}}function fX(e,t){let n;return i;function i(...a){const o=e.length>a.length;let c;o&&a.push(r);try{c=e.apply(this,a)}catch(l){const u=l;if(o&&n)throw u;return r(u)}o||(c&&c.then&&typeof c.then=="function"?c.then(s,r):c instanceof Error?r(c):s(c))}function r(a,...o){n||(n=!0,t(a,...o))}function s(a){r(null,a)}}const fi={basename:mX,dirname:OX,extname:gX,join:vX,sep:"/"};function mX(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Lo(e);let n=0,i=-1,r=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;r--;)if(e.codePointAt(r)===47){if(s){n=r+1;break}}else i<0&&(s=!0,i=r+1);return i<0?"":e.slice(n,i)}if(t===e)return"";let a=-1,o=t.length-1;for(;r--;)if(e.codePointAt(r)===47){if(s){n=r+1;break}}else a<0&&(s=!0,a=r+1),o>-1&&(e.codePointAt(r)===t.codePointAt(o--)?o<0&&(i=r):(o=-1,i=a));return n===i?i=a:i<0&&(i=e.length),e.slice(n,i)}function OX(e){if(Lo(e),e.length===0)return".";let t=-1,n=e.length,i;for(;--n;)if(e.codePointAt(n)===47){if(i){t=n;break}}else i||(i=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function gX(e){Lo(e);let t=e.length,n=-1,i=0,r=-1,s=0,a;for(;t--;){const o=e.codePointAt(t);if(o===47){if(a){i=t+1;break}continue}n<0&&(a=!0,n=t+1),o===46?r<0?r=t:s!==1&&(s=1):r>-1&&(s=-1)}return r<0||n<0||s===0||s===1&&r===n-1&&r===i+1?"":e.slice(r,n)}function vX(...e){let t=-1,n;for(;++t<e.length;)Lo(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":bX(n)}function bX(e){Lo(e);const t=e.codePointAt(0)===47;let n=TX(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function TX(e,t){let n="",i=0,r=-1,s=0,a=-1,o,c;for(;++a<=e.length;){if(a<e.length)o=e.codePointAt(a);else{if(o===47)break;o=47}if(o===47){if(!(r===a-1||s===1))if(r!==a-1&&s===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",i=0):(n=n.slice(0,c),i=n.length-1-n.lastIndexOf("/")),r=a,s=0;continue}}else if(n.length>0){n="",i=0,r=a,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+e.slice(r+1,a):n=e.slice(r+1,a),i=a-r-1;r=a,s=0}else o===46&&s>-1?s++:s=-1}return n}function Lo(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const kX={cwd:yX};function yX(){return"/"}function If(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function SX(e){if(typeof e=="string")e=new URL(e);else if(!If(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return _X(e)}function _X(e){if(e.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const i=t.codePointAt(n+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(t)}const Qf=["history","path","basename","stem","extname","dirname"];class EX{constructor(t){let n;t?If(t)?n={path:t}:typeof t=="string"||wX(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":kX.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<Qf.length;){const s=Qf[i];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let r;for(r in n)Qf.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?fi.basename(this.path):void 0}set basename(t){Df(t,"basename"),Nf(t,"basename"),this.path=fi.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?fi.dirname(this.path):void 0}set dirname(t){f1(this.basename,"dirname"),this.path=fi.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?fi.extname(this.path):void 0}set extname(t){if(Nf(t,"extname"),f1(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=fi.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){If(t)&&(t=SX(t)),Df(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?fi.basename(this.path,this.extname):void 0}set stem(t){Df(t,"stem"),Nf(t,"stem"),this.path=fi.join(this.dirname||"",t+(this.extname||""))}fail(t,n,i){const r=this.message(t,n,i);throw r.fatal=!0,r}info(t,n,i){const r=this.message(t,n,i);return r.fatal=void 0,r}message(t,n,i){const r=new Ht(t,n,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Nf(e,t){if(e&&e.includes(fi.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+fi.sep+"`")}function Df(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function f1(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function wX(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const CX=(function(e){const t=this.constructor.prototype,n=t[e],i=function(){return n.apply(i,arguments)};return Object.setPrototypeOf(i,t),i}),xX={}.hasOwnProperty;class Mf extends CX{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=pX()}copy(){const t=new Mf;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];t.use(...i)}return t.data(Rf(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Uf("data",this.frozen),this.namespace[t]=n,this):xX.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Uf("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=n.call(t,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Gl(t),i=this.parser||this.Parser;return Lf("parse",i),i(String(n),n)}process(t,n){const i=this;return this.freeze(),Lf("process",this.parser||this.Parser),$f("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(s,a){const o=Gl(t),c=i.parse(o);i.run(c,o,function(u,d,h){if(u||!d||!h)return l(u);const p=d,O=i.stringify(p,h);AX(O)?h.value=O:h.result=O,l(u,h)});function l(u,d){u||!d?a(u):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,i;return this.freeze(),Lf("processSync",this.parser||this.Parser),$f("processSync",this.compiler||this.Compiler),this.process(t,r),O1("processSync","process",n),i;function r(s,a){n=!0,h1(s),i=a}}run(t,n,i){m1(t),this.freeze();const r=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?s(void 0,i):new Promise(s);function s(a,o){const c=Gl(n);r.run(t,c,l);function l(u,d,h){const p=d||t;u?o(u):a?a(p):i(void 0,p,h)}}}runSync(t,n){let i=!1,r;return this.run(t,n,s),O1("runSync","run",i),r;function s(a,o){h1(a),r=o,i=!0}}stringify(t,n){this.freeze();const i=Gl(n),r=this.compiler||this.Compiler;return $f("stringify",r),m1(t),r(t,i)}use(t,...n){const i=this.attachers,r=this.namespace;if(Uf("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?o(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")c(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[u,...d]=l;c(u,d)}else a(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function a(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(l.plugins),l.settings&&(r.settings=Rf(!0,r.settings,l.settings))}function o(l){let u=-1;if(l!=null)if(Array.isArray(l))for(;++u<l.length;){const d=l[u];s(d)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function c(l,u){let d=-1,h=-1;for(;++d<i.length;)if(i[d][0]===l){h=d;break}if(h===-1)i.push([l,...u]);else if(u.length>0){let[p,...O]=u;const m=i[h][1];Af(m)&&Af(p)&&(p=Rf(!0,m,p)),i[h]=[l,p,...O]}}}}const PX=new Mf().freeze();function Lf(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function $f(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Uf(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function m1(e){if(!Af(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function O1(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Gl(e){return RX(e)?e:new EX(e)}function RX(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function AX(e){return typeof e=="string"||IX(e)}function IX(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const g1=[],v1={allowDangerousHtml:!0},Yl=new WeakMap;class QX{constructor(){be(this,"cache",new Map),be(this,"keyCache",new WeakMap),be(this,"maxSize",100)}generateCacheKey(t){const n=this.keyCache.get(t);if(n)return n;const i=t.rehypePlugins,r=t.remarkPlugins,s=t.remarkRehypeOptions;if(!(i||r||s)){const d="default";return this.keyCache.set(t,d),d}const a=d=>{if(!d||d.length===0)return"";let h="";for(let p=0;p<d.length;p+=1){const O=d[p];if(p>0&&(h+=","),Array.isArray(O)){const[m,b]=O;if(typeof m=="function"){let v=Yl.get(m);v||(v=m.name,Yl.set(m,v)),h+=v}else h+=String(m);h+=":",h+=JSON.stringify(b)}else if(typeof O=="function"){let m=Yl.get(O);m||(m=O.name,Yl.set(O,m)),h+=m}else h+=String(O)}return h},o=a(i),c=a(r),l=s?JSON.stringify(s):"",u=`${c}::${o}::${l}`;return this.keyCache.set(t,u),u}get(t){const n=this.generateCacheKey(t),i=this.cache.get(n);return i&&(this.cache.delete(n),this.cache.set(n,i)),i}set(t,n){const i=this.generateCacheKey(t);if(this.cache.size>=this.maxSize){const r=this.cache.keys().next().value;r&&this.cache.delete(r)}this.cache.set(i,n)}clear(){this.cache.clear()}}const b1=new QX,NX=e=>{const t=DX(e),n=e.children||"";return LX(t.runSync(t.parse(n),n),e)},DX=e=>{const t=b1.get(e);if(t)return t;const n=MX(e);return b1.set(e,n),n},MX=e=>{const t=e.rehypePlugins||g1,n=e.remarkPlugins||g1,i=e.remarkRehypeOptions?{...v1,...e.remarkRehypeOptions}:v1;return PX().use(x7).use(n).use(uX,i).use(t)},LX=(e,t)=>sS(e,{Fragment:Fe,components:t.components,ignoreInvalidStyle:!0,jsx:g,jsxs:g,passKeys:!0,passNode:!0});function $X(e){return e.startsWith("https://")||e.startsWith("http://")}function UX(e){const{allowedHosts:t,includeWww:n,allowHttp:i}=e;if(t.length===0)return[];if(t.includes("*"))return["*"];const r=new Set;for(const s of t){const a=s.trim();if(!a)continue;if($X(a)){r.add(a);continue}const o=a.replace(/\.$/,"");r.add(`https://${o}`),i&&r.add(`http://${o}`),n&&!o.startsWith("www.")&&(r.add(`https://www.${o}`),i&&r.add(`http://www.${o}`))}return[...r]}function qf(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var cs=qf();function T1(e){cs=e}var $o={exec:()=>null};function Ze(e,t=""){let n=typeof e=="string"?e:e.source,i={replace:(r,s)=>{let a=typeof s=="string"?s:s.source;return a=a.replace(sn.caret,"$1"),n=n.replace(r,a),i},getRegex:()=>new RegExp(n,t)};return i}var qX=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),sn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},XX=/^(?:[ \t]*(?:\n|$))+/,FX=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,zX=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Uo=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,BX=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Xf=/(?:[*+-]|\d{1,9}[.)])/,k1=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,y1=Ze(k1).replace(/bull/g,Xf).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),ZX=Ze(k1).replace(/bull/g,Xf).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Ff=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,jX=/^[^\n]+/,zf=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,VX=Ze(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",zf).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),WX=Ze(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Xf).getRegex(),Hl="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Bf=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,GX=Ze("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Bf).replace("tag",Hl).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),S1=Ze(Ff).replace("hr",Uo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Hl).getRegex(),YX=Ze(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",S1).getRegex(),Zf={blockquote:YX,code:FX,def:VX,fences:zX,heading:BX,hr:Uo,html:GX,lheading:y1,list:WX,newline:XX,paragraph:S1,table:$o,text:jX},_1=Ze("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Uo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Hl).getRegex(),HX={...Zf,lheading:ZX,table:_1,paragraph:Ze(Ff).replace("hr",Uo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",_1).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Hl).getRegex()},KX={...Zf,html:Ze(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Bf).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:$o,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ze(Ff).replace("hr",Uo).replace("heading",` *#{1,6} *[^
]`).replace("lheading",y1).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},JX=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,eF=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,E1=/^( {2,}|\\)\n(?!\s*$)/,tF=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Kl=/[\p{P}\p{S}]/u,jf=/[\s\p{P}\p{S}]/u,w1=/[^\s\p{P}\p{S}]/u,nF=Ze(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,jf).getRegex(),C1=/(?!~)[\p{P}\p{S}]/u,iF=/(?!~)[\s\p{P}\p{S}]/u,rF=/(?:[^\s\p{P}\p{S}]|~)/u,sF=Ze(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",qX?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),x1=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,aF=Ze(x1,"u").replace(/punct/g,Kl).getRegex(),oF=Ze(x1,"u").replace(/punct/g,C1).getRegex(),P1="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",cF=Ze(P1,"gu").replace(/notPunctSpace/g,w1).replace(/punctSpace/g,jf).replace(/punct/g,Kl).getRegex(),lF=Ze(P1,"gu").replace(/notPunctSpace/g,rF).replace(/punctSpace/g,iF).replace(/punct/g,C1).getRegex(),uF=Ze("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,w1).replace(/punctSpace/g,jf).replace(/punct/g,Kl).getRegex(),dF=Ze(/\\(punct)/,"gu").replace(/punct/g,Kl).getRegex(),hF=Ze(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),pF=Ze(Bf).replace("(?:-->|$)","-->").getRegex(),fF=Ze("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",pF).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Jl=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,mF=Ze(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Jl).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),R1=Ze(/^!?\[(label)\]\[(ref)\]/).replace("label",Jl).replace("ref",zf).getRegex(),A1=Ze(/^!?\[(ref)\](?:\[\])?/).replace("ref",zf).getRegex(),OF=Ze("reflink|nolink(?!\\()","g").replace("reflink",R1).replace("nolink",A1).getRegex(),I1=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Vf={_backpedal:$o,anyPunctuation:dF,autolink:hF,blockSkip:sF,br:E1,code:eF,del:$o,emStrongLDelim:aF,emStrongRDelimAst:cF,emStrongRDelimUnd:uF,escape:JX,link:mF,nolink:A1,punctuation:nF,reflink:R1,reflinkSearch:OF,tag:fF,text:tF,url:$o},gF={...Vf,link:Ze(/^!?\[(label)\]\((.*?)\)/).replace("label",Jl).getRegex(),reflink:Ze(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Jl).getRegex()},Wf={...Vf,emStrongRDelimAst:lF,emStrongLDelim:oF,url:Ze(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",I1).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Ze(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",I1).getRegex()},vF={...Wf,br:Ze(E1).replace("{2,}","*").getRegex(),text:Ze(Wf.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},eu={normal:Zf,gfm:HX,pedantic:KX},qo={normal:Vf,gfm:Wf,breaks:vF,pedantic:gF},bF={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Q1=e=>bF[e];function Vi(e,t){if(t){if(sn.escapeTest.test(e))return e.replace(sn.escapeReplace,Q1)}else if(sn.escapeTestNoEncode.test(e))return e.replace(sn.escapeReplaceNoEncode,Q1);return e}function N1(e){try{e=encodeURI(e).replace(sn.percentDecode,"%")}catch{return null}return e}function D1(e,t){var n;let i=e.replace(sn.findPipe,(a,o,c)=>{let l=!1,u=o;for(;--u>=0&&c[u]==="\\";)l=!l;return l?"|":" |"}),r=i.split(sn.splitPipe),s=0;if(r[0].trim()||r.shift(),r.length>0&&!((n=r.at(-1))!=null&&n.trim())&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(sn.slashPipe,"|");return r}function Xo(e,t,n){let i=e.length;if(i===0)return"";let r=0;for(;r<i&&e.charAt(i-r-1)===t;)r++;return e.slice(0,i-r)}function TF(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])n++;else if(e[i]===t[1]&&(n--,n<0))return i;return n>0?-2:-1}function M1(e,t,n,i,r){let s=t.href,a=t.title||null,o=e[1].replace(r.other.outputLinkReplace,"$1");i.state.inLink=!0;let c={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:a,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,c}function kF(e,t,n){let i=e.match(n.other.indentCodeCompensation);if(i===null)return t;let r=i[1];return t.split(`
`).map(s=>{let a=s.match(n.other.beginningSpace);if(a===null)return s;let[o]=a;return o.length>=r.length?s.slice(r.length):s}).join(`
`)}var tu=class{constructor(e){be(this,"options"),be(this,"rules"),be(this,"lexer"),this.options=e||cs}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Xo(n,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],i=kF(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){let i=Xo(n,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(n=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Xo(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=Xo(t[0],`
`).split(`
`),i="",r="",s=[];for(;n.length>0;){let a=!1,o=[],c;for(c=0;c<n.length;c++)if(this.rules.other.blockquoteStart.test(n[c]))o.push(n[c]),a=!0;else if(!a)o.push(n[c]);else break;n=n.slice(c);let l=o.join(`
`),u=l.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${l}`:l,r=r?`${r}
${u}`:u;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,s,!0),this.lexer.state.top=d,n.length===0)break;let h=s.at(-1);if((h==null?void 0:h.type)==="code")break;if((h==null?void 0:h.type)==="blockquote"){let p=h,O=p.raw+`
`+n.join(`
`),m=this.blockquote(O);s[s.length-1]=m,i=i.substring(0,i.length-p.raw.length)+m.raw,r=r.substring(0,r.length-p.text.length)+m.text;break}else if((h==null?void 0:h.type)==="list"){let p=h,O=p.raw+`
`+n.join(`
`),m=this.list(O);s[s.length-1]=m,i=i.substring(0,i.length-h.raw.length)+m.raw,r=r.substring(0,r.length-p.raw.length)+m.raw,n=O.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:s,text:r}}}list(e){var t,n;let i=this.rules.block.list.exec(e);if(i){let r=i[1].trim(),s=r.length>1,a={type:"list",raw:"",ordered:s,start:s?+r.slice(0,-1):"",loose:!1,items:[]};r=s?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=s?r:"[*+-]");let o=this.rules.other.listItemRegex(r),c=!1;for(;e;){let u=!1,d="",h="";if(!(i=o.exec(e))||this.rules.block.hr.test(e))break;d=i[0],e=e.substring(d.length);let p=i[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,v=>" ".repeat(3*v.length)),O=e.split(`
`,1)[0],m=!p.trim(),b=0;if(this.options.pedantic?(b=2,h=p.trimStart()):m?b=i[1].length+1:(b=i[2].search(this.rules.other.nonSpaceChar),b=b>4?1:b,h=p.slice(b),b+=i[1].length),m&&this.rules.other.blankLine.test(O)&&(d+=O+`
`,e=e.substring(O.length+1),u=!0),!u){let v=this.rules.other.nextBulletRegex(b),k=this.rules.other.hrRegex(b),y=this.rules.other.fencesBeginRegex(b),T=this.rules.other.headingBeginRegex(b),S=this.rules.other.htmlBeginRegex(b);for(;e;){let _=e.split(`
`,1)[0],x;if(O=_,this.options.pedantic?(O=O.replace(this.rules.other.listReplaceNesting,"  "),x=O):x=O.replace(this.rules.other.tabCharGlobal,"    "),y.test(O)||T.test(O)||S.test(O)||v.test(O)||k.test(O))break;if(x.search(this.rules.other.nonSpaceChar)>=b||!O.trim())h+=`
`+x.slice(b);else{if(m||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||y.test(p)||T.test(p)||k.test(p))break;h+=`
`+O}!m&&!O.trim()&&(m=!0),d+=_+`
`,e=e.substring(_.length+1),p=x.slice(b)}}a.loose||(c?a.loose=!0:this.rules.other.doubleBlankLine.test(d)&&(c=!0)),a.items.push({type:"list_item",raw:d,task:!!this.options.gfm&&this.rules.other.listIsTask.test(h),loose:!1,text:h,tokens:[]}),a.raw+=d}let l=a.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;a.raw=a.raw.trimEnd();for(let u of a.items){if(this.lexer.state.top=!1,u.tokens=this.lexer.blockTokens(u.text,[]),u.task){if(u.text=u.text.replace(this.rules.other.listReplaceTask,""),((t=u.tokens[0])==null?void 0:t.type)==="text"||((n=u.tokens[0])==null?void 0:n.type)==="paragraph"){u.tokens[0].raw=u.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),u.tokens[0].text=u.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let h=this.lexer.inlineQueue.length-1;h>=0;h--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[h].src)){this.lexer.inlineQueue[h].src=this.lexer.inlineQueue[h].src.replace(this.rules.other.listReplaceTask,"");break}}let d=this.rules.other.listTaskCheckbox.exec(u.raw);if(d){let h={type:"checkbox",raw:d[0]+" ",checked:d[0]!=="[ ]"};u.checked=h.checked,a.loose?u.tokens[0]&&["paragraph","text"].includes(u.tokens[0].type)&&"tokens"in u.tokens[0]&&u.tokens[0].tokens?(u.tokens[0].raw=h.raw+u.tokens[0].raw,u.tokens[0].text=h.raw+u.tokens[0].text,u.tokens[0].tokens.unshift(h)):u.tokens.unshift({type:"paragraph",raw:h.raw,text:h.raw,tokens:[h]}):u.tokens.unshift(h)}}if(!a.loose){let d=u.tokens.filter(p=>p.type==="space"),h=d.length>0&&d.some(p=>this.rules.other.anyLine.test(p.raw));a.loose=h}}if(a.loose)for(let u of a.items){u.loose=!0;for(let d of u.tokens)d.type==="text"&&(d.type="paragraph")}return a}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:i,title:r}}}table(e){var t;let n=this.rules.block.table.exec(e);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;let i=D1(n[1]),r=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=(t=n[3])!=null&&t.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:n[0],header:[],align:[],rows:[]};if(i.length===r.length){for(let o of r)this.rules.other.tableAlignRight.test(o)?a.align.push("right"):this.rules.other.tableAlignCenter.test(o)?a.align.push("center"):this.rules.other.tableAlignLeft.test(o)?a.align.push("left"):a.align.push(null);for(let o=0;o<i.length;o++)a.header.push({text:i[o],tokens:this.lexer.inline(i[o]),header:!0,align:a.align[o]});for(let o of s)a.rows.push(D1(o,a.header.length).map((c,l)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:a.align[l]})));return a}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let s=Xo(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{let s=TF(t[2],"()");if(s===-2)return;if(s>-1){let a=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let i=t[2],r="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(i);s&&(i=s[1],r=s[3])}else r=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?i=i.slice(1):i=i.slice(1,-1)),M1(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let i=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=t[i.toLowerCase()];if(!r){let s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return M1(n,r,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!(!i||i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!n||this.rules.inline.punctuation.exec(n))){let r=[...i[0]].length-1,s,a,o=r,c=0,l=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+r);(i=l.exec(t))!=null;){if(s=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!s)continue;if(a=[...s].length,i[3]||i[4]){o+=a;continue}else if((i[5]||i[6])&&r%3&&!((r+a)%3)){c+=a;continue}if(o-=a,o>0)continue;a=Math.min(a,a+o+c);let u=[...i[0]][0].length,d=e.slice(0,r+i.index+u+a);if(Math.min(r,a)%2){let p=d.slice(1,-1);return{type:"em",raw:d,text:p,tokens:this.lexer.inlineTokens(p)}}let h=d.slice(2,-2);return{type:"strong",raw:d,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(n),r=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return i&&r&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let n,i;return t[2]==="@"?(n=t[1],i="mailto:"+n):(n=t[1],i=n),{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var t;let n;if(n=this.rules.inline.url.exec(e)){let i,r;if(n[2]==="@")i=n[0],r="mailto:"+i;else{let s;do s=n[0],n[0]=((t=this.rules.inline._backpedal.exec(n[0]))==null?void 0:t[0])??"";while(s!==n[0]);i=n[0],n[1]==="www."?r="http://"+n[0]:r=n[0]}return{type:"link",raw:n[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},Qn=class Mm{constructor(t){be(this,"tokens"),be(this,"options"),be(this,"state"),be(this,"inlineQueue"),be(this,"tokenizer"),this.tokens=[],this.tokens.links=Object.create(null),this.options=t||cs,this.options.tokenizer=this.options.tokenizer||new tu,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:sn,block:eu.normal,inline:qo.normal};this.options.pedantic?(n.block=eu.pedantic,n.inline=qo.pedantic):this.options.gfm&&(n.block=eu.gfm,this.options.breaks?n.inline=qo.breaks:n.inline=qo.gfm),this.tokenizer.rules=n}static get rules(){return{block:eu,inline:qo}}static lex(t,n){return new Mm(n).lex(t)}static lexInline(t,n){return new Mm(n).inlineTokens(t)}lex(t){t=t.replace(sn.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],i=!1){var r,s,a;for(this.options.pedantic&&(t=t.replace(sn.tabCharGlobal,"    ").replace(sn.spaceLine,""));t;){let o;if((s=(r=this.options.extensions)==null?void 0:r.block)!=null&&s.some(l=>(o=l.call({lexer:this},t,n))?(t=t.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length);let l=n.at(-1);o.raw.length===1&&l!==void 0?l.raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length);let l=n.at(-1);(l==null?void 0:l.type)==="paragraph"||(l==null?void 0:l.type)==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+o.raw,l.text+=`
`+o.text,this.inlineQueue.at(-1).src=l.text):n.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length);let l=n.at(-1);(l==null?void 0:l.type)==="paragraph"||(l==null?void 0:l.type)==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+o.raw,l.text+=`
`+o.raw,this.inlineQueue.at(-1).src=l.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},n.push(o));continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),n.push(o);continue}let c=t;if((a=this.options.extensions)!=null&&a.startBlock){let l=1/0,u=t.slice(1),d;this.options.extensions.startBlock.forEach(h=>{d=h.call({lexer:this},u),typeof d=="number"&&d>=0&&(l=Math.min(l,d))}),l<1/0&&l>=0&&(c=t.substring(0,l+1))}if(this.state.top&&(o=this.tokenizer.paragraph(c))){let l=n.at(-1);i&&(l==null?void 0:l.type)==="paragraph"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+o.raw,l.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):n.push(o),i=c.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length);let l=n.at(-1);(l==null?void 0:l.type)==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+o.raw,l.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):n.push(o);continue}if(t){let l="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){var i,r,s,a,o;let c=t,l=null;if(this.tokens.links){let p=Object.keys(this.tokens.links);if(p.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(c))!=null;)p.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.anyPunctuation.exec(c))!=null;)c=c.slice(0,l.index)+"++"+c.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let u;for(;(l=this.tokenizer.rules.inline.blockSkip.exec(c))!=null;)u=l[2]?l[2].length:0,c=c.slice(0,l.index+u)+"["+"a".repeat(l[0].length-u-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);c=((r=(i=this.options.hooks)==null?void 0:i.emStrongMask)==null?void 0:r.call({lexer:this},c))??c;let d=!1,h="";for(;t;){d||(h=""),d=!1;let p;if((a=(s=this.options.extensions)==null?void 0:s.inline)!=null&&a.some(m=>(p=m.call({lexer:this},t,n))?(t=t.substring(p.raw.length),n.push(p),!0):!1))continue;if(p=this.tokenizer.escape(t)){t=t.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.tag(t)){t=t.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.link(t)){t=t.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(p.raw.length);let m=n.at(-1);p.type==="text"&&(m==null?void 0:m.type)==="text"?(m.raw+=p.raw,m.text+=p.text):n.push(p);continue}if(p=this.tokenizer.emStrong(t,c,h)){t=t.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.codespan(t)){t=t.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.br(t)){t=t.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.del(t)){t=t.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.autolink(t)){t=t.substring(p.raw.length),n.push(p);continue}if(!this.state.inLink&&(p=this.tokenizer.url(t))){t=t.substring(p.raw.length),n.push(p);continue}let O=t;if((o=this.options.extensions)!=null&&o.startInline){let m=1/0,b=t.slice(1),v;this.options.extensions.startInline.forEach(k=>{v=k.call({lexer:this},b),typeof v=="number"&&v>=0&&(m=Math.min(m,v))}),m<1/0&&m>=0&&(O=t.substring(0,m+1))}if(p=this.tokenizer.inlineText(O)){t=t.substring(p.raw.length),p.raw.slice(-1)!=="_"&&(h=p.raw.slice(-1)),d=!0;let m=n.at(-1);(m==null?void 0:m.type)==="text"?(m.raw+=p.raw,m.text+=p.text):n.push(p);continue}if(t){let m="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(m);break}else throw new Error(m)}}return n}},nu=class{constructor(e){be(this,"options"),be(this,"parser"),this.options=e||cs}space(e){return""}code({text:e,lang:t,escaped:n}){var i;let r=(i=(t||"").match(sn.notSpaceStart))==null?void 0:i[0],s=e.replace(sn.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Vi(r)+'">'+(n?s:Vi(s,!0))+`</code></pre>
`:"<pre><code>"+(n?s:Vi(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,n=e.start,i="";for(let a=0;a<e.items.length;a++){let o=e.items[a];i+=this.listitem(o)}let r=t?"ol":"ul",s=t&&n!==1?' start="'+n+'"':"";return"<"+r+s+`>
`+i+"</"+r+`>
`}listitem(e){return`<li>${this.parser.parse(e.tokens)}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let r=0;r<e.header.length;r++)n+=this.tablecell(e.header[r]);t+=this.tablerow({text:n});let i="";for(let r=0;r<e.rows.length;r++){let s=e.rows[r];n="";for(let a=0;a<s.length;a++)n+=this.tablecell(s[a]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Vi(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let i=this.parser.parseInline(n),r=N1(e);if(r===null)return i;e=r;let s='<a href="'+e+'"';return t&&(s+=' title="'+Vi(t)+'"'),s+=">"+i+"</a>",s}image({href:e,title:t,text:n,tokens:i}){i&&(n=this.parser.parseInline(i,this.parser.textRenderer));let r=N1(e);if(r===null)return Vi(n);e=r;let s=`<img src="${e}" alt="${n}"`;return t&&(s+=` title="${Vi(t)}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Vi(e.text)}},Gf=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}checkbox({raw:e}){return e}},Wn=class Lm{constructor(t){be(this,"options"),be(this,"renderer"),be(this,"textRenderer"),this.options=t||cs,this.options.renderer=this.options.renderer||new nu,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Gf}static parse(t,n){return new Lm(n).parse(t)}static parseInline(t,n){return new Lm(n).parseInline(t)}parse(t){var n,i;let r="";for(let s=0;s<t.length;s++){let a=t[s];if((i=(n=this.options.extensions)==null?void 0:n.renderers)!=null&&i[a.type]){let c=a,l=this.options.extensions.renderers[c.type].call({parser:this},c);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){r+=l||"";continue}}let o=a;switch(o.type){case"space":{r+=this.renderer.space(o);break}case"hr":{r+=this.renderer.hr(o);break}case"heading":{r+=this.renderer.heading(o);break}case"code":{r+=this.renderer.code(o);break}case"table":{r+=this.renderer.table(o);break}case"blockquote":{r+=this.renderer.blockquote(o);break}case"list":{r+=this.renderer.list(o);break}case"checkbox":{r+=this.renderer.checkbox(o);break}case"html":{r+=this.renderer.html(o);break}case"def":{r+=this.renderer.def(o);break}case"paragraph":{r+=this.renderer.paragraph(o);break}case"text":{r+=this.renderer.text(o);break}default:{let c='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(t,n=this.renderer){var i,r;let s="";for(let a=0;a<t.length;a++){let o=t[a];if((r=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&r[o.type]){let l=this.options.extensions.renderers[o.type].call({parser:this},o);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){s+=l||"";continue}}let c=o;switch(c.type){case"escape":{s+=n.text(c);break}case"html":{s+=n.html(c);break}case"link":{s+=n.link(c);break}case"image":{s+=n.image(c);break}case"checkbox":{s+=n.checkbox(c);break}case"strong":{s+=n.strong(c);break}case"em":{s+=n.em(c);break}case"codespan":{s+=n.codespan(c);break}case"br":{s+=n.br(c);break}case"del":{s+=n.del(c);break}case"text":{s+=n.text(c);break}default:{let l='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return s}},iu,Fo=(iu=class{constructor(e){be(this,"options"),be(this,"block"),this.options=e||cs}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?Qn.lex:Qn.lexInline}provideParser(){return this.block?Wn.parse:Wn.parseInline}},be(iu,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),be(iu,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),iu),yF=class{constructor(...e){be(this,"defaults",qf()),be(this,"options",this.setOptions),be(this,"parse",this.parseMarkdown(!0)),be(this,"parseInline",this.parseMarkdown(!1)),be(this,"Parser",Wn),be(this,"Renderer",nu),be(this,"TextRenderer",Gf),be(this,"Lexer",Qn),be(this,"Tokenizer",tu),be(this,"Hooks",Fo),this.use(...e)}walkTokens(e,t){var n,i;let r=[];for(let s of e)switch(r=r.concat(t.call(this,s)),s.type){case"table":{let a=s;for(let o of a.header)r=r.concat(this.walkTokens(o.tokens,t));for(let o of a.rows)for(let c of o)r=r.concat(this.walkTokens(c.tokens,t));break}case"list":{let a=s;r=r.concat(this.walkTokens(a.items,t));break}default:{let a=s;(i=(n=this.defaults.extensions)==null?void 0:n.childTokens)!=null&&i[a.type]?this.defaults.extensions.childTokens[a.type].forEach(o=>{let c=a[o].flat(1/0);r=r.concat(this.walkTokens(c,t))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let s=t.renderers[r.name];s?t.renderers[r.name]=function(...a){let o=r.renderer.apply(this,a);return o===!1&&(o=s.apply(this,a)),o}:t.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=t[r.level];s?s.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),i.extensions=t),n.renderer){let r=this.defaults.renderer||new nu(this.defaults);for(let s in n.renderer){if(!(s in r))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let a=s,o=n.renderer[a],c=r[a];r[a]=(...l)=>{let u=o.apply(r,l);return u===!1&&(u=c.apply(r,l)),u||""}}i.renderer=r}if(n.tokenizer){let r=this.defaults.tokenizer||new tu(this.defaults);for(let s in n.tokenizer){if(!(s in r))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let a=s,o=n.tokenizer[a],c=r[a];r[a]=(...l)=>{let u=o.apply(r,l);return u===!1&&(u=c.apply(r,l)),u}}i.tokenizer=r}if(n.hooks){let r=this.defaults.hooks||new Fo;for(let s in n.hooks){if(!(s in r))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let a=s,o=n.hooks[a],c=r[a];Fo.passThroughHooks.has(s)?r[a]=l=>{if(this.defaults.async&&Fo.passThroughHooksRespectAsync.has(s))return(async()=>{let d=await o.call(r,l);return c.call(r,d)})();let u=o.call(r,l);return c.call(r,u)}:r[a]=(...l)=>{if(this.defaults.async)return(async()=>{let d=await o.apply(r,l);return d===!1&&(d=await c.apply(r,l)),d})();let u=o.apply(r,l);return u===!1&&(u=c.apply(r,l)),u}}i.hooks=r}if(n.walkTokens){let r=this.defaults.walkTokens,s=n.walkTokens;i.walkTokens=function(a){let o=[];return o.push(s.call(this,a)),r&&(o=o.concat(r.call(this,a))),o}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Qn.lex(e,t??this.defaults)}parser(e,t){return Wn.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let i={...n},r={...this.defaults,...i},s=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&i.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=e),r.async)return(async()=>{let a=r.hooks?await r.hooks.preprocess(t):t,o=await(r.hooks?await r.hooks.provideLexer():e?Qn.lex:Qn.lexInline)(a,r),c=r.hooks?await r.hooks.processAllTokens(o):o;r.walkTokens&&await Promise.all(this.walkTokens(c,r.walkTokens));let l=await(r.hooks?await r.hooks.provideParser():e?Wn.parse:Wn.parseInline)(c,r);return r.hooks?await r.hooks.postprocess(l):l})().catch(s);try{r.hooks&&(t=r.hooks.preprocess(t));let a=(r.hooks?r.hooks.provideLexer():e?Qn.lex:Qn.lexInline)(t,r);r.hooks&&(a=r.hooks.processAllTokens(a)),r.walkTokens&&this.walkTokens(a,r.walkTokens);let o=(r.hooks?r.hooks.provideParser():e?Wn.parse:Wn.parseInline)(a,r);return r.hooks&&(o=r.hooks.postprocess(o)),o}catch(a){return s(a)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+Vi(n.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(n);throw n}}},ls=new yF;function et(e,t){return ls.parse(e,t)}et.options=et.setOptions=function(e){return ls.setOptions(e),et.defaults=ls.defaults,T1(et.defaults),et},et.getDefaults=qf,et.defaults=cs,et.use=function(...e){return ls.use(...e),et.defaults=ls.defaults,T1(et.defaults),et},et.walkTokens=function(e,t){return ls.walkTokens(e,t)},et.parseInline=ls.parseInline,et.Parser=Wn,et.parser=Wn.parse,et.Renderer=nu,et.TextRenderer=Gf,et.Lexer=Qn,et.lexer=Qn.lex,et.Tokenizer=tu,et.Hooks=Fo,et.parse=et,et.options,et.setOptions,et.use,et.walkTokens,et.parseInline,Wn.parse,Qn.lex;const SF=/\[\^[^\]\s]{1,200}\](?!:)/,_F=/\[\^[^\]\s]{1,200}\]:/,EF=/<\/(\w+)>/,wF=/<(\w+)[\s>]/,Yf=e=>{let t=0;for(;t<e.length&&(e[t]===" "||e[t]==="	"||e[t]===`
`||e[t]==="\r");)t+=1;return t+1<e.length&&e[t]==="$"&&e[t+1]==="$"},CF=e=>{let t=e.length-1;for(;t>=0&&(e[t]===" "||e[t]==="	"||e[t]===`
`||e[t]==="\r");)t-=1;return t>=1&&e[t]==="$"&&e[t-1]==="$"},Hf=e=>{let t=0;for(let n=0;n<e.length-1;n+=1)e[n]==="$"&&e[n+1]==="$"&&(t+=1,n+=1);return t},xF=e=>{const t=SF.test(e),n=_F.test(e);if(t||n)return[e];const i=Qn.lex(e,{gfm:!0}),r=[],s=[];for(const a of i){const o=a.raw,c=r.length;if(s.length>0){if(r[c-1]+=o,a.type==="html"){const l=o.match(EF);if(l){const u=l[1];s.at(-1)===u&&s.pop()}}continue}if(a.type==="html"&&a.block){const l=o.match(wF);if(l){const u=l[1];o.includes(`</${u}>`)||s.push(u)}}if(o.trim()==="$$"&&c>0){const l=r[c-1],u=Yf(l),d=Hf(l);if(u&&d%2===1){r[c-1]=l+o;continue}}if(c>0&&CF(o)){const l=r[c-1],u=Yf(l),d=Hf(l),h=Hf(o);if(u&&d%2===1&&!Yf(o)&&h===1){r[c-1]=l+o;continue}}r.push(o)}return r},PF=/(\*\*)([^*]*?)$/,RF=/(__)([^_]*?)$/,AF=/(\*\*\*)([^*]*?)$/,IF=/(\*)([^*]*?)$/,QF=/(_)([^_]*?)$/,NF=/(`)([^`]*?)$/,DF=/(~~)([^~]*?)$/,us=/^[\s_~*`]*$/,L1=/^[\s]*[-*+][\s]+$/,MF=/[\p{L}\p{N}_]/u,LF=/^```[^`\n]*```?$/,$F=/^\*{4,}$/,wr=e=>{if(!e)return!1;const t=e.charCodeAt(0);return t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122||t===95?!0:MF.test(e)},ru=e=>{const t=(e.match(/```/g)||[]).length;return t>0&&t%2===0&&e.includes(`
`)},UF=(e,t)=>{let n=1;for(let i=t-1;i>=0;i-=1)if(e[i]==="]")n+=1;else if(e[i]==="["&&(n-=1,n===0))return i;return-1},qF=(e,t)=>{let n=1;for(let i=t+1;i<e.length;i+=1)if(e[i]==="[")n+=1;else if(e[i]==="]"&&(n-=1,n===0))return i;return-1},Kf=(e,t)=>{let n=!1,i=!1;for(let r=0;r<t;r+=1){if(e.substring(r,r+3)==="```"){i=!i,r+=2;continue}!i&&e[r]==="`"&&(n=!n)}return n||i},XF=e=>{const t=e.lastIndexOf("](");if(t!==-1&&!Kf(e,t)&&!e.substring(t+2).includes(")")){const n=UF(e,t);if(n!==-1&&!Kf(e,n)){const i=n>0&&e[n-1]==="!",r=i?n-1:n,s=e.substring(0,r),a=e.substring(n+1,t);return i?s:`${s}[${a}](streamdown:incomplete-link)`}}for(let n=e.length-1;n>=0;n-=1)if(e[n]==="["&&!Kf(e,n)){const i=n>0&&e[n-1]==="!",r=i?n-1:n;if(!e.substring(n+1).includes("]")){const s=e.substring(0,r);return i?s:`${e}](streamdown:incomplete-link)`}if(qF(e,n)===-1){const s=e.substring(0,r);return i?s:`${e}](streamdown:incomplete-link)`}}return e},FF=e=>{if(ru(e))return e;const t=e.match(PF);if(t){const n=t[2];if(!n||us.test(n))return e;const i=e.lastIndexOf(t[1]),r=e.substring(0,i).lastIndexOf(`
`),s=r===-1?0:r+1,a=e.substring(s,i);if(L1.test(a)&&n.includes(`
`))return e;if((e.match(/\*\*/g)||[]).length%2===1)return`${e}**`}return e},zF=e=>{const t=e.match(RF);if(t){const n=t[2];if(!n||us.test(n))return e;const i=e.lastIndexOf(t[1]),r=e.substring(0,i).lastIndexOf(`
`),s=r===-1?0:r+1,a=e.substring(s,i);if(L1.test(a)&&n.includes(`
`))return e;if((e.match(/__/g)||[]).length%2===1)return`${e}__`}return e},BF=e=>{let t=0;const n=e.length;for(let i=0;i<n;i+=1){if(e[i]!=="*")continue;const r=i>0?e[i-1]:"",s=i<n-1?e[i+1]:"";if(r==="\\"||r==="*"||s==="*"||r&&s&&wr(r)&&wr(s))continue;let a=0;for(let c=i-1;c>=0;c-=1)if(e[c]===`
`){a=c+1;break}let o=!0;for(let c=a;c<i;c+=1)if(e[c]!==" "&&e[c]!=="	"){o=!1;break}o&&(s===" "||s==="	")||(t+=1)}return t},ZF=e=>{if(ru(e))return e;if(e.match(IF)){let t=-1;for(let i=0;i<e.length;i+=1)if(e[i]==="*"&&e[i-1]!=="*"&&e[i+1]!=="*"&&e[i-1]!=="\\"){const r=i>0?e[i-1]:"",s=i<e.length-1?e[i+1]:"";if(r&&s&&wr(r)&&wr(s))continue;t=i;break}if(t===-1)return e;const n=e.substring(t+1);if(!n||us.test(n))return e;if(BF(e)%2===1)return`${e}*`}return e},$1=(e,t)=>{let n=!1,i=!1;for(let r=0;r<e.length&&r<t;r+=1){if(e[r]==="\\"&&e[r+1]==="$"){r+=1;continue}e[r]==="$"&&(e[r+1]==="$"?(i=!i,r+=1,n=!1):i||(n=!n))}return n||i},jF=e=>{const t=e.includes("$");let n=0;const i=e.length;for(let r=0;r<i;r+=1){if(e[r]!=="_")continue;const s=r>0?e[r-1]:"",a=r<i-1?e[r+1]:"";s!=="\\"&&(t&&$1(e,r)||s==="_"||a==="_"||s&&a&&wr(s)&&wr(a)||(n+=1))}return n},VF=e=>{if(ru(e))return e;if(e.match(QF)){let t=-1;for(let i=0;i<e.length;i+=1)if(e[i]==="_"&&e[i-1]!=="_"&&e[i+1]!=="_"&&e[i-1]!=="\\"&&!$1(e,i)){const r=i>0?e[i-1]:"",s=i<e.length-1?e[i+1]:"";if(r&&s&&wr(r)&&wr(s))continue;t=i;break}if(t===-1)return e;const n=e.substring(t+1);if(!n||us.test(n))return e;if(jF(e)%2===1){let i=e.length;for(;i>0&&e[i-1]===`
`;)i-=1;if(i<e.length){const r=e.slice(0,i),s=e.slice(i);return`${r}_${s}`}return`${e}_`}}return e},WF=(e,t)=>{const n=e.substring(t,t+3)==="```",i=t>0&&e.substring(t-1,t+2)==="```",r=t>1&&e.substring(t-2,t+1)==="```";return n||i||r},GF=e=>{let t=0;for(let n=0;n<e.length;n+=1)e[n]==="`"&&!WF(e,n)&&(t+=1);return t},YF=e=>{if(e.match(LF)&&!e.includes(`
`))return e.endsWith("``")&&!e.endsWith("```")?`${e}\``:e;const t=(e.match(/```/g)||[]).length,n=t%2===1;if(t>0&&t%2===0&&e.includes(`
`)||(e.endsWith("```\n")||e.endsWith("```"))&&t%2===0)return e;const i=e.match(NF);if(i&&!n){const r=i[2];if(!r||us.test(r))return e;if(GF(e)%2===1)return`${e}\``}return e},HF=e=>{const t=e.match(DF);if(t){const n=t[2];if(!n||us.test(n))return e;if((e.match(/~~/g)||[]).length%2===1)return`${e}~~`}return e},KF=e=>{let t=0,n=0;for(let i=0;i<e.length;i+=1)e[i]==="*"?n+=1:(n>=3&&(t+=Math.floor(n/3)),n=0);return n>=3&&(t+=Math.floor(n/3)),t},JF=e=>{if(ru(e)||$F.test(e))return e;const t=e.match(AF);if(t){const n=t[2];if(!n||us.test(n))return e;if(KF(e)%2===1)return`${e}***`}return e},ez=e=>{if(!e||typeof e!="string")return e;let t=e;const n=XF(t);return n.endsWith("](streamdown:incomplete-link)")?n:(t=n,t=JF(t),t=FF(t),t=zF(t),t=ZF(t),t=VF(t),t=YF(t),t=HF(t),t)};function tz(){if(window.location!==window.parent.location){const{ancestorOrigins:e}=document.location;if(e&&e.length)return e[0];if(document.referrer)try{return new URL(document.referrer).origin}catch{}}return document.location.origin}function nz(e){var t;const n=tz(),i=[n,...UX(e)];return[VM,[kN,{...Ka,protocols:{...Ka.protocols,src:[...((t=Ka.protocols)==null?void 0:t.src)||[],"data"]}}],[WM,{allowedImagePrefixes:["*"],allowedLinkPrefixes:i,allowedProtocols:["*"],defaultOrigin:n,allowDataImages:!0}]]}const iz=[[rU,{}],[EL,{}],[CL,{}]],su=ot({isAnimating:!1}),rz=ze(({content:e,shouldParseIncompleteMarkdown:t,markdownOptions:n})=>{const i=$e(()=>typeof e=="string"&&t?ez(e.trim()):e,[e,t]);return g(NX,{...n,children:i})},(e,t)=>e.content===t.content&&e.shouldParseIncompleteMarkdown===t.shouldParseIncompleteMarkdown&&e.markdownOptions===t.markdownOptions),sz=ze(({children:e,parseIncompleteMarkdown:t=!0,className:n,isAnimating:i=!1,linkConfig:r})=>{const s=Jo(),a=$e(()=>xF(typeof e=="string"?e:""),[e]),o=$e(()=>({components:H9,rehypePlugins:nz(r),remarkPlugins:iz}),[r]);return g(w_.Provider,{value:I9,children:g(su.Provider,{value:{isAnimating:i},children:g("div",{className:_e("markdown",n),children:a.map((c,l)=>g(rz,{content:c,shouldParseIncompleteMarkdown:t,markdownOptions:o},`${s}-block-${l}`))})})})},(e,t)=>e.children===t.children&&e.isAnimating===t.isAnimating&&e.className===t.className&&e.parseIncompleteMarkdown===t.parseIncompleteMarkdown&&e.linkConfig===t.linkConfig);function az({entry:e}){const t=TI();return g("div",{className:"pr-8",children:g(sz,{linkConfig:t.value,children:e.message})})}function oz({entry:e}){const{previewUrl:t}=Ih();return g("div",{className:ht("flex gap-2.5 transition-[opacity,transform] duration-200 data-hidden:opacity-0 data-hidden:scale-75",e.role==="user"?"justify-end pl-16 origin-top-right":"pr-16 origin-top-left"),children:[e.role==="agent"&&g("img",{src:t,alt:"AI agent avatar",className:"bg-base-border shrink-0 w-5 h-5 rounded-full"}),g("div",{dir:"auto",className:ht("px-3 py-2.5 rounded-bubble text-sm min-w-0 [overflow-wrap:break-word]",e.role==="user"?"bg-accent text-accent-primary":"bg-base-active text-base-primary"),children:e.message})]})}function cz({entry:e}){const t=st(),{lastId:n}=_t(),i=bI();return g("div",{className:"mt-3 px-8 flex flex-col",children:[i.value==="rating"&&g(oN,{}),g("div",{className:"text-xs text-base-subtle text-center transition-opacity duration-200 data-hidden:opacity-0",children:[e.role==="user"?t.user_ended_conversation:t.agent_ended_conversation,g("br",{}),n.value&&g("span",{className:"break-all",children:[t.conversation_id,": ",n.value]})]})]})}function lz({entry:e}){const t=st(),{lastId:n}=_t();return g("div",{className:"mt-2 px-8 text-xs text-base-error text-center transition-opacity duration-200 data-hidden:opacity-0",children:[t.error_occurred,g("br",{}),e.message,n.value&&g(Fe,{children:[g("br",{}),g("span",{className:"text-base-subtle break-all",children:[t.conversation_id,": ",n.value]})]})]})}function uz({entry:e}){const t=st();return g("div",{className:"mt-2 px-8 text-xs text-base-subtle text-center transition-opacity duration-200 data-hidden:opacity-0",children:e.mode==="text"?t.switched_to_text_mode:t.switched_to_voice_mode})}function dz(e,t){return e.type==="disconnection"?g(cz,{entry:e}):e.type==="mode_toggle"?g(uz,{entry:e}):e.type==="error"?g(lz,{entry:e}):e.role==="agent"?g(az,{entry:e}):g(oz,{entry:e})}function hz({entry:e,animateIn:t}){return g(Wt,{initial:!t,active:!0,children:dz(e)})}const pz=16;function fz({scrollPinned:e}){const t=ue(null),n=ue(null),i=ue(!0),r=oe(()=>{const u=t.current;u&&u.scrollTo({top:u.scrollHeight,behavior:"smooth"})},[]),s=oe(u=>{u.deltaY<0&&(e.value=!1)},[e]),a=ue(null),o=oe(u=>{const d=u.touches[0];d&&(a.current=d.clientY)},[]),c=oe(u=>{const d=u.touches[0];d&&a.current!==null&&(d.clientY>a.current&&(e.value=!1),a.current=d.clientY)},[e]),l=oe(()=>{const u=t.current;if(!u)return;const{scrollTop:d,scrollHeight:h,clientHeight:p}=u;h-d-p<=pz&&(e.value=!0)},[e]);return ke(()=>{i.current=!1;const u=n.current,d=t.current;if(!u||!d)return;let h=u.getBoundingClientRect().height;const p=new ResizeObserver(([O])=>{const m=O.contentRect.height,b=m>h;h=m,b&&e.peek()&&r()});return p.observe(u),()=>p.disconnect()},[e,r]),{scrollContainer:t,contentRef:n,handleScroll:l,handleWheel:s,handleTouchStart:o,handleTouchMove:c,firstRender:i}}function mz({scrollPinned:e,transcript:t}){const{scrollContainer:n,contentRef:i,handleScroll:r,handleWheel:s,handleTouchStart:a,handleTouchMove:o,firstRender:c}=fz({scrollPinned:e});return g("div",{ref:n,className:"px-4 pt-20 pb-4 grow overflow-y-auto z-2",onScroll:r,onWheel:s,onTouchStart:a,onTouchMove:o,children:g("div",{ref:i,className:"flex flex-col gap-6",children:t.value.map((l,u)=>g(hz,{entry:l,animateIn:!c.current},`${u}-${l.conversationIndex}`))})})}function Oz({className:e,...t}){return g("textarea",{className:ht("px-3 py-[calc(theme(spacing.2)-1px)] border text-sm text-base-primary bg-base border-base-border rounded-input focus-ring resize-none [field-sizing:content] placeholder:text-base-subtle",e),...t})}function gz(){const e=st(),{rating:t,feedbackText:n}=qh(),i=oe(r=>{n.value=r.currentTarget.value},[]);return g("div",{className:"grow flex flex-col overflow-y-auto overflow-x-hidden px-4",children:g("div",{className:"flex flex-col gap-8 min-h-full pt-4 pb-2",children:[g("div",{className:"flex flex-col items-center justify-center gap-3",children:[g(YQ,{orbColor:"var(--el-base-subtle)",circleBackgroundColor:"var(--el-base)",starColor:"var(--el-base-primary)",className:"w-20 h-22"}),t.value!==null&&g(rT,{rating:t.value,min:1,max:5}),g("div",{className:"text-center",children:[g("p",{className:"text-sm text-base-primary font-medium",children:e.thanks_for_feedback}),g("p",{className:"text-sm text-base-subtle",children:e.thanks_for_feedback_details})]})]}),g(Oz,{className:"w-full min-h-[6lh]",placeholder:e.follow_up_feedback_placeholder,rows:6,value:n,onInput:i})]})})}function vz(){const e=st(),{currentContent:t}=Xh(),{submitFeedback:n}=qh(),i=oe(()=>{n(),t.value="transcript"},[n]);return g("div",{className:"shrink-0 overflow-hidden flex p-3 items-end justify-end",children:g(Dt,{variant:"primary",onClick:i,children:e.submit})})}function U1(e,[t,n]){return Math.min(n,Math.max(t,e))}function Ct(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function Jf(e,t=[]){let n=[];function i(s,a){const o=ot(a),c=n.length;n=[...n,a];const l=d=>{var h;const{scope:p,children:O,...m}=d,b=((h=p==null?void 0:p[e])==null?void 0:h[c])||o,v=$e(()=>m,Object.values(m));return g(b.Provider,{value:v,children:O})};l.displayName=s+"Provider";function u(d,h){var p;const O=((p=h==null?void 0:h[e])==null?void 0:p[c])||o,m=fn(O);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[l,u]}const r=()=>{const s=n.map(a=>ot(a));return function(a){const o=(a==null?void 0:a[e])||s;return $e(()=>({[`__scope${e}`]:{...a,[e]:o}}),[a,o])}};return r.scopeName=e,[i,bz(r,...t)]}function bz(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const i=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(r){const s=i.reduce((a,{useScope:o,scopeName:c})=>{const l=o(r)[`__scope${c}`];return{...a,...l}},{});return $e(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}function au(e){const t=Tz(e),n=we((i,r)=>{const{children:s,...a}=i,o=mn.toArray(s),c=o.find(yz);if(c){const l=c.props.children,u=o.map(d=>d===c?mn.count(l)>1?mn.only(null):xt(l)?l.props.children:null:d);return g(t,{...a,ref:r,children:xt(l)?Lr(l,void 0,u):null})}return g(t,{...a,ref:r,children:s})});return n.displayName=`${e}.Slot`,n}function Tz(e){const t=we((n,i)=>{const{children:r,...s}=n;if(xt(r)){const a=_z(r),o=Sz(s,r.props);return r.type!==Fe&&(o.ref=i?Nh(i,a):a),Lr(r,o)}return mn.count(r)>1?mn.only(null):null});return t.displayName=`${e}.SlotClone`,t}var kz=Symbol("radix.slottable");function yz(e){return xt(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===kz}function Sz(e,t){const n={...t};for(const i in t){const r=e[i],s=t[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{const o=s(...a);return r(...a),o}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...e,...n}}function _z(e){var t,n;let i=(t=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:t.get,r=i&&"isReactWarning"in i&&i.isReactWarning;return r?e.ref:(i=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,r=i&&"isReactWarning"in i&&i.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Ez(e){const t=e+"CollectionProvider",[n,i]=Jf(t),[r,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=m=>{const{scope:b,children:v}=m,k=_i.useRef(null),y=_i.useRef(new Map).current;return g(r,{scope:b,itemMap:y,collectionRef:k,children:v})};a.displayName=t;const o=e+"CollectionSlot",c=au(o),l=_i.forwardRef((m,b)=>{const{scope:v,children:k}=m,y=s(o,v),T=Ft(b,y.collectionRef);return g(c,{ref:T,children:k})});l.displayName=o;const u=e+"CollectionItemSlot",d="data-radix-collection-item",h=au(u),p=_i.forwardRef((m,b)=>{const{scope:v,children:k,...y}=m,T=_i.useRef(null),S=Ft(b,T),_=s(u,v);return _i.useEffect(()=>(_.itemMap.set(T,{ref:T,...y}),()=>void _.itemMap.delete(T))),g(h,{[d]:"",ref:S,children:k})});p.displayName=u;function O(m){const b=s(e+"CollectionConsumer",m);return _i.useCallback(()=>{const v=b.collectionRef.current;if(!v)return[];const k=Array.from(v.querySelectorAll(`[${d}]`));return Array.from(b.itemMap.values()).sort((y,T)=>k.indexOf(y.ref.current)-k.indexOf(T.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:l,ItemSlot:p},O,i]}var wz=ot(void 0);function Cz(e){const t=fn(wz);return e||t||"ltr"}var xz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],yt=xz.reduce((e,t)=>{const n=au(`Primitive.${t}`),i=we((r,s)=>{const{asChild:a,...o}=r,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g(c,{...o,ref:s})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function Pz(e,t){e&&ic(()=>e.dispatchEvent(t))}function ds(e){const t=ue(e);return ke(()=>{t.current=e}),$e(()=>(...n)=>{var i;return(i=t.current)==null?void 0:i.call(t,...n)},[])}function Rz(e,t=globalThis==null?void 0:globalThis.document){const n=ds(e);ke(()=>{const i=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[n,t])}var Az="DismissableLayer",em="dismissableLayer.update",Iz="dismissableLayer.pointerDownOutside",Qz="dismissableLayer.focusOutside",q1,X1=ot({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),F1=we((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...c}=e,l=fn(X1),[u,d]=pe(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=pe({}),O=Ft(t,x=>d(x)),m=Array.from(l.layers),[b]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(b),k=u?m.indexOf(u):-1,y=l.layersWithOutsidePointerEventsDisabled.size>0,T=k>=v,S=Mz(x=>{const N=x.target,L=[...l.branches].some(w=>w.contains(N));!T||L||(r==null||r(x),a==null||a(x),x.defaultPrevented||o==null||o())},h),_=Lz(x=>{const N=x.target;[...l.branches].some(L=>L.contains(N))||(s==null||s(x),a==null||a(x),x.defaultPrevented||o==null||o())},h);return Rz(x=>{k===l.layers.size-1&&(i==null||i(x),!x.defaultPrevented&&o&&(x.preventDefault(),o()))},h),ke(()=>{if(u)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(q1=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),z1(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=q1)}},[u,h,n,l]),ke(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),z1())},[u,l]),ke(()=>{const x=()=>p({});return document.addEventListener(em,x),()=>document.removeEventListener(em,x)},[]),g(yt.div,{...c,ref:O,style:{pointerEvents:y?T?"auto":"none":void 0,...e.style},onFocusCapture:Ct(e.onFocusCapture,_.onFocusCapture),onBlurCapture:Ct(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Ct(e.onPointerDownCapture,S.onPointerDownCapture)})});F1.displayName=Az;var Nz="DismissableLayerBranch",Dz=we((e,t)=>{const n=fn(X1),i=ue(null),r=Ft(t,i);return ke(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),g(yt.div,{...e,ref:r})});Dz.displayName=Nz;function Mz(e,t=globalThis==null?void 0:globalThis.document){const n=ds(e),i=ue(!1),r=ue(()=>{});return ke(()=>{const s=o=>{if(o.target&&!i.current){let c=function(){B1(Iz,n,l,{discrete:!0})};const l={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=c,t.addEventListener("click",r.current,{once:!0})):c()}else t.removeEventListener("click",r.current);i.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>i.current=!0}}function Lz(e,t=globalThis==null?void 0:globalThis.document){const n=ds(e),i=ue(!1);return ke(()=>{const r=s=>{s.target&&!i.current&&B1(Qz,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function z1(){const e=new CustomEvent(em);document.dispatchEvent(e)}function B1(e,t,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),i?Pz(r,s):r.dispatchEvent(s)}var tm=0;function $z(){ke(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Z1()),document.body.insertAdjacentElement("beforeend",e[1]??Z1()),tm++,()=>{tm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),tm--}},[])}function Z1(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var nm="focusScope.autoFocusOnMount",im="focusScope.autoFocusOnUnmount",j1={bubbles:!1,cancelable:!0},Uz="FocusScope",V1=we((e,t)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...a}=e,[o,c]=pe(null),l=ds(r),u=ds(s),d=ue(null),h=Ft(t,m=>c(m)),p=ue({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;ke(()=>{if(i){let m=function(y){if(p.paused||!o)return;const T=y.target;o.contains(T)?d.current=T:Cr(d.current,{select:!0})},b=function(y){if(p.paused||!o)return;const T=y.relatedTarget;T!==null&&(o.contains(T)||Cr(d.current,{select:!0}))},v=function(y){if(document.activeElement===document.body)for(const T of y)T.removedNodes.length>0&&Cr(o)};document.addEventListener("focusin",m),document.addEventListener("focusout",b);const k=new MutationObserver(v);return o&&k.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",b),k.disconnect()}}},[i,o,p.paused]),ke(()=>{if(o){Y1.add(p);const m=document.activeElement;if(!o.contains(m)){const b=new CustomEvent(nm,j1);o.addEventListener(nm,l),o.dispatchEvent(b),b.defaultPrevented||(qz(Zz(W1(o)),{select:!0}),document.activeElement===m&&Cr(o))}return()=>{o.removeEventListener(nm,l),setTimeout(()=>{const b=new CustomEvent(im,j1);o.addEventListener(im,u),o.dispatchEvent(b),b.defaultPrevented||Cr(m??document.body,{select:!0}),o.removeEventListener(im,u),Y1.remove(p)},0)}}},[o,l,u,p]);const O=oe(m=>{if(!n&&!i||p.paused)return;const b=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(b&&v){const k=m.currentTarget,[y,T]=Xz(k);y&&T?!m.shiftKey&&v===T?(m.preventDefault(),n&&Cr(y,{select:!0})):m.shiftKey&&v===y&&(m.preventDefault(),n&&Cr(T,{select:!0})):v===k&&m.preventDefault()}},[n,i,p.paused]);return g(yt.div,{tabIndex:-1,...a,ref:h,onKeyDown:O})});V1.displayName=Uz;function qz(e,{select:t=!1}={}){const n=document.activeElement;for(const i of e)if(Cr(i,{select:t}),document.activeElement!==n)return}function Xz(e){const t=W1(e),n=G1(t,e),i=G1(t.reverse(),e);return[n,i]}function W1(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function G1(e,t){for(const n of e)if(!Fz(n,{upTo:t}))return n}function Fz(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function zz(e){return e instanceof HTMLInputElement&&"select"in e}function Cr(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&zz(e)&&t&&e.select()}}var Y1=Bz();function Bz(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=H1(e,t),e.unshift(t)},remove(t){var n;e=H1(e,t),(n=e[0])==null||n.resume()}}}function H1(e,t){const n=[...e],i=n.indexOf(t);return i!==-1&&n.splice(i,1),n}function Zz(e){return e.filter(t=>t.tagName!=="A")}var pn=globalThis!=null&&globalThis.document?Si:()=>{},jz=ed[" useId ".trim().toString()]||(()=>{}),Vz=0;function rm(e){const[t,n]=pe(jz());return pn(()=>{n(i=>i??String(Vz++))},[e]),t?`radix-${t}`:""}const Wz=["top","right","bottom","left"],xr=Math.min,Sn=Math.max,ou=Math.round,cu=Math.floor,mi=e=>({x:e,y:e}),Gz={left:"right",right:"left",bottom:"top",top:"bottom"},Yz={start:"end",end:"start"};function sm(e,t,n){return Sn(e,xr(t,n))}function Wi(e,t){return typeof e=="function"?e(t):e}function Gi(e){return e.split("-")[0]}function aa(e){return e.split("-")[1]}function am(e){return e==="x"?"y":"x"}function om(e){return e==="y"?"height":"width"}const Hz=new Set(["top","bottom"]);function Oi(e){return Hz.has(Gi(e))?"y":"x"}function cm(e){return am(Oi(e))}function Kz(e,t,n){n===void 0&&(n=!1);const i=aa(e),r=cm(e),s=om(r);let a=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=lu(a)),[a,lu(a)]}function Jz(e){const t=lu(e);return[lm(e),t,lm(t)]}function lm(e){return e.replace(/start|end/g,t=>Yz[t])}const K1=["left","right"],J1=["right","left"],eB=["top","bottom"],tB=["bottom","top"];function nB(e,t,n){switch(e){case"top":case"bottom":return n?t?J1:K1:t?K1:J1;case"left":case"right":return t?eB:tB;default:return[]}}function iB(e,t,n,i){const r=aa(e);let s=nB(Gi(e),n==="start",i);return r&&(s=s.map(a=>a+"-"+r),t&&(s=s.concat(s.map(lm)))),s}function lu(e){return e.replace(/left|right|bottom|top/g,t=>Gz[t])}function rB(e){return{top:0,right:0,bottom:0,left:0,...e}}function eE(e){return typeof e!="number"?rB(e):{top:e,right:e,bottom:e,left:e}}function uu(e){const{x:t,y:n,width:i,height:r}=e;return{width:i,height:r,top:n,left:t,right:t+i,bottom:n+r,x:t,y:n}}function tE(e,t,n){let{reference:i,floating:r}=e;const s=Oi(t),a=cm(t),o=om(a),c=Gi(t),l=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,h=i[o]/2-r[o]/2;let p;switch(c){case"top":p={x:u,y:i.y-r.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-r.width,y:d};break;default:p={x:i.x,y:i.y}}switch(aa(t)){case"start":p[a]-=h*(n&&l?-1:1);break;case"end":p[a]+=h*(n&&l?-1:1);break}return p}const sB=async(e,t,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:a}=n,o=s.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let l=await a.getElementRects({reference:e,floating:t,strategy:r}),{x:u,y:d}=tE(l,i,c),h=i,p={},O=0;for(let m=0;m<o.length;m++){const{name:b,fn:v}=o[m],{x:k,y,data:T,reset:S}=await v({x:u,y:d,initialPlacement:i,placement:h,strategy:r,middlewareData:p,rects:l,platform:a,elements:{reference:e,floating:t}});u=k??u,d=y??d,p={...p,[b]:{...p[b],...T}},S&&O<=50&&(O++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(l=S.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:r}):S.rects),{x:u,y:d}=tE(l,h,c)),m=-1)}return{x:u,y:d,placement:h,strategy:r,middlewareData:p}};async function zo(e,t){var n;t===void 0&&(t={});const{x:i,y:r,platform:s,rects:a,elements:o,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=Wi(t,e),O=eE(p),m=o[h?d==="floating"?"reference":"floating":d],b=uu(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(m)))==null||n?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:l,rootBoundary:u,strategy:c})),v=d==="floating"?{x:i,y:r,width:a.floating.width,height:a.floating.height}:a.reference,k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),y=await(s.isElement==null?void 0:s.isElement(k))?await(s.getScale==null?void 0:s.getScale(k))||{x:1,y:1}:{x:1,y:1},T=uu(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:k,strategy:c}):v);return{top:(b.top-T.top+O.top)/y.y,bottom:(T.bottom-b.bottom+O.bottom)/y.y,left:(b.left-T.left+O.left)/y.x,right:(T.right-b.right+O.right)/y.x}}const aB=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:i,placement:r,rects:s,platform:a,elements:o,middlewareData:c}=t,{element:l,padding:u=0}=Wi(e,t)||{};if(l==null)return{};const d=eE(u),h={x:n,y:i},p=cm(r),O=om(p),m=await a.getDimensions(l),b=p==="y",v=b?"top":"left",k=b?"bottom":"right",y=b?"clientHeight":"clientWidth",T=s.reference[O]+s.reference[p]-h[p]-s.floating[O],S=h[p]-s.reference[p],_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l));let x=_?_[y]:0;(!x||!await(a.isElement==null?void 0:a.isElement(_)))&&(x=o.floating[y]||s.floating[O]);const N=T/2-S/2,L=x/2-m[O]/2-1,w=xr(d[v],L),D=xr(d[k],L),M=w,B=x-m[O]-D,F=x/2-m[O]/2+N,q=sm(M,F,B),H=!c.arrow&&aa(r)!=null&&F!==q&&s.reference[O]/2-(F<M?w:D)-m[O]/2<0,se=H?F<M?F-M:F-B:0;return{[p]:h[p]+se,data:{[p]:q,centerOffset:F-q-se,...H&&{alignmentOffset:se}},reset:H}}}),oB=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:r,middlewareData:s,rects:a,initialPlacement:o,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:O="none",flipAlignment:m=!0,...b}=Wi(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Gi(r),k=Oi(o),y=Gi(o)===o,T=await(c.isRTL==null?void 0:c.isRTL(l.floating)),S=h||(y||!m?[lu(o)]:Jz(o)),_=O!=="none";!h&&_&&S.push(...iB(o,m,O,T));const x=[o,...S],N=await zo(t,b),L=[];let w=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&L.push(N[v]),d){const F=Kz(r,a,T);L.push(N[F[0]],N[F[1]])}if(w=[...w,{placement:r,overflows:L}],!L.every(F=>F<=0)){var D,M;const F=(((D=s.flip)==null?void 0:D.index)||0)+1,q=x[F];if(q&&(!(d==="alignment"&&k!==Oi(q))||w.every(se=>Oi(se.placement)===k?se.overflows[0]>0:!0)))return{data:{index:F,overflows:w},reset:{placement:q}};let H=(M=w.filter(se=>se.overflows[0]<=0).sort((se,Z)=>se.overflows[1]-Z.overflows[1])[0])==null?void 0:M.placement;if(!H)switch(p){case"bestFit":{var B;const se=(B=w.filter(Z=>{if(_){const de=Oi(Z.placement);return de===k||de==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(de=>de>0).reduce((de,I)=>de+I,0)]).sort((Z,de)=>Z[1]-de[1])[0])==null?void 0:B[0];se&&(H=se);break}case"initialPlacement":H=o;break}if(r!==H)return{reset:{placement:H}}}return{}}}};function nE(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function iE(e){return Wz.some(t=>e[t]>=0)}const cB=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:i="referenceHidden",...r}=Wi(e,t);switch(i){case"referenceHidden":{const s=await zo(t,{...r,elementContext:"reference"}),a=nE(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:iE(a)}}}case"escaped":{const s=await zo(t,{...r,altBoundary:!0}),a=nE(s,n.floating);return{data:{escapedOffsets:a,escaped:iE(a)}}}default:return{}}}}},rE=new Set(["left","top"]);async function lB(e,t){const{placement:n,platform:i,elements:r}=e,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),a=Gi(n),o=aa(n),c=Oi(n)==="y",l=rE.has(a)?-1:1,u=s&&c?-1:1,d=Wi(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:O}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof O=="number"&&(p=o==="end"?O*-1:O),c?{x:p*u,y:h*l}:{x:h*l,y:p*u}}const uB=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,i;const{x:r,y:s,placement:a,middlewareData:o}=t,c=await lB(t,e);return a===((n=o.offset)==null?void 0:n.placement)&&(i=o.arrow)!=null&&i.alignmentOffset?{}:{x:r+c.x,y:s+c.y,data:{...c,placement:a}}}}},dB=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:r}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:b=>{let{x:v,y:k}=b;return{x:v,y:k}}},...c}=Wi(e,t),l={x:n,y:i},u=await zo(t,c),d=Oi(Gi(r)),h=am(d);let p=l[h],O=l[d];if(s){const b=h==="y"?"top":"left",v=h==="y"?"bottom":"right",k=p+u[b],y=p-u[v];p=sm(k,p,y)}if(a){const b=d==="y"?"top":"left",v=d==="y"?"bottom":"right",k=O+u[b],y=O-u[v];O=sm(k,O,y)}const m=o.fn({...t,[h]:p,[d]:O});return{...m,data:{x:m.x-n,y:m.y-i,enabled:{[h]:s,[d]:a}}}}}},hB=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:i,placement:r,rects:s,middlewareData:a}=t,{offset:o=0,mainAxis:c=!0,crossAxis:l=!0}=Wi(e,t),u={x:n,y:i},d=Oi(r),h=am(d);let p=u[h],O=u[d];const m=Wi(o,t),b=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const y=h==="y"?"height":"width",T=s.reference[h]-s.floating[y]+b.mainAxis,S=s.reference[h]+s.reference[y]-b.mainAxis;p<T?p=T:p>S&&(p=S)}if(l){var v,k;const y=h==="y"?"width":"height",T=rE.has(Gi(r)),S=s.reference[d]-s.floating[y]+(T&&((v=a.offset)==null?void 0:v[d])||0)+(T?0:b.crossAxis),_=s.reference[d]+s.reference[y]+(T?0:((k=a.offset)==null?void 0:k[d])||0)-(T?b.crossAxis:0);O<S?O=S:O>_&&(O=_)}return{[h]:p,[d]:O}}}},pB=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,i;const{placement:r,rects:s,platform:a,elements:o}=t,{apply:c=()=>{},...l}=Wi(e,t),u=await zo(t,l),d=Gi(r),h=aa(r),p=Oi(r)==="y",{width:O,height:m}=s.floating;let b,v;d==="top"||d==="bottom"?(b=d,v=h===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(v=d,b=h==="end"?"top":"bottom");const k=m-u.top-u.bottom,y=O-u.left-u.right,T=xr(m-u[b],k),S=xr(O-u[v],y),_=!t.middlewareData.shift;let x=T,N=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(N=y),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(x=k),_&&!h){const w=Sn(u.left,0),D=Sn(u.right,0),M=Sn(u.top,0),B=Sn(u.bottom,0);p?N=O-2*(w!==0||D!==0?w+D:Sn(u.left,u.right)):x=m-2*(M!==0||B!==0?M+B:Sn(u.top,u.bottom))}await c({...t,availableWidth:N,availableHeight:x});const L=await a.getDimensions(o.floating);return O!==L.width||m!==L.height?{reset:{rects:!0}}:{}}}};function du(){return typeof window<"u"}function oa(e){return sE(e)?(e.nodeName||"").toLowerCase():"#document"}function _n(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gi(e){var t;return(t=(sE(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function sE(e){return du()?e instanceof Node||e instanceof _n(e).Node:!1}function Gn(e){return du()?e instanceof Element||e instanceof _n(e).Element:!1}function vi(e){return du()?e instanceof HTMLElement||e instanceof _n(e).HTMLElement:!1}function aE(e){return!du()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof _n(e).ShadowRoot}const fB=new Set(["inline","contents"]);function Bo(e){const{overflow:t,overflowX:n,overflowY:i,display:r}=Yn(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!fB.has(r)}const mB=new Set(["table","td","th"]);function OB(e){return mB.has(oa(e))}const gB=[":popover-open",":modal"];function hu(e){return gB.some(t=>{try{return e.matches(t)}catch{return!1}})}const vB=["transform","translate","scale","rotate","perspective"],bB=["transform","translate","scale","rotate","perspective","filter"],TB=["paint","layout","strict","content"];function um(e){const t=dm(),n=Gn(e)?Yn(e):e;return vB.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||bB.some(i=>(n.willChange||"").includes(i))||TB.some(i=>(n.contain||"").includes(i))}function kB(e){let t=Pr(e);for(;vi(t)&&!ca(t);){if(um(t))return t;if(hu(t))return null;t=Pr(t)}return null}function dm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const yB=new Set(["html","body","#document"]);function ca(e){return yB.has(oa(e))}function Yn(e){return _n(e).getComputedStyle(e)}function pu(e){return Gn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Pr(e){if(oa(e)==="html")return e;const t=e.assignedSlot||e.parentNode||aE(e)&&e.host||gi(e);return aE(t)?t.host:t}function oE(e){const t=Pr(e);return ca(t)?e.ownerDocument?e.ownerDocument.body:e.body:vi(t)&&Bo(t)?t:oE(t)}function Zo(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=oE(e),s=r===((i=e.ownerDocument)==null?void 0:i.body),a=_n(r);if(s){const o=hm(a);return t.concat(a,a.visualViewport||[],Bo(r)?r:[],o&&n?Zo(o):[])}return t.concat(r,Zo(r,[],n))}function hm(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function cE(e){const t=Yn(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const r=vi(e),s=r?e.offsetWidth:n,a=r?e.offsetHeight:i,o=ou(n)!==s||ou(i)!==a;return o&&(n=s,i=a),{width:n,height:i,$:o}}function pm(e){return Gn(e)?e:e.contextElement}function la(e){const t=pm(e);if(!vi(t))return mi(1);const n=t.getBoundingClientRect(),{width:i,height:r,$:s}=cE(t);let a=(s?ou(n.width):n.width)/i,o=(s?ou(n.height):n.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const SB=mi(0);function lE(e){const t=_n(e);return!dm()||!t.visualViewport?SB:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function _B(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==_n(e)?!1:t}function hs(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=pm(e);let a=mi(1);t&&(i?Gn(i)&&(a=la(i)):a=la(e));const o=_B(s,n,i)?lE(s):mi(0);let c=(r.left+o.x)/a.x,l=(r.top+o.y)/a.y,u=r.width/a.x,d=r.height/a.y;if(s){const h=_n(s),p=i&&Gn(i)?_n(i):i;let O=h,m=hm(O);for(;m&&i&&p!==O;){const b=la(m),v=m.getBoundingClientRect(),k=Yn(m),y=v.left+(m.clientLeft+parseFloat(k.paddingLeft))*b.x,T=v.top+(m.clientTop+parseFloat(k.paddingTop))*b.y;c*=b.x,l*=b.y,u*=b.x,d*=b.y,c+=y,l+=T,O=_n(m),m=hm(O)}}return uu({width:u,height:d,x:c,y:l})}function fu(e,t){const n=pu(e).scrollLeft;return t?t.left+n:hs(gi(e)).left+n}function uE(e,t){const n=e.getBoundingClientRect(),i=n.left+t.scrollLeft-fu(e,n),r=n.top+t.scrollTop;return{x:i,y:r}}function EB(e){let{elements:t,rect:n,offsetParent:i,strategy:r}=e;const s=r==="fixed",a=gi(i),o=t?hu(t.floating):!1;if(i===a||o&&s)return n;let c={scrollLeft:0,scrollTop:0},l=mi(1);const u=mi(0),d=vi(i);if((d||!d&&!s)&&((oa(i)!=="body"||Bo(a))&&(c=pu(i)),vi(i))){const p=hs(i);l=la(i),u.x=p.x+i.clientLeft,u.y=p.y+i.clientTop}const h=a&&!d&&!s?uE(a,c):mi(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+h.x,y:n.y*l.y-c.scrollTop*l.y+u.y+h.y}}function wB(e){return Array.from(e.getClientRects())}function CB(e){const t=gi(e),n=pu(e),i=e.ownerDocument.body,r=Sn(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),s=Sn(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let a=-n.scrollLeft+fu(e);const o=-n.scrollTop;return Yn(i).direction==="rtl"&&(a+=Sn(t.clientWidth,i.clientWidth)-r),{width:r,height:s,x:a,y:o}}const dE=25;function xB(e,t){const n=_n(e),i=gi(e),r=n.visualViewport;let s=i.clientWidth,a=i.clientHeight,o=0,c=0;if(r){s=r.width,a=r.height;const u=dm();(!u||u&&t==="fixed")&&(o=r.offsetLeft,c=r.offsetTop)}const l=fu(i);if(l<=0){const u=i.ownerDocument,d=u.body,h=getComputedStyle(d),p=u.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,O=Math.abs(i.clientWidth-d.clientWidth-p);O<=dE&&(s-=O)}else l<=dE&&(s+=l);return{width:s,height:a,x:o,y:c}}const PB=new Set(["absolute","fixed"]);function RB(e,t){const n=hs(e,!0,t==="fixed"),i=n.top+e.clientTop,r=n.left+e.clientLeft,s=vi(e)?la(e):mi(1),a=e.clientWidth*s.x,o=e.clientHeight*s.y,c=r*s.x,l=i*s.y;return{width:a,height:o,x:c,y:l}}function hE(e,t,n){let i;if(t==="viewport")i=xB(e,n);else if(t==="document")i=CB(gi(e));else if(Gn(t))i=RB(t,n);else{const r=lE(e);i={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return uu(i)}function pE(e,t){const n=Pr(e);return n===t||!Gn(n)||ca(n)?!1:Yn(n).position==="fixed"||pE(n,t)}function AB(e,t){const n=t.get(e);if(n)return n;let i=Zo(e,[],!1).filter(o=>Gn(o)&&oa(o)!=="body"),r=null;const s=Yn(e).position==="fixed";let a=s?Pr(e):e;for(;Gn(a)&&!ca(a);){const o=Yn(a),c=um(a);!c&&o.position==="fixed"&&(r=null),(s?!c&&!r:!c&&o.position==="static"&&r&&PB.has(r.position)||Bo(a)&&!c&&pE(e,a))?i=i.filter(l=>l!==a):r=o,a=Pr(a)}return t.set(e,i),i}function IB(e){let{element:t,boundary:n,rootBoundary:i,strategy:r}=e;const s=[...n==="clippingAncestors"?hu(t)?[]:AB(t,this._c):[].concat(n),i],a=s[0],o=s.reduce((c,l)=>{const u=hE(t,l,r);return c.top=Sn(u.top,c.top),c.right=xr(u.right,c.right),c.bottom=xr(u.bottom,c.bottom),c.left=Sn(u.left,c.left),c},hE(t,a,r));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}}function QB(e){const{width:t,height:n}=cE(e);return{width:t,height:n}}function NB(e,t,n){const i=vi(t),r=gi(t),s=n==="fixed",a=hs(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const c=mi(0);function l(){c.x=fu(r)}if(i||!i&&!s)if((oa(t)!=="body"||Bo(r))&&(o=pu(t)),i){const p=hs(t,!0,s,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else r&&l();s&&!i&&r&&l();const u=r&&!i&&!s?uE(r,o):mi(0),d=a.left+o.scrollLeft-c.x-u.x,h=a.top+o.scrollTop-c.y-u.y;return{x:d,y:h,width:a.width,height:a.height}}function fm(e){return Yn(e).position==="static"}function fE(e,t){if(!vi(e)||Yn(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return gi(e)===n&&(n=n.ownerDocument.body),n}function mE(e,t){const n=_n(e);if(hu(e))return n;if(!vi(e)){let r=Pr(e);for(;r&&!ca(r);){if(Gn(r)&&!fm(r))return r;r=Pr(r)}return n}let i=fE(e,t);for(;i&&OB(i)&&fm(i);)i=fE(i,t);return i&&ca(i)&&fm(i)&&!um(i)?n:i||kB(e)||n}const DB=async function(e){const t=this.getOffsetParent||mE,n=this.getDimensions,i=await n(e.floating);return{reference:NB(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function MB(e){return Yn(e).direction==="rtl"}const LB={convertOffsetParentRelativeRectToViewportRelativeRect:EB,getDocumentElement:gi,getClippingRect:IB,getOffsetParent:mE,getElementRects:DB,getClientRects:wB,getDimensions:QB,getScale:la,isElement:Gn,isRTL:MB};function OE(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function $B(e,t){let n=null,i;const r=gi(e);function s(){var o;clearTimeout(i),(o=n)==null||o.disconnect(),n=null}function a(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),s();const l=e.getBoundingClientRect(),{left:u,top:d,width:h,height:p}=l;if(o||t(),!h||!p)return;const O=cu(d),m=cu(r.clientWidth-(u+h)),b=cu(r.clientHeight-(d+p)),v=cu(u),k={rootMargin:-O+"px "+-m+"px "+-b+"px "+-v+"px",threshold:Sn(0,xr(1,c))||1};let y=!0;function T(S){const _=S[0].intersectionRatio;if(_!==c){if(!y)return a();_?a(!1,_):i=setTimeout(()=>{a(!1,1e-7)},1e3)}_===1&&!OE(l,e.getBoundingClientRect())&&a(),y=!1}try{n=new IntersectionObserver(T,{...k,root:r.ownerDocument})}catch{n=new IntersectionObserver(T,k)}n.observe(e)}return a(!0),s}function UB(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=i,l=pm(e),u=r||s?[...l?Zo(l):[],...Zo(t)]:[];u.forEach(v=>{r&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=l&&o?$B(l,n):null;let h=-1,p=null;a&&(p=new ResizeObserver(v=>{let[k]=v;k&&k.target===l&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var y;(y=p)==null||y.observe(t)})),n()}),l&&!c&&p.observe(l),p.observe(t));let O,m=c?hs(e):null;c&&b();function b(){const v=hs(e);m&&!OE(m,v)&&n(),m=v,O=requestAnimationFrame(b)}return n(),()=>{var v;u.forEach(k=>{r&&k.removeEventListener("scroll",n),s&&k.removeEventListener("resize",n)}),d==null||d(),(v=p)==null||v.disconnect(),p=null,c&&cancelAnimationFrame(O)}}const qB=uB,XB=dB,FB=oB,zB=pB,BB=cB,gE=aB,ZB=hB,jB=(e,t,n)=>{const i=new Map,r={platform:LB,...n},s={...r.platform,_c:i};return sB(e,t,{...r,platform:s})};var VB=typeof document<"u",WB=function(){},mu=VB?Si:WB;function Ou(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,i,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(i=n;i--!==0;)if(!Ou(e[i],t[i]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&e.$$typeof)&&!Ou(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function vE(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function bE(e,t){const n=vE(e);return Math.round(t*n)/n}function mm(e){const t=ue(e);return mu(()=>{t.current=e}),t}function GB(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:c,open:l}=e,[u,d]=pe({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=pe(i);Ou(h,i)||p(i);const[O,m]=pe(null),[b,v]=pe(null),k=oe(Z=>{Z!==_.current&&(_.current=Z,m(Z))},[]),y=oe(Z=>{Z!==x.current&&(x.current=Z,v(Z))},[]),T=s||O,S=a||b,_=ue(null),x=ue(null),N=ue(u),L=c!=null,w=mm(c),D=mm(r),M=mm(l),B=oe(()=>{if(!_.current||!x.current)return;const Z={placement:t,strategy:n,middleware:h};D.current&&(Z.platform=D.current),jB(_.current,x.current,Z).then(de=>{const I={...de,isPositioned:M.current!==!1};F.current&&!Ou(N.current,I)&&(N.current=I,ic(()=>{d(I)}))})},[h,t,n,D,M]);mu(()=>{l===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(Z=>({...Z,isPositioned:!1})))},[l]);const F=ue(!1);mu(()=>(F.current=!0,()=>{F.current=!1}),[]),mu(()=>{if(T&&(_.current=T),S&&(x.current=S),T&&S){if(w.current)return w.current(T,S,B);B()}},[T,S,B,w,L]);const q=$e(()=>({reference:_,floating:x,setReference:k,setFloating:y}),[k,y]),H=$e(()=>({reference:T,floating:S}),[T,S]),se=$e(()=>{const Z={position:n,left:0,top:0};if(!H.floating)return Z;const de=bE(H.floating,u.x),I=bE(H.floating,u.y);return o?{...Z,transform:"translate("+de+"px, "+I+"px)",...vE(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:de,top:I}},[n,o,H.floating,u.x,u.y]);return $e(()=>({...u,update:B,refs:q,elements:H,floatingStyles:se}),[u,B,q,H,se])}const YB=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:i,padding:r}=typeof e=="function"?e(n):e;return i&&t(i)?i.current!=null?gE({element:i.current,padding:r}).fn(n):{}:i?gE({element:i,padding:r}).fn(n):{}}}},HB=(e,t)=>({...qB(e),options:[e,t]}),KB=(e,t)=>({...XB(e),options:[e,t]}),JB=(e,t)=>({...ZB(e),options:[e,t]}),eZ=(e,t)=>({...FB(e),options:[e,t]}),tZ=(e,t)=>({...zB(e),options:[e,t]}),nZ=(e,t)=>({...BB(e),options:[e,t]}),iZ=(e,t)=>({...YB(e),options:[e,t]});var rZ="Arrow",TE=we((e,t)=>{const{children:n,width:i=10,height:r=5,...s}=e;return g(yt.svg,{...s,ref:t,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:g("polygon",{points:"0,0 30,0 15,10"})})});TE.displayName=rZ;var sZ=TE;function aZ(e){const[t,n]=pe(void 0);return pn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let a,o;if("borderBoxSize"in s){const c=s.borderBoxSize,l=Array.isArray(c)?c[0]:c;a=l.inlineSize,o=l.blockSize}else a=e.offsetWidth,o=e.offsetHeight;n({width:a,height:o})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else n(void 0)},[e]),t}var Om="Popper",[kE,yE]=Jf(Om),[oZ,SE]=kE(Om),_E=e=>{const{__scopePopper:t,children:n}=e,[i,r]=pe(null);return g(oZ,{scope:t,anchor:i,onAnchorChange:r,children:n})};_E.displayName=Om;var EE="PopperAnchor",wE=we((e,t)=>{const{__scopePopper:n,virtualRef:i,...r}=e,s=SE(EE,n),a=ue(null),o=Ft(t,a),c=ue(null);return ke(()=>{const l=c.current;c.current=(i==null?void 0:i.current)||a.current,l!==c.current&&s.onAnchorChange(c.current)}),i?null:g(yt.div,{...r,ref:o})});wE.displayName=EE;var gm="PopperContent",[cZ,lZ]=kE(gm),CE=we((e,t)=>{var n,i,r,s,a,o;const{__scopePopper:c,side:l="bottom",sideOffset:u=0,align:d="center",alignOffset:h=0,arrowPadding:p=0,avoidCollisions:O=!0,collisionBoundary:m=[],collisionPadding:b=0,sticky:v="partial",hideWhenDetached:k=!1,updatePositionStrategy:y="optimized",onPlaced:T,...S}=e,_=SE(gm,c),[x,N]=pe(null),L=Ft(t,an=>N(an)),[w,D]=pe(null),M=aZ(w),B=(M==null?void 0:M.width)??0,F=(M==null?void 0:M.height)??0,q=l+(d!=="center"?"-"+d:""),H=typeof b=="number"?b:{top:0,right:0,bottom:0,left:0,...b},se=Array.isArray(m)?m:[m],Z=se.length>0,de={padding:H,boundary:se.filter(dZ),altBoundary:Z},{refs:I,floatingStyles:De,placement:Me,isPositioned:R,middlewareData:fe}=GB({strategy:"fixed",placement:q,whileElementsMounted:(...an)=>UB(...an,{animationFrame:y==="always"}),elements:{reference:_.anchor},middleware:[HB({mainAxis:u+F,alignmentAxis:h}),O&&KB({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?JB():void 0,...de}),O&&eZ({...de}),tZ({...de,apply:({elements:an,rects:ms,availableWidth:Ir,availableHeight:Qr})=>{const{width:Pu,height:Nm}=ms.reference,Os=an.floating.style;Os.setProperty("--radix-popper-available-width",`${Ir}px`),Os.setProperty("--radix-popper-available-height",`${Qr}px`),Os.setProperty("--radix-popper-anchor-width",`${Pu}px`),Os.setProperty("--radix-popper-anchor-height",`${Nm}px`)}}),w&&iZ({element:w,padding:p}),hZ({arrowWidth:B,arrowHeight:F}),k&&nZ({strategy:"referenceHidden",...de})]}),[Ye,Qe]=RE(Me),ae=ds(T);pn(()=>{R&&(ae==null||ae())},[R,ae]);const Le=(n=fe.arrow)==null?void 0:n.x,Xe=(i=fe.arrow)==null?void 0:i.y,Te=((r=fe.arrow)==null?void 0:r.centerOffset)!==0,[je,it]=pe();return pn(()=>{x&&it(window.getComputedStyle(x).zIndex)},[x]),g("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...De,transform:R?De.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:je,"--radix-popper-transform-origin":[(s=fe.transformOrigin)==null?void 0:s.x,(a=fe.transformOrigin)==null?void 0:a.y].join(" "),...((o=fe.hide)==null?void 0:o.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:g(cZ,{scope:c,placedSide:Ye,onArrowChange:D,arrowX:Le,arrowY:Xe,shouldHideArrow:Te,children:g(yt.div,{"data-side":Ye,"data-align":Qe,...S,ref:L,style:{...S.style,animation:R?void 0:"none"}})})})});CE.displayName=gm;var xE="PopperArrow",uZ={top:"bottom",right:"left",bottom:"top",left:"right"},PE=we(function(e,t){const{__scopePopper:n,...i}=e,r=lZ(xE,n),s=uZ[r.placedSide];return g("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:g(sZ,{...i,ref:t,style:{...i.style,display:"block"}})})});PE.displayName=xE;function dZ(e){return e!==null}var hZ=e=>({name:"transformOrigin",options:e,fn(t){var n,i,r;const{placement:s,rects:a,middlewareData:o}=t,c=((n=o.arrow)==null?void 0:n.centerOffset)!==0,l=c?0:e.arrowWidth,u=c?0:e.arrowHeight,[d,h]=RE(s),p={start:"0%",center:"50%",end:"100%"}[h],O=(((i=o.arrow)==null?void 0:i.x)??0)+l/2,m=(((r=o.arrow)==null?void 0:r.y)??0)+u/2;let b="",v="";return d==="bottom"?(b=c?p:`${O}px`,v=`${-u}px`):d==="top"?(b=c?p:`${O}px`,v=`${a.floating.height+u}px`):d==="right"?(b=`${-u}px`,v=c?p:`${m}px`):d==="left"&&(b=`${a.floating.width+u}px`,v=c?p:`${m}px`),{data:{x:b,y:v}}}});function RE(e){const[t,n="center"]=e.split("-");return[t,n]}var pZ=_E,fZ=wE,mZ=CE,OZ=PE,gZ="Portal",AE=we((e,t)=>{var n;const{container:i,...r}=e,[s,a]=pe(!1);pn(()=>a(!0),[]);const o=i||s&&((n=globalThis==null?void 0:globalThis.document)==null?void 0:n.body);return o?_i.createPortal(g(yt.div,{...r,ref:t}),o):null});AE.displayName=gZ;var vZ=ed[" useInsertionEffect ".trim().toString()]||pn;function IE({prop:e,defaultProp:t,onChange:n=()=>{},caller:i}){const[r,s,a]=bZ({defaultProp:t,onChange:n}),o=e!==void 0,c=o?e:r;{const u=ue(e!==void 0);ke(()=>{const d=u.current;d!==o&&console.warn(`${i} is changing from ${d?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,i])}const l=oe(u=>{var d;if(o){const h=TZ(u)?u(e):u;h!==e&&((d=a.current)==null||d.call(a,h))}else s(u)},[o,e,s,a]);return[c,l]}function bZ({defaultProp:e,onChange:t}){const[n,i]=pe(e),r=ue(n),s=ue(t);return vZ(()=>{s.current=t},[t]),ke(()=>{var a;r.current!==n&&((a=s.current)==null||a.call(s,n),r.current=n)},[n,r]),[n,i,s]}function TZ(e){return typeof e=="function"}function kZ(e){const t=ue({value:e,previous:e});return $e(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var QE=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),yZ="VisuallyHidden",SZ=we((e,t)=>g(yt.span,{...e,ref:t,style:{...QE,...e.style}}));SZ.displayName=yZ;var _Z=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ua=new WeakMap,gu=new WeakMap,vu={},vm=0,NE=function(e){return e&&(e.host||NE(e.parentNode))},EZ=function(e,t){return t.map(function(n){if(e.contains(n))return n;var i=NE(n);return i&&e.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},wZ=function(e,t,n,i){var r=EZ(t,Array.isArray(e)?e:[e]);vu[n]||(vu[n]=new WeakMap);var s=vu[n],a=[],o=new Set,c=new Set(r),l=function(d){!d||o.has(d)||(o.add(d),l(d.parentNode))};r.forEach(l);var u=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(h){if(o.has(h))u(h);else try{var p=h.getAttribute(i),O=p!==null&&p!=="false",m=(ua.get(h)||0)+1,b=(s.get(h)||0)+1;ua.set(h,m),s.set(h,b),a.push(h),m===1&&O&&gu.set(h,!0),b===1&&h.setAttribute(n,"true"),O||h.setAttribute(i,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return u(t),o.clear(),vm++,function(){a.forEach(function(d){var h=ua.get(d)-1,p=s.get(d)-1;ua.set(d,h),s.set(d,p),h||(gu.has(d)||d.removeAttribute(i),gu.delete(d)),p||d.removeAttribute(n)}),vm--,vm||(ua=new WeakMap,ua=new WeakMap,gu=new WeakMap,vu={})}},CZ=function(e,t,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),r=_Z(e);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),wZ(i,r,n,"aria-hidden")):function(){return null}},bi=function(){return bi=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},bi.apply(this,arguments)};function DE(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function xZ(e,t,n){for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}var bu="right-scroll-bar-position",Tu="width-before-scroll-bar",PZ="with-scroll-bars-hidden",RZ="--removed-body-scroll-bar-size";function bm(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function AZ(e,t){var n=pe(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=t,n.facade}var IZ=typeof window<"u"?Si:ke,ME=new WeakMap;function QZ(e,t){var n=AZ(null,function(i){return e.forEach(function(r){return bm(r,i)})});return IZ(function(){var i=ME.get(n);if(i){var r=new Set(i),s=new Set(e),a=n.current;r.forEach(function(o){s.has(o)||bm(o,null)}),s.forEach(function(o){r.has(o)||bm(o,a)})}ME.set(n,e)},[e]),n}function NZ(e){return e}function DZ(e,t){t===void 0&&(t=NZ);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var a=t(s,i);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(i=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(o){return s(o)},filter:function(){return n}}},assignMedium:function(s){i=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(s),a=n}var c=function(){var u=a;a=[],u.forEach(s)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){a.push(u),l()},filter:function(u){return a=a.filter(u),n}}}};return r}function MZ(e){e===void 0&&(e={});var t=DZ(null);return t.options=bi({async:!0,ssr:!1},e),t}var LE=function(e){var t=e.sideCar,n=DE(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return ut(i,bi({},n))};LE.isSideCarExport=!0;function LZ(e,t){return e.useMedium(t),LE}var $E=MZ(),Tm=function(){},ku=we(function(e,t){var n=ue(null),i=pe({onScrollCapture:Tm,onWheelCapture:Tm,onTouchMoveCapture:Tm}),r=i[0],s=i[1],a=e.forwardProps,o=e.children,c=e.className,l=e.removeScrollBar,u=e.enabled,d=e.shards,h=e.sideCar,p=e.noRelative,O=e.noIsolation,m=e.inert,b=e.allowPinchZoom,v=e.as,k=v===void 0?"div":v,y=e.gapMode,T=DE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,_=QZ([n,t]),x=bi(bi({},T),r);return ut(Fe,null,u&&ut(S,{sideCar:$E,removeScrollBar:l,shards:d,noRelative:p,noIsolation:O,inert:m,setCallbacks:s,allowPinchZoom:!!b,lockRef:n,gapMode:y}),a?Lr(mn.only(o),bi(bi({},x),{ref:_})):ut(k,bi({},x,{className:c,ref:_}),o))});ku.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},ku.classNames={fullWidth:Tu,zeroRight:bu};var $Z=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function UZ(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=$Z();return t&&e.setAttribute("nonce",t),e}function qZ(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function XZ(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var FZ=function(){var e=0,t=null;return{add:function(n){e==0&&(t=UZ())&&(qZ(t,n),XZ(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},zZ=function(){var e=FZ();return function(t,n){ke(function(){return e.add(t),function(){e.remove()}},[t&&n])}},UE=function(){var e=zZ(),t=function(n){var i=n.styles,r=n.dynamic;return e(i,r),null};return t},BZ={left:0,top:0,right:0,gap:0},km=function(e){return parseInt(e||"",10)||0},ZZ=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],r=t[e==="padding"?"paddingRight":"marginRight"];return[km(n),km(i),km(r)]},jZ=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return BZ;var t=ZZ(e),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-n+t[2]-t[0])}},VZ=UE(),da="data-scroll-locked",WZ=function(e,t,n,i){var r=e.left,s=e.top,a=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(PZ,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(o,"px ").concat(i,`;
  }
  body[`).concat(da,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(bu,` {
    right: `).concat(o,"px ").concat(i,`;
  }
  
  .`).concat(Tu,` {
    margin-right: `).concat(o,"px ").concat(i,`;
  }
  
  .`).concat(bu," .").concat(bu,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Tu," .").concat(Tu,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(da,`] {
    `).concat(RZ,": ").concat(o,`px;
  }
`)},qE=function(){var e=parseInt(document.body.getAttribute(da)||"0",10);return isFinite(e)?e:0},GZ=function(){ke(function(){return document.body.setAttribute(da,(qE()+1).toString()),function(){var e=qE()-1;e<=0?document.body.removeAttribute(da):document.body.setAttribute(da,e.toString())}},[])},YZ=function(e){var t=e.noRelative,n=e.noImportant,i=e.gapMode,r=i===void 0?"margin":i;GZ();var s=$e(function(){return jZ(r)},[r]);return ut(VZ,{styles:WZ(s,!t,r,n?"":"!important")})},ym=!1;if(typeof window<"u")try{var yu=Object.defineProperty({},"passive",{get:function(){return ym=!0,!0}});window.addEventListener("test",yu,yu),window.removeEventListener("test",yu,yu)}catch{ym=!1}var ha=ym?{passive:!1}:!1,HZ=function(e){return e.tagName==="TEXTAREA"},XE=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!HZ(e)&&n[t]==="visible")},KZ=function(e){return XE(e,"overflowY")},JZ=function(e){return XE(e,"overflowX")},FE=function(e,t){var n=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=zE(e,i);if(r){var s=BE(e,i),a=s[1],o=s[2];if(a>o)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},e8=function(e){var t=e.scrollTop,n=e.scrollHeight,i=e.clientHeight;return[t,n,i]},t8=function(e){var t=e.scrollLeft,n=e.scrollWidth,i=e.clientWidth;return[t,n,i]},zE=function(e,t){return e==="v"?KZ(t):JZ(t)},BE=function(e,t){return e==="v"?e8(t):t8(t)},n8=function(e,t){return e==="h"&&t==="rtl"?-1:1},i8=function(e,t,n,i,r){var s=n8(e,window.getComputedStyle(t).direction),a=s*i,o=n.target,c=t.contains(o),l=!1,u=a>0,d=0,h=0;do{if(!o)break;var p=BE(e,o),O=p[0],m=p[1],b=p[2],v=m-b-s*O;(O||v)&&zE(e,o)&&(d+=v,h+=O);var k=o.parentNode;o=k&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE?k.host:k}while(!c&&o!==document.body||c&&(t.contains(o)||t===o));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(l=!0),l},Su=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ZE=function(e){return[e.deltaX,e.deltaY]},jE=function(e){return e&&"current"in e?e.current:e},r8=function(e,t){return e[0]===t[0]&&e[1]===t[1]},s8=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},a8=0,pa=[];function o8(e){var t=ue([]),n=ue([0,0]),i=ue(),r=pe(a8++)[0],s=pe(UE)[0],a=ue(e);ke(function(){a.current=e},[e]),ke(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var m=xZ([e.lockRef.current],(e.shards||[]).map(jE)).filter(Boolean);return m.forEach(function(b){return b.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var o=oe(function(m,b){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!a.current.allowPinchZoom;var v=Su(m),k=n.current,y="deltaX"in m?m.deltaX:k[0]-v[0],T="deltaY"in m?m.deltaY:k[1]-v[1],S,_=m.target,x=Math.abs(y)>Math.abs(T)?"h":"v";if("touches"in m&&x==="h"&&_.type==="range")return!1;var N=window.getSelection(),L=N&&N.anchorNode,w=L?L===_||L.contains(_):!1;if(w)return!1;var D=FE(x,_);if(!D)return!0;if(D?S=x:(S=x==="v"?"h":"v",D=FE(x,_)),!D)return!1;if(!i.current&&"changedTouches"in m&&(y||T)&&(i.current=S),!S)return!0;var M=i.current||S;return i8(M,b,m,M==="h"?y:T)},[]),c=oe(function(m){var b=m;if(!(!pa.length||pa[pa.length-1]!==s)){var v="deltaY"in b?ZE(b):Su(b),k=t.current.filter(function(S){return S.name===b.type&&(S.target===b.target||b.target===S.shadowParent)&&r8(S.delta,v)})[0];if(k&&k.should){b.cancelable&&b.preventDefault();return}if(!k){var y=(a.current.shards||[]).map(jE).filter(Boolean).filter(function(S){return S.contains(b.target)}),T=y.length>0?o(b,y[0]):!a.current.noIsolation;T&&b.cancelable&&b.preventDefault()}}},[]),l=oe(function(m,b,v,k){var y={name:m,delta:b,target:v,should:k,shadowParent:c8(v)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(T){return T!==y})},1)},[]),u=oe(function(m){n.current=Su(m),i.current=void 0},[]),d=oe(function(m){l(m.type,ZE(m),m.target,o(m,e.lockRef.current))},[]),h=oe(function(m){l(m.type,Su(m),m.target,o(m,e.lockRef.current))},[]);ke(function(){return pa.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,ha),document.addEventListener("touchmove",c,ha),document.addEventListener("touchstart",u,ha),function(){pa=pa.filter(function(m){return m!==s}),document.removeEventListener("wheel",c,ha),document.removeEventListener("touchmove",c,ha),document.removeEventListener("touchstart",u,ha)}},[]);var p=e.removeScrollBar,O=e.inert;return ut(Fe,null,O?ut(s,{styles:s8(r)}):null,p?ut(YZ,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function c8(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const l8=LZ($E,o8);var VE=we(function(e,t){return ut(ku,bi({},e,{ref:t,sideCar:l8}))});VE.classNames=ku.classNames;var u8=[" ","Enter","ArrowUp","ArrowDown"],d8=[" ","Enter"],ps="Select",[_u,Eu,h8]=Ez(ps),[fa]=Jf(ps,[h8,yE]),wu=yE(),[p8,Rr]=fa(ps),[f8,m8]=fa(ps),WE=e=>{const{__scopeSelect:t,children:n,open:i,defaultOpen:r,onOpenChange:s,value:a,defaultValue:o,onValueChange:c,dir:l,name:u,autoComplete:d,disabled:h,required:p,form:O}=e,m=wu(t),[b,v]=pe(null),[k,y]=pe(null),[T,S]=pe(!1),_=Cz(l),[x,N]=IE({prop:i,defaultProp:r??!1,onChange:s,caller:ps}),[L,w]=IE({prop:a,defaultProp:o,onChange:c,caller:ps}),D=ue(null),M=b?O||!!b.closest("form"):!0,[B,F]=pe(new Set),q=Array.from(B).map(H=>H.props.value).join(";");return g(pZ,{...m,children:g(p8,{required:p,scope:t,trigger:b,onTriggerChange:v,valueNode:k,onValueNodeChange:y,valueNodeHasChildren:T,onValueNodeHasChildrenChange:S,contentId:rm(),value:L,onValueChange:w,open:x,onOpenChange:N,dir:_,triggerPointerDownPosRef:D,disabled:h,children:[g(_u.Provider,{scope:t,children:g(f8,{scope:e.__scopeSelect,onNativeOptionAdd:oe(H=>{F(se=>new Set(se).add(H))},[]),onNativeOptionRemove:oe(H=>{F(se=>{const Z=new Set(se);return Z.delete(H),Z})},[]),children:n})}),M?g(mw,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:L,onChange:H=>w(H.target.value),disabled:h,form:O,children:[L===void 0?g("option",{value:""}):null,Array.from(B)]},q):null]})})};WE.displayName=ps;var GE="SelectTrigger",YE=we((e,t)=>{const{__scopeSelect:n,disabled:i=!1,...r}=e,s=wu(n),a=Rr(GE,n),o=a.disabled||i,c=Ft(t,a.onTriggerChange),l=Eu(n),u=ue("touch"),[d,h,p]=gw(m=>{const b=l().filter(y=>!y.disabled),v=b.find(y=>y.value===a.value),k=vw(b,m,v);k!==void 0&&a.onValueChange(k.value)}),O=m=>{o||(a.onOpenChange(!0),p()),m&&(a.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return g(fZ,{asChild:!0,...s,children:g(yt.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":Ow(a.value)?"":void 0,...r,ref:c,onClick:Ct(r.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&O(m)}),onPointerDown:Ct(r.onPointerDown,m=>{u.current=m.pointerType;const b=m.target;b.hasPointerCapture(m.pointerId)&&b.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(O(m),m.preventDefault())}),onKeyDown:Ct(r.onKeyDown,m=>{const b=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&h(m.key),!(b&&m.key===" ")&&u8.includes(m.key)&&(O(),m.preventDefault())})})})});YE.displayName=GE;var HE="SelectValue",O8=we((e,t)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:a="",...o}=e,c=Rr(HE,n),{onValueNodeHasChildrenChange:l}=c,u=s!==void 0,d=Ft(t,c.onValueNodeChange);return pn(()=>{l(u)},[l,u]),g(yt.span,{...o,ref:d,style:{pointerEvents:"none"},children:Ow(c.value)?g(Fe,{children:a}):s})});O8.displayName=HE;var g8="SelectIcon",KE=we((e,t)=>{const{__scopeSelect:n,children:i,...r}=e;return g(yt.span,{"aria-hidden":!0,...r,ref:t,children:i||""})});KE.displayName=g8;var v8="SelectPortal",JE=e=>g(AE,{asChild:!0,...e});JE.displayName=v8;var fs="SelectContent",ew=we((e,t)=>{const n=Rr(fs,e.__scopeSelect),[i,r]=pe();if(pn(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?nc(g(tw,{scope:e.__scopeSelect,children:g(_u.Slot,{scope:e.__scopeSelect,children:g("div",{children:e.children})})}),s):null}return g(nw,{...e,ref:t})});ew.displayName=fs;var Hn=10,[tw,Ar]=fa(fs),b8="SelectContentImpl",T8=au("SelectContent.RemoveScroll"),nw=we((e,t)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:a,side:o,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:O,hideWhenDetached:m,avoidCollisions:b,...v}=e,k=Rr(fs,n),[y,T]=pe(null),[S,_]=pe(null),x=Ft(t,ae=>T(ae)),[N,L]=pe(null),[w,D]=pe(null),M=Eu(n),[B,F]=pe(!1),q=ue(!1);ke(()=>{if(y)return CZ(y)},[y]),$z();const H=oe(ae=>{const[Le,...Xe]=M().map(it=>it.ref.current),[Te]=Xe.slice(-1),je=document.activeElement;for(const it of ae)if(it===je||(it==null||it.scrollIntoView({block:"nearest"}),it===Le&&S&&(S.scrollTop=0),it===Te&&S&&(S.scrollTop=S.scrollHeight),it==null||it.focus(),document.activeElement!==je))return},[M,S]),se=oe(()=>H([N,y]),[H,N,y]);ke(()=>{B&&se()},[B,se]);const{onOpenChange:Z,triggerPointerDownPosRef:de}=k;ke(()=>{if(y){let ae={x:0,y:0};const Le=Te=>{var je,it;ae={x:Math.abs(Math.round(Te.pageX)-(((je=de.current)==null?void 0:je.x)??0)),y:Math.abs(Math.round(Te.pageY)-(((it=de.current)==null?void 0:it.y)??0))}},Xe=Te=>{ae.x<=10&&ae.y<=10?Te.preventDefault():y.contains(Te.target)||Z(!1),document.removeEventListener("pointermove",Le),de.current=null};return de.current!==null&&(document.addEventListener("pointermove",Le),document.addEventListener("pointerup",Xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Le),document.removeEventListener("pointerup",Xe,{capture:!0})}}},[y,Z,de]),ke(()=>{const ae=()=>Z(!1);return window.addEventListener("blur",ae),window.addEventListener("resize",ae),()=>{window.removeEventListener("blur",ae),window.removeEventListener("resize",ae)}},[Z]);const[I,De]=gw(ae=>{const Le=M().filter(je=>!je.disabled),Xe=Le.find(je=>je.ref.current===document.activeElement),Te=vw(Le,ae,Xe);Te&&setTimeout(()=>Te.ref.current.focus())}),Me=oe((ae,Le,Xe)=>{const Te=!q.current&&!Xe;(k.value!==void 0&&k.value===Le||Te)&&(L(ae),Te&&(q.current=!0))},[k.value]),R=oe(()=>y==null?void 0:y.focus(),[y]),fe=oe((ae,Le,Xe)=>{const Te=!q.current&&!Xe;(k.value!==void 0&&k.value===Le||Te)&&D(ae)},[k.value]),Ye=i==="popper"?Sm:iw,Qe=Ye===Sm?{side:o,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:O,hideWhenDetached:m,avoidCollisions:b}:{};return g(tw,{scope:n,content:y,viewport:S,onViewportChange:_,itemRefCallback:Me,selectedItem:N,onItemLeave:R,itemTextRefCallback:fe,focusSelectedItem:se,selectedItemText:w,position:i,isPositioned:B,searchRef:I,children:g(VE,{as:T8,allowPinchZoom:!0,children:g(V1,{asChild:!0,trapped:k.open,onMountAutoFocus:ae=>{ae.preventDefault()},onUnmountAutoFocus:Ct(r,ae=>{var Le;(Le=k.trigger)==null||Le.focus({preventScroll:!0}),ae.preventDefault()}),children:g(F1,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:ae=>ae.preventDefault(),onDismiss:()=>k.onOpenChange(!1),children:g(Ye,{role:"listbox",id:k.contentId,"data-state":k.open?"open":"closed",dir:k.dir,onContextMenu:ae=>ae.preventDefault(),...v,...Qe,onPlaced:()=>F(!0),ref:x,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:Ct(v.onKeyDown,ae=>{const Le=ae.ctrlKey||ae.altKey||ae.metaKey;if(ae.key==="Tab"&&ae.preventDefault(),!Le&&ae.key.length===1&&De(ae.key),["ArrowUp","ArrowDown","Home","End"].includes(ae.key)){let Xe=M().filter(Te=>!Te.disabled).map(Te=>Te.ref.current);if(["ArrowUp","End"].includes(ae.key)&&(Xe=Xe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ae.key)){const Te=ae.target,je=Xe.indexOf(Te);Xe=Xe.slice(je+1)}setTimeout(()=>H(Xe)),ae.preventDefault()}})})})})})})});nw.displayName=b8;var k8="SelectItemAlignedPosition",iw=we((e,t)=>{const{__scopeSelect:n,onPlaced:i,...r}=e,s=Rr(fs,n),a=Ar(fs,n),[o,c]=pe(null),[l,u]=pe(null),d=Ft(t,x=>u(x)),h=Eu(n),p=ue(!1),O=ue(!0),{viewport:m,selectedItem:b,selectedItemText:v,focusSelectedItem:k}=a,y=oe(()=>{if(s.trigger&&s.valueNode&&o&&l&&m&&b&&v){const x=s.trigger.getBoundingClientRect(),N=l.getBoundingClientRect(),L=s.valueNode.getBoundingClientRect(),w=v.getBoundingClientRect();if(s.dir!=="rtl"){const Te=w.left-N.left,je=L.left-Te,it=x.left-je,an=x.width+it,ms=Math.max(an,N.width),Ir=window.innerWidth-Hn,Qr=U1(je,[Hn,Math.max(Hn,Ir-ms)]);o.style.minWidth=an+"px",o.style.left=Qr+"px"}else{const Te=N.right-w.right,je=window.innerWidth-L.right-Te,it=window.innerWidth-x.right-je,an=x.width+it,ms=Math.max(an,N.width),Ir=window.innerWidth-Hn,Qr=U1(je,[Hn,Math.max(Hn,Ir-ms)]);o.style.minWidth=an+"px",o.style.right=Qr+"px"}const D=h(),M=window.innerHeight-Hn*2,B=m.scrollHeight,F=window.getComputedStyle(l),q=parseInt(F.borderTopWidth,10),H=parseInt(F.paddingTop,10),se=parseInt(F.borderBottomWidth,10),Z=parseInt(F.paddingBottom,10),de=q+H+B+Z+se,I=Math.min(b.offsetHeight*5,de),De=window.getComputedStyle(m),Me=parseInt(De.paddingTop,10),R=parseInt(De.paddingBottom,10),fe=x.top+x.height/2-Hn,Ye=M-fe,Qe=b.offsetHeight/2,ae=b.offsetTop+Qe,Le=q+H+ae,Xe=de-Le;if(Le<=fe){const Te=D.length>0&&b===D[D.length-1].ref.current;o.style.bottom="0px";const je=l.clientHeight-m.offsetTop-m.offsetHeight,it=Math.max(Ye,Qe+(Te?R:0)+je+se),an=Le+it;o.style.height=an+"px"}else{const Te=D.length>0&&b===D[0].ref.current;o.style.top="0px";const je=Math.max(fe,q+m.offsetTop+(Te?Me:0)+Qe)+Xe;o.style.height=je+"px",m.scrollTop=Le-fe+m.offsetTop}o.style.margin=`${Hn}px 0`,o.style.minHeight=I+"px",o.style.maxHeight=M+"px",i==null||i(),requestAnimationFrame(()=>p.current=!0)}},[h,s.trigger,s.valueNode,o,l,m,b,v,s.dir,i]);pn(()=>y(),[y]);const[T,S]=pe();pn(()=>{l&&S(window.getComputedStyle(l).zIndex)},[l]);const _=oe(x=>{x&&O.current===!0&&(y(),k==null||k(),O.current=!1)},[y,k]);return g(S8,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:p,onScrollButtonChange:_,children:g("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:g(yt.div,{...r,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});iw.displayName=k8;var y8="SelectPopperPosition",Sm=we((e,t)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=Hn,...s}=e,a=wu(n);return g(mZ,{...a,...s,ref:t,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Sm.displayName=y8;var[S8,_m]=fa(fs,{}),Em="SelectViewport",rw=we((e,t)=>{const{__scopeSelect:n,nonce:i,...r}=e,s=Ar(Em,n),a=_m(Em,n),o=Ft(t,s.onViewportChange),c=ue(0);return g(Fe,{children:[g("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),g(_u.Slot,{scope:n,children:g(yt.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:Ct(r.onScroll,l=>{const u=l.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&d){const p=Math.abs(c.current-u.scrollTop);if(p>0){const O=window.innerHeight-Hn*2,m=parseFloat(d.style.minHeight),b=parseFloat(d.style.height),v=Math.max(m,b);if(v<O){const k=v+p,y=Math.min(O,k),T=k-y;d.style.height=y+"px",d.style.bottom==="0px"&&(u.scrollTop=T>0?T:0,d.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});rw.displayName=Em;var sw="SelectGroup",[_8,E8]=fa(sw),w8=we((e,t)=>{const{__scopeSelect:n,...i}=e,r=rm();return g(_8,{scope:n,id:r,children:g(yt.div,{role:"group","aria-labelledby":r,...i,ref:t})})});w8.displayName=sw;var aw="SelectLabel",C8=we((e,t)=>{const{__scopeSelect:n,...i}=e,r=E8(aw,n);return g(yt.div,{id:r.id,...i,ref:t})});C8.displayName=aw;var Cu="SelectItem",[x8,ow]=fa(Cu),cw=we((e,t)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...a}=e,o=Rr(Cu,n),c=Ar(Cu,n),l=o.value===i,[u,d]=pe(s??""),[h,p]=pe(!1),O=Ft(t,k=>{var y;return(y=c.itemRefCallback)==null?void 0:y.call(c,k,i,r)}),m=rm(),b=ue("touch"),v=()=>{r||(o.onValueChange(i),o.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return g(x8,{scope:n,value:i,disabled:r,textId:m,isSelected:l,onItemTextChange:oe(k=>{d(y=>y||((k==null?void 0:k.textContent)??"").trim())},[]),children:g(_u.ItemSlot,{scope:n,value:i,disabled:r,textValue:u,children:g(yt.div,{role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":l&&h,"data-state":l?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...a,ref:O,onFocus:Ct(a.onFocus,()=>p(!0)),onBlur:Ct(a.onBlur,()=>p(!1)),onClick:Ct(a.onClick,()=>{b.current!=="mouse"&&v()}),onPointerUp:Ct(a.onPointerUp,()=>{b.current==="mouse"&&v()}),onPointerDown:Ct(a.onPointerDown,k=>{b.current=k.pointerType}),onPointerMove:Ct(a.onPointerMove,k=>{var y;b.current=k.pointerType,r?(y=c.onItemLeave)==null||y.call(c):b.current==="mouse"&&k.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ct(a.onPointerLeave,k=>{var y;k.currentTarget===document.activeElement&&((y=c.onItemLeave)==null||y.call(c))}),onKeyDown:Ct(a.onKeyDown,k=>{var y;((y=c.searchRef)==null?void 0:y.current)!==""&&k.key===" "||(d8.includes(k.key)&&v(),k.key===" "&&k.preventDefault())})})})})});cw.displayName=Cu;var jo="SelectItemText",lw=we((e,t)=>{const{__scopeSelect:n,className:i,style:r,...s}=e,a=Rr(jo,n),o=Ar(jo,n),c=ow(jo,n),l=m8(jo,n),[u,d]=pe(null),h=Ft(t,v=>d(v),c.onItemTextChange,v=>{var k;return(k=o.itemTextRefCallback)==null?void 0:k.call(o,v,c.value,c.disabled)}),p=u==null?void 0:u.textContent,O=$e(()=>g("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:b}=l;return pn(()=>(m(O),()=>b(O)),[m,b,O]),g(Fe,{children:[g(yt.span,{id:c.textId,...s,ref:h}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?nc(s.children,a.valueNode):null]})});lw.displayName=jo;var uw="SelectItemIndicator",dw=we((e,t)=>{const{__scopeSelect:n,...i}=e;return ow(uw,n).isSelected?g(yt.span,{"aria-hidden":!0,...i,ref:t}):null});dw.displayName=uw;var wm="SelectScrollUpButton",hw=we((e,t)=>{const n=Ar(wm,e.__scopeSelect),i=_m(wm,e.__scopeSelect),[r,s]=pe(!1),a=Ft(t,i.onScrollButtonChange);return pn(()=>{if(n.viewport&&n.isPositioned){let o=function(){const l=c.scrollTop>0;s(l)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),r?g(fw,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});hw.displayName=wm;var Cm="SelectScrollDownButton",pw=we((e,t)=>{const n=Ar(Cm,e.__scopeSelect),i=_m(Cm,e.__scopeSelect),[r,s]=pe(!1),a=Ft(t,i.onScrollButtonChange);return pn(()=>{if(n.viewport&&n.isPositioned){let o=function(){const l=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<l;s(u)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),r?g(fw,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});pw.displayName=Cm;var fw=we((e,t)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=e,s=Ar("SelectScrollButton",n),a=ue(null),o=Eu(n),c=oe(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return ke(()=>()=>c(),[c]),pn(()=>{var l;const u=o().find(d=>d.ref.current===document.activeElement);(l=u==null?void 0:u.ref.current)==null||l.scrollIntoView({block:"nearest"})},[o]),g(yt.div,{"aria-hidden":!0,...r,ref:t,style:{flexShrink:0,...r.style},onPointerDown:Ct(r.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(i,50))}),onPointerMove:Ct(r.onPointerMove,()=>{var l;(l=s.onItemLeave)==null||l.call(s),a.current===null&&(a.current=window.setInterval(i,50))}),onPointerLeave:Ct(r.onPointerLeave,()=>{c()})})}),P8="SelectSeparator",R8=we((e,t)=>{const{__scopeSelect:n,...i}=e;return g(yt.div,{"aria-hidden":!0,...i,ref:t})});R8.displayName=P8;var xm="SelectArrow",A8=we((e,t)=>{const{__scopeSelect:n,...i}=e,r=wu(n),s=Rr(xm,n),a=Ar(xm,n);return s.open&&a.position==="popper"?g(OZ,{...r,...i,ref:t}):null});A8.displayName=xm;var I8="SelectBubbleInput",mw=we(({__scopeSelect:e,value:t,...n},i)=>{const r=ue(null),s=Ft(i,r),a=kZ(t);return ke(()=>{const o=r.current;if(!o)return;const c=window.HTMLSelectElement.prototype,l=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==t&&l){const u=new Event("change",{bubbles:!0});l.call(o,t),o.dispatchEvent(u)}},[a,t]),g(yt.select,{...n,style:{...QE,...n.style},ref:s,defaultValue:t})});mw.displayName=I8;function Ow(e){return e===""||e===void 0}function gw(e){const t=ds(e),n=ue(""),i=ue(0),r=oe(a=>{const o=n.current+a;t(o),(function c(l){n.current=l,window.clearTimeout(i.current),l!==""&&(i.current=window.setTimeout(()=>c(""),1e3))})(o)},[t]),s=oe(()=>{n.current="",window.clearTimeout(i.current)},[]);return ke(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function vw(e,t,n){const i=t.length>1&&Array.from(t).every(o=>o===t[0])?t[0]:t,r=n?e.indexOf(n):-1;let s=Q8(e,Math.max(r,0));i.length===1&&(s=s.filter(o=>o!==n));const a=s.find(o=>o.textValue.toLowerCase().startsWith(i.toLowerCase()));return a!==n?a:void 0}function Q8(e,t){return e.map((n,i)=>e[(t+i)%e.length])}var N8=WE,bw=YE,Tw=KE,D8=JE,M8=ew,L8=rw,$8=cw,U8=lw,q8=dw,X8=hw,F8=pw;const z8={sm:"w-4 h-4",md:"w-6 h-6"};function Pm({size:e="md",flagCode:t,className:n,...i}){return g("img",{className:ht("rounded-full object-cover",z8[e],n),src:`https://storage.googleapis.com/eleven-public-cdn/images/flags/circle-flags/${t}.svg`,alt:`${t.toUpperCase()} flag`,...i})}function kw({children:e,...t}){const[n,i]=pe(!1),{language:r,setLanguage:s,options:a}=jr(),o=AI();return g(N8,{open:n,value:r.value.languageCode,onValueChange:c=>{s(c),i(!1)},onOpenChange:c=>{c&&i(!0)},children:[e,g(D8,{container:o,children:g(M8,{className:"overflow-hidden bg-base border border-base-border rounded-dropdown-sheet max-h-[min(384px,var(--radix-select-content-available-height))] min-w-[var(--radix-select-trigger-width)] z-10",position:"popper",sideOffset:8,align:"end",side:"top",onPointerDownOutside:()=>i(!1),onCloseAutoFocus:()=>i(!1),onEscapeKeyDown:()=>i(!1),...t,children:[g(X8,{className:"flex items-center justify-center h-6 bg-base text-base-subtle cursor-default",children:g(si,{size:"xs",name:"chevron-up"})}),g(L8,{className:"p-1.5",children:a.value.map(c=>g($8,{value:c.languageCode,className:"flex select-none items-center p-1.5 pr-3 gap-2 cursor-pointer rounded-input relative focus-visible:outline-none data-[highlighted]:bg-base-active text-sm",children:[g(Pm,{flagCode:c.flagCode}),g(U8,{children:c.name}),g(q8,{className:"text-base-primary p-1.5 -mr-1.5 ml-auto",children:g(si,{size:"xs",name:"check"})})]},c.languageCode))}),g(F8,{className:"flex items-center justify-center h-6 bg-base text-base-subtle cursor-default",children:g(si,{size:"xs",name:"chevron-down"})})]})})]})}function B8({className:e,...t}){const n=st(),{language:i,showPicker:r}=jr();return r.value?g(kw,{align:"center",children:g(bw,{className:ht("h-9 min-w-max rounded-button focus-ring px-2 flex gap-2 items-center text-base-primary bg-base hover:bg-base-hover active:bg-base-active font-medium",e),"aria-label":n.change_language,...t,children:[g(Pm,{size:"sm",flagCode:i.value.flagCode}),i.value.name,g(Tw,{className:"text-base-subtle",asChild:!0,children:g(si,{size:"xs",name:"chevron-down"})})]})}):null}function Rm({className:e,...t}){const{status:n,isSpeaking:i}=_t(),r=Wa(),{isTextMode:s}=Jc(),a=st(),o=ge(()=>n.value!=="connected"?a.connecting_status.value:r.value||s.value?a.chatting_status.value:i.value?a.speaking_status.value:a.listening_status.value),[c,l]=pe(o.peek());return Dn(()=>{const u=o.value;if(n.value==="connected"&&i.value)l(u);else{const d=setTimeout(()=>{l(u)},500);return()=>clearTimeout(d)}}),g("div",{className:ht("py-1.5 px-3 bg-base-active overflow-hidden rounded-bubble text-sm",e),...t,children:g(Wt,{initial:!1,active:!0,children:g("div",{className:"animate-text whitespace-nowrap transition-[opacity,transform] ease-out duration-200 data-hidden:opacity-0 transform data-hidden:translate-y-2",children:c})},c)})}const yw=ot(void 0),Sw=768;function Z8({children:e,initialVariant:t="compact"}){const n=He(t!=="compact"),i=He(typeof window<"u"?window.innerWidth<Sw:!1);ke(()=>{const o=()=>{i.value=window.innerWidth<Sw};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]);const r=oe(()=>{n.value=!n.value},[n]),s=ge(()=>n.value?i.value?"fullscreen":"expanded":"compact"),a=$e(()=>({variant:s,toggleSize:r}),[s,r]);return g(yw.Provider,{value:a,children:e})}function Am(){return Vt(yw)}function j8(e){const t=st(),{mode:n,setMode:i,isTextMode:r}=Jc(),s=oe(()=>{const a=n.peek()==="text"?"voice":"text";i(a)},[i,n]);return g(Dt,{"aria-label":r.value?t.voice_mode:t.text_mode,icon:r.value?"soundwave":"chat",onClick:s,...e})}function V8({showBackButton:e,onBackClick:t,showStatusLabel:n,showLanguageSelector:i,showConversationModeToggle:r,showExpandButton:s}){const a=st(),{toggleSize:o,variant:c}=Am(),l=ge(()=>c.value==="compact"?"Expand widget":"Collapse widget");return g("div",{className:"w-full relative shrink-0 z-10",children:[g("div",{className:"h-16 absolute top-0 w-full bg-base"}),g("div",{className:"h-4 absolute top-16 w-full bg-gradient-to-b from-base to-transparent backdrop-blur-[1px] [mask-image:linear-gradient(to_bottom,black,transparent)] shadow-scroll-fade-bottom"}),g("div",{className:"h-16 top-0 absolute flex flex-row items-center justify-center w-full",children:[g("div",{className:"absolute start-3 flex gap-2 items-center",children:[e?g(Dt,{variant:"ghost",onClick:t,"aria-label":a.go_back,className:"h-8 w-8",children:g(si,{name:"chevron-up",className:"-rotate-90",size:"xs"})}):g("div",{className:"relative w-8 h-8"}),g(Wt,{active:n,children:g(Rm,{className:"transition-opacity data-hidden:opacity-0"})})]}),g("div",{className:"absolute flex flex-row items-center gap-2 ms-auto end-3",children:[g(Wt,{active:i,children:g("div",{className:"transition-[opacity,transform] duration-200 data-hidden:opacity-0 data-hidden:-translate-y-4",children:g(B8,{})})}),g(Wt,{active:r,children:g(j8,{variant:"ghost",className:"h-8 w-8 transition-opacity data-hidden:opacity-0"})}),g(Wt,{active:s,children:g(Dt,{variant:"ghost",onClick:o,"aria-label":l,className:"h-8 w-8 transition-opacity data-hidden:opacity-0",children:g(si,{name:c.value==="compact"?"maximize":"minimize",size:"sm"})})})]})]})]})}function Im({iconOnly:e,isDisconnected:t,children:n,...i}){const{endSession:r,startSession:s}=_t(),a=st();return g(Dt,{variant:t?"primary":"secondary",icon:t?"phone":"phone-off",onClick:t?o=>s(o.currentTarget):r,"aria-label":t?a.start_call:a.end_call,...i,children:e?void 0:n??(t?a.start_call:a.end_call)})}function Qm(e){const t=st(),{isMuted:n,isMutingEnabled:i,setIsMuted:r}=xI(),s=oe(()=>{r(!n.peek())},[r]);return i.value?g(Dt,{"aria-label":t.mute_microphone,"aria-pressed":n.value,icon:n.value?"mic-off":"mic",onClick:s,...e}):null}function W8({showTranscript:e,scrollPinned:t}){const n=Ah(),i=He(""),r=He(!1),{isDisconnected:s,startSession:a,sendUserMessage:o}=_t(),c=oe(async l=>{l.preventDefault();const u=i.value.trim();u&&(t.value=!0,i.value="",s.value?await a(l.currentTarget,u):o(u))},[i,t,s,a,o]);return g("div",{className:"sticky bottom-0 pointer-events-none z-10 max-h-[50%] flex flex-col",children:[g("div",{className:"absolute top-0 left-0 right-0 h-4 -translate-y-full bg-gradient-to-t from-base to-transparent pointer-events-none backdrop-blur-[1px] [mask-image:linear-gradient(to_top,black,transparent)] shadow-scroll-fade-top"}),g("div",{className:"relative w-full px-3 pb-3 flex flex-col items-center pointer-events-auto min-h-0",children:[n.value&&g("div",{className:_e("bg-base relative flex flex-col min-h-0 rounded-[calc(var(--el-sheet-radius)-8px)] border border-base-border w-full transition-shadow overflow-hidden",r.value&&"ring-2 ring-accent"),children:[g(G8,{userMessage:i,isFocused:r,onSendMessage:c}),g("div",{className:"absolute bottom-0 left-0 right-0 flex gap-1.5 items-center justify-end px-3 pb-3 pt-2 pointer-events-none",children:g("div",{className:"pointer-events-auto flex gap-1.5 items-center",children:g(_w,{userMessage:i,onSendMessage:c,showTranscript:e})})})]}),!n.value&&g("div",{className:"w-full flex gap-1.5 items-center justify-end",children:g(_w,{userMessage:i,onSendMessage:c,showTranscript:e})})]})]})}function G8({userMessage:e,isFocused:t,onSendMessage:n}){const i=st(),r=Wa(),{isDisconnected:s,conversationIndex:a,sendUserActivity:o}=_t(),c=oe(h=>{e.value=h.currentTarget.value},[e]),l=oe(async h=>{h.key==="Enter"&&!h.shiftKey&&await n(h)},[n]),u=oe(()=>{t.value=!0},[t]),d=oe(()=>{t.value=!1},[t]);return g("textarea",{"aria-label":i.input_label,value:e.value,onInput:o,onChange:c,onKeyDown:l,onFocus:u,onBlur:d,placeholder:r.value?s.value&&a.value>0?i.input_placeholder_new_conversation.value:i.input_placeholder_text_only.value:i.input_placeholder.value,className:"w-full h-full resize-none bg-base leading-5 outline-none text-sm text-base-primary placeholder:text-base-subtle p-3 pb-[60px] min-h-[4.5rem] max-h-full [field-sizing:content]"})}function _w({userMessage:e,onSendMessage:t,showTranscript:n=!1}){const i=st(),r=Wa(),s=Ah(),{isDisconnected:a,status:o}=_t(),{isTextMode:c}=Jc(),l=ge(()=>!!e.value.trim()),u=ge(()=>s.value),d=ge(()=>!a.value||!r.value&&n),h=ge(()=>!r.value&&!a.value&&!c.value);return g(Fe,{children:[g(Bn,{visible:h.value,children:g(Qm,{className:"bg-base text-base-primary hover:bg-base-hover active:bg-base-active"})}),g(Bn,{visible:d.value,children:g(Im,{iconOnly:!0,isDisconnected:a.value,disabled:o.value==="disconnecting"||o.value==="connecting",className:"bg-base text-base-primary hover:bg-base-hover active:bg-base-active"})}),u.value&&g(Dt,{icon:"send",onClick:t,variant:"primary",disabled:!l.value,"aria-label":i.send_message.value})]})}const Y8=`#version 300 es
precision highp float;

uniform float uTime;
uniform float uOffsets[7];
uniform vec3 uColor1;
uniform vec3 uColor2;
uniform sampler2D uPerlinTexture;

in vec2 vUv;

out vec4 outColor;

const float PI = 3.14159265358979323846;

// Draw a single oval with soft edges and calculate its gradient color
bool drawOval(vec2 polarUv, vec2 polarCenter, float a, float b, bool reverseGradient, float softness, out vec4 color) {
    vec2 p = polarUv - polarCenter;
    float oval = (p.x * p.x) / (a * a) + (p.y * p.y) / (b * b);
    
    float edge = smoothstep(1.0, 1.0 - softness, oval);
    
    if (edge > 0.0) {
        float gradient = reverseGradient ? (1.0 - (p.x / a + 1.0) / 2.0) : ((p.x / a + 1.0) / 2.0);
        color = vec4(vec3(gradient), 0.8 * edge);
        return true;
    }
    return false;
}

// Map grayscale value to a 4-color ramp (color1, color2, color3, color4)
vec3 colorRamp(float grayscale, vec3 color1, vec3 color2, vec3 color3, vec3 color4) {
    if (grayscale < 0.33) {
        return mix(color1, color2, grayscale * 3.0);
    } else if (grayscale < 0.66) {
        return mix(color2, color3, (grayscale - 0.33) * 3.0);
    } else {
        return mix(color3, color4, (grayscale - 0.66) * 3.0);
    }
}

vec2 hash2(vec2 p) {
    return fract(sin(vec2(dot(p, vec2(127.1, 311.7)), dot(p, vec2(269.5, 183.3)))) * 43758.5453);
}

// 2D noise for the ring
float noise2D(vec2 p) {
    vec2 i = floor(p);
    vec2 f = fract(p);
    
    vec2 u = f * f * (3.0 - 2.0 * f);
    float n = mix(
        mix(dot(hash2(i + vec2(0.0, 0.0)), f - vec2(0.0, 0.0)),
            dot(hash2(i + vec2(1.0, 0.0)), f - vec2(1.0, 0.0)), u.x),
        mix(dot(hash2(i + vec2(0.0, 1.0)), f - vec2(0.0, 1.0)),
            dot(hash2(i + vec2(1.0, 1.0)), f - vec2(1.0, 1.0)), u.x),
        u.y
    );

    return 0.5 + 0.5 * n;
}

float sharpRing(vec2 uv, float theta, float time) {
    float ringStart = 1.0;
    float ringWidth = 0.5;
    float noiseScale = 5.0;
    
    vec2 noiseCoord = vec2(theta / (2.0 * PI), time * 0.1);
    noiseCoord *= noiseScale;
    
    float noise = noise2D(noiseCoord);
    noise = (noise - 0.5) * 4.0;
    
    return ringStart + noise * ringWidth * 1.5;
}

float smoothRing(vec2 uv, float time) {
    float angle = atan(uv.y, uv.x);
    if (angle < 0.0) angle += 2.0 * PI;
    
    vec2 noiseCoord = vec2(angle / (2.0 * PI), time * 0.1);
    noiseCoord *= 6.0;
    
    float noise = noise2D(noiseCoord);
    noise = (noise - 0.5) * 8.0;
    
    float ringStart = 0.9;
    float ringWidth = 0.3;
    
    return ringStart + noise * ringWidth;
}

void main() {
    // Normalize vUv to be centered around (0.0, 0.0)
    vec2 uv = vUv * 2.0 - 1.0;

    // Convert uv to polar coordinates
    float radius = length(uv);
    float theta = atan(uv.y, uv.x);
    if (theta < 0.0) theta += 2.0 * PI; // Normalize theta to [0, 2*PI]

    // Initialize the base color to white
    vec4 color = vec4(1.0, 1.0, 1.0, 1.0);

    // Original parameters for the ovals in polar coordinates
    float originalCenters[7] = float[7](0.0, 0.5 * PI, 1.0 * PI, 1.5 * PI, 2.0 * PI, 2.5 * PI, 3.0 * PI);

    // Parameters for the animated centers in polar coordinates
    float centers[7];
    for (int i = 0; i < 7; i++) {
        centers[i] = originalCenters[i] + 0.5 * sin(uTime / 20.0 + uOffsets[i]);
    }

    float a, b;
    vec4 ovalColor;

    // Check if the pixel is inside any of the ovals
    for (int i = 0; i < 7; i++) {
        float noise = texture(uPerlinTexture, vec2(mod(centers[i] + uTime * 0.05, 1.0), 0.5)).r;
        a = noise * 1.5; // Increased variance: goes from 0.0 to 1.0
        b = noise * 4.5; // Tall semi-minor axis
        bool reverseGradient = (i % 2 == 1); // Reverse gradient for every second oval

        // Calculate the distance in polar coordinates
        float distTheta = abs(theta - centers[i]);
        if (distTheta > PI) distTheta = 2.0 * PI - distTheta; // Shortest distance on circle
        float distRadius = radius;

        float softness = 0.4; // Controls edge softness (e.g. how much blur is applied to the ovals)

        // Check if the pixel is inside the oval in polar coordinates
        if (drawOval(vec2(distTheta, distRadius), vec2(0.0, 0.0), a, b, reverseGradient, softness, ovalColor)) {
            // Blend the oval color with the existing color
            color.rgb = mix(color.rgb, ovalColor.rgb, ovalColor.a);
            color.a = max(color.a, ovalColor.a); // Max alpha
        }
    }
    
    // Calculate both noisy rings
    float ringRadius1 = sharpRing(uv, theta, uTime);
    float ringRadius2 = smoothRing(uv, uTime);
    
    // Blend both rings
    float ringAlpha1 = (radius >= ringRadius1) ? 0.3 : 0.0;
    float ringAlpha2 = smoothstep(ringRadius2 - 0.05, ringRadius2 + 0.05, radius) * 0.25;
    
    float totalRingAlpha = max(ringAlpha1, ringAlpha2);
    
    // Apply screen blend mode for combined rings
    vec3 ringColor = vec3(1.0); // White ring color
    color.rgb = 1.0 - (1.0 - color.rgb) * (1.0 - ringColor * totalRingAlpha);

    // Define colours to ramp against greyscale (could increase the amount of colours in the ramp)
    vec3 color1 = vec3(0.0, 0.0, 0.0); // Black
    vec3 color2 = uColor1; // Darker Color
    vec3 color3 = uColor2; // Lighter Color
    vec3 color4 = vec3(1.0, 1.0, 1.0); // White

    // Convert grayscale color to the color ramp
    float luminance = color.r; 
    color.rgb = colorRamp(luminance, color1, color2, color3, color4); // Apply the color ramp

    outColor = color;
}
`,H8=`#version 300 es
precision highp float;

in vec2 position;

out vec2 vUv;

void main() {
  vUv = position * 0.5 + 0.5;
  gl_Position = vec4(position, 0, 1);
}
`,Ew=0,K8=new Float32Array([-1,1,-1,-1,1,1,1,-1]),J8="https://storage.googleapis.com/eleven-public-cdn/images/perlin-noise.png",ww=class Nr{constructor(t){be(this,"gl"),be(this,"program"),be(this,"startTime"),be(this,"targetSpeed",0),be(this,"speed",.5),be(this,"rafId",null),be(this,"resizeObserver"),be(this,"colorA",[0,0,0]),be(this,"colorB",[0,0,0]),be(this,"offsets",new Float32Array(7).map(()=>Math.random()*Math.PI*2)),be(this,"copyNoiseImage",()=>{this.gl&&(this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,Nr.noiseImage),this.gl.generateMipmap(this.gl.TEXTURE_2D))}),be(this,"toDataURL",()=>this.gl.canvas.toDataURL("image/png")),be(this,"render",()=>{if(!this.gl){this.rafId=null;return}const a=(performance.now()-this.startTime)/1e3;this.gl.uniform1f(this.gl.getUniformLocation(this.program,"uTime"),a),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.rafId=requestAnimationFrame(this.render)});const n=t.getContext("webgl2",{depth:!1,stencil:!1});this.gl=n,this.program=this.setupProgram(Y8,H8);const i=n.createTexture();n.bindTexture(n.TEXTURE_2D,i),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,new Uint8Array([128,128,128,255])),Nr.noiseImage||(Nr.noiseImage=new Image,Nr.noiseImage.crossOrigin="anonymous",Nr.noiseImage.src=J8),Nr.noiseImage.complete?this.copyNoiseImage():Nr.noiseImage.addEventListener("load",this.copyNoiseImage);const r=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,r),n.bufferData(n.ARRAY_BUFFER,K8,n.STATIC_DRAW),n.vertexAttribPointer(Ew,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(Ew),this.updateColors("#2792DC","#9CE6E6"),this.resizeObserver=new ResizeObserver(a=>{const o=a[0],c=o.devicePixelContentBoxSize?o.devicePixelContentBoxSize[0]:o.contentBoxSize[0];t.width=Math.min(512,c.inlineSize),t.height=Math.min(512,c.blockSize),this.updateViewport()});const s=t.parentElement;if(s)try{this.resizeObserver.observe(s,{box:"device-pixel-content-box"})}catch{this.resizeObserver.observe(s)}this.startTime=performance.now(),this.rafId=requestAnimationFrame(this.render)}dispose(){var t;this.rafId!==null&&cancelAnimationFrame(this.rafId),(t=this.resizeObserver)==null||t.disconnect(),this.gl=null,this.program=null}updateViewport(){this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}updateColors(t,n){this.gl&&(this.colorA=this.updateColor("uColor1",t)??this.colorA,this.colorB=this.updateColor("uColor2",n)??this.colorB)}updateVolume(t,n){this.targetSpeed=.2+(1-Math.pow(n-1,2))*1.8,this.targetSpeed>this.speed&&(this.speed=this.targetSpeed),this.gl.uniform1f(this.gl.getUniformLocation(this.program,"uInputVolume"),t),this.gl.uniform1f(this.gl.getUniformLocation(this.program,"uOutputVolume"),n)}updateColor(t,n){try{const i=parseInt(n.slice(1,3),16)/255,r=parseInt(n.slice(3,5),16)/255,s=parseInt(n.slice(5,7),16)/255,a=[Math.pow(i,2.2),Math.pow(r,2.2),Math.pow(s,2.2)];return this.gl.uniform3fv(this.gl.getUniformLocation(this.program,t),a),a}catch(i){console.error(`[ConversationalAI] Failed to parse ${n} as color:`,i)}}setupProgram(t,n){const i=this.getShader(this.gl.FRAGMENT_SHADER,t),r=this.getShader(this.gl.VERTEX_SHADER,n);if(!i||!r)throw new Error("Failed to compile shaders");if(this.program=this.gl.createProgram(),this.gl.attachShader(this.program,i),this.gl.attachShader(this.program,r),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))throw new Error("Failed to link program");return this.gl.useProgram(this.program),this.gl.uniform1i(this.gl.getUniformLocation(this.program,"uPerlinTexture"),0),this.gl.uniform1fv(this.gl.getUniformLocation(this.program,"uOffsets"),this.offsets),this.gl.uniform3fv(this.gl.getUniformLocation(this.program,"uColor1"),this.colorA),this.gl.uniform3fv(this.gl.getUniformLocation(this.program,"uColor2"),this.colorB),this.program}getShader(t,n){const i=this.gl.createShader(t);return this.gl.shaderSource(i,n),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(this.gl.deleteShader(i),null)}};be(ww,"noiseImage");let ej=ww;const tj={sm:"w-9 h-9",lg:"w-48 h-48"};function ma({size:e="sm",className:t}){const{getInputVolume:n,getOutputVolume:i,isSpeaking:r,isDisconnected:s}=_t(),{config:a}=Ih(),o=ue(null),c=ue(null);Dn(()=>{if(s.value){o.current.style.transform="",c.current.style.transform="";return}let u;function d(){const h=n(),p=i(),O=r.peek()?1:1-h*.4,m=r.peek()?1+p*.4:1;o.current.style.transform=`scale(${m})`,c.current.style.transform=`scale(${O})`,u=requestAnimationFrame(d)}return d(),()=>{cancelAnimationFrame(u)}});const l=ge(()=>({backgroundImage:a.value.type==="image"?`url(${a.value.url})`:a.value.type==="url"?`url(${a.value.custom_url})`:void 0}));return g("div",{className:ht("relative shrink-0",tj[e],t),children:[g("div",{ref:o,className:"absolute inset-0 rounded-full bg-base-border"}),g("div",{ref:c,style:l,className:"absolute inset-0 rounded-full overflow-hidden bg-base bg-cover",children:a.value.type==="orb"&&g(nj,{color1:a.value.color_1,color2:a.value.color_2})})]})}function nj({color1:e,color2:t}){const{canvasUrl:n}=Ih(),[i,r]=pe(null);ke(()=>{i&&(i.updateColors(e,t),i.render(),n.value=i.toDataURL())},[i,e,t]);const s=oe(a=>{if(a){const o=new ej(a);return r(o),()=>o.dispose()}else r(null)},[r]);return g("canvas",{className:"w-full h-full",ref:s})}function ij({showAvatar:e,showTranscript:t,isDisconnected:n,onStartSession:i}){const r=st(),s=Ah(),a=Kc(),o=ge(()=>_e("absolute origin-top-left transition-[transform,left,top,opacity,scale] duration-200 z-10","data-hidden:opacity-0",t.value?"top-4 left-4 scale-[0.1667]":s.value?"top-[40%] left-1/2 -translate-x-1/2 -translate-y-1/2 scale-100":"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 scale-100")),c=ge(()=>!t.value&&n.value&&!a.value),l=ge(()=>!t.value&&!n.value);return g(Wt,{active:e,children:g("div",{className:o,children:[g(ma,{size:"lg"}),g(Wt,{active:c,children:g("div",{className:"absolute bottom-0 p-1 rounded-[calc(var(--el-button-radius)+4px)] bg-base left-1/2 -translate-x-1/2 translate-y-1/2 transition-[opacity,transform] data-hidden:opacity-0 data-hidden:scale-100 scale-150",children:g(Dt,{"aria-label":r.start_call,variant:"primary",icon:"phone",onClick:u=>i(u.currentTarget)})})}),g(Wt,{active:l,children:g("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 translate-y-full transition-[opacity,transform] data-hidden:opacity-0 data-hidden:scale-75",children:g(Rm,{})})})]})})}const rj={"top-left":"origin-top-left",top:"origin-top","top-right":"origin-top-right","bottom-left":"origin-bottom-left","bottom-right":"origin-bottom-right",bottom:"origin-bottom"};function Cw({open:e}){const t=Kc(),n=Wa(),i=Et(),r=i.value.placement,{isDisconnected:s,startSession:a,transcript:o,conversationIndex:c}=_t(),l=_0(),{currentContent:u,currentConfig:d}=Xh(),{variant:h}=Am(),p=ge(()=>{var S;return t.value||n.value?!l.value||!t.value?o.value:[{type:"message",role:"agent",message:l.value,isText:!0,conversationIndex:((S=o.value[0])==null?void 0:S.conversationIndex)??c.peek()},...o.value]:i.value.transcript_enabled?o.value:o.value.filter(_=>_.type!=="message"||_.isText)}),O=ge(()=>p.value.length>0||!s.value&&i.value.transcript_enabled),m=He(!0),b=ge(()=>u.value!=="feedback"),v=ge(()=>O.value&&!s.value),k=ge(()=>u.value!=="feedback"&&(!O.value||s.value)),y=ge(()=>!!i.value.conversation_mode_toggle_enabled&&!n.value&&!s.value),T=ge(()=>O.value);return g(Wt,{initial:!1,active:e,children:g("div",{"data-variant":h.value,className:_e("sheet","flex flex-col overflow-hidden absolute bg-base shadow-lg pointer-events-auto z-2","transition-[width,height,max-width,max-height,transform,border-radius,opacity,inset,bottom,top,left,right,margin,padding] duration-200","data-hidden:scale-90 data-hidden:opacity-0",rj[r],r.startsWith("top")?i.value.always_expanded?"top-0":"top-20":i.value.always_expanded?"bottom-0":"bottom-20"),children:[g(V8,{showBackButton:d.showHeaderBack,onBackClick:d.onHeaderBack,showStatusLabel:v,showLanguageSelector:k,showConversationModeToggle:y,showExpandButton:T}),g(Wt,{active:u.value==="transcript",children:g("div",{className:"grow flex flex-col min-h-0 relative transition-opacity duration-300 ease-out data-hidden:opacity-0",children:[g(mz,{transcript:p,scrollPinned:m}),g(W8,{showTranscript:O.value,scrollPinned:m})]})}),g(Wt,{active:u.value==="feedback",children:g("div",{className:"absolute inset-0 top-[88px] flex flex-col bg-base transition-transform duration-300 ease-out data-hidden:translate-x-full",children:[g(gz,{}),g(vz,{})]})}),g(ij,{showAvatar:b,showTranscript:O,isDisconnected:s,onStartSession:a})]})})}function xw({expanded:e}){const t=Wa(),n=Et().value.variant,{isDisconnected:i}=_t(),r=st(),s=oe(()=>{e.value=!e.value},[e]);return g(Fe,{children:[n==="full"&&g(Bn,{visible:!e.value&&!i.value,className:"p-1",children:g(ma,{})}),g(Bn,{grow:n!=="tiny",visible:!t.value&&!e.value&&!i.value,className:"p-1",children:g(Im,{iconOnly:!0,isDisconnected:!1})}),g(Bn,{visible:!t.value&&!e.value&&!i.value,className:"p-1",children:g(Qm,{})}),g(Bn,{grow:i.value,visible:!0,className:"p-1",children:g(Dt,{className:"w-full",variant:"primary",iconClassName:ht((e.value||!i.value)&&"transition-transform duration-200",e.value&&"-rotate-180"),icon:e.value?"chevron-up":i.value?t.value?"chat":"phone":"chevron-up","aria-label":e.value?r.collapse:i.value?t.value?r.start_chat:r.start_call:r.expand,onClick:!e.value&&!i.value?s:void 0,children:!e.value&&i.value&&n!=="tiny"?t.value?r.start_chat:r.start_call:void 0})})]})}function sj({expanded:e,className:t,...n}){const{isDisconnected:i}=_t(),r=st();return g("div",{className:ht("transition-[border-radius] flex flex-col p-2",!e.value&&i.value?"rounded-sheet":"rounded-compact-sheet",t),...n,children:[g(Bn,{visible:!e.value&&i.value,className:"p-1 !min-w-60",children:g("div",{className:"flex items-center gap-2",children:[g(ma,{}),g("div",{className:"text-sm max-w-64",children:r.main_label})]})}),g("div",{className:"flex items-center",children:g(xw,{expanded:e})})]})}function aj({expanded:e,className:t,...n}){return g("div",{className:ht("rounded-compact-sheet flex items-center p-2",t),...n,children:[g(Bn,{visible:!e.value,className:"p-1",children:g(ma,{})}),g(xw,{expanded:e})]})}function oj({visible:e,className:t,...n}){const i=st(),{language:r,showPicker:s}=jr();return s.value?g(Bn,{visible:e,className:"p-1",children:g(kw,{children:g(bw,{className:ht("h-9 min-w-max border border-base-border rounded-button focus-ring px-1.5 flex gap-1 items-center transition-colors duration-200 hover:bg-base-hover active:bg-base-active",t),"aria-label":i.change_language,...n,children:[g(Pm,{flagCode:r.value.flagCode}),g(Tw,{className:"px-1 text-base-subtle",asChild:!0,children:g(si,{size:"xs",name:"chevron-down"})})]})})}):null}function Pw(){const e=Et().value.variant,{isDisconnected:t,status:n}=_t();return g(Fe,{children:[g(Im,{isDisconnected:t.value,iconOnly:e==="tiny",className:"w-full m-1 z-1",disabled:n.value==="disconnecting"||n.value==="connecting"}),g(oj,{visible:t.value}),g(Bn,{visible:!t.value,className:"p-1",children:g(Qm,{})})]})}function cj({className:e,...t}){const{isDisconnected:n}=_t(),i=st();return g("div",{className:ht("flex flex-col p-2 rounded-sheet",e),...t,children:[g("div",{className:"flex items-center p-1 gap-2 min-w-60",children:[g(ma,{}),g("div",{className:"relative text-sm max-w-64",children:[g("span",{className:ht("block transition-[transform,opacity] duration-200",!n.value&&"opacity-0 scale-90"),children:i.main_label}),g(Wt,{active:!n.value,children:g(Rm,{className:"absolute top-1/2 -translate-y-1/2 transition-[transform,opacity] duration-200 data-hidden:opacity-0 data-hidden:scale-90"})})]})]}),g("div",{className:"flex items-center",children:g(Pw,{})})]})}function lj({className:e,...t}){return g("div",{className:ht("rounded-compact-sheet flex items-center p-2",e),...t,children:[g(ma,{className:"mx-1"}),g(Pw,{})]})}function uj({expandable:e,expanded:t}){const n=Et().value.variant,i=Hc(),{isDisconnected:r}=_t(),s=oe(async()=>{await i.requestTerms(),t.value=!t.peek()},[t]),a=n==="full";return e?g(a?sj:aj,{expanded:t,className:ht("bg-base shadow-md pointer-events-auto overflow-hidden",(r.value||t.value)&&"cursor-pointer"),onClick:r.value||t.value?s:void 0}):g(a?cj:lj,{className:"bg-base shadow-md pointer-events-auto overflow-hidden"})}function dj(){const e=st(),t=E0(),{dismissTerms:n,acceptTerms:i}=Hc();return g("div",{className:"max-w-[400px] flex flex-col gap-2 bg-base shadow-md pointer-events-auto rounded-sheet p-3 text-sm",children:[g("div",{className:"flex flex-col gap-1 terms p-2 pt-1",dangerouslySetInnerHTML:{__html:t.value.terms_html??""}}),g("div",{className:"flex justify-end gap-2",children:[g(Dt,{onClick:n,children:e.dismiss_terms}),g(Dt,{onClick:i,variant:"primary",children:e.accept_terms})]})]})}function hj({copyText:e,children:t}){const n=st(),[i,r]=pe(!1);ke(()=>{if(i){const a=setTimeout(()=>{r(!1)},2e3);return()=>{clearTimeout(a)}}},[i]);const s=oe(()=>{const a=A0(e);a&&(navigator.clipboard.writeText(a),r(!0))},[]);return g(Dt,{onClick:s,children:i?n.copied:t})}function pj({sawError:e}){const t=st(),{error:n,lastId:i}=_t(),r=oe(()=>{e.value=!0},[]);return g("div",{className:"max-w-[400px] flex flex-col gap-2 bg-base shadow-md pointer-events-auto rounded-sheet p-3 text-sm",children:[g("div",{className:"p-2 pt-1",children:[g("h1",{className:"text-md font-medium pb-1",children:t.error_occurred}),n.value,i.value&&g(Fe,{children:[g("br",{}),g("span",{className:"text-base-subtle",children:[t.conversation_id,": ",i.value]})]})]}),g("div",{className:"flex justify-end gap-2",children:[g(hj,{copyText:i,children:t.copy_id}),g(Dt,{variant:"primary",onClick:r,children:"Close"})]})]})}function fj(){const e=Et();return e.value.disable_banner?null:g("p",{className:ht("whitespace-nowrap [line-height:var(--el-overlay-padding)] text-[10px] px-3 z-10",e.value.placement.startsWith("top")?"-translate-y-[calc(var(--el-overlay-padding))]":"translate-y-[calc(var(--el-overlay-padding))]"),children:[g("span",{className:"opacity-30",children:"Powered by ElevenLabs"})," ",g("a",{href:e.value.override_link||"https://elevenlabs.io/conversational-ai",className:"underline cursor-pointer pointer-events-auto focus-visible:outline-none opacity-30 hover:opacity-50 focus-visible:opacity-100 focus-visible:underline-offset-2",target:"_blank",children:"Agents"})]})}const Oa={left:"items-start",center:"items-center",right:"items-end"},ga={top:"flex-col-reverse justify-end",bottom:"flex-col justify-end"},Rw={"top-left":`${ga.top} ${Oa.left}`,top:`${ga.top} ${Oa.center}`,"top-right":`${ga.top} ${Oa.right}`,"bottom-left":`${ga.bottom} ${Oa.left}`,bottom:`${ga.bottom} ${Oa.center}`,"bottom-right":`${ga.bottom} ${Oa.right}`},xu={display:"none"},mj=ze(function(){const e=Et(),t=He(e.peek().default_expanded),n=He(!1),{error:i}=_t(),r=Hc(),{variant:s}=Am(),a=ge(()=>e.value.transcript_enabled||e.value.text_input_enabled),o=k0(),c=ge(()=>_e("overlay !flex transition-[opacity] duration-200 data-hidden:opacity-0",Rw[e.value.placement])),l=ge(()=>s.value==="fullscreen"?_e(c.value,Rw.bottom):c.value);Dn(()=>{i.value&&(a.value?(n.value=!0,t.value=!0):n.value=!1)}),Dn(()=>{const O=(b=>{!b.detail||b.detail._convaiEventHandled||(b.detail._convaiEventHandled=!0,b.detail.action==="expand"?t.value=!0:b.detail.action==="collapse"?t.value=!1:b.detail.action==="toggle"&&(t.value=!t.value))}),m=o.value;return document.addEventListener("elevenlabs-agent:expand",O),m==null||m.addEventListener("elevenlabs-agent:expand",O),()=>{document.removeEventListener("elevenlabs-agent:expand",O),m==null||m.removeEventListener("elevenlabs-agent:expand",O)}});const u=ge(()=>!a.value&&i.value&&!n.value?"error":!r.termsAccepted.value&&r.termsShown.value?"terms":"conversation"),d=ge(()=>u.value==="error"),h=ge(()=>u.value==="terms"),p=ge(()=>u.value==="conversation");return g(Fe,{children:[g(Wt,{initial:!1,active:p,children:g(el,{className:c,style:xu,children:e.value.always_expanded?g(Cw,{open:!0}):g(Fe,{children:[a.value&&g(Cw,{open:t}),g(uj,{expandable:a.value,expanded:t})]})})}),g(Wt,{initial:!1,active:h,children:g(el,{className:c,style:xu,children:g(dj,{})})}),g(Wt,{initial:!1,active:d,children:g(el,{className:c,style:xu,children:g(pj,{sawError:n})})}),g(el,{className:l,style:xu,children:g(fj,{})})]})});function Oj(e){return g(hI,{children:g(rI,{value:e,children:g(aI,{children:g(gI,{children:g(Z8,{children:g(oI,{children:g(dI,{children:g(lI,{children:g(fI,{children:g(wI,{children:g(CI,{children:g(PI,{children:g(RI,{children:g(QQ,{children:g(IQ,{children:[g(SI,{}),g(mj,{})]})})})})})})})})})})})})})})})}function gj(e="elevenlabs-convai"){Uw(Oj,e,[..._h],{shadow:!0,mode:"open"})}gj()})();
